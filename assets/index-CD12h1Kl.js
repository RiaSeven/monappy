(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const Gm=()=>{};var Fu={};const J0=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},qm=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],a=r[t++],m=r[t++],o=((i&7)<<18|(s&63)<<12|(a&63)<<6|m&63)-65536;e[n++]=String.fromCharCode(55296+(o>>10)),e[n++]=String.fromCharCode(56320+(o&1023))}else{const s=r[t++],a=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Z0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],a=i+1<r.length,m=a?r[i+1]:0,o=i+2<r.length,d=o?r[i+2]:0,l=s>>2,f=(s&3)<<4|m>>4;let u=(m&15)<<2|d>>6,h=d&63;o||(h=64,a||(u=64)),n.push(t[l],t[f],t[u],t[h])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(J0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):qm(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],m=i<r.length?t[r.charAt(i)]:0;++i;const d=i<r.length?t[r.charAt(i)]:64;++i;const f=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||m==null||d==null||f==null)throw new Km;const u=s<<2|m>>4;if(n.push(u),d!==64){const h=m<<4&240|d>>2;if(n.push(h),f!==64){const c=d<<6&192|f;n.push(c)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Km extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ym=function(r){const e=J0(r);return Z0.encodeByteArray(e,!0)},no=function(r){return Ym(r).replace(/\./g,"")},ed=function(r){try{return Z0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Qm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Xm=()=>Qm().__FIREBASE_DEFAULTS__,Jm=()=>{if(typeof process>"u"||typeof Fu>"u")return;const r=Fu.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Zm=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ed(r[1]);return e&&JSON.parse(e)},Lo=()=>{try{return Gm()||Xm()||Jm()||Zm()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},td=r=>Lo()?.emulatorHosts?.[r],eg=r=>{const e=td(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},nd=()=>Lo()?.config,rd=r=>Lo()?.[`_${r}`];class tg{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}function Xr(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function id(r){return(await fetch(r,{credentials:"include"})).ok}function ng(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...r};return[no(JSON.stringify(t)),no(JSON.stringify(a)),""].join(".")}const Di={};function rg(){const r={prod:[],emulator:[]};for(const e of Object.keys(Di))Di[e]?r.emulator.push(e):r.prod.push(e);return r}function ig(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let zu=!1;function sd(r,e){if(typeof window>"u"||typeof document>"u"||!Xr(window.location.host)||Di[r]===e||Di[r]||zu)return;Di[r]=e;function t(u){return`__firebase__banner__${u}`}const n="__firebase__banner",s=rg().prod.length>0;function a(){const u=document.getElementById(n);u&&u.remove()}function m(u){u.style.display="flex",u.style.background="#7faaf0",u.style.position="fixed",u.style.bottom="5px",u.style.left="5px",u.style.padding=".5em",u.style.borderRadius="5px",u.style.alignItems="center"}function o(u,h){u.setAttribute("width","24"),u.setAttribute("id",h),u.setAttribute("height","24"),u.setAttribute("viewBox","0 0 24 24"),u.setAttribute("fill","none"),u.style.marginLeft="-6px"}function d(){const u=document.createElement("span");return u.style.cursor="pointer",u.style.marginLeft="16px",u.style.fontSize="24px",u.innerHTML=" &times;",u.onclick=()=>{zu=!0,a()},u}function l(u,h){u.setAttribute("id",h),u.innerText="Learn more",u.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",u.setAttribute("target","__blank"),u.style.paddingLeft="5px",u.style.textDecoration="underline"}function f(){const u=ig(n),h=t("text"),c=document.getElementById(h)||document.createElement("span"),p=t("learnmore"),g=document.getElementById(p)||document.createElement("a"),y=t("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(u.created){const M=u.element;m(M),l(g,p);const R=d();o(w,y),M.append(w,c,g,R),document.body.appendChild(M)}s?(c.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,c.innerText="Preview backend running in this workspace."),c.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function og(){const r=Lo()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ag(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lg(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function cg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ug(){const r=yt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function hg(){return!og()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dg(){try{return typeof indexedDB=="object"}catch{return!1}}function fg(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}const pg="FirebaseError";class Cn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=pg,Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ts.prototype.create)}}class ts{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?mg(s,n):"Error",m=`${this.serviceName}: ${a} (${i}).`;return new Cn(i,m,n)}}function mg(r,e){return r.replace(gg,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const gg=/\{\$([^}]+)}/g;function vg(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function qn(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],a=e[i];if(Vu(s)&&Vu(a)){if(!qn(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function Vu(r){return r!==null&&typeof r=="object"}function ns(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Ti(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Ei(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function yg(r,e){const t=new wg(r,e);return t.subscribe.bind(t)}class wg{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");bg(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=wa),i.error===void 0&&(i.error=wa),i.complete===void 0&&(i.complete=wa);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function bg(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function wa(){}function Lt(r){return r&&r._delegate?r._delegate:r}class yr{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const pr="[DEFAULT]";class _g{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new tg;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ag(e))try{this.getOrInitializeService({instanceIdentifier:pr})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=pr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pr){return this.instances.has(e)}getOptions(e=pr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(s);n===m&&a.resolve(i)}return i}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(n)??new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Sg(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=pr){return this.component?this.component.multipleInstances?e:pr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Sg(r){return r===pr?void 0:r}function Ag(r){return r.instantiationMode==="EAGER"}class Tg{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _g(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ie;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ie||(Ie={}));const Eg={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},Cg=Ie.INFO,xg={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},kg=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=xg[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rl{constructor(e){this.name=e,this._logLevel=Cg,this._logHandler=kg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Eg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}}const Ig=(r,e)=>e.some(t=>r instanceof t);let Bu,Uu;function Mg(){return Bu||(Bu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rg(){return Uu||(Uu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const od=new WeakMap,Ya=new WeakMap,ad=new WeakMap,ba=new WeakMap,Ll=new WeakMap;function Lg(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",a)},s=()=>{t(Un(r.result)),i()},a=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&od.set(t,r)}).catch(()=>{}),Ll.set(e,r),e}function $g(r){if(Ya.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",a),r.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",a),r.addEventListener("abort",a)});Ya.set(r,e)}let Qa={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Ya.get(r);if(e==="objectStoreNames")return r.objectStoreNames||ad.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Un(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Dg(r){Qa=r(Qa)}function Ng(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(_a(this),e,...t);return ad.set(n,e.sort?e.sort():[e]),Un(n)}:Rg().includes(r)?function(...e){return r.apply(_a(this),e),Un(od.get(this))}:function(...e){return Un(r.apply(_a(this),e))}}function Pg(r){return typeof r=="function"?Ng(r):(r instanceof IDBTransaction&&$g(r),Ig(r,Mg())?new Proxy(r,Qa):r)}function Un(r){if(r instanceof IDBRequest)return Lg(r);if(ba.has(r))return ba.get(r);const e=Pg(r);return e!==r&&(ba.set(r,e),Ll.set(e,r)),e}const _a=r=>Ll.get(r);function Og(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(r,e),m=Un(a);return n&&a.addEventListener("upgradeneeded",o=>{n(Un(a.result),o.oldVersion,o.newVersion,Un(a.transaction),o)}),t&&a.addEventListener("blocked",o=>t(o.oldVersion,o.newVersion,o)),m.then(o=>{s&&o.addEventListener("close",()=>s()),i&&o.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),m}const Fg=["get","getKey","getAll","getAllKeys","count"],zg=["put","add","delete","clear"],Sa=new Map;function Hu(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Sa.get(e))return Sa.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=zg.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||Fg.includes(t)))return;const s=async function(a,...m){const o=this.transaction(a,i?"readwrite":"readonly");let d=o.store;return n&&(d=d.index(m.shift())),(await Promise.all([d[t](...m),i&&o.done]))[0]};return Sa.set(e,s),s}Dg(r=>({...r,get:(e,t,n)=>Hu(e,t)||r.get(e,t,n),has:(e,t)=>!!Hu(e,t)||r.has(e,t)}));class Vg{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Bg(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function Bg(r){return r.getComponent()?.type==="VERSION"}const Xa="@firebase/app",Wu="0.14.6";const wn=new Rl("@firebase/app"),Ug="@firebase/app-compat",Hg="@firebase/analytics-compat",Wg="@firebase/analytics",jg="@firebase/app-check-compat",Gg="@firebase/app-check",qg="@firebase/auth",Kg="@firebase/auth-compat",Yg="@firebase/database",Qg="@firebase/data-connect",Xg="@firebase/database-compat",Jg="@firebase/functions",Zg="@firebase/functions-compat",e1="@firebase/installations",t1="@firebase/installations-compat",n1="@firebase/messaging",r1="@firebase/messaging-compat",i1="@firebase/performance",s1="@firebase/performance-compat",o1="@firebase/remote-config",a1="@firebase/remote-config-compat",l1="@firebase/storage",c1="@firebase/storage-compat",u1="@firebase/firestore",h1="@firebase/ai",d1="@firebase/firestore-compat",f1="firebase",p1="12.6.0";const Ja="[DEFAULT]",m1={[Xa]:"fire-core",[Ug]:"fire-core-compat",[Wg]:"fire-analytics",[Hg]:"fire-analytics-compat",[Gg]:"fire-app-check",[jg]:"fire-app-check-compat",[qg]:"fire-auth",[Kg]:"fire-auth-compat",[Yg]:"fire-rtdb",[Qg]:"fire-data-connect",[Xg]:"fire-rtdb-compat",[Jg]:"fire-fn",[Zg]:"fire-fn-compat",[e1]:"fire-iid",[t1]:"fire-iid-compat",[n1]:"fire-fcm",[r1]:"fire-fcm-compat",[i1]:"fire-perf",[s1]:"fire-perf-compat",[o1]:"fire-rc",[a1]:"fire-rc-compat",[l1]:"fire-gcs",[c1]:"fire-gcs-compat",[u1]:"fire-fst",[d1]:"fire-fst-compat",[h1]:"fire-vertex","fire-js":"fire-js",[f1]:"fire-js-all"};const ro=new Map,g1=new Map,Za=new Map;function ju(r,e){try{r.container.addComponent(e)}catch(t){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Br(r){const e=r.name;if(Za.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;Za.set(e,r);for(const t of ro.values())ju(t,r);for(const t of g1.values())ju(t,r);return!0}function $l(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function It(r){return r==null?!1:r.settings!==void 0}const v1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hn=new ts("app","Firebase",v1);class y1{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hn.create("app-deleted",{appName:this._name})}}const Jr=p1;function ld(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n={name:Ja,automaticDataCollectionEnabled:!0,...e},i=n.name;if(typeof i!="string"||!i)throw Hn.create("bad-app-name",{appName:String(i)});if(t||(t=nd()),!t)throw Hn.create("no-options");const s=ro.get(i);if(s){if(qn(t,s.options)&&qn(n,s.config))return s;throw Hn.create("duplicate-app",{appName:i})}const a=new Tg(i);for(const o of Za.values())a.addComponent(o);const m=new y1(t,n,a);return ro.set(i,m),m}function cd(r=Ja){const e=ro.get(r);if(!e&&r===Ja&&nd())return ld();if(!e)throw Hn.create("no-app",{appName:r});return e}function Wn(r,e,t){let n=m1[r]??r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${n}" with version "${e}":`];i&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(a.join(" "));return}Br(new yr(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}const w1="firebase-heartbeat-database",b1=1,Ui="firebase-heartbeat-store";let Aa=null;function ud(){return Aa||(Aa=Og(w1,b1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ui)}catch(t){console.warn(t)}}}}).catch(r=>{throw Hn.create("idb-open",{originalErrorMessage:r.message})})),Aa}async function _1(r){try{const t=(await ud()).transaction(Ui),n=await t.objectStore(Ui).get(hd(r));return await t.done,n}catch(e){if(e instanceof Cn)wn.warn(e.message);else{const t=Hn.create("idb-get",{originalErrorMessage:e?.message});wn.warn(t.message)}}}async function Gu(r,e){try{const n=(await ud()).transaction(Ui,"readwrite");await n.objectStore(Ui).put(e,hd(r)),await n.done}catch(t){if(t instanceof Cn)wn.warn(t.message);else{const n=Hn.create("idb-set",{originalErrorMessage:t?.message});wn.warn(n.message)}}}function hd(r){return`${r.name}!${r.options.appId}`}const S1=1024,A1=30;class T1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new C1(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=qu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(i=>i.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats.length>A1){const i=x1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){wn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=qu(),{heartbeatsToSend:t,unsentEntries:n}=E1(this._heartbeatsCache.heartbeats),i=no(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return wn.warn(e),""}}}function qu(){return new Date().toISOString().substring(0,10)}function E1(r,e=S1){const t=[];let n=r.slice();for(const i of r){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Ku(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Ku(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class C1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dg()?fg().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _1(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Gu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Gu(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Ku(r){return no(JSON.stringify({version:2,heartbeats:r})).length}function x1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}function k1(r){Br(new yr("platform-logger",e=>new Vg(e),"PRIVATE")),Br(new yr("heartbeat",e=>new T1(e),"PRIVATE")),Wn(Xa,Wu,r),Wn(Xa,Wu,"esm2020"),Wn("fire-js","")}k1("");var I1="firebase",M1="12.7.0";Wn(I1,M1,"app");function dd(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const R1=dd,fd=new ts("auth","Firebase",dd());const io=new Rl("@firebase/auth");function L1(r,...e){io.logLevel<=Ie.WARN&&io.warn(`Auth (${Jr}): ${r}`,...e)}function Hs(r,...e){io.logLevel<=Ie.ERROR&&io.error(`Auth (${Jr}): ${r}`,...e)}function Ft(r,...e){throw Nl(r,...e)}function Wt(r,...e){return Nl(r,...e)}function Dl(r,e,t){const n={...R1(),[e]:t};return new ts("auth","Firebase",n).create(e,{appName:r.name})}function mn(r){return Dl(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $1(r,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&Ft(r,"argument-error"),Dl(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Nl(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return fd.create(r,...e)}function _e(r,e,...t){if(!r)throw Nl(e,...t)}function fn(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Hs(e),new Error(e)}function bn(r,e){r||fn(e)}function el(){return typeof self<"u"&&self.location?.href||""}function D1(){return Yu()==="http:"||Yu()==="https:"}function Yu(){return typeof self<"u"&&self.location?.protocol||null}function N1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(D1()||lg()||"connection"in navigator)?navigator.onLine:!0}function P1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class rs{constructor(e,t){this.shortDelay=e,this.longDelay=t,bn(t>e,"Short delay should be less than long delay!"),this.isMobile=sg()||cg()}get(){return N1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pl(r,e){bn(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class pd{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const O1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const F1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],z1=new rs(3e4,6e4);function rr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ir(r,e,t,n,i={}){return md(r,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const m=ns({key:r.config.apiKey,...a}).slice(1),o=await r._getAdditionalHeaders();o["Content-Type"]="application/json",r.languageCode&&(o["X-Firebase-Locale"]=r.languageCode);const d={method:e,headers:o,...s};return ag()||(d.referrerPolicy="no-referrer"),r.emulatorConfig&&Xr(r.emulatorConfig.host)&&(d.credentials="include"),pd.fetch()(await gd(r,r.config.apiHost,t,m),d)})}async function md(r,e,t){r._canInitEmulator=!1;const n={...O1,...e};try{const i=new B1(r),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw ks(r,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const m=s.ok?a.errorMessage:a.error.message,[o,d]=m.split(" : ");if(o==="FEDERATED_USER_ID_ALREADY_LINKED")throw ks(r,"credential-already-in-use",a);if(o==="EMAIL_EXISTS")throw ks(r,"email-already-in-use",a);if(o==="USER_DISABLED")throw ks(r,"user-disabled",a);const l=n[o]||o.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Dl(r,l,d);Ft(r,l)}}catch(i){if(i instanceof Cn)throw i;Ft(r,"network-request-failed",{message:String(i)})}}async function is(r,e,t,n,i={}){const s=await ir(r,e,t,n,i);return"mfaPendingCredential"in s&&Ft(r,"multi-factor-auth-required",{_serverResponse:s}),s}async function gd(r,e,t,n){const i=`${e}${t}?${n}`,s=r,a=s.config.emulator?Pl(r.config,i):`${r.config.apiScheme}://${i}`;return F1.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function V1(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class B1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Wt(this.auth,"network-request-failed")),z1.get())})}}function ks(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Wt(r,e,n);return i.customData._tokenResponse=t,i}function Qu(r){return r!==void 0&&r.enterprise!==void 0}class U1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return V1(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function H1(r,e){return ir(r,"GET","/v2/recaptchaConfig",rr(r,e))}async function W1(r,e){return ir(r,"POST","/v1/accounts:delete",e)}async function so(r,e){return ir(r,"POST","/v1/accounts:lookup",e)}function Ni(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function j1(r,e=!1){const t=Lt(r),n=await t.getIdToken(e),i=Ol(n);_e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:n,authTime:Ni(Ta(i.auth_time)),issuedAtTime:Ni(Ta(i.iat)),expirationTime:Ni(Ta(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Ta(r){return Number(r)*1e3}function Ol(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Hs("JWT malformed, contained fewer than 3 sections"),null;try{const i=ed(t);return i?JSON.parse(i):(Hs("Failed to decode base64 JWT payload"),null)}catch(i){return Hs("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Xu(r){const e=Ol(r);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Hi(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Cn&&G1(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function G1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class q1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class tl{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ni(this.lastLoginAt),this.creationTime=Ni(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function oo(r){const e=r.auth,t=await r.getIdToken(),n=await Hi(r,so(e,{idToken:t}));_e(n?.users.length,e,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const s=i.providerUserInfo?.length?vd(i.providerUserInfo):[],a=Y1(r.providerData,s),m=r.isAnonymous,o=!(r.email&&i.passwordHash)&&!a?.length,d=m?o:!1,l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new tl(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(r,l)}async function K1(r){const e=Lt(r);await oo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Y1(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function vd(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function Q1(r,e){const t=await md(r,{},async()=>{const n=ns({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,a=await gd(r,i,"/v1/token",`key=${s}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:m,body:n};return r.emulatorConfig&&Xr(r.emulatorConfig.host)&&(o.credentials="include"),pd.fetch()(a,o)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function X1(r,e){return ir(r,"POST","/v2/accounts:revokeToken",rr(r,e))}class Pr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xu(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const t=Xu(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await Q1(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,a=new Pr;return n&&(_e(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(_e(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(_e(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pr,this.toJSON())}_performRefresh(){return fn("not implemented")}}function Dn(r,e){_e(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ut{constructor({uid:e,auth:t,stsTokenManager:n,...i}){this.providerId="firebase",this.proactiveRefresh=new q1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new tl(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Hi(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return j1(this,e)}reload(){return K1(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ut({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await oo(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(It(this.auth.app))return Promise.reject(mn(this.auth));const e=await this.getIdToken();return await Hi(this,W1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,m=t.tenantId??void 0,o=t._redirectEventId??void 0,d=t.createdAt??void 0,l=t.lastLoginAt??void 0,{uid:f,emailVerified:u,isAnonymous:h,providerData:c,stsTokenManager:p}=t;_e(f&&p,e,"internal-error");const g=Pr.fromJSON(this.name,p);_e(typeof f=="string",e,"internal-error"),Dn(n,e.name),Dn(i,e.name),_e(typeof u=="boolean",e,"internal-error"),_e(typeof h=="boolean",e,"internal-error"),Dn(s,e.name),Dn(a,e.name),Dn(m,e.name),Dn(o,e.name),Dn(d,e.name),Dn(l,e.name);const y=new Ut({uid:f,auth:e,email:i,emailVerified:u,displayName:n,isAnonymous:h,photoURL:a,phoneNumber:s,tenantId:m,stsTokenManager:g,createdAt:d,lastLoginAt:l});return c&&Array.isArray(c)&&(y.providerData=c.map(w=>({...w}))),o&&(y._redirectEventId=o),y}static async _fromIdTokenResponse(e,t,n=!1){const i=new Pr;i.updateFromServerResponse(t);const s=new Ut({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await oo(s),s}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];_e(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?vd(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,m=new Pr;m.updateFromIdToken(n);const o=new Ut({uid:i.localId,auth:e,stsTokenManager:m,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new tl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(o,d),o}}const Ju=new Map;function pn(r){bn(r instanceof Function,"Expected a class definition");let e=Ju.get(r);return e?(bn(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ju.set(r,e),e)}class yd{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yd.type="NONE";const Zu=yd;function Ws(r,e,t){return`firebase:${r}:${e}:${t}`}class Or{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Ws(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ws("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await so(this.auth,{idToken:e}).catch(()=>{});return t?Ut._fromGetAccountInfoResponse(this.auth,t,e):null}return Ut._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Or(pn(Zu),e,n);const i=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||pn(Zu);const a=Ws(n,e.config.apiKey,e.name);let m=null;for(const d of t)try{const l=await d._get(a);if(l){let f;if(typeof l=="string"){const u=await so(e,{idToken:l}).catch(()=>{});if(!u)break;f=await Ut._fromGetAccountInfoResponse(e,u,l)}else f=Ut._fromJSON(e,l);d!==s&&(m=f),s=d;break}}catch{}const o=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!o.length?new Or(s,e,n):(s=o[0],m&&await s._set(a,m.toJSON()),await Promise.all(t.map(async d=>{if(d!==s)try{await d._remove(a)}catch{}})),new Or(s,e,n))}}function eh(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sd(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wd(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Td(e))return"Blackberry";if(Ed(e))return"Webos";if(bd(e))return"Safari";if((e.includes("chrome/")||_d(e))&&!e.includes("edge/"))return"Chrome";if(Ad(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if(n?.length===2)return n[1]}return"Other"}function wd(r=yt()){return/firefox\//i.test(r)}function bd(r=yt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _d(r=yt()){return/crios\//i.test(r)}function Sd(r=yt()){return/iemobile/i.test(r)}function Ad(r=yt()){return/android/i.test(r)}function Td(r=yt()){return/blackberry/i.test(r)}function Ed(r=yt()){return/webos/i.test(r)}function Fl(r=yt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function J1(r=yt()){return Fl(r)&&!!window.navigator?.standalone}function Z1(){return ug()&&document.documentMode===10}function Cd(r=yt()){return Fl(r)||Ad(r)||Ed(r)||Td(r)||/windows phone/i.test(r)||Sd(r)}function xd(r,e=[]){let t;switch(r){case"Browser":t=eh(yt());break;case"Worker":t=`${eh(yt())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Jr}/${n}`}class ev{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((a,m)=>{try{const o=e(s);a(o)}catch(o){m(o)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}async function tv(r,e={}){return ir(r,"GET","/v2/passwordPolicy",rr(r,e))}const nv=6;class rv{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??nv,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class iv{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new th(this),this.idTokenSubscription=new th(this),this.beforeStateQueue=new ev(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Or.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await so(this,{idToken:e}),n=await Ut._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(It(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=this.redirectUser?._redirectEventId,a=n?._redirectEventId,m=await this.tryRedirectSignIn(e);(!s||s===a)&&m?.user&&(n=m.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await oo(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=P1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(It(this.app))return Promise.reject(mn(this));const t=e?Lt(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return It(this.app)?Promise.reject(mn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return It(this.app)?Promise.reject(mn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tv(this),t=new rv(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ts("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await X1(this,n)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pn(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await Or.create(this,[pn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(m,this,"internal-error"),m.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const o=e.addObserver(t,n,i);return()=>{a=!0,o()}}else{const o=e.addObserver(t);return()=>{a=!0,o()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(It(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&L1(`Error while retrieving App Check token: ${e.error}`),e?.token}}function sr(r){return Lt(r)}class th{constructor(e){this.auth=e,this.observer=null,this.addObserver=yg(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $o={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sv(r){$o=r}function kd(r){return $o.loadJS(r)}function ov(){return $o.recaptchaEnterpriseScript}function av(){return $o.gapiScript}function lv(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class cv{constructor(){this.enterprise=new uv}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class uv{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const hv="recaptcha-enterprise",Id="NO_RECAPTCHA";class dv{constructor(e){this.type=hv,this.auth=sr(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,m)=>{H1(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(o=>{if(o.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const d=new U1(o);return s.tenantId==null?s._agentRecaptchaConfig=d:s._tenantRecaptchaConfigs[s.tenantId]=d,a(d.siteKey)}}).catch(o=>{m(o)})})}function i(s,a,m){const o=window.grecaptcha;Qu(o)?o.enterprise.ready(()=>{o.enterprise.execute(s,{action:e}).then(d=>{a(d)}).catch(()=>{a(Id)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cv().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{n(this.auth).then(m=>{if(!t&&Qu(window.grecaptcha))i(m,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let o=ov();o.length!==0&&(o+=m),kd(o).then(()=>{i(m,s,a)}).catch(d=>{a(d)})}}).catch(m=>{a(m)})})}}async function nh(r,e,t,n=!1,i=!1){const s=new dv(r);let a;if(i)a=Id;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const o=m.phoneEnrollmentInfo.phoneNumber,d=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const o=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:o,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return n?Object.assign(m,{captchaResp:a}):Object.assign(m,{captchaResponse:a}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function nl(r,e,t,n,i){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await nh(r,e,t,t==="getOobCode");return n(r,s)}else return n(r,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await nh(r,e,t,t==="getOobCode");return n(r,a)}else return Promise.reject(s)})}function fv(r,e){const t=$l(r,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(qn(s,e??{}))return i;Ft(i,"already-initialized")}return t.initialize({options:e})}function pv(r,e){const t=e?.persistence||[],n=(Array.isArray(t)?t:[t]).map(pn);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e?.popupRedirectResolver)}function mv(r,e,t){const n=sr(r);_e(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!1,s=Md(e),{host:a,port:m}=gv(e),o=m===null?"":`:${m}`,d={url:`${s}//${a}${o}/`},l=Object.freeze({host:a,port:m,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!n._canInitEmulator){_e(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),_e(qn(d,n.config.emulator)&&qn(l,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=l,n.settings.appVerificationDisabledForTesting=!0,Xr(a)?(id(`${s}//${a}${o}`),sd("Auth",!0)):vv()}function Md(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function gv(r){const e=Md(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:rh(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:rh(a)}}}function rh(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function vv(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class zl{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fn("not implemented")}_getIdTokenResponse(e){return fn("not implemented")}_linkToIdToken(e,t){return fn("not implemented")}_getReauthenticationResolver(e){return fn("not implemented")}}async function yv(r,e){return ir(r,"POST","/v1/accounts:signUp",e)}async function wv(r,e){return is(r,"POST","/v1/accounts:signInWithPassword",rr(r,e))}async function bv(r,e){return is(r,"POST","/v1/accounts:signInWithEmailLink",rr(r,e))}async function _v(r,e){return is(r,"POST","/v1/accounts:signInWithEmailLink",rr(r,e))}class Wi extends zl{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Wi(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Wi(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nl(e,t,"signInWithPassword",wv);case"emailLink":return bv(e,{email:this._email,oobCode:this._password});default:Ft(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nl(e,n,"signUpPassword",yv);case"emailLink":return _v(e,{idToken:t,email:this._email,oobCode:this._password});default:Ft(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Fr(r,e){return is(r,"POST","/v1/accounts:signInWithIdp",rr(r,e))}const Sv="http://localhost";class wr extends zl{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ft("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,...s}=t;if(!n||!i)return null;const a=new wr(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Fr(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Fr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fr(e,t)}buildRequest(){const e={requestUri:Sv,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ns(t)}return e}}function Av(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Tv(r){const e=Ti(Ei(r)).link,t=e?Ti(Ei(e)).deep_link_id:null,n=Ti(Ei(r)).deep_link_id;return(n?Ti(Ei(n)).link:null)||n||t||e||r}class Vl{constructor(e){const t=Ti(Ei(e)),n=t.apiKey??null,i=t.oobCode??null,s=Av(t.mode??null);_e(n&&i&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Tv(e);try{return new Vl(t)}catch{return null}}}class Zr{constructor(){this.providerId=Zr.PROVIDER_ID}static credential(e,t){return Wi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Vl.parseLink(t);return _e(n,"argument-error"),Wi._fromEmailAndCode(e,n.code,n.tenantId)}}Zr.PROVIDER_ID="password";Zr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Bl{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ss extends Bl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class On extends ss{constructor(){super("facebook.com")}static credential(e){return wr._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return On.credential(e.oauthAccessToken)}catch{return null}}}On.FACEBOOK_SIGN_IN_METHOD="facebook.com";On.PROVIDER_ID="facebook.com";class dn extends ss{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wr._fromParams({providerId:dn.PROVIDER_ID,signInMethod:dn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return dn.credentialFromTaggedObject(e)}static credentialFromError(e){return dn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return dn.credential(t,n)}catch{return null}}}dn.GOOGLE_SIGN_IN_METHOD="google.com";dn.PROVIDER_ID="google.com";class Fn extends ss{constructor(){super("github.com")}static credential(e){return wr._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fn.credential(e.oauthAccessToken)}catch{return null}}}Fn.GITHUB_SIGN_IN_METHOD="github.com";Fn.PROVIDER_ID="github.com";class zn extends ss{constructor(){super("twitter.com")}static credential(e,t){return wr._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return zn.credential(t,n)}catch{return null}}}zn.TWITTER_SIGN_IN_METHOD="twitter.com";zn.PROVIDER_ID="twitter.com";async function Ev(r,e){return is(r,"POST","/v1/accounts:signUp",rr(r,e))}class br{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await Ut._fromIdTokenResponse(e,n,i),a=ih(n);return new br({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=ih(n);return new br({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function ih(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class ao extends Cn{constructor(e,t,n,i){super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ao.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new ao(e,t,n,i)}}function Rd(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ao._fromErrorAndOperation(r,s,e,n):s})}async function Cv(r,e,t=!1){const n=await Hi(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return br._forOperation(r,"link",n)}async function xv(r,e,t=!1){const{auth:n}=r;if(It(n.app))return Promise.reject(mn(n));const i="reauthenticate";try{const s=await Hi(r,Rd(n,i,e,r),t);_e(s.idToken,n,"internal-error");const a=Ol(s.idToken);_e(a,n,"internal-error");const{sub:m}=a;return _e(r.uid===m,n,"user-mismatch"),br._forOperation(r,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ft(n,"user-mismatch"),s}}async function Ld(r,e,t=!1){if(It(r.app))return Promise.reject(mn(r));const n="signIn",i=await Rd(r,n,e),s=await br._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(s.user),s}async function kv(r,e){return Ld(sr(r),e)}async function $d(r){const e=sr(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Iv(r,e,t){if(It(r.app))return Promise.reject(mn(r));const n=sr(r),a=await nl(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ev).catch(o=>{throw o.code==="auth/password-does-not-meet-requirements"&&$d(r),o}),m=await br._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(m.user),m}function Mv(r,e,t){return It(r.app)?Promise.reject(mn(r)):kv(Lt(r),Zr.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&$d(r),n})}function Rv(r,e,t,n){return Lt(r).onIdTokenChanged(e,t,n)}function Lv(r,e,t){return Lt(r).beforeAuthStateChanged(e,t)}function $v(r,e,t,n){return Lt(r).onAuthStateChanged(e,t,n)}function Dv(r){return Lt(r).signOut()}const lo="__sak";class Dd{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lo,"1"),this.storage.removeItem(lo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Nv=1e3,Pv=10;class Nd extends Dd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,m,o)=>{this.notifyListeners(a,o)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);Z1()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Pv):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},Nv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nd.type="LOCAL";const Ov=Nd;class Pd extends Dd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Pd.type="SESSION";const Od=Pd;function Fv(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class Do{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Do(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!a?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const m=Array.from(a).map(async d=>d(t.origin,s)),o=await Fv(m);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:o})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Do.receivers=[];function Ul(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}class zv{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((m,o)=>{const d=Ul("",20);i.port1.start();const l=setTimeout(()=>{o(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(f){const u=f;if(u.data.eventId===d)switch(u.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),m(u.data.response);break;default:clearTimeout(l),clearTimeout(s),o(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}function Zt(){return window}function Vv(r){Zt().location.href=r}function Fd(){return typeof Zt().WorkerGlobalScope<"u"&&typeof Zt().importScripts=="function"}async function Bv(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Uv(){return navigator?.serviceWorker?.controller||null}function Hv(){return Fd()?self:null}const zd="firebaseLocalStorageDb",Wv=1,co="firebaseLocalStorage",Vd="fbase_key";class os{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function No(r,e){return r.transaction([co],e?"readwrite":"readonly").objectStore(co)}function jv(){const r=indexedDB.deleteDatabase(zd);return new os(r).toPromise()}function rl(){const r=indexedDB.open(zd,Wv);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(co,{keyPath:Vd})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(co)?e(n):(n.close(),await jv(),e(await rl()))})})}async function sh(r,e,t){const n=No(r,!0).put({[Vd]:e,value:t});return new os(n).toPromise()}async function Gv(r,e){const t=No(r,!1).get(e),n=await new os(t).toPromise();return n===void 0?null:n.value}function oh(r,e){const t=No(r,!0).delete(e);return new os(t).toPromise()}const qv=800,Kv=3;class Bd{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rl(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>Kv)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Fd()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Do._getInstance(Hv()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Bv(),!this.activeServiceWorker)return;this.sender=new zv(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Uv()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rl();return await sh(e,lo,"1"),await oh(e,lo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>sh(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>Gv(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>oh(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=No(i,!1).getAll();return new os(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qv)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Bd.type="LOCAL";const Yv=Bd;new rs(3e4,6e4);function Ud(r,e){return e?pn(e):(_e(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Hl extends zl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Qv(r){return Ld(r.auth,new Hl(r),r.bypassAuthState)}function Xv(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),xv(t,new Hl(r),r.bypassAuthState)}async function Jv(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),Cv(t,new Hl(r),r.bypassAuthState)}class Hd{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:a,type:m}=e;if(a){this.reject(a);return}const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(o))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qv;case"linkViaPopup":case"linkViaRedirect":return Jv;case"reauthViaPopup":case"reauthViaRedirect":return Xv;default:Ft(this.auth,"internal-error")}}resolve(e){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zv=new rs(2e3,1e4);async function ey(r,e,t){if(It(r.app))return Promise.reject(Wt(r,"operation-not-supported-in-this-environment"));const n=sr(r);$1(r,e,Bl);const i=Ud(n,t);return new mr(n,"signInViaPopup",e,i).executeNotNull()}class mr extends Hd{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,mr.currentPopupAction&&mr.currentPopupAction.cancel(),mr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){bn(this.filter.length===1,"Popup operations only handle one event");const e=Ul();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Wt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Wt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mr.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Zv.get())};e()}}mr.currentPopupAction=null;const ty="pendingRedirect",js=new Map;class ny extends Hd{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=js.get(this.auth._key());if(!e){try{const n=await ry(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}js.set(this.auth._key(),e)}return this.bypassAuthState||js.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ry(r,e){const t=oy(e),n=sy(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}function iy(r,e){js.set(r._key(),e)}function sy(r){return pn(r._redirectPersistence)}function oy(r){return Ws(ty,r.config.apiKey,r.name)}async function ay(r,e,t=!1){if(It(r.app))return Promise.reject(mn(r));const n=sr(r),i=Ud(n,e),a=await new ny(n,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}const ly=600*1e3;class cy{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!uy(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Wd(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Wt(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ly&&this.cachedEventUids.clear(),this.cachedEventUids.has(ah(e))}saveEventToCache(e){this.cachedEventUids.add(ah(e)),this.lastProcessedEventTime=Date.now()}}function ah(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Wd({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function uy(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wd(r);default:return!1}}async function hy(r,e={}){return ir(r,"GET","/v1/projects",e)}const dy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fy=/^https?/;async function py(r){if(r.config.emulator)return;const{authorizedDomains:e}=await hy(r);for(const t of e)try{if(my(t))return}catch{}Ft(r,"unauthorized-domain")}function my(r){const e=el(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!fy.test(t))return!1;if(dy.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}const gy=new rs(3e4,6e4);function lh(){const r=Zt().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function vy(r){return new Promise((e,t)=>{function n(){lh(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lh(),t(Wt(r,"network-request-failed"))},timeout:gy.get()})}if(Zt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Zt().gapi?.load)n();else{const i=lv("iframefcb");return Zt()[i]=()=>{gapi.load?n():t(Wt(r,"network-request-failed"))},kd(`${av()}?onload=${i}`).catch(s=>t(s))}}).catch(e=>{throw Gs=null,e})}let Gs=null;function yy(r){return Gs=Gs||vy(r),Gs}const wy=new rs(5e3,15e3),by="__/auth/iframe",_y="emulator/auth/iframe",Sy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ay=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ty(r){const e=r.config;_e(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Pl(e,_y):`https://${r.config.authDomain}/${by}`,n={apiKey:e.apiKey,appName:r.name,v:Jr},i=Ay.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${ns(n).slice(1)}`}async function Ey(r){const e=await yy(r),t=Zt().gapi;return _e(t,r,"internal-error"),e.open({where:document.body,url:Ty(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sy,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Wt(r,"network-request-failed"),m=Zt().setTimeout(()=>{s(a)},wy.get());function o(){Zt().clearTimeout(m),i(n)}n.ping(o).then(o,()=>{s(a)})}))}const Cy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xy=500,ky=600,Iy="_blank",My="http://localhost";class ch{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ry(r,e,t,n=xy,i=ky){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let m="";const o={...Cy,width:n.toString(),height:i.toString(),top:s,left:a},d=yt().toLowerCase();t&&(m=_d(d)?Iy:t),wd(d)&&(e=e||My,o.scrollbars="yes");const l=Object.entries(o).reduce((u,[h,c])=>`${u}${h}=${c},`,"");if(J1(d)&&m!=="_self")return Ly(e||"",m),new ch(null);const f=window.open(e||"",m,l);_e(f,r,"popup-blocked");try{f.focus()}catch{}return new ch(f)}function Ly(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}const $y="__/auth/handler",Dy="emulator/auth/handler",Ny=encodeURIComponent("fac");async function uh(r,e,t,n,i,s){_e(r.config.authDomain,r,"auth-domain-config-required"),_e(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Jr,eventId:i};if(e instanceof Bl){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",vg(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,f]of Object.entries({}))a[l]=f}if(e instanceof ss){const l=e.getScopes().filter(f=>f!=="");l.length>0&&(a.scopes=l.join(","))}r.tenantId&&(a.tid=r.tenantId);const m=a;for(const l of Object.keys(m))m[l]===void 0&&delete m[l];const o=await r._getAppCheckToken(),d=o?`#${Ny}=${encodeURIComponent(o)}`:"";return`${Py(r)}?${ns(m).slice(1)}${d}`}function Py({config:r}){return r.emulator?Pl(r,Dy):`https://${r.authDomain}/${$y}`}const Ea="webStorageSupport";class Oy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Od,this._completeRedirectFn=ay,this._overrideRedirectResult=iy}async _openPopup(e,t,n,i){bn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const s=await uh(e,t,n,el(),i);return Ry(e,s,Ul())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await uh(e,t,n,el(),i);return Vv(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(bn(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ey(e),n=new cy(e);return t.register("authEvent",i=>(_e(i?.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ea,{type:Ea},i=>{const s=i?.[0]?.[Ea];s!==void 0&&t(!!s),Ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=py(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Cd()||bd()||Fl()}}const Fy=Oy;var hh="@firebase/auth",dh="1.12.0";class zy{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e(n?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Vy(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function By(r){Br(new yr("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:m}=n.options;_e(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const o={apiKey:a,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xd(r)},d=new iv(n,i,s,o);return pv(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Br(new yr("auth-internal",e=>{const t=sr(e.getProvider("auth").getImmediate());return(n=>new zy(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(hh,dh,Vy(r)),Wn(hh,dh,"esm2020")}const Uy=300,Hy=rd("authIdTokenMaxAge")||Uy;let fh=null;const Wy=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Hy)return;const i=t?.token;fh!==i&&(fh=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jy(r=cd()){const e=$l(r,"auth");if(e.isInitialized())return e.getImmediate();const t=fv(r,{popupRedirectResolver:Fy,persistence:[Yv,Ov,Od]}),n=rd("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const a=Wy(s.toString());Lv(t,a,()=>a(t.currentUser)),Rv(t,m=>a(m))}}const i=td("auth");return i&&mv(t,`http://${i}`),t}function Gy(){return document.getElementsByTagName("head")?.[0]??document}sv({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const s=Wt("internal-error");s.customData=i,t(s)},n.type="text/javascript",n.charset="UTF-8",Gy().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});By("Browser");var ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jn,jd;(function(){var r;function e(E,k){function T(){}T.prototype=k.prototype,E.F=k.prototype,E.prototype=new T,E.prototype.constructor=E,E.D=function(I,P,C){for(var b=Array(arguments.length-2),A=2;A<arguments.length;A++)b[A-2]=arguments[A];return k.prototype[P].apply(I,b)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,t),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,k,T){T||(T=0);const I=Array(16);if(typeof k=="string")for(var P=0;P<16;++P)I[P]=k.charCodeAt(T++)|k.charCodeAt(T++)<<8|k.charCodeAt(T++)<<16|k.charCodeAt(T++)<<24;else for(P=0;P<16;++P)I[P]=k[T++]|k[T++]<<8|k[T++]<<16|k[T++]<<24;k=E.g[0],T=E.g[1],P=E.g[2];let C=E.g[3],b;b=k+(C^T&(P^C))+I[0]+3614090360&4294967295,k=T+(b<<7&4294967295|b>>>25),b=C+(P^k&(T^P))+I[1]+3905402710&4294967295,C=k+(b<<12&4294967295|b>>>20),b=P+(T^C&(k^T))+I[2]+606105819&4294967295,P=C+(b<<17&4294967295|b>>>15),b=T+(k^P&(C^k))+I[3]+3250441966&4294967295,T=P+(b<<22&4294967295|b>>>10),b=k+(C^T&(P^C))+I[4]+4118548399&4294967295,k=T+(b<<7&4294967295|b>>>25),b=C+(P^k&(T^P))+I[5]+1200080426&4294967295,C=k+(b<<12&4294967295|b>>>20),b=P+(T^C&(k^T))+I[6]+2821735955&4294967295,P=C+(b<<17&4294967295|b>>>15),b=T+(k^P&(C^k))+I[7]+4249261313&4294967295,T=P+(b<<22&4294967295|b>>>10),b=k+(C^T&(P^C))+I[8]+1770035416&4294967295,k=T+(b<<7&4294967295|b>>>25),b=C+(P^k&(T^P))+I[9]+2336552879&4294967295,C=k+(b<<12&4294967295|b>>>20),b=P+(T^C&(k^T))+I[10]+4294925233&4294967295,P=C+(b<<17&4294967295|b>>>15),b=T+(k^P&(C^k))+I[11]+2304563134&4294967295,T=P+(b<<22&4294967295|b>>>10),b=k+(C^T&(P^C))+I[12]+1804603682&4294967295,k=T+(b<<7&4294967295|b>>>25),b=C+(P^k&(T^P))+I[13]+4254626195&4294967295,C=k+(b<<12&4294967295|b>>>20),b=P+(T^C&(k^T))+I[14]+2792965006&4294967295,P=C+(b<<17&4294967295|b>>>15),b=T+(k^P&(C^k))+I[15]+1236535329&4294967295,T=P+(b<<22&4294967295|b>>>10),b=k+(P^C&(T^P))+I[1]+4129170786&4294967295,k=T+(b<<5&4294967295|b>>>27),b=C+(T^P&(k^T))+I[6]+3225465664&4294967295,C=k+(b<<9&4294967295|b>>>23),b=P+(k^T&(C^k))+I[11]+643717713&4294967295,P=C+(b<<14&4294967295|b>>>18),b=T+(C^k&(P^C))+I[0]+3921069994&4294967295,T=P+(b<<20&4294967295|b>>>12),b=k+(P^C&(T^P))+I[5]+3593408605&4294967295,k=T+(b<<5&4294967295|b>>>27),b=C+(T^P&(k^T))+I[10]+38016083&4294967295,C=k+(b<<9&4294967295|b>>>23),b=P+(k^T&(C^k))+I[15]+3634488961&4294967295,P=C+(b<<14&4294967295|b>>>18),b=T+(C^k&(P^C))+I[4]+3889429448&4294967295,T=P+(b<<20&4294967295|b>>>12),b=k+(P^C&(T^P))+I[9]+568446438&4294967295,k=T+(b<<5&4294967295|b>>>27),b=C+(T^P&(k^T))+I[14]+3275163606&4294967295,C=k+(b<<9&4294967295|b>>>23),b=P+(k^T&(C^k))+I[3]+4107603335&4294967295,P=C+(b<<14&4294967295|b>>>18),b=T+(C^k&(P^C))+I[8]+1163531501&4294967295,T=P+(b<<20&4294967295|b>>>12),b=k+(P^C&(T^P))+I[13]+2850285829&4294967295,k=T+(b<<5&4294967295|b>>>27),b=C+(T^P&(k^T))+I[2]+4243563512&4294967295,C=k+(b<<9&4294967295|b>>>23),b=P+(k^T&(C^k))+I[7]+1735328473&4294967295,P=C+(b<<14&4294967295|b>>>18),b=T+(C^k&(P^C))+I[12]+2368359562&4294967295,T=P+(b<<20&4294967295|b>>>12),b=k+(T^P^C)+I[5]+4294588738&4294967295,k=T+(b<<4&4294967295|b>>>28),b=C+(k^T^P)+I[8]+2272392833&4294967295,C=k+(b<<11&4294967295|b>>>21),b=P+(C^k^T)+I[11]+1839030562&4294967295,P=C+(b<<16&4294967295|b>>>16),b=T+(P^C^k)+I[14]+4259657740&4294967295,T=P+(b<<23&4294967295|b>>>9),b=k+(T^P^C)+I[1]+2763975236&4294967295,k=T+(b<<4&4294967295|b>>>28),b=C+(k^T^P)+I[4]+1272893353&4294967295,C=k+(b<<11&4294967295|b>>>21),b=P+(C^k^T)+I[7]+4139469664&4294967295,P=C+(b<<16&4294967295|b>>>16),b=T+(P^C^k)+I[10]+3200236656&4294967295,T=P+(b<<23&4294967295|b>>>9),b=k+(T^P^C)+I[13]+681279174&4294967295,k=T+(b<<4&4294967295|b>>>28),b=C+(k^T^P)+I[0]+3936430074&4294967295,C=k+(b<<11&4294967295|b>>>21),b=P+(C^k^T)+I[3]+3572445317&4294967295,P=C+(b<<16&4294967295|b>>>16),b=T+(P^C^k)+I[6]+76029189&4294967295,T=P+(b<<23&4294967295|b>>>9),b=k+(T^P^C)+I[9]+3654602809&4294967295,k=T+(b<<4&4294967295|b>>>28),b=C+(k^T^P)+I[12]+3873151461&4294967295,C=k+(b<<11&4294967295|b>>>21),b=P+(C^k^T)+I[15]+530742520&4294967295,P=C+(b<<16&4294967295|b>>>16),b=T+(P^C^k)+I[2]+3299628645&4294967295,T=P+(b<<23&4294967295|b>>>9),b=k+(P^(T|~C))+I[0]+4096336452&4294967295,k=T+(b<<6&4294967295|b>>>26),b=C+(T^(k|~P))+I[7]+1126891415&4294967295,C=k+(b<<10&4294967295|b>>>22),b=P+(k^(C|~T))+I[14]+2878612391&4294967295,P=C+(b<<15&4294967295|b>>>17),b=T+(C^(P|~k))+I[5]+4237533241&4294967295,T=P+(b<<21&4294967295|b>>>11),b=k+(P^(T|~C))+I[12]+1700485571&4294967295,k=T+(b<<6&4294967295|b>>>26),b=C+(T^(k|~P))+I[3]+2399980690&4294967295,C=k+(b<<10&4294967295|b>>>22),b=P+(k^(C|~T))+I[10]+4293915773&4294967295,P=C+(b<<15&4294967295|b>>>17),b=T+(C^(P|~k))+I[1]+2240044497&4294967295,T=P+(b<<21&4294967295|b>>>11),b=k+(P^(T|~C))+I[8]+1873313359&4294967295,k=T+(b<<6&4294967295|b>>>26),b=C+(T^(k|~P))+I[15]+4264355552&4294967295,C=k+(b<<10&4294967295|b>>>22),b=P+(k^(C|~T))+I[6]+2734768916&4294967295,P=C+(b<<15&4294967295|b>>>17),b=T+(C^(P|~k))+I[13]+1309151649&4294967295,T=P+(b<<21&4294967295|b>>>11),b=k+(P^(T|~C))+I[4]+4149444226&4294967295,k=T+(b<<6&4294967295|b>>>26),b=C+(T^(k|~P))+I[11]+3174756917&4294967295,C=k+(b<<10&4294967295|b>>>22),b=P+(k^(C|~T))+I[2]+718787259&4294967295,P=C+(b<<15&4294967295|b>>>17),b=T+(C^(P|~k))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+k&4294967295,E.g[1]=E.g[1]+(P+(b<<21&4294967295|b>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+C&4294967295}n.prototype.v=function(E,k){k===void 0&&(k=E.length);const T=k-this.blockSize,I=this.C;let P=this.h,C=0;for(;C<k;){if(P==0)for(;C<=T;)i(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<k;)if(I[P++]=E.charCodeAt(C++),P==this.blockSize){i(this,I),P=0;break}}else for(;C<k;)if(I[P++]=E[C++],P==this.blockSize){i(this,I),P=0;break}}this.h=P,this.o+=k},n.prototype.A=function(){var E=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);E[0]=128;for(var k=1;k<E.length-8;++k)E[k]=0;k=this.o*8;for(var T=E.length-8;T<E.length;++T)E[T]=k&255,k/=256;for(this.v(E),E=Array(16),k=0,T=0;T<4;++T)for(let I=0;I<32;I+=8)E[k++]=this.g[T]>>>I&255;return E};function s(E,k){var T=m;return Object.prototype.hasOwnProperty.call(T,E)?T[E]:T[E]=k(E)}function a(E,k){this.h=k;const T=[];let I=!0;for(let P=E.length-1;P>=0;P--){const C=E[P]|0;I&&C==k||(T[P]=C,I=!1)}this.g=T}var m={};function o(E){return-128<=E&&E<128?s(E,function(k){return new a([k|0],k<0?-1:0)}):new a([E|0],E<0?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return f;if(E<0)return g(d(-E));const k=[];let T=1;for(let I=0;E>=T;I++)k[I]=E/T|0,T*=4294967296;return new a(k,0)}function l(E,k){if(E.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(E.charAt(0)=="-")return g(l(E.substring(1),k));if(E.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(k,8));let I=f;for(let C=0;C<E.length;C+=8){var P=Math.min(8,E.length-C);const b=parseInt(E.substring(C,C+P),k);P<8?(P=d(Math.pow(k,P)),I=I.j(P).add(d(b))):(I=I.j(T),I=I.add(d(b)))}return I}var f=o(0),u=o(1),h=o(16777216);r=a.prototype,r.m=function(){if(p(this))return-g(this).m();let E=0,k=1;for(let T=0;T<this.g.length;T++){const I=this.i(T);E+=(I>=0?I:4294967296+I)*k,k*=4294967296}return E},r.toString=function(E){if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(c(this))return"0";if(p(this))return"-"+g(this).toString(E);const k=d(Math.pow(E,6));var T=this;let I="";for(;;){const P=R(T,k).g;T=y(T,P.j(k));let C=((T.g.length>0?T.g[0]:T.h)>>>0).toString(E);if(T=P,c(T))return C+I;for(;C.length<6;)C="0"+C;I=C+I}},r.i=function(E){return E<0?0:E<this.g.length?this.g[E]:this.h};function c(E){if(E.h!=0)return!1;for(let k=0;k<E.g.length;k++)if(E.g[k]!=0)return!1;return!0}function p(E){return E.h==-1}r.l=function(E){return E=y(this,E),p(E)?-1:c(E)?0:1};function g(E){const k=E.g.length,T=[];for(let I=0;I<k;I++)T[I]=~E.g[I];return new a(T,~E.h).add(u)}r.abs=function(){return p(this)?g(this):this},r.add=function(E){const k=Math.max(this.g.length,E.g.length),T=[];let I=0;for(let P=0;P<=k;P++){let C=I+(this.i(P)&65535)+(E.i(P)&65535),b=(C>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);I=b>>>16,C&=65535,b&=65535,T[P]=b<<16|C}return new a(T,T[T.length-1]&-2147483648?-1:0)};function y(E,k){return E.add(g(k))}r.j=function(E){if(c(this)||c(E))return f;if(p(this))return p(E)?g(this).j(g(E)):g(g(this).j(E));if(p(E))return g(this.j(g(E)));if(this.l(h)<0&&E.l(h)<0)return d(this.m()*E.m());const k=this.g.length+E.g.length,T=[];for(var I=0;I<2*k;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(let P=0;P<E.g.length;P++){const C=this.i(I)>>>16,b=this.i(I)&65535,A=E.i(P)>>>16,_=E.i(P)&65535;T[2*I+2*P]+=b*_,w(T,2*I+2*P),T[2*I+2*P+1]+=C*_,w(T,2*I+2*P+1),T[2*I+2*P+1]+=b*A,w(T,2*I+2*P+1),T[2*I+2*P+2]+=C*A,w(T,2*I+2*P+2)}for(E=0;E<k;E++)T[E]=T[2*E+1]<<16|T[2*E];for(E=k;E<2*k;E++)T[E]=0;return new a(T,0)};function w(E,k){for(;(E[k]&65535)!=E[k];)E[k+1]+=E[k]>>>16,E[k]&=65535,k++}function M(E,k){this.g=E,this.h=k}function R(E,k){if(c(k))throw Error("division by zero");if(c(E))return new M(f,f);if(p(E))return k=R(g(E),k),new M(g(k.g),g(k.h));if(p(k))return k=R(E,g(k)),new M(g(k.g),k.h);if(E.g.length>30){if(p(E)||p(k))throw Error("slowDivide_ only works with positive integers.");for(var T=u,I=k;I.l(E)<=0;)T=x(T),I=x(I);var P=S(T,1),C=S(I,1);for(I=S(I,2),T=S(T,2);!c(I);){var b=C.add(I);b.l(E)<=0&&(P=P.add(T),C=b),I=S(I,1),T=S(T,1)}return k=y(E,P.j(k)),new M(P,k)}for(P=f;E.l(k)>=0;){for(T=Math.max(1,Math.floor(E.m()/k.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),C=d(T),b=C.j(k);p(b)||b.l(E)>0;)T-=I,C=d(T),b=C.j(k);c(C)&&(C=u),P=P.add(C),E=y(E,b)}return new M(P,E)}r.B=function(E){return R(this,E).h},r.and=function(E){const k=Math.max(this.g.length,E.g.length),T=[];for(let I=0;I<k;I++)T[I]=this.i(I)&E.i(I);return new a(T,this.h&E.h)},r.or=function(E){const k=Math.max(this.g.length,E.g.length),T=[];for(let I=0;I<k;I++)T[I]=this.i(I)|E.i(I);return new a(T,this.h|E.h)},r.xor=function(E){const k=Math.max(this.g.length,E.g.length),T=[];for(let I=0;I<k;I++)T[I]=this.i(I)^E.i(I);return new a(T,this.h^E.h)};function x(E){const k=E.g.length+1,T=[];for(let I=0;I<k;I++)T[I]=E.i(I)<<1|E.i(I-1)>>>31;return new a(T,E.h)}function S(E,k){const T=k>>5;k%=32;const I=E.g.length-T,P=[];for(let C=0;C<I;C++)P[C]=k>0?E.i(C+T)>>>k|E.i(C+T+1)<<32-k:E.i(C+T);return new a(P,E.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,jd=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=l,jn=a}).apply(typeof ph<"u"?ph:typeof self<"u"?self:typeof window<"u"?window:{});var Is=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Gd,Ci,qd,qs,il,Kd,Yd,Qd;(function(){var r,e=Object.defineProperty;function t(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof Is=="object"&&Is];for(var D=0;D<v.length;++D){var F=v[D];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}var n=t(this);function i(v,D){if(D)e:{var F=n;v=v.split(".");for(var H=0;H<v.length-1;H++){var ee=v[H];if(!(ee in F))break e;F=F[ee]}v=v[v.length-1],H=F[v],D=D(H),D!=H&&D!=null&&e(F,v,{configurable:!0,writable:!0,value:D})}}i("Symbol.dispose",function(v){return v||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(v){return v||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(v){return v||function(D){var F=[],H;for(H in D)Object.prototype.hasOwnProperty.call(D,H)&&F.push([H,D[H]]);return F}});var s=s||{},a=this||self;function m(v){var D=typeof v;return D=="object"&&v!=null||D=="function"}function o(v,D,F){return v.call.apply(v.bind,arguments)}function d(v,D,F){return d=o,d.apply(null,arguments)}function l(v,D){var F=Array.prototype.slice.call(arguments,1);return function(){var H=F.slice();return H.push.apply(H,arguments),v.apply(this,H)}}function f(v,D){function F(){}F.prototype=D.prototype,v.Z=D.prototype,v.prototype=new F,v.prototype.constructor=v,v.Ob=function(H,ee,ne){for(var fe=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)fe[ke-2]=arguments[ke];return D.prototype[ee].apply(H,fe)}}var u=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?v=>v&&AsyncContext.Snapshot.wrap(v):v=>v;function h(v){const D=v.length;if(D>0){const F=Array(D);for(let H=0;H<D;H++)F[H]=v[H];return F}return[]}function c(v,D){for(let H=1;H<arguments.length;H++){const ee=arguments[H];var F=typeof ee;if(F=F!="object"?F:ee?Array.isArray(ee)?"array":F:"null",F=="array"||F=="object"&&typeof ee.length=="number"){F=v.length||0;const ne=ee.length||0;v.length=F+ne;for(let fe=0;fe<ne;fe++)v[F+fe]=ee[fe]}else v.push(ee)}}class p{constructor(D,F){this.i=D,this.j=F,this.h=0,this.g=null}get(){let D;return this.h>0?(this.h--,D=this.g,this.g=D.next,D.next=null):D=this.i(),D}}function g(v){a.setTimeout(()=>{throw v},0)}function y(){var v=E;let D=null;return v.g&&(D=v.g,v.g=v.g.next,v.g||(v.h=null),D.next=null),D}class w{constructor(){this.h=this.g=null}add(D,F){const H=M.get();H.set(D,F),this.h?this.h.next=H:this.g=H,this.h=H}}var M=new p(()=>new R,v=>v.reset());class R{constructor(){this.next=this.g=this.h=null}set(D,F){this.h=D,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let x,S=!1,E=new w,k=()=>{const v=Promise.resolve(void 0);x=()=>{v.then(T)}};function T(){for(var v;v=y();){try{v.h.call(v.g)}catch(F){g(F)}var D=M;D.j(v),D.h<100&&(D.h++,v.next=D.g,D.g=v)}S=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(v,D){this.type=v,this.g=this.target=D,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var C=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var v=!1,D=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const F=()=>{};a.addEventListener("test",F,D),a.removeEventListener("test",F,D)}catch{}return v})();function b(v){return/^[\s\xa0]*$/.test(v)}function A(v,D){P.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v&&this.init(v,D)}f(A,P),A.prototype.init=function(v,D){const F=this.type=v.type,H=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;this.target=v.target||v.srcElement,this.g=D,D=v.relatedTarget,D||(F=="mouseover"?D=v.fromElement:F=="mouseout"&&(D=v.toElement)),this.relatedTarget=D,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=v.pointerType,this.state=v.state,this.i=v,v.defaultPrevented&&A.Z.h.call(this)},A.prototype.h=function(){A.Z.h.call(this);const v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var _="closure_listenable_"+(Math.random()*1e6|0),L=0;function O(v,D,F,H,ee){this.listener=v,this.proxy=null,this.src=D,this.type=F,this.capture=!!H,this.ha=ee,this.key=++L,this.da=this.fa=!1}function V(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function B(v,D,F){for(const H in v)D.call(F,v[H],H,v)}function W(v,D){for(const F in v)D.call(void 0,v[F],F,v)}function G(v){const D={};for(const F in v)D[F]=v[F];return D}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(v,D){let F,H;for(let ee=1;ee<arguments.length;ee++){H=arguments[ee];for(F in H)v[F]=H[F];for(let ne=0;ne<J.length;ne++)F=J[ne],Object.prototype.hasOwnProperty.call(H,F)&&(v[F]=H[F])}}function Q(v){this.src=v,this.g={},this.h=0}Q.prototype.add=function(v,D,F,H,ee){const ne=v.toString();v=this.g[ne],v||(v=this.g[ne]=[],this.h++);const fe=Z(v,D,H,ee);return fe>-1?(D=v[fe],F||(D.fa=!1)):(D=new O(D,this.src,ne,!!H,ee),D.fa=F,v.push(D)),D};function X(v,D){const F=D.type;if(F in v.g){var H=v.g[F],ee=Array.prototype.indexOf.call(H,D,void 0),ne;(ne=ee>=0)&&Array.prototype.splice.call(H,ee,1),ne&&(V(D),v.g[F].length==0&&(delete v.g[F],v.h--))}}function Z(v,D,F,H){for(let ee=0;ee<v.length;++ee){const ne=v[ee];if(!ne.da&&ne.listener==D&&ne.capture==!!F&&ne.ha==H)return ee}return-1}var re="closure_lm_"+(Math.random()*1e6|0),se={};function he(v,D,F,H,ee){if(Array.isArray(D)){for(let ne=0;ne<D.length;ne++)he(v,D[ne],F,H,ee);return null}return F=Dt(F),v&&v[_]?v.J(D,F,m(H)?!!H.capture:!1,ee):ce(v,D,F,!1,H,ee)}function ce(v,D,F,H,ee,ne){if(!D)throw Error("Invalid event type");const fe=m(ee)?!!ee.capture:!!ee;let ke=lt(v);if(ke||(v[re]=ke=new Q(v)),F=ke.add(D,F,H,fe,ne),F.proxy)return F;if(H=Ae(),F.proxy=H,H.src=v,H.listener=F,v.addEventListener)C||(ee=fe),ee===void 0&&(ee=!1),v.addEventListener(D.toString(),H,ee);else if(v.attachEvent)v.attachEvent(Ye(D.toString()),H);else if(v.addListener&&v.removeListener)v.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return F}function Ae(){function v(F){return D.call(v.src,v.listener,F)}const D=ze;return v}function Le(v,D,F,H,ee){if(Array.isArray(D))for(var ne=0;ne<D.length;ne++)Le(v,D[ne],F,H,ee);else H=m(H)?!!H.capture:!!H,F=Dt(F),v&&v[_]?(v=v.i,ne=String(D).toString(),ne in v.g&&(D=v.g[ne],F=Z(D,F,H,ee),F>-1&&(V(D[F]),Array.prototype.splice.call(D,F,1),D.length==0&&(delete v.g[ne],v.h--)))):v&&(v=lt(v))&&(D=v.g[D.toString()],v=-1,D&&(v=Z(D,F,H,ee)),(F=v>-1?D[v]:null)&&Be(F))}function Be(v){if(typeof v!="number"&&v&&!v.da){var D=v.src;if(D&&D[_])X(D.i,v);else{var F=v.type,H=v.proxy;D.removeEventListener?D.removeEventListener(F,H,v.capture):D.detachEvent?D.detachEvent(Ye(F),H):D.addListener&&D.removeListener&&D.removeListener(H),(F=lt(D))?(X(F,v),F.h==0&&(F.src=null,D[re]=null)):V(v)}}}function Ye(v){return v in se?se[v]:se[v]="on"+v}function ze(v,D){if(v.da)v=!0;else{D=new A(D,this);const F=v.listener,H=v.ha||v.src;v.fa&&Be(v),v=F.call(H,D)}return v}function lt(v){return v=v[re],v instanceof Q?v:null}var jt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Dt(v){return typeof v=="function"?v:(v[jt]||(v[jt]=function(D){return v.handleEvent(D)}),v[jt])}function Je(){I.call(this),this.i=new Q(this),this.M=this,this.G=null}f(Je,I),Je.prototype[_]=!0,Je.prototype.removeEventListener=function(v,D,F,H){Le(this,v,D,F,H)};function wt(v,D){var F,H=v.G;if(H)for(F=[];H;H=H.G)F.push(H);if(v=v.M,H=D.type||D,typeof D=="string")D=new P(D,v);else if(D instanceof P)D.target=D.target||v;else{var ee=D;D=new P(H,v),K(D,ee)}ee=!0;let ne,fe;if(F)for(fe=F.length-1;fe>=0;fe--)ne=D.g=F[fe],ee=gs(ne,H,!0,D)&&ee;if(ne=D.g=v,ee=gs(ne,H,!0,D)&&ee,ee=gs(ne,H,!1,D)&&ee,F)for(fe=0;fe<F.length;fe++)ne=D.g=F[fe],ee=gs(ne,H,!1,D)&&ee}Je.prototype.N=function(){if(Je.Z.N.call(this),this.i){var v=this.i;for(const D in v.g){const F=v.g[D];for(let H=0;H<F.length;H++)V(F[H]);delete v.g[D],v.h--}}this.G=null},Je.prototype.J=function(v,D,F,H){return this.i.add(String(v),D,!1,F,H)},Je.prototype.K=function(v,D,F,H){return this.i.add(String(v),D,!0,F,H)};function gs(v,D,F,H){if(D=v.i.g[String(D)],!D)return!0;D=D.concat();let ee=!0;for(let ne=0;ne<D.length;++ne){const fe=D[ne];if(fe&&!fe.da&&fe.capture==F){const ke=fe.listener,it=fe.ha||fe.src;fe.fa&&X(v.i,fe),ee=ke.call(it,H)!==!1&&ee}}return ee&&!H.defaultPrevented}function bm(v,D){if(typeof v!="function")if(v&&typeof v.handleEvent=="function")v=d(v.handleEvent,v);else throw Error("Invalid listener argument");return Number(D)>2147483647?-1:a.setTimeout(v,D||0)}function Wc(v){v.g=bm(()=>{v.g=null,v.i&&(v.i=!1,Wc(v))},v.l);const D=v.h;v.h=null,v.m.apply(null,D)}class _m extends I{constructor(D,F){super(),this.m=D,this.l=F,this.h=null,this.i=!1,this.g=null}j(D){this.h=arguments,this.g?this.i=!0:Wc(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function li(v){I.call(this),this.h=v,this.g={}}f(li,I);var jc=[];function Gc(v){B(v.g,function(D,F){this.g.hasOwnProperty(F)&&Be(D)},v),v.g={}}li.prototype.N=function(){li.Z.N.call(this),Gc(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var na=a.JSON.stringify,Sm=a.JSON.parse,Am=class{stringify(v){return a.JSON.stringify(v,void 0)}parse(v){return a.JSON.parse(v,void 0)}};function qc(){}function Kc(){}var ci={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ra(){P.call(this,"d")}f(ra,P);function ia(){P.call(this,"c")}f(ia,P);var ar={},Yc=null;function vs(){return Yc=Yc||new Je}ar.Ia="serverreachability";function Qc(v){P.call(this,ar.Ia,v)}f(Qc,P);function ui(v){const D=vs();wt(D,new Qc(D))}ar.STAT_EVENT="statevent";function Xc(v,D){P.call(this,ar.STAT_EVENT,v),this.stat=D}f(Xc,P);function bt(v){const D=vs();wt(D,new Xc(D,v))}ar.Ja="timingevent";function Jc(v,D){P.call(this,ar.Ja,v),this.size=D}f(Jc,P);function hi(v,D){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){v()},D)}function di(){this.g=!0}di.prototype.ua=function(){this.g=!1};function Tm(v,D,F,H,ee,ne){v.info(function(){if(v.g)if(ne){var fe="",ke=ne.split("&");for(let Oe=0;Oe<ke.length;Oe++){var it=ke[Oe].split("=");if(it.length>1){const ct=it[0];it=it[1];const qt=ct.split("_");fe=qt.length>=2&&qt[1]=="type"?fe+(ct+"="+it+"&"):fe+(ct+"=redacted&")}}}else fe=null;else fe=ne;return"XMLHTTP REQ ("+H+") [attempt "+ee+"]: "+D+`
`+F+`
`+fe})}function Em(v,D,F,H,ee,ne,fe){v.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+ee+"]: "+D+`
`+F+`
`+ne+" "+fe})}function kr(v,D,F,H){v.info(function(){return"XMLHTTP TEXT ("+D+"): "+xm(v,F)+(H?" "+H:"")})}function Cm(v,D){v.info(function(){return"TIMEOUT: "+D})}di.prototype.info=function(){};function xm(v,D){if(!v.g)return D;if(!D)return null;try{const ne=JSON.parse(D);if(ne){for(v=0;v<ne.length;v++)if(Array.isArray(ne[v])){var F=ne[v];if(!(F.length<2)){var H=F[1];if(Array.isArray(H)&&!(H.length<1)){var ee=H[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let fe=1;fe<H.length;fe++)H[fe]=""}}}}return na(ne)}catch{return D}}var ys={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Zc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},eu;function sa(){}f(sa,qc),sa.prototype.g=function(){return new XMLHttpRequest},eu=new sa;function fi(v){return encodeURIComponent(String(v))}function km(v){var D=1;v=v.split(":");const F=[];for(;D>0&&v.length;)F.push(v.shift()),D--;return v.length&&F.push(v.join(":")),F}function kn(v,D,F,H){this.j=v,this.i=D,this.l=F,this.S=H||1,this.V=new li(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new tu}function tu(){this.i=null,this.g="",this.h=!1}var nu={},oa={};function aa(v,D,F){v.M=1,v.A=bs(Gt(D)),v.u=F,v.R=!0,ru(v,null)}function ru(v,D){v.F=Date.now(),ws(v),v.B=Gt(v.A);var F=v.B,H=v.S;Array.isArray(H)||(H=[String(H)]),gu(F.i,"t",H),v.C=0,F=v.j.L,v.h=new tu,v.g=Du(v.j,F?D:null,!v.u),v.P>0&&(v.O=new _m(d(v.Y,v,v.g),v.P)),D=v.V,F=v.g,H=v.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(jc[0]=ee.toString()),ee=jc);for(let ne=0;ne<ee.length;ne++){const fe=he(F,ee[ne],H||D.handleEvent,!1,D.h||D);if(!fe)break;D.g[fe.key]=fe}D=v.J?G(v.J):{},v.u?(v.v||(v.v="POST"),D["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.B,v.v,v.u,D)):(v.v="GET",v.g.ea(v.B,v.v,null,D)),ui(),Tm(v.i,v.v,v.B,v.l,v.S,v.u)}kn.prototype.ba=function(v){v=v.target;const D=this.O;D&&Rn(v)==3?D.j():this.Y(v)},kn.prototype.Y=function(v){try{if(v==this.g)e:{const ke=Rn(this.g),it=this.g.ya(),Oe=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||Au(this.g)))){this.K||ke!=4||it==7||(it==8||Oe<=0?ui(3):ui(2)),la(this);var D=this.g.ca();this.X=D;var F=Im(this);if(this.o=D==200,Em(this.i,this.v,this.B,this.l,this.S,ke,D),this.o){if(this.U&&!this.L){t:{if(this.g){var H,ee=this.g;if((H=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(H)){var ne=H;break t}}ne=null}if(v=ne)kr(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ca(this,v);else{this.o=!1,this.m=3,bt(12),lr(this),pi(this);break e}}if(this.R){v=!0;let ct;for(;!this.K&&this.C<F.length;)if(ct=Mm(this,F),ct==oa){ke==4&&(this.m=4,bt(14),v=!1),kr(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==nu){this.m=4,bt(15),kr(this.i,this.l,F,"[Invalid Chunk]"),v=!1;break}else kr(this.i,this.l,ct,null),ca(this,ct);if(iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||F.length!=0||this.h.h||(this.m=1,bt(16),v=!1),this.o=this.o&&v,!v)kr(this.i,this.l,F,"[Invalid Chunked Response]"),lr(this),pi(this);else if(F.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+F.length),va(fe),fe.P=!0,bt(11))}}else kr(this.i,this.l,F,null),ca(this,F);ke==4&&lr(this),this.o&&!this.K&&(ke==4?Mu(this.j,this):(this.o=!1,ws(this)))}else Wm(this.g),D==400&&F.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),lr(this),pi(this)}}}catch{}};function Im(v){if(!iu(v))return v.g.la();const D=Au(v.g);if(D==="")return"";let F="";const H=D.length,ee=Rn(v.g)==4;if(!v.h.i){if(typeof TextDecoder>"u")return lr(v),pi(v),"";v.h.i=new a.TextDecoder}for(let ne=0;ne<H;ne++)v.h.h=!0,F+=v.h.i.decode(D[ne],{stream:!(ee&&ne==H-1)});return D.length=0,v.h.g+=F,v.C=0,v.h.g}function iu(v){return v.g?v.v=="GET"&&v.M!=2&&v.j.Aa:!1}function Mm(v,D){var F=v.C,H=D.indexOf(`
`,F);return H==-1?oa:(F=Number(D.substring(F,H)),isNaN(F)?nu:(H+=1,H+F>D.length?oa:(D=D.slice(H,H+F),v.C=H+F,D)))}kn.prototype.cancel=function(){this.K=!0,lr(this)};function ws(v){v.T=Date.now()+v.H,su(v,v.H)}function su(v,D){if(v.D!=null)throw Error("WatchDog timer not null");v.D=hi(d(v.aa,v),D)}function la(v){v.D&&(a.clearTimeout(v.D),v.D=null)}kn.prototype.aa=function(){this.D=null;const v=Date.now();v-this.T>=0?(Cm(this.i,this.B),this.M!=2&&(ui(),bt(17)),lr(this),this.m=2,pi(this)):su(this,this.T-v)};function pi(v){v.j.I==0||v.K||Mu(v.j,v)}function lr(v){la(v);var D=v.O;D&&typeof D.dispose=="function"&&D.dispose(),v.O=null,Gc(v.V),v.g&&(D=v.g,v.g=null,D.abort(),D.dispose())}function ca(v,D){try{var F=v.j;if(F.I!=0&&(F.g==v||ua(F.h,v))){if(!v.L&&ua(F.h,v)&&F.I==3){try{var H=F.Ba.g.parse(D)}catch{H=null}if(Array.isArray(H)&&H.length==3){var ee=H;if(ee[0]==0){e:if(!F.v){if(F.g)if(F.g.F+3e3<v.F)Es(F),As(F);else break e;ga(F),bt(18)}}else F.xa=ee[1],0<F.xa-F.K&&ee[2]<37500&&F.F&&F.A==0&&!F.C&&(F.C=hi(d(F.Va,F),6e3));lu(F.h)<=1&&F.ta&&(F.ta=void 0)}else ur(F,11)}else if((v.L||F.g==v)&&Es(F),!b(D))for(ee=F.Ba.g.parse(D),D=0;D<ee.length;D++){let Oe=ee[D];const ct=Oe[0];if(!(ct<=F.K))if(F.K=ct,Oe=Oe[1],F.I==2)if(Oe[0]=="c"){F.M=Oe[1],F.ba=Oe[2];const qt=Oe[3];qt!=null&&(F.ka=qt,F.j.info("VER="+F.ka));const hr=Oe[4];hr!=null&&(F.za=hr,F.j.info("SVER="+F.za));const Ln=Oe[5];Ln!=null&&typeof Ln=="number"&&Ln>0&&(H=1.5*Ln,F.O=H,F.j.info("backChannelRequestTimeoutMs_="+H)),H=F;const $n=v.g;if($n){const xs=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xs){var ne=H.h;ne.g||xs.indexOf("spdy")==-1&&xs.indexOf("quic")==-1&&xs.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(ha(ne,ne.h),ne.h=null))}if(H.G){const ya=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;ya&&(H.wa=ya,Ue(H.J,H.G,ya))}}F.I=3,F.l&&F.l.ra(),F.aa&&(F.T=Date.now()-v.F,F.j.info("Handshake RTT: "+F.T+"ms")),H=F;var fe=v;if(H.na=$u(H,H.L?H.ba:null,H.W),fe.L){cu(H.h,fe);var ke=fe,it=H.O;it&&(ke.H=it),ke.D&&(la(ke),ws(ke)),H.g=fe}else ku(H);F.i.length>0&&Ts(F)}else Oe[0]!="stop"&&Oe[0]!="close"||ur(F,7);else F.I==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?ur(F,7):ma(F):Oe[0]!="noop"&&F.l&&F.l.qa(Oe),F.A=0)}}ui(4)}catch{}}var Rm=class{constructor(v,D){this.g=v,this.map=D}};function ou(v){this.l=v||10,a.PerformanceNavigationTiming?(v=a.performance.getEntriesByType("navigation"),v=v.length>0&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function au(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function lu(v){return v.h?1:v.g?v.g.size:0}function ua(v,D){return v.h?v.h==D:v.g?v.g.has(D):!1}function ha(v,D){v.g?v.g.add(D):v.h=D}function cu(v,D){v.h&&v.h==D?v.h=null:v.g&&v.g.has(D)&&v.g.delete(D)}ou.prototype.cancel=function(){if(this.i=uu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function uu(v){if(v.h!=null)return v.i.concat(v.h.G);if(v.g!=null&&v.g.size!==0){let D=v.i;for(const F of v.g.values())D=D.concat(F.G);return D}return h(v.i)}var hu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lm(v,D){if(v){v=v.split("&");for(let F=0;F<v.length;F++){const H=v[F].indexOf("=");let ee,ne=null;H>=0?(ee=v[F].substring(0,H),ne=v[F].substring(H+1)):ee=v[F],D(ee,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function In(v){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let D;v instanceof In?(this.l=v.l,mi(this,v.j),this.o=v.o,this.g=v.g,gi(this,v.u),this.h=v.h,da(this,vu(v.i)),this.m=v.m):v&&(D=String(v).match(hu))?(this.l=!1,mi(this,D[1]||"",!0),this.o=vi(D[2]||""),this.g=vi(D[3]||"",!0),gi(this,D[4]),this.h=vi(D[5]||"",!0),da(this,D[6]||"",!0),this.m=vi(D[7]||"")):(this.l=!1,this.i=new wi(null,this.l))}In.prototype.toString=function(){const v=[];var D=this.j;D&&v.push(yi(D,du,!0),":");var F=this.g;return(F||D=="file")&&(v.push("//"),(D=this.o)&&v.push(yi(D,du,!0),"@"),v.push(fi(F).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),F=this.u,F!=null&&v.push(":",String(F))),(F=this.h)&&(this.g&&F.charAt(0)!="/"&&v.push("/"),v.push(yi(F,F.charAt(0)=="/"?Nm:Dm,!0))),(F=this.i.toString())&&v.push("?",F),(F=this.m)&&v.push("#",yi(F,Om)),v.join("")},In.prototype.resolve=function(v){const D=Gt(this);let F=!!v.j;F?mi(D,v.j):F=!!v.o,F?D.o=v.o:F=!!v.g,F?D.g=v.g:F=v.u!=null;var H=v.h;if(F)gi(D,v.u);else if(F=!!v.h){if(H.charAt(0)!="/")if(this.g&&!this.h)H="/"+H;else{var ee=D.h.lastIndexOf("/");ee!=-1&&(H=D.h.slice(0,ee+1)+H)}if(ee=H,ee==".."||ee==".")H="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){H=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const ne=[];for(let fe=0;fe<ee.length;){const ke=ee[fe++];ke=="."?H&&fe==ee.length&&ne.push(""):ke==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),H&&fe==ee.length&&ne.push("")):(ne.push(ke),H=!0)}H=ne.join("/")}else H=ee}return F?D.h=H:F=v.i.toString()!=="",F?da(D,vu(v.i)):F=!!v.m,F&&(D.m=v.m),D};function Gt(v){return new In(v)}function mi(v,D,F){v.j=F?vi(D,!0):D,v.j&&(v.j=v.j.replace(/:$/,""))}function gi(v,D){if(D){if(D=Number(D),isNaN(D)||D<0)throw Error("Bad port number "+D);v.u=D}else v.u=null}function da(v,D,F){D instanceof wi?(v.i=D,Fm(v.i,v.l)):(F||(D=yi(D,Pm)),v.i=new wi(D,v.l))}function Ue(v,D,F){v.i.set(D,F)}function bs(v){return Ue(v,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),v}function vi(v,D){return v?D?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function yi(v,D,F){return typeof v=="string"?(v=encodeURI(v).replace(D,$m),F&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function $m(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var du=/[#\/\?@]/g,Dm=/[#\?:]/g,Nm=/[#\?]/g,Pm=/[#\?@]/g,Om=/#/g;function wi(v,D){this.h=this.g=null,this.i=v||null,this.j=!!D}function cr(v){v.g||(v.g=new Map,v.h=0,v.i&&Lm(v.i,function(D,F){v.add(decodeURIComponent(D.replace(/\+/g," ")),F)}))}r=wi.prototype,r.add=function(v,D){cr(this),this.i=null,v=Ir(this,v);let F=this.g.get(v);return F||this.g.set(v,F=[]),F.push(D),this.h+=1,this};function fu(v,D){cr(v),D=Ir(v,D),v.g.has(D)&&(v.i=null,v.h-=v.g.get(D).length,v.g.delete(D))}function pu(v,D){return cr(v),D=Ir(v,D),v.g.has(D)}r.forEach=function(v,D){cr(this),this.g.forEach(function(F,H){F.forEach(function(ee){v.call(D,ee,H,this)},this)},this)};function mu(v,D){cr(v);let F=[];if(typeof D=="string")pu(v,D)&&(F=F.concat(v.g.get(Ir(v,D))));else for(v=Array.from(v.g.values()),D=0;D<v.length;D++)F=F.concat(v[D]);return F}r.set=function(v,D){return cr(this),this.i=null,v=Ir(this,v),pu(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[D]),this.h+=1,this},r.get=function(v,D){return v?(v=mu(this,v),v.length>0?String(v[0]):D):D};function gu(v,D,F){fu(v,D),F.length>0&&(v.i=null,v.g.set(Ir(v,D),h(F)),v.h+=F.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],D=Array.from(this.g.keys());for(let H=0;H<D.length;H++){var F=D[H];const ee=fi(F);F=mu(this,F);for(let ne=0;ne<F.length;ne++){let fe=ee;F[ne]!==""&&(fe+="="+fi(F[ne])),v.push(fe)}}return this.i=v.join("&")};function vu(v){const D=new wi;return D.i=v.i,v.g&&(D.g=new Map(v.g),D.h=v.h),D}function Ir(v,D){return D=String(D),v.j&&(D=D.toLowerCase()),D}function Fm(v,D){D&&!v.j&&(cr(v),v.i=null,v.g.forEach(function(F,H){const ee=H.toLowerCase();H!=ee&&(fu(this,H),gu(this,ee,F))},v)),v.j=D}function zm(v,D){const F=new di;if(a.Image){const H=new Image;H.onload=l(Mn,F,"TestLoadImage: loaded",!0,D,H),H.onerror=l(Mn,F,"TestLoadImage: error",!1,D,H),H.onabort=l(Mn,F,"TestLoadImage: abort",!1,D,H),H.ontimeout=l(Mn,F,"TestLoadImage: timeout",!1,D,H),a.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=v}else D(!1)}function Vm(v,D){const F=new di,H=new AbortController,ee=setTimeout(()=>{H.abort(),Mn(F,"TestPingServer: timeout",!1,D)},1e4);fetch(v,{signal:H.signal}).then(ne=>{clearTimeout(ee),ne.ok?Mn(F,"TestPingServer: ok",!0,D):Mn(F,"TestPingServer: server error",!1,D)}).catch(()=>{clearTimeout(ee),Mn(F,"TestPingServer: error",!1,D)})}function Mn(v,D,F,H,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),H(F)}catch{}}function Bm(){this.g=new Am}function fa(v){this.i=v.Sb||null,this.h=v.ab||!1}f(fa,qc),fa.prototype.g=function(){return new _s(this.i,this.h)};function _s(v,D){Je.call(this),this.H=v,this.o=D,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(_s,Je),r=_s.prototype,r.open=function(v,D){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=v,this.D=D,this.readyState=1,_i(this)},r.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const D={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};v&&(D.body=v),(this.H||a).fetch(new Request(this.D,D)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,bi(this)),this.readyState=0},r.Pa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,_i(this)),this.g&&(this.readyState=3,_i(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;yu(this)}else v.text().then(this.Oa.bind(this),this.ga.bind(this))};function yu(v){v.j.read().then(v.Ma.bind(v)).catch(v.ga.bind(v))}r.Ma=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var D=v.value?v.value:new Uint8Array(0);(D=this.B.decode(D,{stream:!v.done}))&&(this.response=this.responseText+=D)}v.done?bi(this):_i(this),this.readyState==3&&yu(this)}},r.Oa=function(v){this.g&&(this.response=this.responseText=v,bi(this))},r.Na=function(v){this.g&&(this.response=v,bi(this))},r.ga=function(){this.g&&bi(this)};function bi(v){v.readyState=4,v.l=null,v.j=null,v.B=null,_i(v)}r.setRequestHeader=function(v,D){this.A.append(v,D)},r.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],D=this.h.entries();for(var F=D.next();!F.done;)F=F.value,v.push(F[0]+": "+F[1]),F=D.next();return v.join(`\r
`)};function _i(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(_s.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function wu(v){let D="";return B(v,function(F,H){D+=H,D+=":",D+=F,D+=`\r
`}),D}function pa(v,D,F){e:{for(H in F){var H=!1;break e}H=!0}H||(F=wu(F),typeof v=="string"?F!=null&&fi(F):Ue(v,D,F))}function Qe(v){Je.call(this),this.headers=new Map,this.L=v||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Qe,Je);var Um=/^https?$/i,Hm=["POST","PUT"];r=Qe.prototype,r.Fa=function(v){this.H=v},r.ea=function(v,D,F,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);D=D?D.toUpperCase():"GET",this.D=v,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():eu.g(),this.g.onreadystatechange=u(d(this.Ca,this));try{this.B=!0,this.g.open(D,String(v),!0),this.B=!1}catch(ne){bu(this,ne);return}if(v=F||"",F=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var ee in H)F.set(ee,H[ee]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const ne of H.keys())F.set(ne,H.get(ne));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(F.keys()).find(ne=>ne.toLowerCase()=="content-type"),ee=a.FormData&&v instanceof a.FormData,!(Array.prototype.indexOf.call(Hm,D,void 0)>=0)||H||ee||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,fe]of F)this.g.setRequestHeader(ne,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(v),this.v=!1}catch(ne){bu(this,ne)}};function bu(v,D){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=D,v.o=5,_u(v),Ss(v)}function _u(v){v.A||(v.A=!0,wt(v,"complete"),wt(v,"error"))}r.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=v||7,wt(this,"complete"),wt(this,"abort"),Ss(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ss(this,!0)),Qe.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Su(this):this.Xa())},r.Xa=function(){Su(this)};function Su(v){if(v.h&&typeof s<"u"){if(v.v&&Rn(v)==4)setTimeout(v.Ca.bind(v),0);else if(wt(v,"readystatechange"),Rn(v)==4){v.h=!1;try{const ne=v.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var D=!0;break e;default:D=!1}var F;if(!(F=D)){var H;if(H=ne===0){let fe=String(v.D).match(hu)[1]||null;!fe&&a.self&&a.self.location&&(fe=a.self.location.protocol.slice(0,-1)),H=!Um.test(fe?fe.toLowerCase():"")}F=H}if(F)wt(v,"complete"),wt(v,"success");else{v.o=6;try{var ee=Rn(v)>2?v.g.statusText:""}catch{ee=""}v.l=ee+" ["+v.ca()+"]",_u(v)}}finally{Ss(v)}}}}function Ss(v,D){if(v.g){v.m&&(clearTimeout(v.m),v.m=null);const F=v.g;v.g=null,D||wt(v,"ready");try{F.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Rn(v){return v.g?v.g.readyState:0}r.ca=function(){try{return Rn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(v){if(this.g){var D=this.g.responseText;return v&&D.indexOf(v)==0&&(D=D.substring(v.length)),Sm(D)}};function Au(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.F){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function Wm(v){const D={};v=(v.g&&Rn(v)>=2&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<v.length;H++){if(b(v[H]))continue;var F=km(v[H]);const ee=F[0];if(F=F[1],typeof F!="string")continue;F=F.trim();const ne=D[ee]||[];D[ee]=ne,ne.push(F)}W(D,function(H){return H.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(v,D,F){return F&&F.internalChannelParams&&F.internalChannelParams[v]||D}function Tu(v){this.za=0,this.i=[],this.j=new di,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,v),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,v),this.Za=Si("retryDelaySeedMs",1e4,v),this.Ta=Si("forwardChannelMaxRetries",2,v),this.va=Si("forwardChannelRequestTimeoutMs",2e4,v),this.ma=v&&v.xmlHttpFactory||void 0,this.Ua=v&&v.Rb||void 0,this.Aa=v&&v.useFetchStreams||!1,this.O=void 0,this.L=v&&v.supportsCrossDomainXhr||!1,this.M="",this.h=new ou(v&&v.concurrentRequestLimit),this.Ba=new Bm,this.S=v&&v.fastHandshake||!1,this.R=v&&v.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=v&&v.Pb||!1,v&&v.ua&&this.j.ua(),v&&v.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&v&&v.detectBufferingProxy||!1,this.ia=void 0,v&&v.longPollingTimeout&&v.longPollingTimeout>0&&(this.ia=v.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Tu.prototype,r.ka=8,r.I=1,r.connect=function(v,D,F,H){bt(0),this.W=v,this.H=D||{},F&&H!==void 0&&(this.H.OSID=F,this.H.OAID=H),this.F=this.X,this.J=$u(this,null,this.W),Ts(this)};function ma(v){if(Eu(v),v.I==3){var D=v.V++,F=Gt(v.J);if(Ue(F,"SID",v.M),Ue(F,"RID",D),Ue(F,"TYPE","terminate"),Ai(v,F),D=new kn(v,v.j,D),D.M=2,D.A=bs(Gt(F)),F=!1,a.navigator&&a.navigator.sendBeacon)try{F=a.navigator.sendBeacon(D.A.toString(),"")}catch{}!F&&a.Image&&(new Image().src=D.A,F=!0),F||(D.g=Du(D.j,null),D.g.ea(D.A)),D.F=Date.now(),ws(D)}Lu(v)}function As(v){v.g&&(va(v),v.g.cancel(),v.g=null)}function Eu(v){As(v),v.v&&(a.clearTimeout(v.v),v.v=null),Es(v),v.h.cancel(),v.m&&(typeof v.m=="number"&&a.clearTimeout(v.m),v.m=null)}function Ts(v){if(!au(v.h)&&!v.m){v.m=!0;var D=v.Ea;x||k(),S||(x(),S=!0),E.add(D,v),v.D=0}}function jm(v,D){return lu(v.h)>=v.h.j-(v.m?1:0)?!1:v.m?(v.i=D.G.concat(v.i),!0):v.I==1||v.I==2||v.D>=(v.Sa?0:v.Ta)?!1:(v.m=hi(d(v.Ea,v,D),Ru(v,v.D)),v.D++,!0)}r.Ea=function(v){if(this.m)if(this.m=null,this.I==1){if(!v){this.V=Math.floor(Math.random()*1e5),v=this.V++;const ee=new kn(this,this.j,v);let ne=this.o;if(this.U&&(ne?(ne=G(ne),K(ne,this.U)):ne=this.U),this.u!==null||this.R||(ee.J=ne,ne=null),this.S)e:{for(var D=0,F=0;F<this.i.length;F++){t:{var H=this.i[F];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(D+=H,D>4096){D=F;break e}if(D===4096||F===this.i.length-1){D=F+1;break e}}D=1e3}else D=1e3;D=xu(this,ee,D),F=Gt(this.J),Ue(F,"RID",v),Ue(F,"CVER",22),this.G&&Ue(F,"X-HTTP-Session-Id",this.G),Ai(this,F),ne&&(this.R?D="headers="+fi(wu(ne))+"&"+D:this.u&&pa(F,this.u,ne)),ha(this.h,ee),this.Ra&&Ue(F,"TYPE","init"),this.S?(Ue(F,"$req",D),Ue(F,"SID","null"),ee.U=!0,aa(ee,F,null)):aa(ee,F,D),this.I=2}}else this.I==3&&(v?Cu(this,v):this.i.length==0||au(this.h)||Cu(this))};function Cu(v,D){var F;D?F=D.l:F=v.V++;const H=Gt(v.J);Ue(H,"SID",v.M),Ue(H,"RID",F),Ue(H,"AID",v.K),Ai(v,H),v.u&&v.o&&pa(H,v.u,v.o),F=new kn(v,v.j,F,v.D+1),v.u===null&&(F.J=v.o),D&&(v.i=D.G.concat(v.i)),D=xu(v,F,1e3),F.H=Math.round(v.va*.5)+Math.round(v.va*.5*Math.random()),ha(v.h,F),aa(F,H,D)}function Ai(v,D){v.H&&B(v.H,function(F,H){Ue(D,H,F)}),v.l&&B({},function(F,H){Ue(D,H,F)})}function xu(v,D,F){F=Math.min(v.i.length,F);const H=v.l?d(v.l.Ka,v.l,v):null;e:{var ee=v.i;let ke=-1;for(;;){const it=["count="+F];ke==-1?F>0?(ke=ee[0].g,it.push("ofs="+ke)):ke=0:it.push("ofs="+ke);let Oe=!0;for(let ct=0;ct<F;ct++){var ne=ee[ct].g;const qt=ee[ct].map;if(ne-=ke,ne<0)ke=Math.max(0,ee[ct].g-100),Oe=!1;else try{ne="req"+ne+"_"||"";try{var fe=qt instanceof Map?qt:Object.entries(qt);for(const[hr,Ln]of fe){let $n=Ln;m(Ln)&&($n=na(Ln)),it.push(ne+hr+"="+encodeURIComponent($n))}}catch(hr){throw it.push(ne+"type="+encodeURIComponent("_badmap")),hr}}catch{H&&H(qt)}}if(Oe){fe=it.join("&");break e}}fe=void 0}return v=v.i.splice(0,F),D.G=v,fe}function ku(v){if(!v.g&&!v.v){v.Y=1;var D=v.Da;x||k(),S||(x(),S=!0),E.add(D,v),v.A=0}}function ga(v){return v.g||v.v||v.A>=3?!1:(v.Y++,v.v=hi(d(v.Da,v),Ru(v,v.A)),v.A++,!0)}r.Da=function(){if(this.v=null,Iu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var v=4*this.T;this.j.info("BP detection timer enabled: "+v),this.B=hi(d(this.Wa,this),v)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),As(this),Iu(this))};function va(v){v.B!=null&&(a.clearTimeout(v.B),v.B=null)}function Iu(v){v.g=new kn(v,v.j,"rpc",v.Y),v.u===null&&(v.g.J=v.o),v.g.P=0;var D=Gt(v.na);Ue(D,"RID","rpc"),Ue(D,"SID",v.M),Ue(D,"AID",v.K),Ue(D,"CI",v.F?"0":"1"),!v.F&&v.ia&&Ue(D,"TO",v.ia),Ue(D,"TYPE","xmlhttp"),Ai(v,D),v.u&&v.o&&pa(D,v.u,v.o),v.O&&(v.g.H=v.O);var F=v.g;v=v.ba,F.M=1,F.A=bs(Gt(D)),F.u=null,F.R=!0,ru(F,v)}r.Va=function(){this.C!=null&&(this.C=null,As(this),ga(this),bt(19))};function Es(v){v.C!=null&&(a.clearTimeout(v.C),v.C=null)}function Mu(v,D){var F=null;if(v.g==D){Es(v),va(v),v.g=null;var H=2}else if(ua(v.h,D))F=D.G,cu(v.h,D),H=1;else return;if(v.I!=0){if(D.o)if(H==1){F=D.u?D.u.length:0,D=Date.now()-D.F;var ee=v.D;H=vs(),wt(H,new Jc(H,F)),Ts(v)}else ku(v);else if(ee=D.m,ee==3||ee==0&&D.X>0||!(H==1&&jm(v,D)||H==2&&ga(v)))switch(F&&F.length>0&&(D=v.h,D.i=D.i.concat(F)),ee){case 1:ur(v,5);break;case 4:ur(v,10);break;case 3:ur(v,6);break;default:ur(v,2)}}}function Ru(v,D){let F=v.Qa+Math.floor(Math.random()*v.Za);return v.isActive()||(F*=2),F*D}function ur(v,D){if(v.j.info("Error code "+D),D==2){var F=d(v.bb,v),H=v.Ua;const ee=!H;H=new In(H||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mi(H,"https"),bs(H),ee?zm(H.toString(),F):Vm(H.toString(),F)}else bt(2);v.I=0,v.l&&v.l.pa(D),Lu(v),Eu(v)}r.bb=function(v){v?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Lu(v){if(v.I=0,v.ja=[],v.l){const D=uu(v.h);(D.length!=0||v.i.length!=0)&&(c(v.ja,D),c(v.ja,v.i),v.h.i.length=0,h(v.i),v.i.length=0),v.l.oa()}}function $u(v,D,F){var H=F instanceof In?Gt(F):new In(F);if(H.g!="")D&&(H.g=D+"."+H.g),gi(H,H.u);else{var ee=a.location;H=ee.protocol,D=D?D+"."+ee.hostname:ee.hostname,ee=+ee.port;const ne=new In(null);H&&mi(ne,H),D&&(ne.g=D),ee&&gi(ne,ee),F&&(ne.h=F),H=ne}return F=v.G,D=v.wa,F&&D&&Ue(H,F,D),Ue(H,"VER",v.ka),Ai(v,H),H}function Du(v,D,F){if(D&&!v.L)throw Error("Can't create secondary domain capable XhrIo object.");return D=v.Aa&&!v.ma?new Qe(new fa({ab:F})):new Qe(v.ma),D.Fa(v.L),D}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}r=Nu.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Cs(){}Cs.prototype.g=function(v,D){return new kt(v,D)};function kt(v,D){Je.call(this),this.g=new Tu(D),this.l=v,this.h=D&&D.messageUrlParams||null,v=D&&D.messageHeaders||null,D&&D.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=D&&D.initMessageHeaders||null,D&&D.messageContentType&&(v?v["X-WebChannel-Content-Type"]=D.messageContentType:v={"X-WebChannel-Content-Type":D.messageContentType}),D&&D.sa&&(v?v["X-WebChannel-Client-Profile"]=D.sa:v={"X-WebChannel-Client-Profile":D.sa}),this.g.U=v,(v=D&&D.Qb)&&!b(v)&&(this.g.u=v),this.A=D&&D.supportsCrossDomainXhr||!1,this.v=D&&D.sendRawJson||!1,(D=D&&D.httpSessionIdParam)&&!b(D)&&(this.g.G=D,v=this.h,v!==null&&D in v&&(v=this.h,D in v&&delete v[D])),this.j=new Mr(this)}f(kt,Je),kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){ma(this.g)},kt.prototype.o=function(v){var D=this.g;if(typeof v=="string"){var F={};F.__data__=v,v=F}else this.v&&(F={},F.__data__=na(v),v=F);D.i.push(new Rm(D.Ya++,v)),D.I==3&&Ts(D)},kt.prototype.N=function(){this.g.l=null,delete this.j,ma(this.g),delete this.g,kt.Z.N.call(this)};function Pu(v){ra.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var D=v.__sm__;if(D){e:{for(const F in D){v=F;break e}v=void 0}(this.i=v)&&(v=this.i,D=D!==null&&v in D?D[v]:void 0),this.data=D}else this.data=v}f(Pu,ra);function Ou(){ia.call(this),this.status=1}f(Ou,ia);function Mr(v){this.g=v}f(Mr,Nu),Mr.prototype.ra=function(){wt(this.g,"a")},Mr.prototype.qa=function(v){wt(this.g,new Pu(v))},Mr.prototype.pa=function(v){wt(this.g,new Ou)},Mr.prototype.oa=function(){wt(this.g,"b")},Cs.prototype.createWebChannel=Cs.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,Qd=function(){return new Cs},Yd=function(){return vs()},Kd=ar,il={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,qs=ys,Zc.COMPLETE="complete",qd=Zc,Kc.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",Je.prototype.listen=Je.prototype.J,Ci=Kc,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,Gd=Qe}).apply(typeof Is<"u"?Is:typeof self<"u"?self:typeof window<"u"?window:{});const mh="@firebase/firestore",gh="4.9.3";class gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gt.UNAUTHENTICATED=new gt(null),gt.GOOGLE_CREDENTIALS=new gt("google-credentials-uid"),gt.FIRST_PARTY=new gt("first-party-uid"),gt.MOCK_USER=new gt("mock-user");let ei="12.7.0";const _r=new Rl("@firebase/firestore");function Lr(){return _r.logLevel}function ge(r,...e){if(_r.logLevel<=Ie.DEBUG){const t=e.map(Wl);_r.debug(`Firestore (${ei}): ${r}`,...t)}}function _n(r,...e){if(_r.logLevel<=Ie.ERROR){const t=e.map(Wl);_r.error(`Firestore (${ei}): ${r}`,...t)}}function Ur(r,...e){if(_r.logLevel<=Ie.WARN){const t=e.map(Wl);_r.warn(`Firestore (${ei}): ${r}`,...t)}}function Wl(r){if(typeof r=="string")return r;try{return(function(t){return JSON.stringify(t)})(r)}catch{return r}}function Se(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,Xd(r,n,t)}function Xd(r,e,t){let n=`FIRESTORE (${ei}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw _n(n),new Error(n)}function Pe(r,e,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,r||Xd(e,i,n)}function Ce(r,e){return r}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ve extends Cn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Jd{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gt.UNAUTHENTICATED)))}shutdown(){}}class Ky{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Yy{constructor(e){this.t=e,this.currentUser=gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Pe(this.o===void 0,42304);let n=this.i;const i=o=>this.i!==n?(n=this.i,t(o)):Promise.resolve();let s=new Gn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gn,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const o=s;e.enqueueRetryable((async()=>{await o.promise,await i(this.currentUser)}))},m=o=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=o,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((o=>m(o))),setTimeout((()=>{if(!this.auth){const o=this.t.getImmediate({optional:!0});o?m(o):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gn)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((n=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Pe(typeof n.accessToken=="string",31837,{l:n}),new Jd(n.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new gt(e)}}class Qy{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xy{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Qy(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class vh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jy{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,It(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Pe(this.o===void 0,3512);const n=s=>{s.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ge("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>n(s)))};const i=s=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new vh(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Pe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vh(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Zy(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}class jl{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const i=Zy(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%62))}return n}}function Me(r,e){return r<e?-1:r>e?1:0}function sl(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++){const i=r.charAt(n),s=e.charAt(n);if(i!==s)return Ca(i)===Ca(s)?Me(i,s):Ca(i)?1:-1}return Me(r.length,e.length)}const e4=55296,t4=57343;function Ca(r){const e=r.charCodeAt(0);return e>=e4&&e<=t4}function Hr(r,e,t){return r.length===e.length&&r.every(((n,i)=>t(n,e[i])))}const yh="__name__";class Yt{constructor(e,t,n){t===void 0?t=0:t>e.length&&Se(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&Se(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Yt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yt?e.forEach((n=>{t.push(n)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=Yt.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return Me(e.length,t.length)}static compareSegments(e,t){const n=Yt.isNumericId(e),i=Yt.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Yt.extractNumericId(e).compare(Yt.extractNumericId(t)):sl(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jn.fromString(e.substring(4,e.length-2))}}class Ge extends Yt{construct(e,t,n){return new Ge(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new ve(ae.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((i=>i.length>0)))}return new Ge(t)}static emptyPath(){return new Ge([])}}const n4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ft extends Yt{construct(e,t,n){return new ft(e,t,n)}static isValidIdentifier(e){return n4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yh}static keyField(){return new ft([yh])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new ve(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;i<e.length;){const m=e[i];if(m==="\\"){if(i+1===e.length)throw new ve(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const o=e[i+1];if(o!=="\\"&&o!=="."&&o!=="`")throw new ve(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=o,i+=2}else m==="`"?(a=!a,i++):m!=="."||a?(n+=m,i++):(s(),i++)}if(s(),a)throw new ve(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ft(t)}static emptyPath(){return new ft([])}}class be{constructor(e){this.path=e}static fromPath(e){return new be(Ge.fromString(e))}static fromName(e){return new be(Ge.fromString(e).popFirst(5))}static empty(){return new be(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new Ge(e.slice()))}}function r4(r,e,t){if(!t)throw new ve(ae.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function i4(r,e,t,n){if(e===!0&&n===!0)throw new ve(ae.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function wh(r){if(!be.isDocumentKey(r))throw new ve(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Zd(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Gl(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(n){return n.constructor?n.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Se(12329,{type:typeof r})}function ji(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ve(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Gl(r);throw new ve(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function nt(r,e){const t={typeString:r};return e&&(t.value=e),t}function as(r,e){if(!Zd(r))throw new ve(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const i=e[n].typeString,s="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const a=r[n];if(i&&typeof a!==i){t=`JSON field '${n}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${n}' field to equal '${s.value}'`;break}}if(t)throw new ve(ae.INVALID_ARGUMENT,t);return!0}const bh=-62135596800,_h=1e6;class He{static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*_h);return new He(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ve(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<bh)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ve(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_h}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:He._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(as(e,He._jsonSchema))return new He(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bh;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}He._jsonSchemaVersion="firestore/timestamp/1.0",He._jsonSchema={type:nt("string",He._jsonSchemaVersion),seconds:nt("number"),nanoseconds:nt("number")};class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new He(0,0))}static max(){return new Ee(new He(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Gi=-1;function s4(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(n===1e9?new He(t+1,0):new He(t,n));return new Kn(i,be.empty(),e)}function o4(r){return new Kn(r.readTime,r.key,Gi)}class Kn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Kn(Ee.min(),be.empty(),Gi)}static max(){return new Kn(Ee.max(),be.empty(),Gi)}}function a4(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(r.documentKey,e.documentKey),t!==0?t:Me(r.largestBatchId,e.largestBatchId))}const l4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ti(r){if(r.code!==ae.FAILED_PRECONDITION||r.message!==l4)throw r;ge("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,n)=>{t(e)}))}static reject(e){return new ie(((t,n)=>{n(e)}))}static waitFor(e){return new ie(((t,n)=>{let i=0,s=0,a=!1;e.forEach((m=>{++i,m.next((()=>{++s,a&&s===i&&t()}),(o=>n(o)))})),a=!0,s===i&&t()}))}static or(e){let t=ie.resolve(!1);for(const n of e)t=t.next((i=>i?ie.resolve(i):n()));return t}static forEach(e,t){const n=[];return e.forEach(((i,s)=>{n.push(t.call(this,i,s))})),this.waitFor(n)}static mapArray(e,t){return new ie(((n,i)=>{const s=e.length,a=new Array(s);let m=0;for(let o=0;o<s;o++){const d=o;t(e[d]).next((l=>{a[d]=l,++m,m===s&&n(a)}),(l=>i(l)))}}))}static doWhile(e,t){return new ie(((n,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):n()};s()}))}}function u4(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ni(r){return r.name==="IndexedDbTransactionError"}class Po{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>t.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Po.ce=-1;const ql=-1;function Oo(r){return r==null}function uo(r){return r===0&&1/r==-1/0}function h4(r){return typeof r=="number"&&Number.isInteger(r)&&!uo(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const ef="";function d4(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Sh(e)),e=f4(r.get(t),e);return Sh(e)}function f4(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case ef:t+="";break;default:t+=s}}return t}function Sh(r){return r+ef+""}function Ah(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ar(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function tf(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Ke{constructor(e,t){this.comparator=e,this.root=t||dt.EMPTY}insert(e,t){return new Ke(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ms(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ms(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ms(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ms(this.root,e,this.comparator,!0)}}class Ms{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??dt.RED,this.left=i??dt.EMPTY,this.right=s??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new dt(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return dt.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,t,n,i,s){return this}insert(e,t,n){return new dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ot{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Th(this.data.getIterator())}getIteratorFrom(e){return new Th(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((n=>{t=t.add(n)})),t}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ot(this.comparator);return t.data=e,t}}class Th{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ht{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new Ht([])}unionWith(e){let t=new ot(ft.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ht(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Hr(this.fields,e.fields,((t,n)=>t.isEqual(n)))}}class nf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nf("Invalid base64 string: "+s):s}})(e);return new pt(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const p4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yn(r){if(Pe(!!r,39018),typeof r=="string"){let e=0;const t=p4.exec(r);if(Pe(!!t,46558,{timestamp:r}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Ze(r.seconds),nanos:Ze(r.nanos)}}function Ze(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Qn(r){return typeof r=="string"?pt.fromBase64String(r):pt.fromUint8Array(r)}const rf="server_timestamp",sf="__type__",of="__previous_value__",af="__local_write_time__";function Kl(r){return(r?.mapValue?.fields||{})[sf]?.stringValue===rf}function Fo(r){const e=r.mapValue.fields[of];return Kl(e)?Fo(e):e}function qi(r){const e=Yn(r.mapValue.fields[af].timestampValue);return new He(e.seconds,e.nanos)}class m4{constructor(e,t,n,i,s,a,m,o,d,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=m,this.longPollingOptions=o,this.useFetchStreams=d,this.isUsingEmulator=l}}const ho="(default)";class Ki{constructor(e,t){this.projectId=e,this.database=t||ho}static empty(){return new Ki("","")}get isDefaultDatabase(){return this.database===ho}isEqual(e){return e instanceof Ki&&e.projectId===this.projectId&&e.database===this.database}}const lf="__type__",g4="__max__",Rs={mapValue:{}},cf="__vector__",fo="value";function Xn(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Kl(r)?4:y4(r)?9007199254740991:v4(r)?10:11:Se(28295,{value:r})}function sn(r,e){if(r===e)return!0;const t=Xn(r);if(t!==Xn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return qi(r).isEqual(qi(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Yn(i.timestampValue),m=Yn(s.timestampValue);return a.seconds===m.seconds&&a.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(i,s){return Qn(i.bytesValue).isEqual(Qn(s.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ze(i.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)})(r,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ze(i.integerValue)===Ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Ze(i.doubleValue),m=Ze(s.doubleValue);return a===m?uo(a)===uo(m):isNaN(a)&&isNaN(m)}return!1})(r,e);case 9:return Hr(r.arrayValue.values||[],e.arrayValue.values||[],sn);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},m=s.mapValue.fields||{};if(Ah(a)!==Ah(m))return!1;for(const o in a)if(a.hasOwnProperty(o)&&(m[o]===void 0||!sn(a[o],m[o])))return!1;return!0})(r,e);default:return Se(52216,{left:r})}}function Yi(r,e){return(r.values||[]).find((t=>sn(t,e)))!==void 0}function Wr(r,e){if(r===e)return 0;const t=Xn(r),n=Xn(e);if(t!==n)return Me(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(r.booleanValue,e.booleanValue);case 2:return(function(s,a){const m=Ze(s.integerValue||s.doubleValue),o=Ze(a.integerValue||a.doubleValue);return m<o?-1:m>o?1:m===o?0:isNaN(m)?isNaN(o)?0:-1:1})(r,e);case 3:return Eh(r.timestampValue,e.timestampValue);case 4:return Eh(qi(r),qi(e));case 5:return sl(r.stringValue,e.stringValue);case 6:return(function(s,a){const m=Qn(s),o=Qn(a);return m.compareTo(o)})(r.bytesValue,e.bytesValue);case 7:return(function(s,a){const m=s.split("/"),o=a.split("/");for(let d=0;d<m.length&&d<o.length;d++){const l=Me(m[d],o[d]);if(l!==0)return l}return Me(m.length,o.length)})(r.referenceValue,e.referenceValue);case 8:return(function(s,a){const m=Me(Ze(s.latitude),Ze(a.latitude));return m!==0?m:Me(Ze(s.longitude),Ze(a.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Ch(r.arrayValue,e.arrayValue);case 10:return(function(s,a){const m=s.fields||{},o=a.fields||{},d=m[fo]?.arrayValue,l=o[fo]?.arrayValue,f=Me(d?.values?.length||0,l?.values?.length||0);return f!==0?f:Ch(d,l)})(r.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Rs.mapValue&&a===Rs.mapValue)return 0;if(s===Rs.mapValue)return 1;if(a===Rs.mapValue)return-1;const m=s.fields||{},o=Object.keys(m),d=a.fields||{},l=Object.keys(d);o.sort(),l.sort();for(let f=0;f<o.length&&f<l.length;++f){const u=sl(o[f],l[f]);if(u!==0)return u;const h=Wr(m[o[f]],d[l[f]]);if(h!==0)return h}return Me(o.length,l.length)})(r.mapValue,e.mapValue);default:throw Se(23264,{he:t})}}function Eh(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Me(r,e);const t=Yn(r),n=Yn(e),i=Me(t.seconds,n.seconds);return i!==0?i:Me(t.nanos,n.nanos)}function Ch(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=Wr(t[i],n[i]);if(s)return s}return Me(t.length,n.length)}function jr(r){return ol(r)}function ol(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const n=Yn(t);return`time(${n.seconds},${n.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Qn(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return be.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=ol(s);return n+"]"})(r.arrayValue):"mapValue"in r?(function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${ol(t.fields[a])}`;return i+"}"})(r.mapValue):Se(61005,{value:r})}function Ks(r){switch(Xn(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fo(r);return e?16+Ks(e):16;case 5:return 2*r.stringValue.length;case 6:return Qn(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(n){return(n.values||[]).reduce(((i,s)=>i+Ks(s)),0)})(r.arrayValue);case 10:case 11:return(function(n){let i=0;return Ar(n.fields,((s,a)=>{i+=s.length+Ks(a)})),i})(r.mapValue);default:throw Se(13486,{value:r})}}function al(r){return!!r&&"integerValue"in r}function Yl(r){return!!r&&"arrayValue"in r}function xh(r){return!!r&&"nullValue"in r}function kh(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Ys(r){return!!r&&"mapValue"in r}function v4(r){return(r?.mapValue?.fields||{})[lf]?.stringValue===cf}function Pi(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ar(r.mapValue.fields,((t,n)=>e.mapValue.fields[t]=Pi(n))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pi(r.arrayValue.values[t]);return e}return{...r}}function y4(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===g4}class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ys(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pi(t)}setAll(e){let t=ft.emptyPath(),n={},i=[];e.forEach(((a,m)=>{if(!t.isImmediateParentOf(m)){const o=this.getFieldsMap(t);this.applyChanges(o,n,i),n={},i=[],t=m.popLast()}a?n[m.lastSegment()]=Pi(a):i.push(m.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());Ys(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return sn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Ys(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Ar(t,((i,s)=>e[i]=s));for(const i of n)delete e[i]}clone(){return new Nt(Pi(this.value))}}function uf(r){const e=[];return Ar(r.fields,((t,n)=>{const i=new ft([t]);if(Ys(n)){const s=uf(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Ht(e)}class vt{constructor(e,t,n,i,s,a,m){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=m}static newInvalidDocument(e){return new vt(e,0,Ee.min(),Ee.min(),Ee.min(),Nt.empty(),0)}static newFoundDocument(e,t,n,i){return new vt(e,1,t,Ee.min(),n,i,0)}static newNoDocument(e,t){return new vt(e,2,t,Ee.min(),Ee.min(),Nt.empty(),0)}static newUnknownDocument(e,t){return new vt(e,3,t,Ee.min(),Ee.min(),Nt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class po{constructor(e,t){this.position=e,this.inclusive=t}}function Ih(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],a=r.position[i];if(s.field.isKeyField()?n=be.comparator(be.fromName(a.referenceValue),t.key):n=Wr(a,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Mh(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!sn(r.position[t],e.position[t]))return!1;return!0}class mo{constructor(e,t="asc"){this.field=e,this.dir=t}}function w4(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class hf{}class st extends hf{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new _4(e,t,n):t==="array-contains"?new T4(e,n):t==="in"?new E4(e,n):t==="not-in"?new C4(e,n):t==="array-contains-any"?new x4(e,n):new st(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new S4(e,n):new A4(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Wr(t,this.value)):t!==null&&Xn(this.value)===Xn(t)&&this.matchesComparison(Wr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends hf{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new on(e,t)}matches(e){return df(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function df(r){return r.op==="and"}function ff(r){return b4(r)&&df(r)}function b4(r){for(const e of r.filters)if(e instanceof on)return!1;return!0}function ll(r){if(r instanceof st)return r.field.canonicalString()+r.op.toString()+jr(r.value);if(ff(r))return r.filters.map((e=>ll(e))).join(",");{const e=r.filters.map((t=>ll(t))).join(",");return`${r.op}(${e})`}}function pf(r,e){return r instanceof st?(function(n,i){return i instanceof st&&n.op===i.op&&n.field.isEqual(i.field)&&sn(n.value,i.value)})(r,e):r instanceof on?(function(n,i){return i instanceof on&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce(((s,a,m)=>s&&pf(a,i.filters[m])),!0):!1})(r,e):void Se(19439)}function mf(r){return r instanceof st?(function(t){return`${t.field.canonicalString()} ${t.op} ${jr(t.value)}`})(r):r instanceof on?(function(t){return t.op.toString()+" {"+t.getFilters().map(mf).join(" ,")+"}"})(r):"Filter"}class _4 extends st{constructor(e,t,n){super(e,t,n),this.key=be.fromName(n.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class S4 extends st{constructor(e,t){super(e,"in",t),this.keys=gf("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class A4 extends st{constructor(e,t){super(e,"not-in",t),this.keys=gf("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function gf(r,e){return(e.arrayValue?.values||[]).map((t=>be.fromName(t.referenceValue)))}class T4 extends st{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yl(t)&&Yi(t.arrayValue,this.value)}}class E4 extends st{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Yi(this.value.arrayValue,t)}}class C4 extends st{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Yi(this.value.arrayValue,t)}}class x4 extends st{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((n=>Yi(this.value.arrayValue,n)))}}class k4{constructor(e,t=null,n=[],i=[],s=null,a=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=m,this.Te=null}}function Rh(r,e=null,t=[],n=[],i=null,s=null,a=null){return new k4(r,e,t,n,i,s,a)}function Ql(r){const e=Ce(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((n=>ll(n))).join(","),t+="|ob:",t+=e.orderBy.map((n=>(function(s){return s.field.canonicalString()+s.dir})(n))).join(","),Oo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((n=>jr(n))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((n=>jr(n))).join(",")),e.Te=t}return e.Te}function Xl(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!w4(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!pf(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Mh(r.startAt,e.startAt)&&Mh(r.endAt,e.endAt)}function cl(r){return be.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class zo{constructor(e,t=null,n=[],i=[],s=null,a="F",m=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=m,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function I4(r,e,t,n,i,s,a,m){return new zo(r,e,t,n,i,s,a,m)}function Jl(r){return new zo(r)}function Lh(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function M4(r){return r.collectionGroup!==null}function Oi(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let m=new ot(ft.comparator);return a.filters.forEach((o=>{o.getFlattenedFilters().forEach((d=>{d.isInequality()&&(m=m.add(d.field))}))})),m})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new mo(s,n))})),t.has(ft.keyField().canonicalString())||e.Ie.push(new mo(ft.keyField(),n))}return e.Ie}function en(r){const e=Ce(r);return e.Ee||(e.Ee=R4(e,Oi(r))),e.Ee}function R4(r,e){if(r.limitType==="F")return Rh(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new mo(i.field,s)}));const t=r.endAt?new po(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new po(r.startAt.position,r.startAt.inclusive):null;return Rh(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function ul(r,e,t){return new zo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Vo(r,e){return Xl(en(r),en(e))&&r.limitType===e.limitType}function vf(r){return`${Ql(en(r))}|lt:${r.limitType}`}function $r(r){return`Query(target=${(function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map((i=>mf(i))).join(", ")}]`),Oo(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>jr(i))).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>jr(i))).join(",")),`Target(${n})`})(en(r))}; limitType=${r.limitType})`}function Bo(r,e){return e.isFoundDocument()&&(function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):be.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)})(r,e)&&(function(n,i){for(const s of Oi(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(r,e)&&(function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0})(r,e)&&(function(n,i){return!(n.startAt&&!(function(a,m,o){const d=Ih(a,m,o);return a.inclusive?d<=0:d<0})(n.startAt,Oi(n),i)||n.endAt&&!(function(a,m,o){const d=Ih(a,m,o);return a.inclusive?d>=0:d>0})(n.endAt,Oi(n),i))})(r,e)}function L4(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function yf(r){return(e,t)=>{let n=!1;for(const i of Oi(r)){const s=$4(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function $4(r,e,t){const n=r.field.isKeyField()?be.comparator(e.key,t.key):(function(s,a,m){const o=a.data.field(s),d=m.data.field(s);return o!==null&&d!==null?Wr(o,d):Se(42886)})(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return Se(19790,{direction:r.dir})}}class Tr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ar(this.inner,((t,n)=>{for(const[i,s]of n)e(i,s)}))}isEmpty(){return tf(this.inner)}size(){return this.innerSize}}const D4=new Ke(be.comparator);function Sn(){return D4}const wf=new Ke(be.comparator);function xi(...r){let e=wf;for(const t of r)e=e.insert(t.key,t);return e}function bf(r){let e=wf;return r.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function gr(){return Fi()}function _f(){return Fi()}function Fi(){return new Tr((r=>r.toString()),((r,e)=>r.isEqual(e)))}const N4=new Ke(be.comparator),P4=new ot(be.comparator);function Re(...r){let e=P4;for(const t of r)e=e.add(t);return e}const O4=new ot(Me);function F4(){return O4}function Zl(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uo(e)?"-0":e}}function Sf(r){return{integerValue:""+r}}function z4(r,e){return h4(e)?Sf(e):Zl(r,e)}class Uo{constructor(){this._=void 0}}function V4(r,e,t){return r instanceof go?(function(i,s){const a={fields:{[sf]:{stringValue:rf},[af]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Kl(s)&&(s=Fo(s)),s&&(a.fields[of]=s),{mapValue:a}})(t,e):r instanceof Gr?Tf(r,e):r instanceof Qi?Ef(r,e):(function(i,s){const a=Af(i,s),m=$h(a)+$h(i.Ae);return al(a)&&al(i.Ae)?Sf(m):Zl(i.serializer,m)})(r,e)}function B4(r,e,t){return r instanceof Gr?Tf(r,e):r instanceof Qi?Ef(r,e):t}function Af(r,e){return r instanceof vo?(function(n){return al(n)||(function(s){return!!s&&"doubleValue"in s})(n)})(e)?e:{integerValue:0}:null}class go extends Uo{}class Gr extends Uo{constructor(e){super(),this.elements=e}}function Tf(r,e){const t=Cf(e);for(const n of r.elements)t.some((i=>sn(i,n)))||t.push(n);return{arrayValue:{values:t}}}class Qi extends Uo{constructor(e){super(),this.elements=e}}function Ef(r,e){let t=Cf(e);for(const n of r.elements)t=t.filter((i=>!sn(i,n)));return{arrayValue:{values:t}}}class vo extends Uo{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function $h(r){return Ze(r.integerValue||r.doubleValue)}function Cf(r){return Yl(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class U4{constructor(e,t){this.field=e,this.transform=t}}function H4(r,e){return r.field.isEqual(e.field)&&(function(n,i){return n instanceof Gr&&i instanceof Gr||n instanceof Qi&&i instanceof Qi?Hr(n.elements,i.elements,sn):n instanceof vo&&i instanceof vo?sn(n.Ae,i.Ae):n instanceof go&&i instanceof go})(r.transform,e.transform)}class W4{constructor(e,t){this.version=e,this.transformResults=t}}class gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qs(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ho{}function xf(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new If(r.key,gn.none()):new ls(r.key,r.data,gn.none());{const t=r.data,n=Nt.empty();let i=new ot(ft.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new Er(r.key,n,new Ht(i.toArray()),gn.none())}}function j4(r,e,t){r instanceof ls?(function(i,s,a){const m=i.value.clone(),o=Nh(i.fieldTransforms,s,a.transformResults);m.setAll(o),s.convertToFoundDocument(a.version,m).setHasCommittedMutations()})(r,e,t):r instanceof Er?(function(i,s,a){if(!Qs(i.precondition,s))return void s.convertToUnknownDocument(a.version);const m=Nh(i.fieldTransforms,s,a.transformResults),o=s.data;o.setAll(kf(i)),o.setAll(m),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(r,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function zi(r,e,t,n){return r instanceof ls?(function(s,a,m,o){if(!Qs(s.precondition,a))return m;const d=s.value.clone(),l=Ph(s.fieldTransforms,o,a);return d.setAll(l),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null})(r,e,t,n):r instanceof Er?(function(s,a,m,o){if(!Qs(s.precondition,a))return m;const d=Ph(s.fieldTransforms,o,a),l=a.data;return l.setAll(kf(s)),l.setAll(d),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),m===null?null:m.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((f=>f.field)))})(r,e,t,n):(function(s,a,m){return Qs(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):m})(r,e,t)}function G4(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=Af(n.transform,i||null);s!=null&&(t===null&&(t=Nt.empty()),t.set(n.field,s))}return t||null}function Dh(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Hr(n,i,((s,a)=>H4(s,a)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ls extends Ho{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Er extends Ho{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function kf(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}})),e}function Nh(r,e,t){const n=new Map;Pe(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let i=0;i<t.length;i++){const s=r[i],a=s.transform,m=e.data.field(s.field);n.set(s.field,B4(a,m,t[i]))}return n}function Ph(r,e,t){const n=new Map;for(const i of r){const s=i.transform,a=t.data.field(i.field);n.set(i.field,V4(s,a,e))}return n}class If extends Ho{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q4 extends Ho{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class K4{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&j4(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=zi(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=zi(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=_f();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let m=this.applyToLocalView(a,s.mutatedFields);m=t.has(i.key)?null:m;const o=xf(a,m);o!==null&&n.set(i.key,o),a.isValidDocument()||a.convertToNoDocument(Ee.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Re())}isEqual(e){return this.batchId===e.batchId&&Hr(this.mutations,e.mutations,((t,n)=>Dh(t,n)))&&Hr(this.baseMutations,e.baseMutations,((t,n)=>Dh(t,n)))}}class ec{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Pe(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let i=(function(){return N4})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new ec(e,t,n,i)}}class Y4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Q4{constructor(e,t){this.count=e,this.unchangedNames=t}}var tt,$e;function X4(r){switch(r){case ae.OK:return Se(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Se(15467,{code:r})}}function Mf(r){if(r===void 0)return _n("GRPC error has no .code"),ae.UNKNOWN;switch(r){case tt.OK:return ae.OK;case tt.CANCELLED:return ae.CANCELLED;case tt.UNKNOWN:return ae.UNKNOWN;case tt.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case tt.INTERNAL:return ae.INTERNAL;case tt.UNAVAILABLE:return ae.UNAVAILABLE;case tt.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case tt.NOT_FOUND:return ae.NOT_FOUND;case tt.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case tt.ABORTED:return ae.ABORTED;case tt.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case tt.DATA_LOSS:return ae.DATA_LOSS;default:return Se(39323,{code:r})}}($e=tt||(tt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function J4(){return new TextEncoder}const Z4=new jn([4294967295,4294967295],0);function Oh(r){const e=J4().encode(r),t=new jd;return t.update(e),new Uint8Array(t.digest())}function Fh(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jn([t,n],0),new jn([i,s],0)]}class tc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ki(`Invalid padding: ${t}`);if(n<0)throw new ki(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ki(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new ki(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=jn.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(jn.fromNumber(n)));return i.compare(Z4)===1&&(i=new jn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Oh(e),[n,i]=Fh(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);if(!this.we(a))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new tc(s,i,t);return n.forEach((m=>a.insert(m))),a}insert(e){if(this.ge===0)return;const t=Oh(e),[n,i]=Fh(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(n,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ki extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wo{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,cs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Wo(Ee.min(),i,new Ke(Me),Sn(),Re())}}class cs{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new cs(n,t,Re(),Re(),Re())}}class Xs{constructor(e,t,n,i){this.be=e,this.removedTargetIds=t,this.key=n,this.De=i}}class Rf{constructor(e,t){this.targetId=e,this.Ce=t}}class Lf{constructor(e,t,n=pt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class zh{constructor(){this.ve=0,this.Fe=Vh(),this.Me=pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Re(),t=Re(),n=Re();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Se(38017,{changeType:s})}})),new cs(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Vh()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class e2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Sn(),this.Je=Ls(),this.He=Ls(),this.Ye=new Ke(Me)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Se(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((n,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,n=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(cl(s))if(n===0){const a=new be(s.path);this.et(t,a,vt.newNoDocument(a,Ee.min()))}else Pe(n===1,20013,{expectedCount:n});else{const a=this._t(t);if(a!==n){const m=this.ut(e),o=m?this.ct(m,e,a):1;if(o!==0){this.it(t);const d=o===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,d)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let a,m;try{a=Qn(n).toUint8Array()}catch(o){if(o instanceof nf)return Ur("Decoding the base64 bloom filter in existence filter failed ("+o.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw o}try{m=new tc(a,i,s)}catch(o){return Ur(o instanceof ki?"BloomFilter error: ":"Applying bloom filter failed: ",o),null}return m.ge===0?null:m}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let i=0;return n.forEach((s=>{const a=this.Ge.ht(),m=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(m)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const m=this.ot(a);if(m){if(s.current&&cl(m.target)){const o=new be(m.target.path);this.It(o).has(a)||this.Et(a,o)||this.et(a,o,vt.newNoDocument(o,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let n=Re();this.He.forEach(((s,a)=>{let m=!0;a.forEachWhile((o=>{const d=this.ot(o);return!d||d.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(n=n.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new Wo(e,t,this.Ye,this.je,n);return this.je=Sn(),this.Je=Ls(),this.He=Ls(),this.Ye=new Ke(Me),i}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new zh,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ot(Me),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ot(Me),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zh),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Ls(){return new Ke(be.comparator)}function Vh(){return new Ke(be.comparator)}const t2={asc:"ASCENDING",desc:"DESCENDING"},n2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},r2={and:"AND",or:"OR"};class i2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hl(r,e){return r.useProto3Json||Oo(e)?e:{value:e}}function yo(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $f(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function s2(r,e){return yo(r,e.toTimestamp())}function tn(r){return Pe(!!r,49232),Ee.fromTimestamp((function(t){const n=Yn(t);return new He(n.seconds,n.nanos)})(r))}function nc(r,e){return dl(r,e).canonicalString()}function dl(r,e){const t=(function(i){return new Ge(["projects",i.projectId,"databases",i.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Df(r){const e=Ge.fromString(r);return Pe(zf(e),10190,{key:e.toString()}),e}function fl(r,e){return nc(r.databaseId,e.path)}function xa(r,e){const t=Df(e);if(t.get(1)!==r.databaseId.projectId)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ve(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new be(Pf(t))}function Nf(r,e){return nc(r.databaseId,e)}function o2(r){const e=Df(r);return e.length===4?Ge.emptyPath():Pf(e)}function pl(r){return new Ge(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Pf(r){return Pe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Bh(r,e,t){return{name:fl(r,e),fields:t.value.mapValue.fields}}function a2(r,e){let t;if("targetChange"in e){e.targetChange;const n=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Se(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,l){return d.useProto3Json?(Pe(l===void 0||typeof l=="string",58123),pt.fromBase64String(l||"")):(Pe(l===void 0||l instanceof Buffer||l instanceof Uint8Array,16193),pt.fromUint8Array(l||new Uint8Array))})(r,e.targetChange.resumeToken),a=e.targetChange.cause,m=a&&(function(d){const l=d.code===void 0?ae.UNKNOWN:Mf(d.code);return new ve(l,d.message||"")})(a);t=new Lf(n,i,s,m||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=xa(r,n.document.name),s=tn(n.document.updateTime),a=n.document.createTime?tn(n.document.createTime):Ee.min(),m=new Nt({mapValue:{fields:n.document.fields}}),o=vt.newFoundDocument(i,s,a,m),d=n.targetIds||[],l=n.removedTargetIds||[];t=new Xs(d,l,o.key,o)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=xa(r,n.document),s=n.readTime?tn(n.readTime):Ee.min(),a=vt.newNoDocument(i,s),m=n.removedTargetIds||[];t=new Xs([],m,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=xa(r,n.document),s=n.removedTargetIds||[];t=new Xs([],s,i,null)}else{if(!("filter"in e))return Se(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new Q4(i,s),m=n.targetId;t=new Rf(m,a)}}return t}function l2(r,e){let t;if(e instanceof ls)t={update:Bh(r,e.key,e.value)};else if(e instanceof If)t={delete:fl(r,e.key)};else if(e instanceof Er)t={update:Bh(r,e.key,e.data),updateMask:v2(e.fieldMask)};else{if(!(e instanceof q4))return Se(16599,{Vt:e.type});t={verify:fl(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((n=>(function(s,a){const m=a.transform;if(m instanceof go)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Gr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Qi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof vo)return{fieldPath:a.field.canonicalString(),increment:m.Ae};throw Se(20930,{transform:a.transform})})(0,n)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:s2(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Se(27497)})(r,e.precondition)),t}function c2(r,e){return r&&r.length>0?(Pe(e!==void 0,14353),r.map((t=>(function(i,s){let a=i.updateTime?tn(i.updateTime):tn(s);return a.isEqual(Ee.min())&&(a=tn(s)),new W4(a,i.transformResults||[])})(t,e)))):[]}function u2(r,e){return{documents:[Nf(r,e.path)]}}function h2(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=Nf(r,i);const s=(function(d){if(d.length!==0)return Ff(on.create(d,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(d){if(d.length!==0)return d.map((l=>(function(u){return{field:Dr(u.field),direction:p2(u.dir)}})(l)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const m=hl(r,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:t,parent:i}}function d2(r){let e=o2(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){Pe(n===1,65062);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];t.where&&(s=(function(f){const u=Of(f);return u instanceof on&&ff(u)?u.getFilters():[u]})(t.where));let a=[];t.orderBy&&(a=(function(f){return f.map((u=>(function(c){return new mo(Nr(c.field),(function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(c.direction))})(u)))})(t.orderBy));let m=null;t.limit&&(m=(function(f){let u;return u=typeof f=="object"?f.value:f,Oo(u)?null:u})(t.limit));let o=null;t.startAt&&(o=(function(f){const u=!!f.before,h=f.values||[];return new po(h,u)})(t.startAt));let d=null;return t.endAt&&(d=(function(f){const u=!f.before,h=f.values||[];return new po(h,u)})(t.endAt)),I4(e,i,a,s,m,"F",o,d)}function f2(r,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Of(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Nr(t.unaryFilter.field);return st.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=Nr(t.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nr(t.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Nr(t.unaryFilter.field);return st.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}})(r):r.fieldFilter!==void 0?(function(t){return st.create(Nr(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return on.create(t.compositeFilter.filters.map((n=>Of(n))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Se(1026)}})(t.compositeFilter.op))})(r):Se(30097,{filter:r})}function p2(r){return t2[r]}function m2(r){return n2[r]}function g2(r){return r2[r]}function Dr(r){return{fieldPath:r.canonicalString()}}function Nr(r){return ft.fromServerFormat(r.fieldPath)}function Ff(r){return r instanceof st?(function(t){if(t.op==="=="){if(kh(t.value))return{unaryFilter:{field:Dr(t.field),op:"IS_NAN"}};if(xh(t.value))return{unaryFilter:{field:Dr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kh(t.value))return{unaryFilter:{field:Dr(t.field),op:"IS_NOT_NAN"}};if(xh(t.value))return{unaryFilter:{field:Dr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dr(t.field),op:m2(t.op),value:t.value}}})(r):r instanceof on?(function(t){const n=t.getFilters().map((i=>Ff(i)));return n.length===1?n[0]:{compositeFilter:{op:g2(t.op),filters:n}}})(r):Se(54877,{filter:r})}function v2(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function zf(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Vn{constructor(e,t,n,i,s=Ee.min(),a=Ee.min(),m=pt.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=m,this.expectedCount=o}withSequenceNumber(e){return new Vn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class y2{constructor(e){this.yt=e}}function w2(r){const e=d2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ul(e,e.limit,"L"):e}class b2{constructor(){this.Cn=new _2}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Kn.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Kn.min())}updateCollectionGroup(e,t,n){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class _2{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new ot(Ge.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new ot(Ge.comparator)).toArray()}}const Uh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vf=41943040;class Et{static withCacheSize(e){return new Et(e,Et.DEFAULT_COLLECTION_PERCENTILE,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Et.DEFAULT_COLLECTION_PERCENTILE=10,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Et.DEFAULT=new Et(Vf,Et.DEFAULT_COLLECTION_PERCENTILE,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Et.DISABLED=new Et(-1,0,0);class qr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qr(0)}static cr(){return new qr(-1)}}const Hh="LruGarbageCollector",S2=1048576;function Wh([r,e],[t,n]){const i=Me(r,t);return i===0?Me(e,n):i}class A2{constructor(e){this.Ir=e,this.buffer=new ot(Wh),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Wh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class T2{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(Hh,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ni(t)?ge(Hh,"Ignoring IndexedDB error during garbage collection: ",t):await ti(t)}await this.Vr(3e5)}))}}class E2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((n=>Math.floor(t/100*n)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Po.ce);const n=new A2(t);return this.mr.forEachTarget(e,(i=>n.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>n.Ar(i))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(Uh)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uh):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,i,s,a,m,o,d;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i)))).next((f=>(n=f,m=Date.now(),this.removeTargets(e,n,t)))).next((f=>(s=f,o=Date.now(),this.removeOrphanedDocuments(e,n)))).next((f=>(d=Date.now(),Lr()<=Ie.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-l}ms
	Determined least recently used ${i} in `+(m-a)+`ms
	Removed ${s} targets in `+(o-m)+`ms
	Removed ${f} documents in `+(d-o)+`ms
Total Duration: ${d-l}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f}))))}}function C2(r,e){return new E2(r,e)}class x2{constructor(){this.changes=new Tr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?ie.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class k2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class I2{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(n!==null&&zi(n.mutation,i,Ht.empty(),He.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.getLocalViewOfDocuments(e,n,Re()).next((()=>n))))}getLocalViewOfDocuments(e,t,n=Re()){const i=gr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((s=>{let a=xi();return s.forEach(((m,o)=>{a=a.insert(m,o.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const n=gr();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Re())))}populateOverlays(e,t,n){const i=[];return n.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,m)=>{t.set(a,m)}))}))}computeViews(e,t,n,i){let s=Sn();const a=Fi(),m=(function(){return Fi()})();return t.forEach(((o,d)=>{const l=n.get(d.key);i.has(d.key)&&(l===void 0||l.mutation instanceof Er)?s=s.insert(d.key,d):l!==void 0?(a.set(d.key,l.mutation.getFieldMask()),zi(l.mutation,d,l.mutation.getFieldMask(),He.now())):a.set(d.key,Ht.empty())})),this.recalculateAndSaveOverlays(e,s).next((o=>(o.forEach(((d,l)=>a.set(d,l))),t.forEach(((d,l)=>m.set(d,new k2(l,a.get(d)??null)))),m)))}recalculateAndSaveOverlays(e,t){const n=Fi();let i=new Ke(((a,m)=>a-m)),s=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const m of a)m.keys().forEach((o=>{const d=t.get(o);if(d===null)return;let l=n.get(o)||Ht.empty();l=m.applyToLocalView(d,l),n.set(o,l);const f=(i.get(m.batchId)||Re()).add(o);i=i.insert(m.batchId,f)}))})).next((()=>{const a=[],m=i.getReverseIterator();for(;m.hasNext();){const o=m.getNext(),d=o.key,l=o.value,f=_f();l.forEach((u=>{if(!s.has(u)){const h=xf(t.get(u),n.get(u));h!==null&&f.set(u,h),s=s.add(u)}})),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return ie.waitFor(a)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((n=>this.recalculateAndSaveOverlays(e,n)))}getDocumentsMatchingQuery(e,t,n,i){return(function(a){return be.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):M4(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):ie.resolve(gr());let m=Gi,o=s;return a.next((d=>ie.forEach(d,((l,f)=>(m<f.largestBatchId&&(m=f.largestBatchId),s.get(l)?ie.resolve():this.remoteDocumentCache.getEntry(e,l).next((u=>{o=o.insert(l,u)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,o,d,Re()))).next((l=>({batchId:m,changes:bf(l)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((n=>{let i=xi();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let a=xi();return this.indexManager.getCollectionParents(e,s).next((m=>ie.forEach(m,(o=>{const d=(function(f,u){return new zo(u,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,n,i).next((l=>{l.forEach(((f,u)=>{a=a.insert(f,u)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i)))).next((a=>{s.forEach(((o,d)=>{const l=d.getKey();a.get(l)===null&&(a=a.insert(l,vt.newInvalidDocument(l)))}));let m=xi();return a.forEach(((o,d)=>{const l=s.get(o);l!==void 0&&zi(l.mutation,d,Ht.empty(),He.now()),Bo(t,d)&&(m=m.insert(o,d))})),m}))}}class M2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:tn(i.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:w2(i.bundledQuery),readTime:tn(i.readTime)}})(t)),ie.resolve()}}class R2{constructor(){this.overlays=new Ke(be.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const n=gr();return ie.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&n.set(i,s)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((i,s)=>{this.St(e,t,s)})),ie.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.qr.get(n);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(n)),ie.resolve()}getOverlaysForCollection(e,t,n){const i=gr(),s=t.length+1,a=new be(t.child("")),m=this.overlays.getIteratorFrom(a);for(;m.hasNext();){const o=m.getNext().value,d=o.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&o.largestBatchId>n&&i.set(o.getKey(),o)}return ie.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new Ke(((d,l)=>d-l));const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let l=s.get(d.largestBatchId);l===null&&(l=gr(),s=s.insert(d.largestBatchId,l)),l.set(d.getKey(),d)}}const m=gr(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach(((d,l)=>m.set(d,l))),!(m.size()>=i)););return ie.resolve(m)}St(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(n.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Y4(t,n));let s=this.qr.get(t);s===void 0&&(s=Re(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class L2{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}class rc{constructor(){this.Qr=new ot(ut.$r),this.Ur=new ot(ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new ut(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach((n=>this.addReference(n,t)))}removeReference(e,t){this.Gr(new ut(e,t))}zr(e,t){e.forEach((n=>this.removeReference(n,t)))}jr(e){const t=new be(new Ge([])),n=new ut(t,e),i=new ut(t,e+1),s=[];return this.Ur.forEachInRange([n,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new Ge([])),n=new ut(t,e),i=new ut(t,e+1);let s=Re();return this.Ur.forEachInRange([n,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new ut(e,0),n=this.Qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class ut{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||Me(e.Yr,t.Yr)}static Kr(e,t){return Me(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}class $2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ot(ut.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new K4(s,t,n,i);this.mutationQueue.push(a);for(const m of i)this.Zr=this.Zr.add(new ut(m.key,s)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ie.resolve(a)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ei(n),s=i<0?0:i;return ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?ql:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ut(t,0),i=new ut(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,i],(a=>{const m=this.Xr(a.Yr);s.push(m)})),ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new ot(Me);return t.forEach((i=>{const s=new ut(i,0),a=new ut(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(m=>{n=n.add(m.Yr)}))})),ie.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;be.isDocumentKey(s)||(s=s.child(""));const a=new ut(new be(s),0);let m=new ot(Me);return this.Zr.forEachWhile((o=>{const d=o.key.path;return!!n.isPrefixOf(d)&&(d.length===i&&(m=m.add(o.Yr)),!0)}),a),ie.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((n=>{const i=this.Xr(n);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Pe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return ie.forEach(t.mutations,(i=>{const s=new ut(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=n}))}ir(e){}containsKey(e,t){const n=new ut(t,0),i=this.Zr.firstAfterOrEqual(n);return ie.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class D2{constructor(e){this.ri=e,this.docs=(function(){return new Ke(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ie.resolve(n?n.document.mutableCopy():vt.newInvalidDocument(t))}getEntries(e,t){let n=Sn();return t.forEach((i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():vt.newInvalidDocument(i))})),ie.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=Sn();const a=t.path,m=new be(a.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(m);for(;o.hasNext();){const{key:d,value:{document:l}}=o.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||a4(o4(l),n)<=0||(i.has(l.key)||Bo(t,l))&&(s=s.insert(l.key,l.mutableCopy()))}return ie.resolve(s)}getAllFromCollectionGroup(e,t,n,i){Se(9500)}ii(e,t){return ie.forEach(this.docs,(n=>t(n)))}newChangeBuffer(e){return new N2(this)}getSize(e){return ie.resolve(this.size)}}class N2 extends x2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(n)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class P2{constructor(e){this.persistence=e,this.si=new Tr((t=>Ql(t)),Xl),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new rc,this.targetCount=0,this.ai=qr.ur()}forEachTarget(e,t){return this.si.forEach(((n,i)=>t(i))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new qr(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.si.forEach(((a,m)=>{m.sequenceNumber<=t&&n.get(m.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,m.targetId)),i++)})),ie.waitFor(s).next((()=>i))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ie.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ie.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),ie.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ie.resolve(n)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}class Bf{constructor(e,t){this.ui={},this.overlays={},this.ci=new Po(0),this.li=!1,this.li=!0,this.hi=new L2,this.referenceDelegate=e(this),this.Pi=new P2(this),this.indexManager=new b2,this.remoteDocumentCache=(function(i){return new D2(i)})((n=>this.referenceDelegate.Ti(n))),this.serializer=new y2(t),this.Ii=new M2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new R2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new $2(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ge("MemoryPersistence","Starting transaction:",e);const i=new O2(this.ci.next());return this.referenceDelegate.Ei(),n(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return ie.or(Object.values(this.ui).map((n=>()=>n.containsKey(e,t))))}}class O2 extends c4{constructor(e){super(),this.currentSequenceNumber=e}}class ic{constructor(e){this.persistence=e,this.Ri=new rc,this.Vi=null}static mi(e){return new ic(e)}get fi(){if(this.Vi)return this.Vi;throw Se(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ie.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>n.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(n=>{const i=be.fromPath(n);return this.gi(e,i).next((s=>{s||t.removeEntry(i,Ee.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((n=>{n?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wo{constructor(e,t){this.persistence=e,this.pi=new Tr((n=>d4(n.path)),((n,i)=>n.isEqual(i))),this.garbageCollector=C2(this,t)}static mi(e,t){return new wo(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((n=>t.next((i=>n+i))))}wr(e){let t=0;return this.pr(e,(n=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((n,i)=>this.br(e,n,i).next((s=>s?ie.resolve():t(i)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((m=>{m||(n++,s.removeEntry(a,Ee.min()))})))).next((()=>s.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ks(e.data.value)),t}br(e,t,n){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ie.resolve(i!==void 0&&i>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class sc{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=i}static As(e,t){let n=Re(),i=Re();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new sc(e,t.fromCache,n,i)}}class F2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class z2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return hg()?8:u4(yt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,n).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new F2;return this.Ss(e,t,a).next((m=>{if(s.result=m,this.Vs)return this.bs(e,t,a,m.size)}))})).next((()=>s.result))}bs(e,t,n,i){return n.documentReadCount<this.fs?(Lr()<=Ie.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",$r(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Lr()<=Ie.DEBUG&&ge("QueryEngine","Query:",$r(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.gs*i?(Lr()<=Ie.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",$r(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,en(t))):ie.resolve())}ys(e,t){if(Lh(t))return ie.resolve(null);let n=en(t);return this.indexManager.getIndexType(e,n).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=ul(t,null,"F"),n=en(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((s=>{const a=Re(...s);return this.ps.getDocuments(e,a).next((m=>this.indexManager.getMinOffset(e,n).next((o=>{const d=this.Ds(t,m);return this.Cs(t,d,a,o.readTime)?this.ys(e,ul(t,null,"F")):this.vs(e,d,t,o)}))))})))))}ws(e,t,n,i){return Lh(t)||i.isEqual(Ee.min())?ie.resolve(null):this.ps.getDocuments(e,n).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,n,i)?ie.resolve(null):(Lr()<=Ie.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$r(t)),this.vs(e,a,t,s4(i,Gi)).next((m=>m)))}))}Ds(e,t){let n=new ot(yf(e));return t.forEach(((i,s)=>{Bo(e,s)&&(n=n.add(s))})),n}Cs(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,n){return Lr()<=Ie.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",$r(t)),this.ps.getDocumentsMatchingQuery(e,t,Kn.min(),n)}vs(e,t,n,i){return this.ps.getDocumentsMatchingQuery(e,n,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}const oc="LocalStore",V2=3e8;class B2{constructor(e,t,n,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ke(Me),this.xs=new Tr((s=>Ql(s)),Xl),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function U2(r,e,t,n){return new B2(r,e,t,n)}async function Uf(r,e){const t=Ce(r);return await t.persistence.runTransaction("Handle user change","readonly",(n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(n)))).next((s=>{const a=[],m=[];let o=Re();for(const d of i){a.push(d.batchId);for(const l of d.mutations)o=o.add(l.key)}for(const d of s){m.push(d.batchId);for(const l of d.mutations)o=o.add(l.key)}return t.localDocuments.getDocuments(n,o).next((d=>({Ls:d,removedBatchIds:a,addedBatchIds:m})))}))}))}function H2(r,e){const t=Ce(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(n=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,o,d,l){const f=d.batch,u=f.keys();let h=ie.resolve();return u.forEach((c=>{h=h.next((()=>l.getEntry(o,c))).next((p=>{const g=d.docVersions.get(c);Pe(g!==null,48541),p.version.compareTo(g)<0&&(f.applyToRemoteDocument(p,d),p.isValidDocument()&&(p.setReadTime(d.commitVersion),l.addEntry(p)))}))})),h.next((()=>m.mutationQueue.removeMutationBatch(o,f)))})(t,n,e,s).next((()=>s.apply(n))).next((()=>t.mutationQueue.performConsistencyCheck(n))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,(function(m){let o=Re();for(let d=0;d<m.mutationResults.length;++d)m.mutationResults[d].transformResults.length>0&&(o=o.add(m.batch.mutations[d].key));return o})(e)))).next((()=>t.localDocuments.getDocuments(n,i)))}))}function Hf(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function W2(r,e){const t=Ce(r),n=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const m=[];e.targetChanges.forEach(((l,f)=>{const u=i.get(f);if(!u)return;m.push(t.Pi.removeMatchingKeys(s,l.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(s,l.addedDocuments,f))));let h=u.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?h=h.withResumeToken(pt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):l.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(l.resumeToken,n)),i=i.insert(f,h),(function(p,g,y){return p.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=V2?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0})(u,h,l)&&m.push(t.Pi.updateTargetData(s,h))}));let o=Sn(),d=Re();if(e.documentUpdates.forEach((l=>{e.resolvedLimboDocuments.has(l)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(s,l))})),m.push(j2(s,a,e.documentUpdates).next((l=>{o=l.ks,d=l.qs}))),!n.isEqual(Ee.min())){const l=t.Pi.getLastRemoteSnapshotVersion(s).next((f=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n)));m.push(l)}return ie.waitFor(m).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,o,d))).next((()=>o))})).then((s=>(t.Ms=i,s)))}function j2(r,e,t){let n=Re(),i=Re();return t.forEach((s=>n=n.add(s))),e.getEntries(r,n).next((s=>{let a=Sn();return t.forEach(((m,o)=>{const d=s.get(m);o.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(m)),o.isNoDocument()&&o.version.isEqual(Ee.min())?(e.removeEntry(m,o.readTime),a=a.insert(m,o)):!d.isValidDocument()||o.version.compareTo(d.version)>0||o.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(o),a=a.insert(m,o)):ge(oc,"Ignoring outdated watch update for ",m,". Current version:",d.version," Watch version:",o.version)})),{ks:a,qs:i}}))}function G2(r,e){const t=Ce(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(n=>(e===void 0&&(e=ql),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e))))}function q2(r,e){const t=Ce(r);return t.persistence.runTransaction("Allocate target","readwrite",(n=>{let i;return t.Pi.getTargetData(n,e).next((s=>s?(i=s,ie.resolve(i)):t.Pi.allocateTargetId(n).next((a=>(i=new Vn(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.Pi.addTargetData(n,i).next((()=>i)))))))})).then((n=>{const i=t.Ms.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(n.targetId,n),t.xs.set(e,n.targetId)),n}))}async function ml(r,e,t){const n=Ce(r),i=n.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,(a=>n.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!ni(a))throw a;ge(oc,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Ms=n.Ms.remove(e),n.xs.delete(i.target)}function jh(r,e,t){const n=Ce(r);let i=Ee.min(),s=Re();return n.persistence.runTransaction("Execute query","readwrite",(a=>(function(o,d,l){const f=Ce(o),u=f.xs.get(l);return u!==void 0?ie.resolve(f.Ms.get(u)):f.Pi.getTargetData(d,l)})(n,a,en(e)).next((m=>{if(m)return i=m.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(a,m.targetId).next((o=>{s=o}))})).next((()=>n.Fs.getDocumentsMatchingQuery(a,e,t?i:Ee.min(),t?s:Re()))).next((m=>(K2(n,L4(e),m),{documents:m,Qs:s})))))}function K2(r,e,t){let n=r.Os.get(e)||Ee.min();t.forEach(((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)})),r.Os.set(e,n)}class Gh{constructor(){this.activeTargetIds=F4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Y2{constructor(){this.Mo=new Gh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Gh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Q2{Oo(e){}shutdown(){}}const qh="ConnectivityMonitor";class Kh{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(qh,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(qh,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let $s=null;function gl(){return $s===null?$s=(function(){return 268435456+Math.round(2147483648*Math.random())})():$s++,"0x"+$s.toString(16)}const ka="RestConnection",X2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class J2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${i}`,this.Wo=this.databaseId.database===ho?`project_id=${n}`:`project_id=${n}&database_id=${i}`}Go(e,t,n,i,s){const a=gl(),m=this.zo(e,t.toUriEncodedString());ge(ka,`Sending RPC '${e}' ${a}:`,m,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,i,s);const{host:d}=new URL(m),l=Xr(d);return this.Jo(e,m,o,n,l).then((f=>(ge(ka,`Received RPC '${e}' ${a}: `,f),f)),(f=>{throw Ur(ka,`RPC '${e}' ${a} failed with error: `,f,"url: ",m,"request:",n),f}))}Ho(e,t,n,i,s,a){return this.Go(e,t,n,i,s)}jo(e,t,n){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ei})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),n&&n.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const n=X2[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class Z2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const mt="WebChannelConnection";class ew extends J2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,s){const a=gl();return new Promise(((m,o)=>{const d=new Gd;d.setWithCredentials(!0),d.listenOnce(qd.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case qs.NO_ERROR:const f=d.getResponseJson();ge(mt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),m(f);break;case qs.TIMEOUT:ge(mt,`RPC '${e}' ${a} timed out`),o(new ve(ae.DEADLINE_EXCEEDED,"Request time out"));break;case qs.HTTP_ERROR:const u=d.getStatus();if(ge(mt,`RPC '${e}' ${a} failed with status:`,u,"response text:",d.getResponseText()),u>0){let h=d.getResponseJson();Array.isArray(h)&&(h=h[0]);const c=h?.error;if(c&&c.status&&c.message){const p=(function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(w)>=0?w:ae.UNKNOWN})(c.status);o(new ve(p,c.message))}else o(new ve(ae.UNKNOWN,"Server responded with status "+d.getStatus()))}else o(new ve(ae.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ge(mt,`RPC '${e}' ${a} completed.`)}}));const l=JSON.stringify(i);ge(mt,`RPC '${e}' ${a} sending request:`,i),d.send(t,"POST",l,n,15)}))}T_(e,t,n){const i=gl(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Qd(),m=Yd(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(o.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const l=s.join("");ge(mt,`Creating RPC '${e}' stream ${i}: ${l}`,o);const f=a.createWebChannel(l,o);this.I_(f);let u=!1,h=!1;const c=new Z2({Yo:g=>{h?ge(mt,`Not sending because RPC '${e}' stream ${i} is closed:`,g):(u||(ge(mt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),u=!0),ge(mt,`RPC '${e}' stream ${i} sending:`,g),f.send(g))},Zo:()=>f.close()}),p=(g,y,w)=>{g.listen(y,(M=>{try{w(M)}catch(R){setTimeout((()=>{throw R}),0)}}))};return p(f,Ci.EventType.OPEN,(()=>{h||(ge(mt,`RPC '${e}' stream ${i} transport opened.`),c.o_())})),p(f,Ci.EventType.CLOSE,(()=>{h||(h=!0,ge(mt,`RPC '${e}' stream ${i} transport closed`),c.a_(),this.E_(f))})),p(f,Ci.EventType.ERROR,(g=>{h||(h=!0,Ur(mt,`RPC '${e}' stream ${i} transport errored. Name:`,g.name,"Message:",g.message),c.a_(new ve(ae.UNAVAILABLE,"The operation could not be completed")))})),p(f,Ci.EventType.MESSAGE,(g=>{if(!h){const y=g.data[0];Pe(!!y,16349);const w=y,M=w?.error||w[0]?.error;if(M){ge(mt,`RPC '${e}' stream ${i} received error:`,M);const R=M.status;let x=(function(k){const T=tt[k];if(T!==void 0)return Mf(T)})(R),S=M.message;x===void 0&&(x=ae.INTERNAL,S="Unknown error status: "+R+" with message "+M.message),h=!0,c.a_(new ve(x,S)),f.close()}else ge(mt,`RPC '${e}' stream ${i} received:`,y),c.u_(y)}})),p(m,Kd.STAT_EVENT,(g=>{g.stat===il.PROXY?ge(mt,`RPC '${e}' stream ${i} detected buffering proxy`):g.stat===il.NOPROXY&&ge(mt,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{c.__()}),0),c}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ia(){return typeof document<"u"?document:null}function jo(r){return new i2(r,!0)}class Wf{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=n,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-n);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Yh="PersistentStream";class jf{constructor(e,t,n,i,s,a,m,o){this.Mi=e,this.S_=n,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=m,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wf(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(_n(t.toString()),_n("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([n,i])=>{this.D_===t&&this.G_(n,i)}),(n=>{e((()=>{const i=new ve(ae.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(i)}))}))}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{n((()=>this.listener.Xo()))})),this.stream.t_((()=>{n((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{n((()=>this.z_(i)))})),this.stream.onMessage((i=>{n((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(Yh,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ge(Yh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class tw extends jf{constructor(e,t,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=a2(this.serializer,e),n=(function(s){if(!("targetChange"in s))return Ee.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ee.min():a.readTime?tn(a.readTime):Ee.min()})(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=pl(this.serializer),t.addTarget=(function(s,a){let m;const o=a.target;if(m=cl(o)?{documents:u2(s,o)}:{query:h2(s,o).ft},m.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){m.resumeToken=$f(s,a.resumeToken);const d=hl(s,a.expectedCount);d!==null&&(m.expectedCount=d)}else if(a.snapshotVersion.compareTo(Ee.min())>0){m.readTime=yo(s,a.snapshotVersion.toTimestamp());const d=hl(s,a.expectedCount);d!==null&&(m.expectedCount=d)}return m})(this.serializer,e);const n=f2(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=pl(this.serializer),t.removeTarget=e,this.q_(t)}}class nw extends jf{constructor(e,t,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=c2(e.writeResults,e.commitTime),n=tn(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=pl(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((n=>l2(this.serializer,n)))};this.q_(t)}}class rw{}class iw extends rw{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,dl(t,n),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ve(ae.UNKNOWN,s.toString())}))}Ho(e,t,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,m])=>this.connection.Ho(e,dl(t,n),i,a,m,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ve(ae.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class sw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_n(t),this.aa=!1):ge("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Sr="RemoteStore";class ow{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{n.enqueueAndForget((async()=>{Cr(this)&&(ge(Sr,"Restarting streams for network reachability change."),await(async function(o){const d=Ce(o);d.Ea.add(4),await us(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Go(d)})(this))}))})),this.Ra=new sw(n,i)}}async function Go(r){if(Cr(r))for(const e of r.da)await e(!0)}async function us(r){for(const e of r.da)await e(!1)}function Gf(r,e){const t=Ce(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),uc(t)?cc(t):ri(t).O_()&&lc(t,e))}function ac(r,e){const t=Ce(r),n=ri(t);t.Ia.delete(e),n.O_()&&qf(t,e),t.Ia.size===0&&(n.O_()?n.L_():Cr(t)&&t.Ra.set("Unknown"))}function lc(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ri(r).Y_(e)}function qf(r,e){r.Va.Ue(e),ri(r).Z_(e)}function cc(r){r.Va=new e2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ri(r).start(),r.Ra.ua()}function uc(r){return Cr(r)&&!ri(r).x_()&&r.Ia.size>0}function Cr(r){return Ce(r).Ea.size===0}function Kf(r){r.Va=void 0}async function aw(r){r.Ra.set("Online")}async function lw(r){r.Ia.forEach(((e,t)=>{lc(r,e)}))}async function cw(r,e){Kf(r),uc(r)?(r.Ra.ha(e),cc(r)):r.Ra.set("Unknown")}async function uw(r,e,t){if(r.Ra.set("Online"),e instanceof Lf&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const m of s.targetIds)i.Ia.has(m)&&(await i.remoteSyncer.rejectListen(m,a),i.Ia.delete(m),i.Va.removeTarget(m))})(r,e)}catch(n){ge(Sr,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await bo(r,n)}else if(e instanceof Xs?r.Va.Ze(e):e instanceof Rf?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ee.min()))try{const n=await Hf(r.localStore);t.compareTo(n)>=0&&await(function(s,a){const m=s.Va.Tt(a);return m.targetChanges.forEach(((o,d)=>{if(o.resumeToken.approximateByteSize()>0){const l=s.Ia.get(d);l&&s.Ia.set(d,l.withResumeToken(o.resumeToken,a))}})),m.targetMismatches.forEach(((o,d)=>{const l=s.Ia.get(o);if(!l)return;s.Ia.set(o,l.withResumeToken(pt.EMPTY_BYTE_STRING,l.snapshotVersion)),qf(s,o);const f=new Vn(l.target,o,d,l.sequenceNumber);lc(s,f)})),s.remoteSyncer.applyRemoteEvent(m)})(r,t)}catch(n){ge(Sr,"Failed to raise snapshot:",n),await bo(r,n)}}async function bo(r,e,t){if(!ni(e))throw e;r.Ea.add(1),await us(r),r.Ra.set("Offline"),t||(t=()=>Hf(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ge(Sr,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await Go(r)}))}function Yf(r,e){return e().catch((t=>bo(r,t,e)))}async function qo(r){const e=Ce(r),t=Jn(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ql;for(;hw(e);)try{const i=await G2(e.localStore,n);if(i===null){e.Ta.length===0&&t.L_();break}n=i.batchId,dw(e,i)}catch(i){await bo(e,i)}Qf(e)&&Xf(e)}function hw(r){return Cr(r)&&r.Ta.length<10}function dw(r,e){r.Ta.push(e);const t=Jn(r);t.O_()&&t.X_&&t.ea(e.mutations)}function Qf(r){return Cr(r)&&!Jn(r).x_()&&r.Ta.length>0}function Xf(r){Jn(r).start()}async function fw(r){Jn(r).ra()}async function pw(r){const e=Jn(r);for(const t of r.Ta)e.ea(t.mutations)}async function mw(r,e,t){const n=r.Ta.shift(),i=ec.from(n,e,t);await Yf(r,(()=>r.remoteSyncer.applySuccessfulWrite(i))),await qo(r)}async function gw(r,e){e&&Jn(r).X_&&await(async function(n,i){if((function(a){return X4(a)&&a!==ae.ABORTED})(i.code)){const s=n.Ta.shift();Jn(n).B_(),await Yf(n,(()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i))),await qo(n)}})(r,e),Qf(r)&&Xf(r)}async function Qh(r,e){const t=Ce(r);t.asyncQueue.verifyOperationInProgress(),ge(Sr,"RemoteStore received new credentials");const n=Cr(t);t.Ea.add(3),await us(t),n&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Go(t)}async function vw(r,e){const t=Ce(r);e?(t.Ea.delete(2),await Go(t)):e||(t.Ea.add(2),await us(t),t.Ra.set("Unknown"))}function ri(r){return r.ma||(r.ma=(function(t,n,i){const s=Ce(t);return s.sa(),new tw(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(r.datastore,r.asyncQueue,{Xo:aw.bind(null,r),t_:lw.bind(null,r),r_:cw.bind(null,r),H_:uw.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),uc(r)?cc(r):r.Ra.set("Unknown")):(await r.ma.stop(),Kf(r))}))),r.ma}function Jn(r){return r.fa||(r.fa=(function(t,n,i){const s=Ce(t);return s.sa(),new nw(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:fw.bind(null,r),r_:gw.bind(null,r),ta:pw.bind(null,r),na:mw.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await qo(r)):(await r.fa.stop(),r.Ta.length>0&&(ge(Sr,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class hc{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new Gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const a=Date.now()+n,m=new hc(e,t,a,i,s);return m.start(n),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ve(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dc(r,e){if(_n("AsyncQueue",`${e}: ${r}`),ni(r))return new ve(ae.UNAVAILABLE,`${e}: ${r}`);throw r}class zr{static emptySet(e){return new zr(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||be.comparator(t.key,n.key):(t,n)=>be.comparator(t.key,n.key),this.keyedMap=xi(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new zr;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Xh{constructor(){this.ga=new Ke(be.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(t,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(t):e.type===1&&n.type===2?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Se(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Kr{constructor(e,t,n,i,s,a,m,o,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=m,this.excludesMetadataChanges=o,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,i,s){const a=[];return t.forEach((m=>{a.push({type:0,doc:m})})),new Kr(e,t,zr.emptySet(t),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class yw{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ww{constructor(){this.queries=Jh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,n){const i=Ce(t),s=i.queries;i.queries=Jh(),s.forEach(((a,m)=>{for(const o of m.Sa)o.onError(n)}))})(this,new ve(ae.ABORTED,"Firestore shutting down"))}}function Jh(){return new Tr((r=>vf(r)),Vo)}async function bw(r,e){const t=Ce(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(n=2):(s=new yw,n=e.Da()?0:1);try{switch(n){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const m=dc(a,`Initialization of query '${$r(e.query)}' failed`);return void e.onError(m)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&fc(t)}async function _w(r,e){const t=Ce(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function Sw(r,e){const t=Ce(r);let n=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const m of a.Sa)m.Fa(i)&&(n=!0);a.wa=i}}n&&fc(t)}function Aw(r,e,t){const n=Ce(r),i=n.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);n.queries.delete(e)}function fc(r){r.Ca.forEach((e=>{e.next()}))}var vl,Zh;(Zh=vl||(vl={})).Ma="default",Zh.Cache="cache";class Tw{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new Kr(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const n=t!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Kr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vl.Cache}}class Jf{constructor(e){this.key=e}}class Zf{constructor(e){this.key=e}}class Ew{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Re(),this.mutatedKeys=Re(),this.eu=yf(e),this.tu=new zr(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Xh,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,m=!1;const o=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((l,f)=>{const u=i.get(l),h=Bo(this.query,f)?f:null,c=!!u&&this.mutatedKeys.has(u.key),p=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;u&&h?u.data.isEqual(h.data)?c!==p&&(n.track({type:3,doc:h}),g=!0):this.su(u,h)||(n.track({type:2,doc:h}),g=!0,(o&&this.eu(h,o)>0||d&&this.eu(h,d)<0)&&(m=!0)):!u&&h?(n.track({type:0,doc:h}),g=!0):u&&!h&&(n.track({type:1,doc:u}),g=!0,(o||d)&&(m=!0)),g&&(h?(a=a.add(h),s=p?s.add(l):s.delete(l)):(a=a.delete(l),s=s.delete(l)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const l=this.query.limitType==="F"?a.last():a.first();a=a.delete(l.key),s=s.delete(l.key),n.track({type:1,doc:l})}return{tu:a,iu:n,Cs:m,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((l,f)=>(function(h,c){const p=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Rt:g})}};return p(h)-p(c)})(l.type,f.type)||this.eu(l.doc,f.doc))),this.ou(n),i=i??!1;const m=t&&!i?this._u():[],o=this.Xa.size===0&&this.current&&!i?1:0,d=o!==this.Za;return this.Za=o,a.length!==0||d?{snapshot:new Kr(this.query,e.tu,s,a,e.mutatedKeys,o===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Re(),this.tu.forEach((n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))}));const t=[];return e.forEach((n=>{this.Xa.has(n)||t.push(new Zf(n))})),this.Xa.forEach((n=>{e.has(n)||t.push(new Jf(n))})),t}cu(e){this.Ya=e.Qs,this.Xa=Re();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Kr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const pc="SyncEngine";class Cw{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class xw{constructor(e){this.key=e,this.hu=!1}}class kw{constructor(e,t,n,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Tr((m=>vf(m)),Vo),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(be.comparator),this.Au=new Map,this.Ru=new rc,this.Vu={},this.mu=new Map,this.fu=qr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Iw(r,e,t=!0){const n=sp(r);let i;const s=n.Tu.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await ep(n,e,t,!0),i}async function Mw(r,e){const t=sp(r);await ep(t,e,!0,!1)}async function ep(r,e,t,n){const i=await q2(r.localStore,en(e)),s=i.targetId,a=r.sharedClientState.addLocalQueryTarget(s,t);let m;return n&&(m=await Rw(r,e,s,a==="current",i.resumeToken)),r.isPrimaryClient&&t&&Gf(r.remoteStore,i),m}async function Rw(r,e,t,n,i){r.pu=(f,u,h)=>(async function(p,g,y,w){let M=g.view.ru(y);M.Cs&&(M=await jh(p.localStore,g.query,!1).then((({documents:E})=>g.view.ru(E,M))));const R=w&&w.targetChanges.get(g.targetId),x=w&&w.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(M,p.isPrimaryClient,R,x);return t0(p,g.targetId,S.au),S.snapshot})(r,f,u,h);const s=await jh(r.localStore,e,!0),a=new Ew(e,s.Qs),m=a.ru(s.documents),o=cs.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),d=a.applyChanges(m,r.isPrimaryClient,o);t0(r,t,d.au);const l=new Cw(e,t,a);return r.Tu.set(e,l),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),d.snapshot}async function Lw(r,e,t){const n=Ce(r),i=n.Tu.get(e),s=n.Iu.get(i.targetId);if(s.length>1)return n.Iu.set(i.targetId,s.filter((a=>!Vo(a,e)))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await ml(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),t&&ac(n.remoteStore,i.targetId),yl(n,i.targetId)})).catch(ti)):(yl(n,i.targetId),await ml(n.localStore,i.targetId,!0))}async function $w(r,e){const t=Ce(r),n=t.Tu.get(e),i=t.Iu.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),ac(t.remoteStore,n.targetId))}async function Dw(r,e,t){const n=Bw(r);try{const i=await(function(a,m){const o=Ce(a),d=He.now(),l=m.reduce(((h,c)=>h.add(c.key)),Re());let f,u;return o.persistence.runTransaction("Locally write mutations","readwrite",(h=>{let c=Sn(),p=Re();return o.Ns.getEntries(h,l).next((g=>{c=g,c.forEach(((y,w)=>{w.isValidDocument()||(p=p.add(y))}))})).next((()=>o.localDocuments.getOverlayedDocuments(h,c))).next((g=>{f=g;const y=[];for(const w of m){const M=G4(w,f.get(w.key).overlayedDocument);M!=null&&y.push(new Er(w.key,M,uf(M.value.mapValue),gn.exists(!0)))}return o.mutationQueue.addMutationBatch(h,d,y,m)})).next((g=>{u=g;const y=g.applyToLocalDocumentSet(f,p);return o.documentOverlayCache.saveOverlays(h,g.batchId,y)}))})).then((()=>({batchId:u.batchId,changes:bf(f)})))})(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),(function(a,m,o){let d=a.Vu[a.currentUser.toKey()];d||(d=new Ke(Me)),d=d.insert(m,o),a.Vu[a.currentUser.toKey()]=d})(n,i.batchId,t),await hs(n,i.changes),await qo(n.remoteStore)}catch(i){const s=dc(i,"Failed to persist write");t.reject(s)}}async function tp(r,e){const t=Ce(r);try{const n=await W2(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Pe(a.hu,14607):i.removedDocuments.size>0&&(Pe(a.hu,42227),a.hu=!1))})),await hs(t,n,e)}catch(n){await ti(n)}}function e0(r,e,t){const n=Ce(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Tu.forEach(((s,a)=>{const m=a.view.va(e);m.snapshot&&i.push(m.snapshot)})),(function(a,m){const o=Ce(a);o.onlineState=m;let d=!1;o.queries.forEach(((l,f)=>{for(const u of f.Sa)u.va(m)&&(d=!0)})),d&&fc(o)})(n.eventManager,e),i.length&&n.Pu.H_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Nw(r,e,t){const n=Ce(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Au.get(e),s=i&&i.key;if(s){let a=new Ke(be.comparator);a=a.insert(s,vt.newNoDocument(s,Ee.min()));const m=Re().add(s),o=new Wo(Ee.min(),new Map,new Ke(Me),a,m);await tp(n,o),n.du=n.du.remove(s),n.Au.delete(e),mc(n)}else await ml(n.localStore,e,!1).then((()=>yl(n,e,t))).catch(ti)}async function Pw(r,e){const t=Ce(r),n=e.batch.batchId;try{const i=await H2(t.localStore,e);rp(t,n,null),np(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await hs(t,i)}catch(i){await ti(i)}}async function Ow(r,e,t){const n=Ce(r);try{const i=await(function(a,m){const o=Ce(a);return o.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let l;return o.mutationQueue.lookupMutationBatch(d,m).next((f=>(Pe(f!==null,37113),l=f.keys(),o.mutationQueue.removeMutationBatch(d,f)))).next((()=>o.mutationQueue.performConsistencyCheck(d))).next((()=>o.documentOverlayCache.removeOverlaysForBatchId(d,l,m))).next((()=>o.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,l))).next((()=>o.localDocuments.getDocuments(d,l)))}))})(n.localStore,e);rp(n,e,t),np(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await hs(n,i)}catch(i){await ti(i)}}function np(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function rp(r,e,t){const n=Ce(r);let i=n.Vu[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Vu[n.currentUser.toKey()]=i}}function yl(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Iu.get(e))r.Tu.delete(n),t&&r.Pu.yu(n,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((n=>{r.Ru.containsKey(n)||ip(r,n)}))}function ip(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(ac(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),mc(r))}function t0(r,e,t){for(const n of t)n instanceof Jf?(r.Ru.addReference(n.key,e),Fw(r,n)):n instanceof Zf?(ge(pc,"Document no longer in limbo: "+n.key),r.Ru.removeReference(n.key,e),r.Ru.containsKey(n.key)||ip(r,n.key)):Se(19791,{wu:n})}function Fw(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Eu.has(n)||(ge(pc,"New document in limbo: "+t),r.Eu.add(n),mc(r))}function mc(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new be(Ge.fromString(e)),n=r.fu.next();r.Au.set(n,new xw(t)),r.du=r.du.insert(t,n),Gf(r.remoteStore,new Vn(en(Jl(t.path)),n,"TargetPurposeLimboResolution",Po.ce))}}async function hs(r,e,t){const n=Ce(r),i=[],s=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach(((m,o)=>{a.push(n.pu(o,e,t).then((d=>{if((d||t)&&n.isPrimaryClient){const l=d?!d.fromCache:t?.targetChanges.get(o.targetId)?.current;n.sharedClientState.updateQueryState(o.targetId,l?"current":"not-current")}if(d){i.push(d);const l=sc.As(o.targetId,d);s.push(l)}})))})),await Promise.all(a),n.Pu.H_(i),await(async function(o,d){const l=Ce(o);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>ie.forEach(d,(u=>ie.forEach(u.Es,(h=>l.persistence.referenceDelegate.addReference(f,u.targetId,h))).next((()=>ie.forEach(u.ds,(h=>l.persistence.referenceDelegate.removeReference(f,u.targetId,h)))))))))}catch(f){if(!ni(f))throw f;ge(oc,"Failed to update sequence numbers: "+f)}for(const f of d){const u=f.targetId;if(!f.fromCache){const h=l.Ms.get(u),c=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(c);l.Ms=l.Ms.insert(u,p)}}})(n.localStore,s))}async function zw(r,e){const t=Ce(r);if(!t.currentUser.isEqual(e)){ge(pc,"User change. New user:",e.toKey());const n=await Uf(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((m=>{m.forEach((o=>{o.reject(new ve(ae.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await hs(t,n.Ls)}}function Vw(r,e){const t=Ce(r),n=t.Au.get(e);if(n&&n.hu)return Re().add(n.key);{let i=Re();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const m=t.Tu.get(a);i=i.unionWith(m.view.nu)}return i}}function sp(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=tp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Nw.bind(null,e),e.Pu.H_=Sw.bind(null,e.eventManager),e.Pu.yu=Aw.bind(null,e.eventManager),e}function Bw(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ow.bind(null,e),e}class _o{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jo(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return U2(this.persistence,new z2,e.initialUser,this.serializer)}Cu(e){return new Bf(ic.mi,this.serializer)}Du(e){return new Y2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_o.provider={build:()=>new _o};class Uw extends _o{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Pe(this.persistence.referenceDelegate instanceof wo,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new T2(n,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Et.withCacheSize(this.cacheSizeBytes):Et.DEFAULT;return new Bf((n=>wo.mi(n,t)),this.serializer)}}class wl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>e0(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=zw.bind(null,this.syncEngine),await vw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ww})()}createDatastore(e){const t=jo(e.databaseInfo.databaseId),n=(function(s){return new ew(s)})(e.databaseInfo);return(function(s,a,m,o){return new iw(s,a,m,o)})(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return(function(n,i,s,a,m){return new ow(n,i,s,a,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>e0(this.syncEngine,t,0)),(function(){return Kh.v()?new Kh:new Q2})())}createSyncEngine(e,t){return(function(i,s,a,m,o,d,l){const f=new kw(i,s,a,m,o,d);return l&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const n=Ce(t);ge(Sr,"RemoteStore shutting down."),n.Ea.add(5),await us(n),n.Aa.shutdown(),n.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}wl.provider={build:()=>new wl};class Hw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_n("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}const Zn="FirestoreClient";class Ww{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=gt.UNAUTHENTICATED,this.clientId=jl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,(async a=>{ge(Zn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(n,(a=>(ge(Zn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=dc(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Ma(r,e){r.asyncQueue.verifyOperationInProgress(),ge(Zn,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener((async i=>{n.isEqual(i)||(await Uf(e.localStore,i),n=i)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function n0(r,e){r.asyncQueue.verifyOperationInProgress();const t=await jw(r);ge(Zn,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((n=>Qh(e.remoteStore,n))),r.setAppCheckTokenChangeListener(((n,i)=>Qh(e.remoteStore,i))),r._onlineComponents=e}async function jw(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ge(Zn,"Using user provided OfflineComponentProvider");try{await Ma(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ae.FAILED_PRECONDITION||i.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Ur("Error using user provided cache. Falling back to memory cache: "+t),await Ma(r,new _o)}}else ge(Zn,"Using default OfflineComponentProvider"),await Ma(r,new Uw(void 0));return r._offlineComponents}async function op(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ge(Zn,"Using user provided OnlineComponentProvider"),await n0(r,r._uninitializedComponentsProvider._online)):(ge(Zn,"Using default OnlineComponentProvider"),await n0(r,new wl))),r._onlineComponents}function Gw(r){return op(r).then((e=>e.syncEngine))}async function qw(r){const e=await op(r),t=e.eventManager;return t.onListen=Iw.bind(null,e.syncEngine),t.onUnlisten=Lw.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Mw.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$w.bind(null,e.syncEngine),t}function Kw(r,e,t={}){const n=new Gn;return r.asyncQueue.enqueueAndForget((async()=>(function(s,a,m,o,d){const l=new Hw({next:u=>{l.Nu(),a.enqueueAndForget((()=>_w(s,f)));const h=u.docs.has(m);!h&&u.fromCache?d.reject(new ve(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&u.fromCache&&o&&o.source==="server"?d.reject(new ve(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(u)},error:u=>d.reject(u)}),f=new Tw(Jl(m.path),l,{includeMetadataChanges:!0,qa:!0});return bw(s,f)})(await qw(r),r.asyncQueue,e,t,n))),n.promise}function ap(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const r0=new Map;const lp="firestore.googleapis.com",i0=!0;class s0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ve(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lp,this.ssl=i0}else this.host=e.host,this.ssl=e.ssl??i0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Vf;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S2)throw new ve(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}i4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ap(e.experimentalLongPollingOptions??{}),(function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new ve(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(n,i){return n.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gc{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ve(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ve(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(n){if(!n)return new qy;switch(n.type){case"firstParty":return new Xy(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new ve(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const n=r0.get(t);n&&(ge("ComponentProvider","Removing Datastore"),r0.delete(t),n.terminate())})(this),Promise.resolve()}}function Yw(r,e,t,n={}){r=ji(r,gc);const i=Xr(e),s=r._getSettings(),a={...s,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${t}`;i&&(id(`https://${m}`),sd("Firestore",!0)),s.host!==lp&&s.host!==m&&Ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const o={...s,host:m,ssl:i,emulatorOptions:n};if(!qn(o,a)&&(r._setSettings(o),n.mockUserToken)){let d,l;if(typeof n.mockUserToken=="string")d=n.mockUserToken,l=gt.MOCK_USER;else{d=ng(n.mockUserToken,r._app?.options.projectId);const f=n.mockUserToken.sub||n.mockUserToken.user_id;if(!f)throw new ve(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new gt(f)}r._authCredentials=new Ky(new Jd(d,l))}}class vc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vc(this.firestore,e,this._query)}}class ht{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}toJSON(){return{type:ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(as(t,ht._jsonSchema))return new ht(e,n||null,new be(Ge.fromString(t.referencePath)))}}ht._jsonSchemaVersion="firestore/documentReference/1.0",ht._jsonSchema={type:nt("string",ht._jsonSchemaVersion),referencePath:nt("string")};class Xi extends vc{constructor(e,t,n){super(e,t,Jl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new be(e))}withConverter(e){return new Xi(this.firestore,e,this._path)}}function cp(r,e,...t){if(r=Lt(r),arguments.length===1&&(e=jl.newId()),r4("doc","path",e),r instanceof gc){const n=Ge.fromString(e,...t);return wh(n),new ht(r,null,new be(n))}{if(!(r instanceof ht||r instanceof Xi))throw new ve(ae.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Ge.fromString(e,...t));return wh(n),new ht(r.firestore,r instanceof Xi?r.converter:null,new be(n))}}const o0="AsyncQueue";class a0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wf(this,"async_queue_retry"),this._c=()=>{const n=Ia();n&&ge(o0,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const t=Ia();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ia();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Gn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ni(e))throw e;ge(o0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((n=>{throw this.nc=n,this.rc=!1,_n("INTERNAL UNHANDLED ERROR: ",l0(n)),n})).then((n=>(this.rc=!1,n))))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=hc.createAndSchedule(this,e,t,n,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&Se(47125,{Pc:l0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,n)=>t.targetTimeMs-n.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function l0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class yc extends gc{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new a0,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a0(e),this._firestoreClient=void 0,await e}}}function Qw(r,e){const t=typeof r=="object"?r:cd(),n=typeof r=="string"?r:ho,i=$l(t,"firestore").getImmediate({identifier:n});if(!i._initialized){const s=eg("firestore");s&&Yw(i,...s)}return i}function up(r){if(r._terminated)throw new ve(ae.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Xw(r),r._firestoreClient}function Xw(r){const e=r._freezeSettings(),t=(function(i,s,a,m){return new m4(i,s,a,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,ap(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Ww(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(i){const s=i?._online.build();return{_offline:i?._offline.build(s),_online:s}})(r._componentsProvider))}class Pt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pt(pt.fromBase64String(e))}catch(t){throw new ve(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pt(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Pt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(as(e,Pt._jsonSchema))return Pt.fromBase64String(e.bytes)}}Pt._jsonSchemaVersion="firestore/bytes/1.0",Pt._jsonSchema={type:nt("string",Pt._jsonSchemaVersion),bytes:nt("string")};class wc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ve(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bc{constructor(e){this._methodName=e}}class nn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ve(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ve(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:nn._jsonSchemaVersion}}static fromJSON(e){if(as(e,nn._jsonSchema))return new nn(e.latitude,e.longitude)}}nn._jsonSchemaVersion="firestore/geoPoint/1.0",nn._jsonSchema={type:nt("string",nn._jsonSchemaVersion),latitude:nt("number"),longitude:nt("number")};class rn{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:rn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(as(e,rn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new rn(e.vectorValues);throw new ve(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}rn._jsonSchemaVersion="firestore/vectorValue/1.0",rn._jsonSchema={type:nt("string",rn._jsonSchemaVersion),vectorValues:nt("object")};const Jw=/^__.*__$/;class Zw{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Er(e,this.data,this.fieldMask,t,this.fieldTransforms):new ls(e,this.data,t,this.fieldTransforms)}}function hp(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ac:r})}}class Ko{constructor(e,t,n,i,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ko({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return So(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hp(this.Ac)&&Jw.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class e5{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||jo(e)}Cc(e,t,n,i=!1){return new Ko({Ac:e,methodName:t,Dc:n,path:ft.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function t5(r){const e=r._freezeSettings(),t=jo(r._databaseId);return new e5(r._databaseId,!!e.ignoreUndefinedProperties,t)}function n5(r,e,t,n,i,s={}){const a=r.Cc(s.merge||s.mergeFields?2:0,e,t,i);pp("Data must be an object, but it was:",a,n);const m=dp(n,a);let o,d;if(s.merge)o=new Ht(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const l=[];for(const f of s.mergeFields){const u=i5(e,f,t);if(!a.contains(u))throw new ve(ae.INVALID_ARGUMENT,`Field '${u}' is specified in your field mask but missing from your input data.`);o5(l,u)||l.push(u)}o=new Ht(l),d=a.fieldTransforms.filter((f=>o.covers(f.field)))}else o=null,d=a.fieldTransforms;return new Zw(new Nt(m),o,d)}function r5(r,e,t){return new Ko({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class _c extends bc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=r5(this,e,!0),n=this.vc.map((s=>Sc(s,t))),i=new Gr(n);return new U4(e.path,i)}isEqual(e){return e instanceof _c&&qn(this.vc,e.vc)}}function Sc(r,e){if(fp(r=Lt(r)))return pp("Unsupported field value:",e,r),dp(r,e);if(r instanceof bc)return(function(n,i){if(!hp(i.Ac))throw i.Sc(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(n,i){const s=[];let a=0;for(const m of n){let o=Sc(m,i.wc(a));o==null&&(o={nullValue:"NULL_VALUE"}),s.push(o),a++}return{arrayValue:{values:s}}})(r,e)}return(function(n,i){if((n=Lt(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return z4(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=He.fromDate(n);return{timestampValue:yo(i.serializer,s)}}if(n instanceof He){const s=new He(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:yo(i.serializer,s)}}if(n instanceof nn)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Pt)return{bytesValue:$f(i.serializer,n._byteString)};if(n instanceof ht){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:nc(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof rn)return(function(a,m){return{mapValue:{fields:{[lf]:{stringValue:cf},[fo]:{arrayValue:{values:a.toArray().map((d=>{if(typeof d!="number")throw m.Sc("VectorValues must only contain numeric values.");return Zl(m.serializer,d)}))}}}}}})(n,i);throw i.Sc(`Unsupported field value: ${Gl(n)}`)})(r,e)}function dp(r,e){const t={};return tf(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ar(r,((n,i)=>{const s=Sc(i,e.mc(n));s!=null&&(t[n]=s)})),{mapValue:{fields:t}}}function fp(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof He||r instanceof nn||r instanceof Pt||r instanceof ht||r instanceof bc||r instanceof rn)}function pp(r,e,t){if(!fp(t)||!Zd(t)){const n=Gl(t);throw n==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+n)}}function i5(r,e,t){if((e=Lt(e))instanceof wc)return e._internalPath;if(typeof e=="string")return mp(r,e);throw So("Field path arguments must be of type string or ",r,!1,void 0,t)}const s5=new RegExp("[~\\*/\\[\\]]");function mp(r,e,t){if(e.search(s5)>=0)throw So(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new wc(...e.split("."))._internalPath}catch{throw So(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function So(r,e,t,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let o="";return(s||a)&&(o+=" (found",s&&(o+=` in field ${n}`),a&&(o+=` in document ${i}`),o+=")"),new ve(ae.INVALID_ARGUMENT,m+r+o)}function o5(r,e){return r.some((t=>t.isEqual(e)))}class gp{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new a5(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class a5 extends gp{data(){return super.data()}}function vp(r,e){return typeof e=="string"?mp(r,e):e instanceof wc?e._internalPath:e._delegate._internalPath}class l5{convertValue(e,t="none"){switch(Xn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Qn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ar(e,((i,s)=>{n[i]=this.convertValue(s,t)})),n}convertVectorValue(e){const t=e.fields?.[fo].arrayValue?.values?.map((n=>Ze(n.doubleValue)));return new rn(t)}convertGeoPoint(e){return new nn(Ze(e.latitude),Ze(e.longitude))}convertArray(e,t){return(e.values||[]).map((n=>this.convertValue(n,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Fo(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(qi(e));default:return null}}convertTimestamp(e){const t=Yn(e);return new He(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ge.fromString(e);Pe(zf(n),9688,{name:e});const i=new Ki(n.get(1),n.get(3)),s=new be(n.popFirst(5));return i.isEqual(t)||_n(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function c5(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class Ii{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vr extends gp{constructor(e,t,n,i,s,a){super(e,t,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Js(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(vp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}vr._jsonSchemaVersion="firestore/documentSnapshot/1.0",vr._jsonSchema={type:nt("string",vr._jsonSchemaVersion),bundleSource:nt("string","DocumentSnapshot"),bundleName:nt("string"),bundle:nt("string")};class Js extends vr{data(e={}){return super.data(e)}}class Vi{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ii(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Js(this._firestore,this._userDataWriter,n.key,n,new Ii(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ve(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((m=>{const o=new Js(i._firestore,i._userDataWriter,m.doc.key,m.doc,new Ii(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);return m.doc,{type:"added",doc:o,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((m=>s||m.type!==3)).map((m=>{const o=new Js(i._firestore,i._userDataWriter,m.doc.key,m.doc,new Ii(i._snapshot.mutatedKeys.has(m.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,l=-1;return m.type!==0&&(d=a.indexOf(m.doc.key),a=a.delete(m.doc.key)),m.type!==1&&(a=a.add(m.doc),l=a.indexOf(m.doc.key)),{type:u5(m.type),doc:o,oldIndex:d,newIndex:l}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ve(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function u5(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:r})}}function h5(r){r=ji(r,ht);const e=ji(r.firestore,yc);return Kw(up(e),r._key).then((t=>m5(e,r,t)))}Vi._jsonSchemaVersion="firestore/querySnapshot/1.0",Vi._jsonSchema={type:nt("string",Vi._jsonSchemaVersion),bundleSource:nt("string","QuerySnapshot"),bundleName:nt("string"),bundle:nt("string")};class d5 extends l5{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,t)}}function f5(r,e,t){r=ji(r,ht);const n=ji(r.firestore,yc),i=c5(r.converter,e,t);return p5(n,[n5(t5(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,gn.none())])}function p5(r,e){return(function(n,i){const s=new Gn;return n.asyncQueue.enqueueAndForget((async()=>Dw(await Gw(n),i,s))),s.promise})(up(r),e)}function m5(r,e,t){const n=t.docs.get(e._key),i=new d5(r);return new vr(r,i,e._key,n,new Ii(t.hasPendingWrites,t.fromCache),e.converter)}function g5(...r){return new _c("arrayUnion",r)}(function(e,t=!0){(function(i){ei=i})(Jr),Br(new yr("firestore",((n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),m=new yc(new Yy(n.getProvider("auth-internal")),new Jy(a,n.getProvider("app-check-internal")),(function(d,l){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ve(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ki(d.options.projectId,l)})(a,i),a);return s={useFetchStreams:t,...s},m._setSettings(s),m}),"PUBLIC").setMultipleInstances(!0)),Wn(mh,gh,e),Wn(mh,gh,"esm2020")})();const v5={apiKey:"AIzaSyBGzMQwqbE1yPgoMfxvhgIeX7Qo0wBVJc4",authDomain:"learnpython-1d8d0.firebaseapp.com",projectId:"learnpython-1d8d0",storageBucket:"learnpython-1d8d0.firebasestorage.app",messagingSenderId:"975177947496",appId:"1:975177947496:web:30410a3f24860816bc5edd"},yp=ld(v5),ds=jy(yp),wp=Qw(yp),y5=new dn;async function w5(){try{return(await ey(ds,y5)).user}catch(r){throw console.error("Erreur login:",r),r}}async function b5(){return Dv(ds)}function _5(r){$v(ds,r)}async function S5(r,e){try{return(await Iv(ds,r,e)).user}catch(t){throw t}}async function A5(r,e){try{return(await Mv(ds,r,e)).user}catch(t){throw t}}async function T5(r,e){const t=cp(wp,"users",r);await f5(t,{completed:g5(e),lastUpdate:new Date},{merge:!0})}async function E5(r){const e=cp(wp,"users",r),t=await h5(e);return t.exists()?t.data().completed||[]:[]}function C5(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Ra={exports:{}},c0;function x5(){return c0||(c0=1,(function(r,e){(function(){var t="ace",n=(function(){return this})();!n&&typeof window<"u"&&(n=window);var i=function(l,f,u){if(typeof l!="string"){i.original?i.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(u=f),i.modules[l]||(i.payloads[l]=u,i.modules[l]=null)};i.modules={},i.payloads={};var s=function(l,f,u){if(typeof f=="string"){var h=o(l,f);if(h!=null)return u&&u(),h}else if(Object.prototype.toString.call(f)==="[object Array]"){for(var c=[],p=0,g=f.length;p<g;++p){var y=o(l,f[p]);if(y==null&&a.original)return;c.push(y)}return u&&u.apply(null,c)||!0}},a=function(l,f){var u=s("",l,f);return u==null&&a.original?a.original.apply(this,arguments):u},m=function(l,f){if(f.indexOf("!")!==-1){var u=f.split("!");return m(l,u[0])+"!"+m(l,u[1])}if(f.charAt(0)=="."){var h=l.split("/").slice(0,-1).join("/");for(f=h+"/"+f;f.indexOf(".")!==-1&&c!=f;){var c=f;f=f.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return f},o=function(l,f){f=m(l,f);var u=i.modules[f];if(!u){if(u=i.payloads[f],typeof u=="function"){var h={},c={id:f,uri:"",exports:h,packaged:!0},p=function(y,w){return s(f,y,w)},g=u(p,h,c);h=g||c.exports,i.modules[f]=h,delete i.payloads[f]}u=i.modules[f]=h||u}return u};function d(l){var f=n;n[l]||(n[l]={}),f=n[l],(!f.define||!f.define.packaged)&&(i.original=f.define,f.define=i,f.define.packaged=!0),(!f.require||!f.require.packaged)&&(a.original=f.require,f.require=a,f.require.packaged=!0)}d(t)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(t,n,i){function s(a,m,o){Object.defineProperty(a,m,{value:o,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||s(String.prototype,"startsWith",function(a,m){return m=m||0,this.lastIndexOf(a,m)===m}),String.prototype.endsWith||s(String.prototype,"endsWith",function(a,m){var o=this;(m===void 0||m>o.length)&&(m=o.length),m-=a.length;var d=o.indexOf(a,m);return d!==-1&&d===m}),String.prototype.repeat||s(String.prototype,"repeat",function(a){for(var m="",o=this;a>0;)a&1&&(m+=o),(a>>=1)&&(o+=o);return m}),String.prototype.includes||s(String.prototype,"includes",function(a,m){return this.indexOf(a,m)!=-1}),Object.assign||(Object.assign=function(a){if(a==null)throw new TypeError("Cannot convert undefined or null to object");for(var m=Object(a),o=1;o<arguments.length;o++){var d=arguments[o];d!=null&&Object.keys(d).forEach(function(l){m[l]=d[l]})}return m}),Object.values||(Object.values=function(a){return Object.keys(a).map(function(m){return a[m]})}),Array.prototype.find||s(Array.prototype,"find",function(a){for(var m=this.length,o=arguments[1],d=0;d<m;d++){var l=this[d];if(a.call(o,l,d,this))return l}}),Array.prototype.findIndex||s(Array.prototype,"findIndex",function(a){for(var m=this.length,o=arguments[1],d=0;d<m;d++){var l=this[d];if(a.call(o,l,d,this))return d}}),Array.prototype.includes||s(Array.prototype,"includes",function(a,m){return this.indexOf(a,m)!=-1}),Array.prototype.fill||s(Array.prototype,"fill",function(a){for(var m=this,o=m.length>>>0,d=arguments[1],l=d>>0,f=l<0?Math.max(o+l,0):Math.min(l,o),u=arguments[2],h=u===void 0?o:u>>0,c=h<0?Math.max(o+h,0):Math.min(h,o);f<c;)m[f]=a,f++;return m}),Array.of||s(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(t,n,i){t("./es6-shim")}),ace.define("ace/lib/deep_copy",["require","exports","module"],function(t,n,i){n.deepCopy=function s(a){if(typeof a!="object"||!a)return a;var m;if(Array.isArray(a)){m=[];for(var o=0;o<a.length;o++)m[o]=s(a[o]);return m}if(Object.prototype.toString.call(a)!=="[object Object]")return a;m={};for(var o in a)m[o]=s(a[o]);return m}}),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(t,n,i){n.last=function(m){return m[m.length-1]},n.stringReverse=function(m){return m.split("").reverse().join("")},n.stringRepeat=function(m,o){for(var d="";o>0;)o&1&&(d+=m),(o>>=1)&&(m+=m);return d};var s=/^\s\s*/,a=/\s\s*$/;n.stringTrimLeft=function(m){return m.replace(s,"")},n.stringTrimRight=function(m){return m.replace(a,"")},n.copyObject=function(m){var o={};for(var d in m)o[d]=m[d];return o},n.copyArray=function(m){for(var o=[],d=0,l=m.length;d<l;d++)m[d]&&typeof m[d]=="object"?o[d]=this.copyObject(m[d]):o[d]=m[d];return o},n.deepCopy=t("./deep_copy").deepCopy,n.arrayToMap=function(m){for(var o={},d=0;d<m.length;d++)o[m[d]]=1;return o},n.createMap=function(m){var o=Object.create(null);for(var d in m)o[d]=m[d];return o},n.arrayRemove=function(m,o){for(var d=0;d<=m.length;d++)o===m[d]&&m.splice(d,1)},n.escapeRegExp=function(m){return m.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},n.escapeHTML=function(m){return(""+m).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},n.getMatchOffsets=function(m,o){var d=[];return m.replace(o,function(l){d.push({offset:arguments[arguments.length-2],length:l.length})}),d},n.deferredCall=function(m){var o=null,d=function(){o=null,m()},l=function(f){return l.cancel(),o=setTimeout(d,f||0),l};return l.schedule=l,l.call=function(){return this.cancel(),m(),l},l.cancel=function(){return clearTimeout(o),o=null,l},l.isPending=function(){return o},l},n.delayedCall=function(m,o){var d=null,l=function(){d=null,m()},f=function(u){d==null&&(d=setTimeout(l,u||o))};return f.delay=function(u){d&&clearTimeout(d),d=setTimeout(l,u||o)},f.schedule=f,f.call=function(){this.cancel(),m()},f.cancel=function(){d&&clearTimeout(d),d=null},f.isPending=function(){return d},f},n.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},n.skipEmptyMatch=function(m,o,d){return d&&m.codePointAt(o)>65535?2:1}}),ace.define("ace/lib/useragent",["require","exports","module"],function(t,n,i){n.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},n.getOS=function(){return n.isMac?n.OS.MAC:n.isLinux?n.OS.LINUX:n.OS.WINDOWS};var s=typeof navigator=="object"?navigator:{},a=(/mac|win|linux/i.exec(s.platform)||["other"])[0].toLowerCase(),m=s.userAgent||"",o=s.appName||"";n.isWin=a=="win",n.isMac=a=="mac",n.isLinux=a=="linux",n.isIE=o=="Microsoft Internet Explorer"||o.indexOf("MSAppHost")>=0?parseFloat((m.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((m.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),n.isOldIE=n.isIE&&n.isIE<9,n.isGecko=n.isMozilla=m.match(/ Gecko\/\d+/),n.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",n.isWebKit=parseFloat(m.split("WebKit/")[1])||void 0,n.isChrome=parseFloat(m.split(" Chrome/")[1])||void 0,n.isSafari=parseFloat(m.split(" Safari/")[1])&&!n.isChrome||void 0,n.isEdge=parseFloat(m.split(" Edge/")[1])||void 0,n.isAIR=m.indexOf("AdobeAIR")>=0,n.isAndroid=m.indexOf("Android")>=0,n.isChromeOS=m.indexOf(" CrOS ")>=0,n.isIOS=/iPad|iPhone|iPod/.test(m)&&!window.MSStream,n.isIOS&&(n.isMac=!0),n.isMobile=n.isIOS||n.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(t,n,i){var s=t("./useragent"),a="http://www.w3.org/1999/xhtml";n.buildDom=function u(h,c,p){if(typeof h=="string"&&h){var g=document.createTextNode(h);return c&&c.appendChild(g),g}if(!Array.isArray(h))return h&&h.appendChild&&c&&c.appendChild(h),h;if(typeof h[0]!="string"||!h[0]){for(var y=[],w=0;w<h.length;w++){var M=u(h[w],c,p);M&&y.push(M)}return y}var R=document.createElement(h[0]),x=h[1],S=1;x&&typeof x=="object"&&!Array.isArray(x)&&(S=2);for(var w=S;w<h.length;w++)u(h[w],R,p);return S==2&&Object.keys(x).forEach(function(E){var k=x[E];E==="class"?R.className=Array.isArray(k)?k.join(" "):k:typeof k=="function"||E=="value"||E[0]=="$"?R[E]=k:E==="ref"?p&&(p[k]=R):E==="style"?typeof k=="string"&&(R.style.cssText=k):k!=null&&R.setAttribute(E,k)}),c&&c.appendChild(R),R},n.getDocumentHead=function(u){return u||(u=document),u.head||u.getElementsByTagName("head")[0]||u.documentElement},n.createElement=function(u,h){return document.createElementNS?document.createElementNS(h||a,u):document.createElement(u)},n.removeChildren=function(u){u.innerHTML=""},n.createTextNode=function(u,h){var c=h?h.ownerDocument:document;return c.createTextNode(u)},n.createFragment=function(u){var h=u?u.ownerDocument:document;return h.createDocumentFragment()},n.hasCssClass=function(u,h){var c=(u.className+"").split(/\s+/g);return c.indexOf(h)!==-1},n.addCssClass=function(u,h){n.hasCssClass(u,h)||(u.className+=" "+h)},n.removeCssClass=function(u,h){for(var c=u.className.split(/\s+/g);;){var p=c.indexOf(h);if(p==-1)break;c.splice(p,1)}u.className=c.join(" ")},n.toggleCssClass=function(u,h){for(var c=u.className.split(/\s+/g),p=!0;;){var g=c.indexOf(h);if(g==-1)break;p=!1,c.splice(g,1)}return p&&c.push(h),u.className=c.join(" "),p},n.setCssClass=function(u,h,c){c?n.addCssClass(u,h):n.removeCssClass(u,h)},n.hasCssString=function(u,h){var c=0,p;if(h=h||document,p=h.querySelectorAll("style")){for(;c<p.length;)if(p[c++].id===u)return!0}},n.removeElementById=function(u,h){h=h||document,h.getElementById(u)&&h.getElementById(u).remove()};var m,o=[];n.useStrictCSP=function(u){m=u,u==!1?d():o||(o=[])};function d(){var u=o;o=null,u&&u.forEach(function(h){l(h[0],h[1])})}function l(u,h,c){if(!(typeof document>"u")){if(o){if(c)d();else if(c===!1)return o.push([u,h])}if(!m){var p=c;!c||!c.getRootNode?p=document:(p=c.getRootNode(),(!p||p==c)&&(p=document));var g=p.ownerDocument||p;if(h&&n.hasCssString(h,p))return null;h&&(u+=`
/*# sourceURL=ace/css/`+h+" */");var y=n.createElement("style");y.appendChild(g.createTextNode(u)),h&&(y.id=h),p==g&&(p=n.getDocumentHead(g)),p.insertBefore(y,p.firstChild)}}}if(n.importCssString=l,n.importCssStylsheet=function(u,h){n.buildDom(["link",{rel:"stylesheet",href:u}],n.getDocumentHead(h))},n.$fixPositionBug=function(u){var h=u.getBoundingClientRect();if(u.style.left){var c=parseFloat(u.style.left),p=+h.left;Math.abs(c-p)>1&&(u.style.left=2*c-p+"px")}if(u.style.right){var c=parseFloat(u.style.right),p=window.innerWidth-h.right;Math.abs(c-p)>1&&(u.style.right=2*c-p+"px")}if(u.style.top){var c=parseFloat(u.style.top),p=+h.top;Math.abs(c-p)>1&&(u.style.top=2*c-p+"px")}if(u.style.bottom){var c=parseFloat(u.style.bottom),p=window.innerHeight-h.bottom;Math.abs(c-p)>1&&(u.style.bottom=2*c-p+"px")}},n.scrollbarWidth=function(u){var h=n.createElement("ace_inner");h.style.width="100%",h.style.minWidth="0px",h.style.height="200px",h.style.display="block";var c=n.createElement("ace_outer"),p=c.style;p.position="absolute",p.left="-10000px",p.overflow="hidden",p.width="200px",p.minWidth="0px",p.height="150px",p.display="block",c.appendChild(h);var g=u&&u.documentElement||document&&document.documentElement;if(!g)return 0;g.appendChild(c);var y=h.offsetWidth;p.overflow="scroll";var w=h.offsetWidth;return y===w&&(w=c.clientWidth),g.removeChild(c),y-w},n.computedStyle=function(u,h){return window.getComputedStyle(u,"")||{}},n.setStyle=function(u,h,c){u[h]!==c&&(u[h]=c)},n.HAS_CSS_ANIMATION=!1,n.HAS_CSS_TRANSFORMS=!1,n.HI_DPI=s.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,s.isChromeOS&&(n.HI_DPI=!1),typeof document<"u"){var f=document.createElement("div");n.HI_DPI&&f.style.transform!==void 0&&(n.HAS_CSS_TRANSFORMS=!0),!s.isEdge&&typeof f.style.animationName<"u"&&(n.HAS_CSS_ANIMATION=!0),f=null}n.HAS_CSS_TRANSFORMS?n.translate=function(u,h,c){u.style.transform="translate("+Math.round(h)+"px, "+Math.round(c)+"px)"}:n.translate=function(u,h,c){u.style.top=Math.round(c)+"px",u.style.left=Math.round(h)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(t,n,i){var s=t("./dom");n.get=function(a,m){var o=new XMLHttpRequest;o.open("GET",a,!0),o.onreadystatechange=function(){o.readyState===4&&m(o.responseText)},o.send(null)},n.loadScript=function(a,m){var o=s.getDocumentHead(),d=document.createElement("script");d.src=a,o.appendChild(d),d.onload=d.onreadystatechange=function(l,f){(f||!d.readyState||d.readyState=="loaded"||d.readyState=="complete")&&(d=d.onload=d.onreadystatechange=null,f||m())}},n.qualifyURL=function(a){var m=document.createElement("a");return m.href=a,m.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(t,n,i){n.inherits=function(s,a){s.super_=a,s.prototype=Object.create(a.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})},n.mixin=function(s,a){for(var m in a)s[m]=a[m];return s},n.implement=function(s,a){n.mixin(s,a)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(t,n,i){var s={},a=function(){this.propagationStopped=!0},m=function(){this.defaultPrevented=!0};s._emit=s._dispatchEvent=function(o,d){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var l=this._eventRegistry[o]||[],f=this._defaultHandlers[o];if(!(!l.length&&!f)){(typeof d!="object"||!d)&&(d={}),d.type||(d.type=o),d.stopPropagation||(d.stopPropagation=a),d.preventDefault||(d.preventDefault=m),l=l.slice();for(var u=0;u<l.length&&(l[u](d,this),!d.propagationStopped);u++);if(f&&!d.defaultPrevented)return f(d,this)}},s._signal=function(o,d){var l=(this._eventRegistry||{})[o];if(l){l=l.slice();for(var f=0;f<l.length;f++)l[f](d,this)}},s.once=function(o,d){var l=this;if(this.on(o,function f(){l.off(o,f),d.apply(null,arguments)}),!d)return new Promise(function(f){d=f})},s.setDefaultHandler=function(o,d){var l=this._defaultHandlers;if(l||(l=this._defaultHandlers={_disabled_:{}}),l[o]){var f=l[o],u=l._disabled_[o];u||(l._disabled_[o]=u=[]),u.push(f);var h=u.indexOf(d);h!=-1&&u.splice(h,1)}l[o]=d},s.removeDefaultHandler=function(o,d){var l=this._defaultHandlers;if(l){var f=l._disabled_[o];if(l[o]==d)f&&this.setDefaultHandler(o,f.pop());else if(f){var u=f.indexOf(d);u!=-1&&f.splice(u,1)}}},s.on=s.addEventListener=function(o,d,l){this._eventRegistry=this._eventRegistry||{};var f=this._eventRegistry[o];return f||(f=this._eventRegistry[o]=[]),f.indexOf(d)==-1&&f[l?"unshift":"push"](d),d},s.off=s.removeListener=s.removeEventListener=function(o,d){this._eventRegistry=this._eventRegistry||{};var l=this._eventRegistry[o];if(l){var f=l.indexOf(d);f!==-1&&l.splice(f,1)}},s.removeAllListeners=function(o){o||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[o]=void 0),this._defaultHandlers&&(this._defaultHandlers[o]=void 0)},n.EventEmitter=s}),ace.define("ace/lib/report_error",["require","exports","module"],function(t,n,i){n.reportError=function(a,m){var o=new Error(a);o.data=m,typeof console=="object"&&console.error&&console.error(o),setTimeout(function(){throw o})}}),ace.define("ace/lib/default_english_messages",["require","exports","module"],function(t,n,i){var s={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor gutter","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages","gutter.annotation.aria-label.security":"Security finding, read annotations row $0","gutter.annotation.aria-label.hint":"Suggestion, read annotations row $0","gutter-tooltip.aria-label.security.singular":"security finding","gutter-tooltip.aria-label.security.plural":"security findings","gutter-tooltip.aria-label.hint.singular":"suggestion","gutter-tooltip.aria-label.hint.plural":"suggestions","editor.tooltip.disable-editing":"Editing is disabled"};n.defaultEnglishMessages=s}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(t,n,i){"no use strict";var s=t("./oop"),a=t("./event_emitter").EventEmitter,m=t("./report_error").reportError,o=t("./default_english_messages").defaultEnglishMessages,d={setOptions:function(c){Object.keys(c).forEach(function(p){this.setOption(p,c[p])},this)},getOptions:function(c){var p={};if(c)Array.isArray(c)||(c=Object.keys(c));else{var g=this.$options;c=Object.keys(g).filter(function(y){return!g[y].hidden})}return c.forEach(function(y){p[y]=this.getOption(y)},this),p},setOption:function(c,p){if(this["$"+c]!==p){var g=this.$options[c];if(!g)return l('misspelled option "'+c+'"');if(g.forwardTo)return this[g.forwardTo]&&this[g.forwardTo].setOption(c,p);g.handlesSet||(this["$"+c]=p),g&&g.set&&g.set.call(this,p)}},getOption:function(c){var p=this.$options[c];return p?p.forwardTo?this[p.forwardTo]&&this[p.forwardTo].getOption(c):p&&p.get?p.get.call(this):this["$"+c]:l('misspelled option "'+c+'"')}};function l(c){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var f,u,h=(function(){function c(){this.$defaultOptions={},f=o,u="dollarSigns"}return c.prototype.defineOptions=function(p,g,y){return p.$options||(this.$defaultOptions[g]=p.$options={}),Object.keys(y).forEach(function(w){var M=y[w];typeof M=="string"&&(M={forwardTo:M}),M.name||(M.name=w),p.$options[M.name]=M,"initialValue"in M&&(p["$"+M.name]=M.initialValue)}),s.implement(p,d),this},c.prototype.resetOptions=function(p){Object.keys(p.$options).forEach(function(g){var y=p.$options[g];"value"in y&&p.setOption(g,y.value)})},c.prototype.setDefaultValue=function(p,g,y){if(!p){for(p in this.$defaultOptions)if(this.$defaultOptions[p][g])break;if(!this.$defaultOptions[p][g])return!1}var w=this.$defaultOptions[p]||(this.$defaultOptions[p]={});w[g]&&(w.forwardTo?this.setDefaultValue(w.forwardTo,g,y):w[g].value=y)},c.prototype.setDefaultValues=function(p,g){Object.keys(g).forEach(function(y){this.setDefaultValue(p,y,g[y])},this)},c.prototype.setMessages=function(p,g){f=p,g&&g.placeholders&&(u=g.placeholders)},c.prototype.nls=function(p,g,y){f[p]||(l("No message found for the key '"+p+"' in messages with id "+f.$id+", trying to find a translation for the default string '"+g+"'."),f[g]||l("No message found for the default string '"+g+"' in the provided messages. Falling back to the default English message."));var w=f[p]||f[g]||g;return y&&(u==="dollarSigns"&&(w=w.replace(/\$(\$|[\d]+)/g,function(M,R){return R=="$"?"$":y[R]})),u==="curlyBrackets"&&(w=w.replace(/\{([^\}]+)\}/g,function(M,R){return y[R]}))),w},c})();h.prototype.warn=l,h.prototype.reportError=m,s.implement(h.prototype,a),n.AppConfig=h}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(t,n,i){i.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(t,n,i){n.isDark=!1,n.cssClass="ace-tm",n.cssText=t("./textmate-css"),n.$id="ace/theme/textmate";var s=t("../lib/dom");s.importCssString(n.cssText,n.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(t,n,i){"no use strict";var s=t("./lib/lang"),a=t("./lib/net"),m=t("./lib/dom"),o=t("./lib/app_config").AppConfig;i.exports=n=new o;var d={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};n.get=function(h){if(!d.hasOwnProperty(h))throw new Error("Unknown config key: "+h);return d[h]},n.set=function(h,c){if(d.hasOwnProperty(h))d[h]=c;else if(this.setDefaultValue("",h,c)==!1)throw new Error("Unknown config key: "+h);h=="useStrictCSP"&&m.useStrictCSP(c)},n.all=function(){return s.copyObject(d)},n.$modes={},n.moduleUrl=function(h,c){if(d.$moduleUrls[h])return d.$moduleUrls[h];var p=h.split("/");c=c||p[p.length-2]||"";var g=c=="snippets"?"/":"-",y=p[p.length-1];if(c=="worker"&&g=="-"){var w=new RegExp("^"+c+"[\\-_]|[\\-_]"+c+"$","g");y=y.replace(w,"")}(!y||y==c)&&p.length>1&&(y=p[p.length-2]);var M=d[c+"Path"];return M==null?M=d.basePath:g=="/"&&(c=g=""),M&&M.slice(-1)!="/"&&(M+="/"),M+c+g+y+this.get("suffix")},n.setModuleUrl=function(h,c){return d.$moduleUrls[h]=c};var l=function(h,c){if(h==="ace/theme/textmate"||h==="./theme/textmate")return c(null,t("./theme/textmate"));if(f)return f(h,c);console.error("loader is not configured")},f;n.setLoader=function(h){f=h},n.dynamicModules=Object.create(null),n.$loading={},n.$loaded={},n.loadModule=function(h,c){var p;if(Array.isArray(h))var g=h[0],y=h[1];else if(typeof h=="string")var y=h;var w=function(M){if(M&&!n.$loading[y])return c&&c(M);if(n.$loading[y]||(n.$loading[y]=[]),n.$loading[y].push(c),!(n.$loading[y].length>1)){var R=function(){l(y,function(x,S){S&&(n.$loaded[y]=S),n._emit("load.module",{name:y,module:S});var E=n.$loading[y];n.$loading[y]=null,E.forEach(function(k){k&&k(S)})})};if(!n.get("packaged"))return R();a.loadScript(n.moduleUrl(y,g),R),u()}};if(n.dynamicModules[y])n.dynamicModules[y]().then(function(M){M.default?w(M.default):w(M)});else{try{p=this.$require(y)}catch{}w(p||n.$loaded[y])}},n.$require=function(h){if(typeof i.require=="function"){var c="require";return i[c](h)}},n.setModuleLoader=function(h,c){n.dynamicModules[h]=c};var u=function(){!d.basePath&&!d.workerPath&&!d.modePath&&!d.themePath&&!Object.keys(d.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),u=function(){})};n.version="1.43.5"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(t,n,i){t("./lib/fixoldbrowsers");var s=t("./config");s.setLoader(function(d,l){t([d],function(f){l(null,f)})});var a=(function(){return this||typeof window<"u"&&window})();i.exports=function(d){s.init=m,s.$require=t,d.require=t},m(!0);function m(d){if(!(!a||!a.document)){s.set("packaged",d||t.packaged||i.packaged||a.define&&(void 0).packaged);var l={},f="",u=document.currentScript||document._currentScript,h=u&&u.ownerDocument||document;u&&u.src&&(f=u.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var c=h.getElementsByTagName("script"),p=0;p<c.length;p++){var g=c[p],y=g.src||g.getAttribute("src");if(y){for(var w=g.attributes,M=0,R=w.length;M<R;M++){var x=w[M];x.name.indexOf("data-ace-")===0&&(l[o(x.name.replace(/^data-ace-/,""))]=x.value)}var S=y.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(f=S[1])}}f&&(l.base=l.base||f,l.packaged=!0),l.basePath=l.base,l.workerPath=l.workerPath||l.base,l.modePath=l.modePath||l.base,l.themePath=l.themePath||l.base,delete l.base;for(var E in l)typeof l[E]<"u"&&s.set(E,l[E])}}function o(d){return d.replace(/-(.)/g,function(l,f){return f.toUpperCase()})}}),ace.define("ace/range",["require","exports","module"],function(t,n,i){var s=(function(){function a(m,o,d,l){this.start={row:m,column:o},this.end={row:d,column:l}}return a.prototype.isEqual=function(m){return this.start.row===m.start.row&&this.end.row===m.end.row&&this.start.column===m.start.column&&this.end.column===m.end.column},a.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},a.prototype.contains=function(m,o){return this.compare(m,o)==0},a.prototype.compareRange=function(m){var o,d=m.end,l=m.start;return o=this.compare(d.row,d.column),o==1?(o=this.compare(l.row,l.column),o==1?2:o==0?1:0):o==-1?-2:(o=this.compare(l.row,l.column),o==-1?-1:o==1?42:0)},a.prototype.comparePoint=function(m){return this.compare(m.row,m.column)},a.prototype.containsRange=function(m){return this.comparePoint(m.start)==0&&this.comparePoint(m.end)==0},a.prototype.intersects=function(m){var o=this.compareRange(m);return o==-1||o==0||o==1},a.prototype.isEnd=function(m,o){return this.end.row==m&&this.end.column==o},a.prototype.isStart=function(m,o){return this.start.row==m&&this.start.column==o},a.prototype.setStart=function(m,o){typeof m=="object"?(this.start.column=m.column,this.start.row=m.row):(this.start.row=m,this.start.column=o)},a.prototype.setEnd=function(m,o){typeof m=="object"?(this.end.column=m.column,this.end.row=m.row):(this.end.row=m,this.end.column=o)},a.prototype.inside=function(m,o){return this.compare(m,o)==0?!(this.isEnd(m,o)||this.isStart(m,o)):!1},a.prototype.insideStart=function(m,o){return this.compare(m,o)==0?!this.isEnd(m,o):!1},a.prototype.insideEnd=function(m,o){return this.compare(m,o)==0?!this.isStart(m,o):!1},a.prototype.compare=function(m,o){return!this.isMultiLine()&&m===this.start.row?o<this.start.column?-1:o>this.end.column?1:0:m<this.start.row?-1:m>this.end.row?1:this.start.row===m?o>=this.start.column?0:-1:this.end.row===m?o<=this.end.column?0:1:0},a.prototype.compareStart=function(m,o){return this.start.row==m&&this.start.column==o?-1:this.compare(m,o)},a.prototype.compareEnd=function(m,o){return this.end.row==m&&this.end.column==o?1:this.compare(m,o)},a.prototype.compareInside=function(m,o){return this.end.row==m&&this.end.column==o?1:this.start.row==m&&this.start.column==o?-1:this.compare(m,o)},a.prototype.clipRows=function(m,o){if(this.end.row>o)var d={row:o+1,column:0};else if(this.end.row<m)var d={row:m,column:0};if(this.start.row>o)var l={row:o+1,column:0};else if(this.start.row<m)var l={row:m,column:0};return a.fromPoints(l||this.start,d||this.end)},a.prototype.extend=function(m,o){var d=this.compare(m,o);if(d==0)return this;if(d==-1)var l={row:m,column:o};else var f={row:m,column:o};return a.fromPoints(l||this.start,f||this.end)},a.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},a.prototype.isMultiLine=function(){return this.start.row!==this.end.row},a.prototype.clone=function(){return a.fromPoints(this.start,this.end)},a.prototype.collapseRows=function(){return this.end.column==0?new a(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new a(this.start.row,0,this.end.row,0)},a.prototype.toScreenRange=function(m){var o=m.documentToScreenPosition(this.start),d=m.documentToScreenPosition(this.end);return new a(o.row,o.column,d.row,d.column)},a.prototype.moveBy=function(m,o){this.start.row+=m,this.start.column+=o,this.end.row+=m,this.end.column+=o},a})();s.fromPoints=function(a,m){return new s(a.row,a.column,m.row,m.column)},s.comparePoints=function(a,m){return a.row-m.row||a.column-m.column},n.Range=s}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(t,n,i){for(var s=t("./oop"),a={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},m={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},o=0;o<10;o++)m["Digit"+o]=48+o,m["Numpad"+o]=96+o,a.PRINTABLE_KEYS[48+o]=""+o,a.FUNCTION_KEYS[96+o]="Numpad"+o;for(var o=65;o<91;o++){var d=String.fromCharCode(o+32);m["Key"+d.toUpperCase()]=o,a.PRINTABLE_KEYS[o]=d}for(var o=1;o<13;o++)m["F"+o]=111+o,a.FUNCTION_KEYS[111+o]="F"+o;var l={Shift:16,Control:17,Alt:18,Meta:224};for(var f in l)m[f]=m[f+"Left"]=m[f+"Right"]=l[f];n.$codeToKeyCode=m,a.PRINTABLE_KEYS[173]="-";for(var u in a.FUNCTION_KEYS){var h=a.FUNCTION_KEYS[u].toLowerCase();a[h]=parseInt(u,10)}for(var u in a.PRINTABLE_KEYS){var h=a.PRINTABLE_KEYS[u].toLowerCase();a[h]=parseInt(u,10)}s.mixin(a,a.MODIFIER_KEYS),s.mixin(a,a.PRINTABLE_KEYS),s.mixin(a,a.FUNCTION_KEYS),a.enter=a.return,a.escape=a.esc,a.del=a.delete,(function(){for(var c=["cmd","ctrl","alt","shift"],p=Math.pow(2,c.length);p--;)a.KEY_MODS[p]=c.filter(function(g){return p&a.KEY_MODS[g]}).join("-")+"-"})(),a.KEY_MODS[0]="",a.KEY_MODS[-1]="input-",s.mixin(n,a),n.default=n,n.keyCodeToString=function(c){var p=a[c];return typeof p!="string"&&(p=String.fromCharCode(c)),p.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,n,i){var s=t("./keys"),a=t("./useragent"),m=null,o=0,d;function l(){d=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return d={passive:!1},!0}})}catch{}}function f(){return d==null&&l(),d}function u(M,R,x){this.elem=M,this.type=R,this.callback=x}u.prototype.destroy=function(){c(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var h=n.addListener=function(M,R,x,S){M.addEventListener(R,x,f()),S&&S.$toDestroy.push(new u(M,R,x))},c=n.removeListener=function(M,R,x){M.removeEventListener(R,x,f())};n.stopEvent=function(M){return n.stopPropagation(M),n.preventDefault(M),!1},n.stopPropagation=function(M){M.stopPropagation&&M.stopPropagation()},n.preventDefault=function(M){M.preventDefault&&M.preventDefault()},n.getButton=function(M){return M.type=="dblclick"?0:M.type=="contextmenu"||a.isMac&&M.ctrlKey&&!M.altKey&&!M.shiftKey?2:M.button},n.capture=function(M,R,x){var S=M&&M.ownerDocument||document;function E(k){R&&R(k),x&&x(k),c(S,"mousemove",R),c(S,"mouseup",E),c(S,"dragstart",E)}return h(S,"mousemove",R),h(S,"mouseup",E),h(S,"dragstart",E),E},n.addMouseWheelListener=function(M,R,x){h(M,"wheel",function(S){var E=.15,k=S.deltaX||0,T=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=k*E,S.wheelY=T*E;break;case S.DOM_DELTA_LINE:var I=15;S.wheelX=k*I,S.wheelY=T*I;break;case S.DOM_DELTA_PAGE:var P=150;S.wheelX=k*P,S.wheelY=T*P;break}R(S)},x)},n.addMultiMouseDownListener=function(M,R,x,S,E){var k=0,T,I,P,C={2:"dblclick",3:"tripleclick",4:"quadclick"};function b(A){if(n.getButton(A)!==0?k=0:A.detail>1?(k++,k>4&&(k=1)):k=1,a.isIE){var _=Math.abs(A.clientX-T)>5||Math.abs(A.clientY-I)>5;(!P||_)&&(k=1),P&&clearTimeout(P),P=setTimeout(function(){P=null},R[k-1]||600),k==1&&(T=A.clientX,I=A.clientY)}if(A._clicks=k,x[S]("mousedown",A),k>4)k=0;else if(k>1)return x[S](C[k],A)}Array.isArray(M)||(M=[M]),M.forEach(function(A){h(A,"mousedown",b,E)})};function p(M){return 0|(M.ctrlKey?1:0)|(M.altKey?2:0)|(M.shiftKey?4:0)|(M.metaKey?8:0)}n.getModifierString=function(M){return s.KEY_MODS[p(M)]};function g(M,R,x){var S=p(R);if(!x&&R.code&&(x=s.$codeToKeyCode[R.code]||x),!a.isMac&&m){if(R.getModifierState&&(R.getModifierState("OS")||R.getModifierState("Win"))&&(S|=8),m.altGr)if((3&S)!=3)m.altGr=0;else return;if(x===18||x===17){var E=R.location;if(x===17&&E===1)m[x]==1&&(o=R.timeStamp);else if(x===18&&S===3&&E===2){var k=R.timeStamp-o;k<50&&(m.altGr=!0)}}}if(x in s.MODIFIER_KEYS&&(x=-1),!(!S&&x===13&&R.location===3&&(M(R,S,-x),R.defaultPrevented))){if(a.isChromeOS&&S&8){if(M(R,S,x),R.defaultPrevented)return;S&=-9}return!S&&!(x in s.FUNCTION_KEYS)&&!(x in s.PRINTABLE_KEYS)?!1:M(R,S,x)}}n.addCommandKeyListener=function(M,R,x){var S=null;h(M,"keydown",function(E){m[E.keyCode]=(m[E.keyCode]||0)+1;var k=g(R,E,E.keyCode);return S=E.defaultPrevented,k},x),h(M,"keypress",function(E){S&&(E.ctrlKey||E.altKey||E.shiftKey||E.metaKey)&&(n.stopEvent(E),S=null)},x),h(M,"keyup",function(E){m[E.keyCode]=null},x),m||(y(),h(window,"focus",y))};function y(){m=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!a.isOldIE){var w=1;n.nextTick=function(M,R){R=R||window;var x="zero-timeout-message-"+w++,S=function(E){E.data==x&&(n.stopPropagation(E),c(R,"message",S),M())};h(R,"message",S),R.postMessage(x,"*")}}n.$idleBlocked=!1,n.onIdle=function(M,R){return setTimeout(function x(){n.$idleBlocked?setTimeout(x,100):M()},R)},n.$idleBlockId=null,n.blockIdle=function(M){n.$idleBlockId&&clearTimeout(n.$idleBlockId),n.$idleBlocked=!0,n.$idleBlockId=setTimeout(function(){n.$idleBlocked=!1},M||100)},n.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),n.nextFrame?n.nextFrame=n.nextFrame.bind(window):n.nextFrame=function(M){setTimeout(M,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(t,n,i){var s;i.exports={lineMode:!1,pasteCancelled:function(){return s&&s>Date.now()-50?!0:s=!1},cancel:function(){s=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(t,n,i){var s=t("../lib/event"),a=t("../config").nls,m=t("../lib/useragent"),o=t("../lib/dom"),d=t("../lib/lang"),l=t("../clipboard"),f=m.isChrome<18,u=m.isIE,h=m.isChrome>63,c=400,p=t("../lib/keys"),g=p.KEY_MODS,y=m.isIOS,w=y?/\s/:/\n/,M=m.isMobile,R=(function(){function x(S,E){var k=this;this.host=E,this.text=o.createElement("textarea"),this.text.className="ace_text-input",this.text.setAttribute("wrap","off"),this.text.setAttribute("autocomplete","off"),this.text.setAttribute("autocorrect","off"),this.text.setAttribute("autocapitalize","off"),this.text.setAttribute("spellcheck","false"),this.text.style.opacity="0",S.insertBefore(this.text,S.firstChild),this.copied=!1,this.pasted=!1,this.inComposition=!1,this.sendingText=!1,this.tempStyle="",M||(this.text.style.fontSize="1px"),this.commandMode=!1,this.ignoreFocusEvents=!1,this.lastValue="",this.lastSelectionStart=0,this.lastSelectionEnd=0,this.lastRestoreEnd=0,this.rowStart=Number.MAX_SAFE_INTEGER,this.rowEnd=Number.MIN_SAFE_INTEGER,this.numberOfExtraLines=0;try{this.$isFocused=document.activeElement===this.text}catch{}this.cancelComposition=this.cancelComposition.bind(this),this.setAriaOptions({role:"textbox"}),s.addListener(this.text,"blur",function(T){k.ignoreFocusEvents||(E.onBlur(T),k.$isFocused=!1)},E),s.addListener(this.text,"focus",function(T){if(!k.ignoreFocusEvents){if(k.$isFocused=!0,m.isEdge)try{if(!document.hasFocus())return}catch{}E.onFocus(T),m.isEdge?setTimeout(k.resetSelection.bind(k)):k.resetSelection()}},E),this.$focusScroll=!1,E.on("beforeEndOperation",function(){var T=E.curOp,I=T&&T.command&&T.command.name;if(I!="insertstring"){var P=I&&(T.docChanged||T.selectionChanged);k.inComposition&&P&&(k.lastValue=k.text.value="",k.onCompositionEnd()),k.resetSelection()}}),E.on("changeSelection",this.setAriaLabel.bind(this)),this.resetSelection=y?this.$resetSelectionIOS:this.$resetSelection,this.$isFocused&&E.onFocus(),this.inputHandler=null,this.afterContextMenu=!1,s.addCommandKeyListener(this.text,function(T,I,P){if(!k.inComposition)return E.onCommandKey(T,I,P)},E),s.addListener(this.text,"select",this.onSelect.bind(this),E),s.addListener(this.text,"input",this.onInput.bind(this),E),s.addListener(this.text,"cut",this.onCut.bind(this),E),s.addListener(this.text,"copy",this.onCopy.bind(this),E),s.addListener(this.text,"paste",this.onPaste.bind(this),E),(!("oncut"in this.text)||!("oncopy"in this.text)||!("onpaste"in this.text))&&s.addListener(S,"keydown",function(T){if(!(m.isMac&&!T.metaKey||!T.ctrlKey))switch(T.keyCode){case 67:k.onCopy(T);break;case 86:k.onPaste(T);break;case 88:k.onCut(T);break}},E),this.syncComposition=d.delayedCall(this.onCompositionUpdate.bind(this),50).schedule.bind(null,null),s.addListener(this.text,"compositionstart",this.onCompositionStart.bind(this),E),s.addListener(this.text,"compositionupdate",this.onCompositionUpdate.bind(this),E),s.addListener(this.text,"keyup",this.onKeyup.bind(this),E),s.addListener(this.text,"keydown",this.syncComposition.bind(this),E),s.addListener(this.text,"compositionend",this.onCompositionEnd.bind(this),E),this.closeTimeout,s.addListener(this.text,"mouseup",this.$onContextMenu.bind(this),E),s.addListener(this.text,"mousedown",function(T){T.preventDefault(),k.onContextMenuClose()},E),s.addListener(E.renderer.scroller,"contextmenu",this.$onContextMenu.bind(this),E),s.addListener(this.text,"contextmenu",this.$onContextMenu.bind(this),E),y&&this.addIosSelectionHandler(S,E,this.text)}return x.prototype.addIosSelectionHandler=function(S,E,k){var T=this,I=null,P=!1;k.addEventListener("keydown",function(b){I&&clearTimeout(I),P=!0},!0),k.addEventListener("keyup",function(b){I=setTimeout(function(){P=!1},100)},!0);var C=function(b){if(document.activeElement===k&&!(P||T.inComposition||E.$mouseHandler.isMousePressed)&&!T.copied){var A=k.selectionStart,_=k.selectionEnd,L=null,O=0;if(A==0?L=p.up:A==1?L=p.home:_>T.lastSelectionEnd&&T.lastValue[_]==`
`?L=p.end:A<T.lastSelectionStart&&T.lastValue[A-1]==" "?(L=p.left,O=g.option):A<T.lastSelectionStart||A==T.lastSelectionStart&&T.lastSelectionEnd!=T.lastSelectionStart&&A==_?L=p.left:_>T.lastSelectionEnd&&T.lastValue.slice(0,_).split(`
`).length>2?L=p.down:_>T.lastSelectionEnd&&T.lastValue[_-1]==" "?(L=p.right,O=g.option):(_>T.lastSelectionEnd||_==T.lastSelectionEnd&&T.lastSelectionEnd!=T.lastSelectionStart&&A==_)&&(L=p.right),A!==_&&(O|=g.shift),L){var V=E.onCommandKey({},O,L);if(!V&&E.commands){L=p.keyCodeToString(L);var B=E.commands.findKeyCommand(O,L);B&&E.execCommand(B)}T.lastSelectionStart=A,T.lastSelectionEnd=_,T.resetSelection("")}}};document.addEventListener("selectionchange",C),E.on("destroy",function(){document.removeEventListener("selectionchange",C)})},x.prototype.onContextMenuClose=function(){var S=this;clearTimeout(this.closeTimeout),this.closeTimeout=setTimeout(function(){S.tempStyle&&(S.text.style.cssText=S.tempStyle,S.tempStyle=""),S.host.renderer.$isMousePressed=!1,S.host.renderer.$keepTextAreaAtCursor&&S.host.renderer.$moveTextAreaToCursor()},0)},x.prototype.$onContextMenu=function(S){this.host.textInput.onContextMenu(S),this.onContextMenuClose()},x.prototype.onKeyup=function(S){S.keyCode==27&&this.text.value.length<this.text.selectionStart&&(this.inComposition||(this.lastValue=this.text.value),this.lastSelectionStart=this.lastSelectionEnd=-1,this.resetSelection()),this.syncComposition()},x.prototype.cancelComposition=function(){this.ignoreFocusEvents=!0,this.text.blur(),this.text.focus(),this.ignoreFocusEvents=!1},x.prototype.onCompositionStart=function(S){if(!(this.inComposition||!this.host.onCompositionStart||this.host.$readOnly)&&(this.inComposition={},!this.commandMode)){S.data&&(this.inComposition.useTextareaForIME=!1),setTimeout(this.onCompositionUpdate.bind(this),0),this.host._signal("compositionStart"),this.host.on("mousedown",this.cancelComposition);var E=this.host.getSelectionRange();E.end.row=E.start.row,E.end.column=E.start.column,this.inComposition.markerRange=E,this.inComposition.selectionStart=this.lastSelectionStart,this.host.onCompositionStart(this.inComposition),this.inComposition.useTextareaForIME?(this.lastValue=this.text.value="",this.lastSelectionStart=0,this.lastSelectionEnd=0):(this.text.msGetInputContext&&(this.inComposition.context=this.text.msGetInputContext()),this.text.getInputContext&&(this.inComposition.context=this.text.getInputContext()))}},x.prototype.onCompositionUpdate=function(){if(!(!this.inComposition||!this.host.onCompositionUpdate||this.host.$readOnly)){if(this.commandMode)return this.cancelComposition();if(this.inComposition.useTextareaForIME)this.host.onCompositionUpdate(this.text.value);else{var S=this.text.value;this.sendText(S),this.inComposition.markerRange&&(this.inComposition.context&&(this.inComposition.markerRange.start.column=this.inComposition.selectionStart=this.inComposition.context.compositionStartOffset),this.inComposition.markerRange.end.column=this.inComposition.markerRange.start.column+this.lastSelectionEnd-this.inComposition.selectionStart+this.lastRestoreEnd)}}},x.prototype.onCompositionEnd=function(S){!this.host.onCompositionEnd||this.host.$readOnly||(this.inComposition=!1,this.host.onCompositionEnd(),this.host.off("mousedown",this.cancelComposition),S&&this.onInput())},x.prototype.onCut=function(S){this.doCopy(S,!0)},x.prototype.onCopy=function(S){this.doCopy(S,!1)},x.prototype.onPaste=function(S){var E=this.handleClipboardData(S);l.pasteCancelled()||(typeof E=="string"?(E&&this.host.onPaste(E,S),m.isIE&&setTimeout(this.resetSelection),s.preventDefault(S)):(this.text.value="",this.pasted=!0))},x.prototype.doCopy=function(S,E){var k=this,T=this.host.getCopyText();if(!T)return s.preventDefault(S);this.handleClipboardData(S,T)?(y&&(this.resetSelection(T),this.copied=T,setTimeout(function(){k.copied=!1},10)),E?this.host.onCut():this.host.onCopy(),s.preventDefault(S)):(this.copied=!0,this.text.value=T,this.text.select(),setTimeout(function(){k.copied=!1,k.resetSelection(),E?k.host.onCut():k.host.onCopy()}))},x.prototype.handleClipboardData=function(S,E,k){var T=S.clipboardData||window.clipboardData;if(!(!T||f)){var I=u||k?"Text":"text/plain";try{return E?T.setData(I,E)!==!1:T.getData(I)}catch(P){if(!k)return this.handleClipboardData(P,E,!0)}}},x.prototype.onInput=function(S){if(this.inComposition)return this.onCompositionUpdate();if(S&&S.inputType){if(S.inputType=="historyUndo")return this.host.execCommand("undo");if(S.inputType=="historyRedo")return this.host.execCommand("redo")}var E=this.text.value,k=this.sendText(E,!0);(E.length>c+100||w.test(k)||M&&this.lastSelectionStart<1&&this.lastSelectionStart==this.lastSelectionEnd)&&this.resetSelection()},x.prototype.sendText=function(S,E){if(this.afterContextMenu&&(this.afterContextMenu=!1),this.pasted)return this.resetSelection(),S&&this.host.onPaste(S),this.pasted=!1,"";for(var k=this.text.selectionStart,T=this.text.selectionEnd,I=this.lastSelectionStart,P=this.lastValue.length-this.lastSelectionEnd,C=S,b=S.length-k,A=S.length-T,_=0;I>0&&this.lastValue[_]==S[_];)_++,I--;for(C=C.slice(_),_=1;P>0&&this.lastValue.length-_>this.lastSelectionStart-1&&this.lastValue[this.lastValue.length-_]==S[S.length-_];)_++,P--;b-=_-1,A-=_-1;var L=C.length-_+1;if(L<0&&(I=-L,L=0),C=C.slice(0,L),!E&&!C&&!b&&!I&&!P&&!A)return"";this.sendingText=!0;var O=!1;return m.isAndroid&&C==". "&&(C="  ",O=!0),C&&!I&&!P&&!b&&!A||this.commandMode?this.host.onTextInput(C):this.host.onTextInput(C,{extendLeft:I,extendRight:P,restoreStart:b,restoreEnd:A}),this.sendingText=!1,this.lastValue=S,this.lastSelectionStart=k,this.lastSelectionEnd=T,this.lastRestoreEnd=A,O?`
`:C},x.prototype.onSelect=function(S){var E=this;if(!this.inComposition){var k=function(T){return T.selectionStart===0&&T.selectionEnd>=E.lastValue.length&&T.value===E.lastValue&&E.lastValue&&T.selectionEnd!==E.lastSelectionEnd};this.copied?this.copied=!1:k(this.text)?(this.host.selectAll(),this.resetSelection()):M&&this.text.selectionStart!=this.lastSelectionStart&&this.resetSelection()}},x.prototype.$resetSelectionIOS=function(S){if(!(!this.$isFocused||this.copied&&!S||this.sendingText)){S||(S="");var E=`
 ab`+S+`cde fg
`;E!=this.text.value&&(this.text.value=this.lastValue=E);var k=4,T=4+(S.length||(this.host.selection.isEmpty()?0:1));(this.lastSelectionStart!=k||this.lastSelectionEnd!=T)&&this.text.setSelectionRange(k,T),this.lastSelectionStart=k,this.lastSelectionEnd=T}},x.prototype.$resetSelection=function(){var S=this;if(!(this.inComposition||this.sendingText)&&!(!this.$isFocused&&!this.afterContextMenu)){this.inComposition=!0;var E=0,k=0,T="",I=function(B,W){for(var G=W,J=1;J<=B-S.rowStart&&J<2*S.numberOfExtraLines+1;J++)G+=S.host.session.getLine(B-J).length+1;return G};if(this.host.session){var P=this.host.selection,C=P.getRange(),b=P.cursor.row;b===this.rowEnd+1?(this.rowStart=this.rowEnd+1,this.rowEnd=this.rowStart+2*this.numberOfExtraLines):b===this.rowStart-1?(this.rowEnd=this.rowStart-1,this.rowStart=this.rowEnd-2*this.numberOfExtraLines):(b<this.rowStart-1||b>this.rowEnd+1)&&(this.rowStart=b>this.numberOfExtraLines?b-this.numberOfExtraLines:0,this.rowEnd=b>this.numberOfExtraLines?b+this.numberOfExtraLines:2*this.numberOfExtraLines);for(var A=[],_=this.rowStart;_<=this.rowEnd;_++)A.push(this.host.session.getLine(_));if(T=A.join(`
`),E=I(C.start.row,C.start.column),k=I(C.end.row,C.end.column),C.start.row<this.rowStart){var L=this.host.session.getLine(this.rowStart-1);E=C.start.row<this.rowStart-1?0:E,k+=L.length+1,T=L+`
`+T}else if(C.end.row>this.rowEnd){var O=this.host.session.getLine(this.rowEnd+1);k=C.end.row>this.rowEnd+1?O.length:C.end.column,k+=T.length+1,T=T+`
`+O}else M&&b>0&&(T=`
`+T,k+=1,E+=1);T.length>c&&(E<c&&k<c?T=T.slice(0,c):(T=`
`,E==k?E=k=0:(E=0,k=1)));var V=T+`

`;V!=this.lastValue&&(this.text.value=this.lastValue=V,this.lastSelectionStart=this.lastSelectionEnd=V.length)}if(this.afterContextMenu&&(this.lastSelectionStart=this.text.selectionStart,this.lastSelectionEnd=this.text.selectionEnd),this.lastSelectionEnd!=k||this.lastSelectionStart!=E||this.text.selectionEnd!=this.lastSelectionEnd)try{this.text.setSelectionRange(E,k),this.lastSelectionStart=E,this.lastSelectionEnd=k}catch{}this.inComposition=!1}},x.prototype.setHost=function(S){this.host=S},x.prototype.setNumberOfExtraLines=function(S){if(this.rowStart=Number.MAX_SAFE_INTEGER,this.rowEnd=Number.MIN_SAFE_INTEGER,S<0){this.numberOfExtraLines=0;return}this.numberOfExtraLines=S},x.prototype.setAriaLabel=function(){var S="";if(this.host.$textInputAriaLabel&&(S+="".concat(this.host.$textInputAriaLabel,", ")),this.host.session){var E=this.host.session.selection.cursor.row;S+=a("text-input.aria-label","Cursor at row $0",[E+1])}this.text.setAttribute("aria-label",S)},x.prototype.setAriaOptions=function(S){S.activeDescendant?(this.text.setAttribute("aria-haspopup","true"),this.text.setAttribute("aria-autocomplete",S.inline?"both":"list"),this.text.setAttribute("aria-activedescendant",S.activeDescendant)):(this.text.setAttribute("aria-haspopup","false"),this.text.setAttribute("aria-autocomplete","both"),this.text.removeAttribute("aria-activedescendant")),S.role&&this.text.setAttribute("role",S.role),S.setLabel&&(this.text.setAttribute("aria-roledescription",a("text-input.aria-roledescription","editor")),this.setAriaLabel())},x.prototype.focus=function(){var S=this;if(this.setAriaOptions({setLabel:this.host.renderer.enableKeyboardAccessibility}),this.tempStyle||h||this.$focusScroll=="browser")return this.text.focus({preventScroll:!0});var E=this.text.style.top;this.text.style.position="fixed",this.text.style.top="0px";try{var k=this.text.getBoundingClientRect().top!=0}catch{return}var T=[];if(k)for(var I=this.text.parentElement;I&&I.nodeType==1;)T.push(I),I.setAttribute("ace_nocontext","true"),!I.parentElement&&I.getRootNode?I=I.getRootNode().host:I=I.parentElement;this.text.focus({preventScroll:!0}),k&&T.forEach(function(P){P.removeAttribute("ace_nocontext")}),setTimeout(function(){S.text.style.position="",S.text.style.top=="0px"&&(S.text.style.top=E)},0)},x.prototype.blur=function(){this.text.blur()},x.prototype.isFocused=function(){return this.$isFocused},x.prototype.setInputHandler=function(S){this.inputHandler=S},x.prototype.getInputHandler=function(){return this.inputHandler},x.prototype.getElement=function(){return this.text},x.prototype.setCommandMode=function(S){this.commandMode=S,this.text.readOnly=!1},x.prototype.setReadOnly=function(S){this.commandMode||(this.text.readOnly=S)},x.prototype.setCopyWithEmptySelection=function(S){},x.prototype.onContextMenu=function(S){this.afterContextMenu=!0,this.resetSelection(),this.host._emit("nativecontextmenu",{target:this.host,domEvent:S}),this.moveToMouse(S,!0)},x.prototype.moveToMouse=function(S,E){var k=this;this.tempStyle||(this.tempStyle=this.text.style.cssText),this.text.style.cssText=(E?"z-index:100000;":"")+(m.isIE?"opacity:0.1;":"")+"text-indent: -"+(this.lastSelectionStart+this.lastSelectionEnd)*this.host.renderer.characterWidth*.5+"px;";var T=this.host.container.getBoundingClientRect(),I=o.computedStyle(this.host.container),P=T.top+(parseInt(I.borderTopWidth)||0),C=T.left+(parseInt(I.borderLeftWidth)||0),b=T.bottom-P-this.text.clientHeight-2,A=function(_){o.translate(k.text,_.clientX-C-2,Math.min(_.clientY-P-2,b))};A(S),S.type=="mousedown"&&(this.host.renderer.$isMousePressed=!0,clearTimeout(this.closeTimeout),m.isWin&&s.capture(this.host.container,A,this.onContextMenuClose.bind(this)))},x.prototype.destroy=function(){this.text.parentElement&&this.text.parentElement.removeChild(this.text)},x})();n.TextInput=R,n.$setUserAgentForTests=function(x,S){M=x,y=S}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(t,n,i){var s=t("../lib/useragent"),a=0,m=550,o=(function(){function f(u){u.$clickSelection=null;var h=u.editor;h.setDefaultHandler("mousedown",this.onMouseDown.bind(u)),h.setDefaultHandler("dblclick",this.onDoubleClick.bind(u)),h.setDefaultHandler("tripleclick",this.onTripleClick.bind(u)),h.setDefaultHandler("quadclick",this.onQuadClick.bind(u)),h.setDefaultHandler("mousewheel",this.onMouseWheel.bind(u));var c=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];c.forEach(function(p){u[p]=this[p]},this),u.selectByLines=this.extendSelectionBy.bind(u,"getLineRange"),u.selectByWords=this.extendSelectionBy.bind(u,"getWordRange")}return f.prototype.onMouseDown=function(u){var h=u.inSelection(),c=u.getDocumentPosition();this.mousedownEvent=u;var p=this.editor,g=u.getButton();if(g!==0){var y=p.getSelectionRange(),w=y.isEmpty();(w||g==1)&&p.selection.moveToPosition(c),g==2&&(p.textInput.onContextMenu(u.domEvent),s.isMozilla||u.preventDefault());return}if(this.mousedownEvent.time=Date.now(),h&&!p.isFocused()&&(p.focus(),this.$focusTimeout&&!this.$clickSelection&&!p.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(u);return}return this.captureMouse(u),this.startSelect(c,u.domEvent._clicks>1),u.preventDefault()},f.prototype.startSelect=function(u,h){u=u||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var c=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?c.selection.selectToPosition(u):h||c.selection.moveToPosition(u),h||this.select(),c.setStyle("ace_selecting"),this.setState("select"))},f.prototype.select=function(){var u,h=this.editor,c=h.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var p=this.$clickSelection.comparePoint(c);if(p==-1)u=this.$clickSelection.end;else if(p==1)u=this.$clickSelection.start;else{var g=l(this.$clickSelection,c,h.session);c=g.cursor,u=g.anchor}h.selection.setSelectionAnchor(u.row,u.column)}h.selection.selectToPosition(c),h.renderer.scrollCursorIntoView()},f.prototype.extendSelectionBy=function(u){var h,c=this.editor,p=c.renderer.screenToTextCoordinates(this.x,this.y),g=c.selection[u](p.row,p.column);if(this.$clickSelection){var y=this.$clickSelection.comparePoint(g.start),w=this.$clickSelection.comparePoint(g.end);if(y==-1&&w<=0)h=this.$clickSelection.end,(g.end.row!=p.row||g.end.column!=p.column)&&(p=g.start);else if(w==1&&y>=0)h=this.$clickSelection.start,(g.start.row!=p.row||g.start.column!=p.column)&&(p=g.end);else if(y==-1&&w==1)p=g.end,h=g.start;else{var M=l(this.$clickSelection,p,c.session);p=M.cursor,h=M.anchor}c.selection.setSelectionAnchor(h.row,h.column)}c.selection.selectToPosition(p),c.renderer.scrollCursorIntoView()},f.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},f.prototype.focusWait=function(){var u=d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),h=Date.now();(u>a||h-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},f.prototype.onDoubleClick=function(u){var h=u.getDocumentPosition(),c=this.editor,p=c.session,g=p.getBracketRange(h);g?(g.isEmpty()&&(g.start.column--,g.end.column++),this.setState("select")):(g=c.selection.getWordRange(h.row,h.column),this.setState("selectByWords")),this.$clickSelection=g,this.select()},f.prototype.onTripleClick=function(u){var h=u.getDocumentPosition(),c=this.editor;this.setState("selectByLines");var p=c.getSelectionRange();p.isMultiLine()&&p.contains(h.row,h.column)?(this.$clickSelection=c.selection.getLineRange(p.start.row),this.$clickSelection.end=c.selection.getLineRange(p.end.row).end):this.$clickSelection=c.selection.getLineRange(h.row),this.select()},f.prototype.onQuadClick=function(u){var h=this.editor;h.selectAll(),this.$clickSelection=h.getSelectionRange(),this.setState("selectAll")},f.prototype.onMouseWheel=function(u){if(!u.getAccelKey()){u.getShiftKey()&&u.wheelY&&!u.wheelX&&(u.wheelX=u.wheelY,u.wheelY=0);var h=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var c=this.$lastScroll,p=u.domEvent.timeStamp,g=p-c.t,y=g?u.wheelX/g:c.vx,w=g?u.wheelY/g:c.vy;g<m&&(y=(y+c.vx)/2,w=(w+c.vy)/2);var M=Math.abs(y/w),R=!1;if(M>=1&&h.renderer.isScrollableBy(u.wheelX*u.speed,0)&&(R=!0),M<=1&&h.renderer.isScrollableBy(0,u.wheelY*u.speed)&&(R=!0),R)c.allowed=p;else if(p-c.allowed<m){var x=Math.abs(y)<=1.5*Math.abs(c.vx)&&Math.abs(w)<=1.5*Math.abs(c.vy);x?(R=!0,c.allowed=p):c.allowed=0}if(c.t=p,c.vx=y,c.vy=w,R)return h.renderer.scrollBy(u.wheelX*u.speed,u.wheelY*u.speed),u.stop()}},f})();o.prototype.selectEnd=o.prototype.selectByLinesEnd,o.prototype.selectAllEnd=o.prototype.selectByLinesEnd,o.prototype.selectByWordsEnd=o.prototype.selectByLinesEnd,n.DefaultHandlers=o;function d(f,u,h,c){return Math.sqrt(Math.pow(h-f,2)+Math.pow(c-u,2))}function l(f,u,h){if(f.start.row==f.end.row)var c=2*u.column-f.start.column-f.end.column;else if(f.start.row==f.end.row-1&&!f.start.column&&!f.end.column)var c=3*u.column-2*h.getLine(f.start.row).length;else var c=2*u.row-f.start.row-f.end.row;return c<0?{cursor:f.start,anchor:f.end}:{cursor:f.end,anchor:f.start}}}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,n,i){var s=t("../lib/event"),a=t("../lib/useragent"),m=(function(){function o(d,l){this.speed,this.wheelX,this.wheelY,this.domEvent=d,this.editor=l,this.x=this.clientX=d.clientX,this.y=this.clientY=d.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return o.prototype.stopPropagation=function(){s.stopPropagation(this.domEvent),this.propagationStopped=!0},o.prototype.preventDefault=function(){s.preventDefault(this.domEvent),this.defaultPrevented=!0},o.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},o.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},o.prototype.getGutterRow=function(){var d=this.getDocumentPosition().row,l=this.editor.session.documentToScreenRow(d,0),f=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return l-f},o.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var d=this.editor,l=d.getSelectionRange();if(l.isEmpty())this.$inSelection=!1;else{var f=this.getDocumentPosition();this.$inSelection=l.contains(f.row,f.column)}return this.$inSelection},o.prototype.getButton=function(){return s.getButton(this.domEvent)},o.prototype.getShiftKey=function(){return this.domEvent.shiftKey},o.prototype.getAccelKey=function(){return a.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},o})();n.MouseEvent=m}),ace.define("ace/lib/scroll",["require","exports","module"],function(t,n,i){n.preventParentScroll=function(a){a.stopPropagation();var m=a.currentTarget,o=m.scrollHeight>m.clientHeight;o||a.preventDefault()}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(t,n,i){var s=this&&this.__extends||(function(){var p=function(g,y){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,M){w.__proto__=M}||function(w,M){for(var R in M)Object.prototype.hasOwnProperty.call(M,R)&&(w[R]=M[R])},p(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");p(g,y);function w(){this.constructor=g}g.prototype=y===null?Object.create(y):(w.prototype=y.prototype,new w)}})(),a=this&&this.__values||function(p){var g=typeof Symbol=="function"&&Symbol.iterator,y=g&&p[g],w=0;if(y)return y.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&w>=p.length&&(p=void 0),{value:p&&p[w++],done:!p}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.")},m=t("./lib/dom");t("./lib/event");var o=t("./range").Range,d=t("./lib/scroll").preventParentScroll,l="ace_tooltip",f=(function(){function p(g){this.isOpen=!1,this.$element=null,this.$parentNode=g}return p.prototype.$init=function(){return this.$element=m.createElement("div"),this.$element.className=l,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},p.prototype.getElement=function(){return this.$element||this.$init()},p.prototype.setText=function(g){this.getElement().textContent=g},p.prototype.setHtml=function(g){this.getElement().innerHTML=g},p.prototype.setPosition=function(g,y){this.getElement().style.left=g+"px",this.getElement().style.top=y+"px"},p.prototype.setClassName=function(g){m.addCssClass(this.getElement(),g)},p.prototype.setTheme=function(g){this.theme&&(this.theme.isDark&&m.removeCssClass(this.getElement(),"ace_dark"),this.theme.cssClass&&m.removeCssClass(this.getElement(),this.theme.cssClass)),g.isDark&&m.addCssClass(this.getElement(),"ace_dark"),g.cssClass&&m.addCssClass(this.getElement(),g.cssClass),this.theme={isDark:g.isDark,cssClass:g.cssClass}},p.prototype.show=function(g,y,w){g!=null&&this.setText(g),y!=null&&w!=null&&this.setPosition(y,w),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},p.prototype.hide=function(g){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=l,this.isOpen=!1)},p.prototype.getHeight=function(){return this.getElement().offsetHeight},p.prototype.getWidth=function(){return this.getElement().offsetWidth},p.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},p})(),u=(function(){function p(){this.popups=[]}return p.prototype.addPopup=function(g){this.popups.push(g),this.updatePopups()},p.prototype.removePopup=function(g){var y=this.popups.indexOf(g);y!==-1&&(this.popups.splice(y,1),this.updatePopups())},p.prototype.updatePopups=function(){var g,y,w,M;this.popups.sort(function(C,b){return b.priority-C.priority});var R=[];try{for(var x=a(this.popups),S=x.next();!S.done;S=x.next()){var E=S.value,k=!0;try{for(var T=(w=void 0,a(R)),I=T.next();!I.done;I=T.next()){var P=I.value;if(this.doPopupsOverlap(P,E)){k=!1;break}}}catch(C){w={error:C}}finally{try{I&&!I.done&&(M=T.return)&&M.call(T)}finally{if(w)throw w.error}}k?R.push(E):E.hide()}}catch(C){g={error:C}}finally{try{S&&!S.done&&(y=x.return)&&y.call(x)}finally{if(g)throw g.error}}},p.prototype.doPopupsOverlap=function(g,y){var w=g.getElement().getBoundingClientRect(),M=y.getElement().getBoundingClientRect();return w.left<M.right&&w.right>M.left&&w.top<M.bottom&&w.bottom>M.top},p})(),h=new u;n.popupManager=h,n.Tooltip=f;var c=(function(p){s(g,p);function g(y){y===void 0&&(y=document.body);var w=p.call(this,y)||this;w.timeout=void 0,w.lastT=0,w.idleTime=350,w.lastEvent=void 0,w.onMouseOut=w.onMouseOut.bind(w),w.onMouseMove=w.onMouseMove.bind(w),w.waitForHover=w.waitForHover.bind(w),w.hide=w.hide.bind(w);var M=w.getElement();return M.style.whiteSpace="pre-wrap",M.style.pointerEvents="auto",M.addEventListener("mouseout",w.onMouseOut),M.tabIndex=-1,M.addEventListener("blur",function(){M.contains(document.activeElement)||this.hide()}.bind(w)),M.addEventListener("wheel",d),w}return g.prototype.addToEditor=function(y){y.on("mousemove",this.onMouseMove),y.on("mousedown",this.hide);var w=y.renderer.getMouseEventTarget();w&&typeof w.removeEventListener=="function"&&w.addEventListener("mouseout",this.onMouseOut,!0)},g.prototype.removeFromEditor=function(y){y.off("mousemove",this.onMouseMove),y.off("mousedown",this.hide);var w=y.renderer.getMouseEventTarget();w&&typeof w.removeEventListener=="function"&&w.removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},g.prototype.onMouseMove=function(y,w){this.lastEvent=y,this.lastT=Date.now();var M=w.$mouseHandler.isMousePressed;if(this.isOpen){var R=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(R.row,R.column)||M||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||M||(this.lastEvent=y,this.timeout=setTimeout(this.waitForHover,this.idleTime))},g.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var y=Date.now()-this.lastT;if(this.idleTime-y>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-y);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},g.prototype.isOutsideOfText=function(y){var w=y.editor,M=y.getDocumentPosition(),R=w.session.getLine(M.row);if(M.column==R.length){var x=w.renderer.pixelToScreenCoordinates(y.clientX,y.clientY),S=w.session.documentToScreenPosition(M.row,M.column);if(S.column!=x.column||S.row!=x.row)return!0}return!1},g.prototype.setDataProvider=function(y){this.$gatherData=y},g.prototype.showForRange=function(y,w,M,R){if(!(R&&R!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var x=y.renderer;this.isOpen||(h.addPopup(this),this.$registerCloseEvents(),this.setTheme(x.theme)),this.isOpen=!0,this.range=o.fromPoints(w.start,w.end);var S=x.textToScreenCoordinates(w.start.row,w.start.column),E=x.scroller.getBoundingClientRect();S.pageX<E.left&&(S.pageX=E.left);var k=this.getElement();k.innerHTML="",k.appendChild(M),k.style.maxHeight="",k.style.display="block",this.$setPosition(y,S,!0,w),m.$fixPositionBug(k)}},g.prototype.$setPosition=function(y,w,M,R){var x=10;M&&this.addMarker(R,y.session);var S=y.renderer,E=this.getElement(),k=E.offsetHeight,T=E.offsetWidth,I=w.pageY,P=w.pageX,C=window.innerHeight-I-S.lineHeight,b=this.$shouldPlaceAbove(k,I,C-x);E.style.maxHeight=(b?I:C)-x+"px",E.style.top=b?"":I+S.lineHeight+"px",E.style.bottom=b?window.innerHeight-I+"px":"",E.style.left=Math.min(P,window.innerWidth-T-x)+"px"},g.prototype.$shouldPlaceAbove=function(y,w,M){return!(w-y<0&&w<M)},g.prototype.addMarker=function(y,w){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=w,this.marker=w&&w.addMarker(y,"ace_highlight-marker","text")},g.prototype.hide=function(y){y&&this.$fromKeyboard&&y.type=="keydown"&&y.code=="Escape"||!y&&document.activeElement==this.getElement()||y&&y.target&&(y.type!="keydown"||y.ctrlKey||y.metaKey)&&this.$element.contains(y.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$fromKeyboard=!1,this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,h.removePopup(this)))},g.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},g.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},g.prototype.onMouseOut=function(y){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!y.relatedTarget||this.getElement().contains(y.relatedTarget)||y&&y.currentTarget.contains(y.relatedTarget)||y.relatedTarget.classList.contains("ace_content")||this.hide())},g})(f);n.HoverTooltip=c}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/mouse/mouse_event","ace/tooltip","ace/config","ace/range"],function(t,n,i){var s=this&&this.__extends||(function(){var c=function(p,g){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var M in w)Object.prototype.hasOwnProperty.call(w,M)&&(y[M]=w[M])},c(p,g)};return function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");c(p,g);function y(){this.constructor=p}p.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}})(),a=this&&this.__values||function(c){var p=typeof Symbol=="function"&&Symbol.iterator,g=p&&c[p],y=0;if(g)return g.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&y>=c.length&&(c=void 0),{value:c&&c[y++],done:!c}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")},m=t("../lib/dom"),o=t("./mouse_event").MouseEvent,d=t("../tooltip").HoverTooltip,l=t("../config").nls,f=t("../range").Range;function u(c){var p=c.editor,g=p.renderer.$gutterLayer;c.$tooltip=new h(p),c.$tooltip.addToEditor(p),c.$tooltip.setDataProvider(function(y,w){var M=y.getDocumentPosition().row;c.$tooltip.showTooltip(M)}),c.editor.setDefaultHandler("guttermousedown",function(y){if(!(!p.isFocused()||y.getButton()!=0)){var w=g.getRegion(y);if(w!="foldWidgets"){var M=y.getDocumentPosition().row,R=p.session.selection;if(y.getShiftKey())R.selectTo(M,0);else{if(y.domEvent.detail==2)return p.selectAll(),y.preventDefault();c.$clickSelection=p.selection.getLineRange(M)}return c.setState("selectByLines"),c.captureMouse(y),y.preventDefault()}}})}n.GutterHandler=u;var h=(function(c){s(p,c);function p(g){var y=c.call(this,g.container)||this;y.id="gt"+ ++p.$uid,y.editor=g,y.visibleTooltipRow;var w=y.getElement();return w.setAttribute("role","tooltip"),w.setAttribute("id",y.id),w.style.pointerEvents="auto",y.idleTime=50,y.onDomMouseMove=y.onDomMouseMove.bind(y),y.onDomMouseOut=y.onDomMouseOut.bind(y),y.setClassName("ace_gutter-tooltip"),y}return p.prototype.onDomMouseMove=function(g){var y=new o(g,this.editor);this.onMouseMove(y,this.editor)},p.prototype.onDomMouseOut=function(g){var y=new o(g,this.editor);this.onMouseOut(y)},p.prototype.addToEditor=function(g){var y=g.renderer.$gutter;y.addEventListener("mousemove",this.onDomMouseMove),y.addEventListener("mouseout",this.onDomMouseOut),c.prototype.addToEditor.call(this,g)},p.prototype.removeFromEditor=function(g){var y=g.renderer.$gutter;y.removeEventListener("mousemove",this.onDomMouseMove),y.removeEventListener("mouseout",this.onDomMouseOut),c.prototype.removeFromEditor.call(this,g)},p.prototype.destroy=function(){this.editor&&this.removeFromEditor(this.editor),c.prototype.destroy.call(this)},Object.defineProperty(p,"annotationLabels",{get:function(){return{error:{singular:l("gutter-tooltip.aria-label.error.singular","error"),plural:l("gutter-tooltip.aria-label.error.plural","errors")},security:{singular:l("gutter-tooltip.aria-label.security.singular","security finding"),plural:l("gutter-tooltip.aria-label.security.plural","security findings")},warning:{singular:l("gutter-tooltip.aria-label.warning.singular","warning"),plural:l("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:l("gutter-tooltip.aria-label.info.singular","information message"),plural:l("gutter-tooltip.aria-label.info.plural","information messages")},hint:{singular:l("gutter-tooltip.aria-label.hint.singular","suggestion"),plural:l("gutter-tooltip.aria-label.hint.plural","suggestions")}}},enumerable:!1,configurable:!0}),p.prototype.showTooltip=function(g){var y,w=this.editor.renderer.$gutterLayer,M=w.$annotations[g],R;M?R={displayText:Array.from(M.displayText),type:Array.from(M.type)}:R={displayText:[],type:[]};var x=w.session.getFoldLine(g);if(x&&w.$showFoldedAnnotations){for(var S={error:[],security:[],warning:[],info:[],hint:[]},E={error:1,security:2,warning:3,info:4,hint:5},k,T=g+1;T<=x.end.row;T++)if(w.$annotations[T])for(var I=0;I<w.$annotations[T].text.length;I++){var P=w.$annotations[T].type[I];S[P].push(w.$annotations[T].text[I]),(!k||E[P]<E[k])&&(k=P)}if(["error","security","warning"].includes(k)){var C="".concat(p.annotationsToSummaryString(S)," in folded code.");R.displayText.push(C),R.type.push(k+"_fold")}}if(R.displayText.length===0)return this.hide();for(var b={error:[],security:[],warning:[],info:[],hint:[]},A=w.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",T=0;T<R.displayText.length;T++){var _=m.createElement("span"),L=m.createElement("span");(y=L.classList).add.apply(y,["ace_".concat(R.type[T]),A]),L.setAttribute("aria-label","".concat(p.annotationLabels[R.type[T].replace("_fold","")].singular)),L.setAttribute("role","img"),L.appendChild(m.createTextNode(" ")),_.appendChild(L),_.appendChild(m.createTextNode(R.displayText[T])),_.appendChild(m.createElement("br")),b[R.type[T].replace("_fold","")].push(_)}var O=m.createElement("span");b.error.forEach(function(W){return O.appendChild(W)}),b.security.forEach(function(W){return O.appendChild(W)}),b.warning.forEach(function(W){return O.appendChild(W)}),b.info.forEach(function(W){return O.appendChild(W)}),b.hint.forEach(function(W){return O.appendChild(W)}),O.setAttribute("aria-live","polite");var V=this.$findLinkedAnnotationNode(g);V&&V.setAttribute("aria-describedby",this.id);var B=f.fromPoints({row:g,column:0},{row:g,column:0});this.showForRange(this.editor,B,O),this.visibleTooltipRow=g,this.editor._signal("showGutterTooltip",this)},p.prototype.$setPosition=function(g,y,w,M){var R=this.$findCellByRow(M.start.row);if(R){var x=R&&R.element,S=x&&x.querySelector(".ace_gutter_annotation");if(S){var E=S.getBoundingClientRect();if(E){var k={pageX:E.right,pageY:E.top};return c.prototype.$setPosition.call(this,g,k,!1,M)}}}},p.prototype.$shouldPlaceAbove=function(g,y,w){return w<g},p.prototype.$findLinkedAnnotationNode=function(g){var y=this.$findCellByRow(g);if(y){var w=y.element;if(w.childNodes.length>2)return w.childNodes[2]}},p.prototype.$findCellByRow=function(g){return this.editor.renderer.$gutterLayer.$lines.cells.find(function(y){return y.row===g})},p.prototype.hide=function(g){if(this.isOpen){if(this.$element.removeAttribute("aria-live"),this.visibleTooltipRow!=null){var y=this.$findLinkedAnnotationNode(this.visibleTooltipRow);y&&y.removeAttribute("aria-describedby")}this.visibleTooltipRow=void 0,this.editor._signal("hideGutterTooltip",this),c.prototype.hide.call(this,g)}},p.annotationsToSummaryString=function(g){var y,w,M=[],R=["error","security","warning","info","hint"];try{for(var x=a(R),S=x.next();!S.done;S=x.next()){var E=S.value;if(g[E].length){var k=g[E].length===1?p.annotationLabels[E].singular:p.annotationLabels[E].plural;M.push("".concat(g[E].length," ").concat(k))}}}catch(T){y={error:T}}finally{try{S&&!S.done&&(w=x.return)&&w.call(x)}finally{if(y)throw y.error}}return M.join(", ")},p.prototype.isOutsideOfText=function(g){var y=g.editor,w=y.renderer.$gutter.getBoundingClientRect();return!(g.clientX>=w.left&&g.clientX<=w.right&&g.clientY>=w.top&&g.clientY<=w.bottom)},p})(d);h.$uid=0,n.GutterTooltip=h}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,n,i){var s=t("../lib/dom"),a=t("../lib/event"),m=t("../lib/useragent"),o=200,d=200,l=5;function f(h){var c=h.editor,p=s.createElement("div");p.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",p.textContent="";var g=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];g.forEach(function(K){h[K]=this[K]},this),c.on("mousedown",this.onMouseDown.bind(h));var y=c.container,w,M,R,x,S,E,k=0,T,I,P,C,b;this.onDragStart=function(K){if(this.cancelDrag||!y.draggable){var Q=this;return setTimeout(function(){Q.startSelect(),Q.captureMouse(K)},0),K.preventDefault()}S=c.getSelectionRange();var X=K.dataTransfer;X.effectAllowed=c.getReadOnly()?"copy":"copyMove",c.container.appendChild(p),X.setDragImage&&X.setDragImage(p,0,0),setTimeout(function(){c.container.removeChild(p)}),X.clearData(),X.setData("Text",c.session.getTextRange()),I=!0,this.setState("drag")},this.onDragEnd=function(K){if(y.draggable=!1,I=!1,this.setState(null),!c.getReadOnly()){var Q=K.dataTransfer.dropEffect;!T&&Q=="move"&&c.session.remove(c.getSelectionRange()),c.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(K){if(!(c.getReadOnly()||!G(K.dataTransfer)))return M=K.clientX,R=K.clientY,w||O(),k++,K.dataTransfer.dropEffect=T=J(K),a.preventDefault(K)},this.onDragOver=function(K){if(!(c.getReadOnly()||!G(K.dataTransfer)))return M=K.clientX,R=K.clientY,w||(O(),k++),B!==null&&(B=null),K.dataTransfer.dropEffect=T=J(K),a.preventDefault(K)},this.onDragLeave=function(K){if(k--,k<=0&&w)return V(),T=null,a.preventDefault(K)},this.onDrop=function(K){if(E){var Q=K.dataTransfer;if(I)switch(T){case"move":S.contains(E.row,E.column)?S={start:E,end:E}:S=c.moveText(S,E);break;case"copy":S=c.moveText(S,E,!0);break}else{var X=Q.getData("Text");S={start:E,end:c.session.insert(E,X)},c.focus(),T=null}return V(),a.preventDefault(K)}},a.addListener(y,"dragstart",this.onDragStart.bind(h),c),a.addListener(y,"dragend",this.onDragEnd.bind(h),c),a.addListener(y,"dragenter",this.onDragEnter.bind(h),c),a.addListener(y,"dragover",this.onDragOver.bind(h),c),a.addListener(y,"dragleave",this.onDragLeave.bind(h),c),a.addListener(y,"drop",this.onDrop.bind(h),c);function A(K,Q){var X=Date.now(),Z=!Q||K.row!=Q.row,re=!Q||K.column!=Q.column;if(!C||Z||re)c.moveCursorToPosition(K),C=X,b={x:M,y:R};else{var se=u(b.x,b.y,M,R);se>l?C=null:X-C>=d&&(c.renderer.scrollCursorIntoView(),C=null)}}function _(K,Q){var X=Date.now(),Z=c.renderer.layerConfig.lineHeight,re=c.renderer.layerConfig.characterWidth,se=c.renderer.scroller.getBoundingClientRect(),he={x:{left:M-se.left,right:se.right-M},y:{top:R-se.top,bottom:se.bottom-R}},ce=Math.min(he.x.left,he.x.right),Ae=Math.min(he.y.top,he.y.bottom),Le={row:K.row,column:K.column};ce/re<=2&&(Le.column+=he.x.left<he.x.right?-3:2),Ae/Z<=1&&(Le.row+=he.y.top<he.y.bottom?-1:1);var Be=K.row!=Le.row,Ye=K.column!=Le.column,ze=!Q||K.row!=Q.row;Be||Ye&&!ze?P?X-P>=o&&c.renderer.scrollCursorIntoView(Le):P=X:P=null}function L(){var K=E;E=c.renderer.screenToTextCoordinates(M,R),A(E,K),_(E,K)}function O(){S=c.selection.toOrientedRange(),w=c.session.addMarker(S,"ace_selection",c.getSelectionStyle()),c.clearSelection(),c.isFocused()&&c.renderer.$cursorLayer.setBlinking(!1),clearInterval(x),L(),x=setInterval(L,20),k=0,a.addListener(document,"mousemove",W)}function V(){clearInterval(x),c.session.removeMarker(w),w=null,c.selection.fromOrientedRange(S),c.isFocused()&&!I&&c.$resetCursorStyle(),S=null,E=null,k=0,P=null,C=null,a.removeListener(document,"mousemove",W)}var B=null;function W(){B==null&&(B=setTimeout(function(){B!=null&&w&&V()},20))}function G(K){var Q=K.types;return!Q||Array.prototype.some.call(Q,function(X){return X=="text/plain"||X=="Text"})}function J(K){var Q=["copy","copymove","all","uninitialized"],X=["move","copymove","linkmove","all","uninitialized"],Z=m.isMac?K.altKey:K.ctrlKey,re="uninitialized";try{re=K.dataTransfer.effectAllowed.toLowerCase()}catch{}var se="none";return Z&&Q.indexOf(re)>=0?se="copy":X.indexOf(re)>=0?se="move":Q.indexOf(re)>=0&&(se="copy"),se}}(function(){this.dragWait=function(){var h=Date.now()-this.mousedownEvent.time;h>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var h=this.editor.container;h.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(h){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var h=this.editor,c=h.container;c.draggable=!0,h.renderer.$cursorLayer.setBlinking(!1),h.setStyle("ace_dragging");var p=m.isWin?"default":"move";h.renderer.setCursorStyle(p),this.setState("dragReady")},this.onMouseDrag=function(h){var c=this.editor.container;if(m.isIE&&this.state=="dragReady"){var p=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);p>3&&c.dragDrop()}if(this.state==="dragWait"){var p=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);p>0&&(c.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(h){if(this.$dragEnabled){this.mousedownEvent=h;var c=this.editor,p=h.inSelection(),g=h.getButton(),y=h.domEvent.detail||1;if(y===1&&g===0&&p){if(h.editor.inMultiSelectMode&&(h.getAccelKey()||h.getShiftKey()))return;this.mousedownEvent.time=Date.now();var w=h.domEvent.target||h.domEvent.srcElement;if("unselectable"in w&&(w.unselectable="on"),c.getDragDelay()){if(m.isWebKit){this.cancelDrag=!0;var M=c.container;M.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(h,this.onMouseDrag.bind(this)),h.defaultPrevented=!0}}}}).call(f.prototype);function u(h,c,p,g){return Math.sqrt(Math.pow(p-h,2)+Math.pow(g-c,2))}n.DragdropHandler=f}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(t,n,i){var s=t("./mouse_event").MouseEvent,a=t("../lib/event"),m=t("../lib/dom");n.addTouchListeners=function(o,d){var l="scroll",f,u,h,c,p,g,y=0,w,M=0,R=0,x=0,S,E;function k(){var A=window.navigator&&window.navigator.clipboard,_=!1,L=function(){var B=d.getCopyText(),W=d.session.getUndoManager().hasUndo();E.replaceChild(m.buildDom(_?["span",!B&&O("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],B&&O("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],B&&O("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],A&&O("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],W&&O("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],O("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],O("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),E.firstChild)},O=function(B){return d.commands.canExecute(B,d)},V=function(B){var W=B.target.getAttribute("action");if(W=="more"||!_)return _=!_,L();W=="paste"?A.readText().then(function(G){d.execCommand(W,G)}):W&&((W=="cut"||W=="copy")&&(A?A.writeText(d.getCopyText()):document.execCommand("copy")),d.execCommand(W)),E.firstChild.style.display="none",_=!1,W!="openCommandPalette"&&d.focus()};E=m.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(B){l="menu",B.stopPropagation(),B.preventDefault(),d.textInput.focus()},ontouchend:function(B){B.stopPropagation(),B.preventDefault(),V(B)},onclick:V},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],d.container)}function T(){if(!d.getOption("enableMobileMenu")){E&&I();return}E||k();var A=d.selection.cursor,_=d.renderer.textToScreenCoordinates(A.row,A.column),L=d.renderer.textToScreenCoordinates(0,0).pageX,O=d.renderer.scrollLeft,V=d.container.getBoundingClientRect();E.style.top=_.pageY-V.top-3+"px",_.pageX-V.left<V.width-70?(E.style.left="",E.style.right="10px"):(E.style.right="",E.style.left=L+O-V.left+"px"),E.style.display="",E.firstChild.style.display="none",d.on("input",I)}function I(A){E&&(E.style.display="none"),d.off("input",I)}function P(){p=null,clearTimeout(p);var A=d.selection.getRange(),_=A.contains(w.row,w.column);(A.isEmpty()||!_)&&(d.selection.moveToPosition(w),d.selection.selectWord()),l="wait",T()}function C(){p=null,clearTimeout(p),d.selection.moveToPosition(w);var A=M>=2?d.selection.getLineRange(w.row):d.session.getBracketRange(w);A&&!A.isEmpty()?d.selection.setRange(A):d.selection.selectWord(),l="wait"}a.addListener(o,"contextmenu",function(A){if(S){var _=d.textInput.getElement();_.focus()}},d),a.addListener(o,"touchstart",function(A){var _=A.touches;if(p||_.length>1){clearTimeout(p),p=null,h=-1,l="zoom";return}S=d.$mouseHandler.isMousePressed=!0;var L=d.renderer.layerConfig.lineHeight,O=d.renderer.layerConfig.lineHeight,V=A.timeStamp;c=V;var B=_[0],W=B.clientX,G=B.clientY;Math.abs(f-W)+Math.abs(u-G)>L&&(h=-1),f=A.clientX=W,u=A.clientY=G,R=x=0;var J=new s(A,d);if(w=J.getDocumentPosition(),V-h<500&&_.length==1&&!y)M++,A.preventDefault(),A.button=0,C();else{M=0;var K=d.selection.cursor,Q=d.selection.isEmpty()?K:d.selection.anchor,X=d.renderer.$cursorLayer.getPixelPosition(K,!0),Z=d.renderer.$cursorLayer.getPixelPosition(Q,!0),re=d.renderer.scroller.getBoundingClientRect(),se=d.renderer.layerConfig.offset,he=d.renderer.scrollLeft,ce=function(Be,Ye){return Be=Be/O,Ye=Ye/L-.75,Be*Be+Ye*Ye};if(A.clientX<re.left){l="zoom";return}var Ae=ce(A.clientX-re.left-X.left+he,A.clientY-re.top-X.top+se),Le=ce(A.clientX-re.left-Z.left+he,A.clientY-re.top-Z.top+se);Ae<3.5&&Le<3.5&&(l=Ae>Le?"cursor":"anchor"),Le<3.5?l="anchor":Ae<3.5?l="cursor":l="scroll",p=setTimeout(P,450)}h=V},d),a.addListener(o,"touchend",function(A){S=d.$mouseHandler.isMousePressed=!1,g&&clearInterval(g),l=="zoom"?(l="",y=0):p?(d.selection.moveToPosition(w),y=0,T()):l=="scroll"?(b(),I()):T(),clearTimeout(p),p=null},d),a.addListener(o,"touchmove",function(A){p&&(clearTimeout(p),p=null);var _=A.touches;if(!(_.length>1||l=="zoom")){var L=_[0],O=f-L.clientX,V=u-L.clientY;if(l=="wait")if(O*O+V*V>4)l="cursor";else return A.preventDefault();f=L.clientX,u=L.clientY,A.clientX=L.clientX,A.clientY=L.clientY;var B=A.timeStamp,W=B-c;if(c=B,l=="scroll"){var G=new s(A,d);G.speed=1,G.wheelX=O,G.wheelY=V,10*Math.abs(O)<Math.abs(V)&&(O=0),10*Math.abs(V)<Math.abs(O)&&(V=0),W!=0&&(R=O/W,x=V/W),d._emit("mousewheel",G),G.propagationStopped||(R=x=0)}else{var J=new s(A,d),K=J.getDocumentPosition();l=="cursor"?d.selection.moveCursorToPosition(K):l=="anchor"&&d.selection.setSelectionAnchor(K.row,K.column),d.renderer.scrollCursorIntoView(K),A.preventDefault()}}},d);function b(){y+=60,g=setInterval(function(){y--<=0&&(clearInterval(g),g=null),Math.abs(R)<.01&&(R=0),Math.abs(x)<.01&&(x=0),y<20&&(R=.9*R),y<20&&(x=.9*x);var A=d.session.getScrollTop();d.renderer.scrollBy(10*R,10*x),A==d.session.getScrollTop()&&(y=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(t,n,i){var s=t("../lib/event"),a=t("../lib/useragent"),m=t("./default_handlers").DefaultHandlers,o=t("./default_gutter_handler").GutterHandler,d=t("./mouse_event").MouseEvent,l=t("./dragdrop_handler").DragdropHandler,f=t("./touch_handler").addTouchListeners,u=t("../config"),h=(function(){function c(p){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var g=this;this.editor=p,new m(this),new o(this),new l(this);var y=function(R){var x=!document.hasFocus||!document.hasFocus()||!p.isFocused()&&document.activeElement==(p.textInput&&p.textInput.getElement());x&&window.focus(),p.focus(),setTimeout(function(){p.isFocused()||p.focus()})},w=p.renderer.getMouseEventTarget();s.addListener(w,"click",this.onMouseEvent.bind(this,"click"),p),s.addListener(w,"mousemove",this.onMouseMove.bind(this,"mousemove"),p),s.addMultiMouseDownListener([w,p.renderer.scrollBarV&&p.renderer.scrollBarV.inner,p.renderer.scrollBarH&&p.renderer.scrollBarH.inner,p.textInput&&p.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",p),s.addMouseWheelListener(p.container,this.onMouseWheel.bind(this,"mousewheel"),p),f(p.container,p);var M=p.renderer.$gutter;s.addListener(M,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),p),s.addListener(M,"click",this.onMouseEvent.bind(this,"gutterclick"),p),s.addListener(M,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),p),s.addListener(M,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),p),s.addListener(w,"mousedown",y,p),s.addListener(M,"mousedown",y,p),a.isIE&&p.renderer.scrollBarV&&(s.addListener(p.renderer.scrollBarV.element,"mousedown",y,p),s.addListener(p.renderer.scrollBarH.element,"mousedown",y,p)),p.on("mousemove",function(R){if(!(g.state||g.$dragDelay||!g.$dragEnabled)){var x=p.renderer.screenToTextCoordinates(R.x,R.y),S=p.session.selection.getRange(),E=p.renderer;!S.isEmpty()&&S.insideStart(x.row,x.column)?E.setCursorStyle("default"):E.setCursorStyle("")}},p)}return c.prototype.onMouseEvent=function(p,g){this.editor.session&&this.editor._emit(p,new d(g,this.editor))},c.prototype.onMouseMove=function(p,g){var y=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!y||!y.length||this.editor._emit(p,new d(g,this.editor))},c.prototype.onMouseWheel=function(p,g){var y=new d(g,this.editor);y.speed=this.$scrollSpeed*2,y.wheelX=g.wheelX,y.wheelY=g.wheelY,this.editor._emit(p,y)},c.prototype.setState=function(p){this.state=p},c.prototype.captureMouse=function(p,g){this.x=p.x,this.y=p.y,this.isMousePressed=!0;var y=this.editor,w=this.editor.renderer;w.$isMousePressed=!0;var M=this,R=!0,x=function(I){if(I){if(a.isWebKit&&!I.which&&M.releaseMouse)return M.releaseMouse();M.x=I.clientX,M.y=I.clientY,g&&g(I),M.mouseEvent=new d(I,M.editor),M.$mouseMoved=!0}},S=function(I){y.off("beforeEndOperation",T),R=!1,y.session&&E(),M[M.state+"End"]&&M[M.state+"End"](I),M.state="",M.isMousePressed=w.$isMousePressed=!1,w.$keepTextAreaAtCursor&&w.$moveTextAreaToCursor(),M.$onCaptureMouseMove=M.releaseMouse=null,I&&M.onMouseEvent("mouseup",I),y.endOperation()},E=function(){M[M.state]&&M[M.state](),M.$mouseMoved=!1},k=function(){R&&(E(),s.nextFrame(k))};if(a.isOldIE&&p.domEvent.type=="dblclick")return setTimeout(function(){S(p)});var T=function(I){M.releaseMouse&&y.curOp.command.name&&y.curOp.selectionChanged&&(M[M.state+"End"]&&M[M.state+"End"](),M.state="",M.releaseMouse())};y.on("beforeEndOperation",T),y.startOperation({command:{name:"mouse"}}),M.$onCaptureMouseMove=x,M.releaseMouse=s.capture(this.editor.container,x,S),k()},c.prototype.cancelContextMenu=function(){var p=function(g){g&&g.domEvent&&g.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",p),g&&g.domEvent&&s.stopEvent(g.domEvent))}.bind(this);setTimeout(p,10),this.editor.on("nativecontextmenu",p)},c.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse(),this.$tooltip&&this.$tooltip.destroy()},c})();h.prototype.releaseMouse=null,u.defineOptions(h.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:a.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0}}),n.MouseHandler=h}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(t,n,i){var s=t("../lib/dom"),a=(function(){function m(o){o.on("click",function(d){var l=d.getDocumentPosition(),f=o.session,u=f.getFoldAt(l.row,l.column,1);u&&(d.getAccelKey()?f.removeFold(u):f.expandFold(u),d.stop());var h=d.domEvent&&d.domEvent.target;h&&s.hasCssClass(h,"ace_inline_button")&&s.hasCssClass(h,"ace_toggle_wrap")&&(f.setOption("wrap",!f.getUseWrapMode()),o.renderer.scrollCursorIntoView())}),o.on("gutterclick",function(d){var l=o.renderer.$gutterLayer.getRegion(d);if(l=="foldWidgets"){var f=d.getDocumentPosition().row,u=o.session;u.foldWidgets&&u.foldWidgets[f]&&o.session.onFoldWidgetClick(f,d),o.isFocused()||o.focus(),d.stop()}}),o.on("gutterdblclick",function(d){var l=o.renderer.$gutterLayer.getRegion(d);if(l=="foldWidgets"){var f=d.getDocumentPosition().row,u=o.session,h=u.getParentFoldRangeData(f,!0),c=h.range||h.firstRange;if(c){f=c.start.row;var p=u.getFoldAt(f,u.getLine(f).length,1);p?u.removeFold(p):(u.addFold("...",c),o.renderer.scrollCursorIntoView({row:c.start.row,column:0}))}d.stop()}})}return m})();n.FoldHandler=a}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(t,n,i){var s=t("../lib/keys"),a=t("../lib/event"),m=(function(){function o(d){this.$editor=d,this.$data={editor:d},this.$handlers=[],this.setDefaultHandler(d.commands)}return o.prototype.setDefaultHandler=function(d){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=d,this.addKeyboardHandler(d,0)},o.prototype.setKeyboardHandler=function(d){var l=this.$handlers;if(l[l.length-1]!=d){for(;l[l.length-1]&&l[l.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(l[l.length-1]);this.addKeyboardHandler(d,1)}},o.prototype.addKeyboardHandler=function(d,l){if(d){typeof d=="function"&&!d.handleKeyboard&&(d.handleKeyboard=d);var f=this.$handlers.indexOf(d);f!=-1&&this.$handlers.splice(f,1),l==null?this.$handlers.push(d):this.$handlers.splice(l,0,d),f==-1&&d.attach&&d.attach(this.$editor)}},o.prototype.removeKeyboardHandler=function(d){var l=this.$handlers.indexOf(d);return l==-1?!1:(this.$handlers.splice(l,1),d.detach&&d.detach(this.$editor),!0)},o.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},o.prototype.getStatusText=function(){var d=this.$data,l=d.editor;return this.$handlers.map(function(f){return f.getStatusText&&f.getStatusText(l,d)||""}).filter(Boolean).join(" ")},o.prototype.$callKeyboardHandlers=function(d,l,f,u){for(var h,c=!1,p=this.$editor.commands,g=this.$handlers.length;g--&&(h=this.$handlers[g].handleKeyboard(this.$data,d,l,f,u),!(!(!h||!h.command)&&(h.command=="null"?c=!0:c=p.exec(h.command,this.$editor,h.args,u),c&&u&&d!=-1&&h.passEvent!=!0&&h.command.passEvent!=!0&&a.stopEvent(u),c))););return!c&&d==-1&&(h={command:"insertstring"},c=p.exec("insertstring",this.$editor,l)),c&&this.$editor._signal&&this.$editor._signal("keyboardActivity",h),c},o.prototype.onCommandKey=function(d,l,f){var u=s.keyCodeToString(f);return this.$callKeyboardHandlers(l,u,f,d)},o.prototype.onTextInput=function(d){return this.$callKeyboardHandlers(-1,d)},o})();n.KeyBinding=m}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(t,n,i){var s=0,a=0,m=!1,o=!1,d=!1,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],u=0,h=1,c=0,p=1,g=2,y=3,w=4,M=5,R=6,x=7,S=8,E=9,k=10,T=11,I=12,P=13,C=14,b=15,A=16,_=17,L=18,O=[L,L,L,L,L,L,L,L,L,R,M,R,S,M,L,L,L,L,L,L,L,L,L,L,L,L,L,L,M,M,M,R,S,w,w,T,T,T,w,w,w,w,w,k,E,k,E,E,g,g,g,g,g,g,g,g,g,g,E,w,w,w,w,w,w,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,w,w,w,w,w,w,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,w,w,w,w,L,L,L,L,L,L,M,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,E,w,T,T,T,T,w,w,w,w,c,w,w,L,w,w,T,T,g,g,w,c,w,w,w,g,c,w,w,w,w,w],V=[S,S,S,S,S,S,S,S,S,S,S,L,L,L,c,p,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,S,M,P,C,b,A,_,E,T,T,T,T,T,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,E,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,S];function B(K,Q,X,Z){var re=s?f:l,se=null,he=null,ce=null,Ae=0,Le=null,Be=null,Ye=-1,ze=null,lt=null,jt=[];if(!Z)for(ze=0,Z=[];ze<X;ze++)Z[ze]=J(K[ze]);for(a=s,m=!1,o=!1,d=!1,lt=0;lt<X;lt++){if(se=Ae,jt[lt]=he=G(K,Z,jt,lt),Ae=re[se][he],Le=Ae&240,Ae&=15,Q[lt]=ce=re[Ae][5],Le>0)if(Le==16){for(ze=Ye;ze<lt;ze++)Q[ze]=1;Ye=-1}else Ye=-1;if(Be=re[Ae][6],Be)Ye==-1&&(Ye=lt);else if(Ye>-1){for(ze=Ye;ze<lt;ze++)Q[ze]=ce;Ye=-1}Z[lt]==M&&(Q[lt]=0),a|=ce}if(d){for(ze=0;ze<X;ze++)if(Z[ze]==R){Q[ze]=s;for(var Dt=ze-1;Dt>=0&&Z[Dt]==S;Dt--)Q[Dt]=s}}}function W(K,Q,X){if(!(a<K)){if(K==1&&s==h&&!o){X.reverse();return}for(var Z=X.length,re=0,se,he,ce,Ae;re<Z;){if(Q[re]>=K){for(se=re+1;se<Z&&Q[se]>=K;)se++;for(he=re,ce=se-1;he<ce;he++,ce--)Ae=X[he],X[he]=X[ce],X[ce]=Ae;re=se}re++}}}function G(K,Q,X,Z){var re=Q[Z],se,he,ce,Ae;switch(re){case c:case p:m=!1;case w:case y:return re;case g:return m?y:g;case x:return m=!0,p;case S:return w;case E:return Z<1||Z+1>=Q.length||(se=X[Z-1])!=g&&se!=y||(he=Q[Z+1])!=g&&he!=y?w:(m&&(he=y),he==se?he:w);case k:return se=Z>0?X[Z-1]:M,se==g&&Z+1<Q.length&&Q[Z+1]==g?g:w;case T:if(Z>0&&X[Z-1]==g)return g;if(m)return w;for(Ae=Z+1,ce=Q.length;Ae<ce&&Q[Ae]==T;)Ae++;return Ae<ce&&Q[Ae]==g?g:w;case I:for(ce=Q.length,Ae=Z+1;Ae<ce&&Q[Ae]==I;)Ae++;if(Ae<ce){var Le=K[Z],Be=Le>=1425&&Le<=2303||Le==64286;if(se=Q[Ae],Be&&(se==p||se==x))return p}return Z<1||(se=Q[Z-1])==M?w:X[Z-1];case M:return m=!1,o=!0,s;case R:return d=!0,w;case P:case C:case A:case _:case b:m=!1;case L:return w}}function J(K){var Q=K.charCodeAt(0),X=Q>>8;return X==0?Q>191?c:O[Q]:X==5?/[\u0591-\u05f4]/.test(K)?p:c:X==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(K)?I:/[\u0660-\u0669\u066b-\u066c]/.test(K)?y:Q==1642?T:/[\u06f0-\u06f9]/.test(K)?g:x:X==32&&Q<=8287?V[Q&255]:X==254&&Q>=65136?x:w}n.L=c,n.R=p,n.EN=g,n.ON_R=3,n.AN=4,n.R_H=5,n.B=6,n.RLE=7,n.DOT="",n.doBidiReorder=function(K,Q,X){if(K.length<2)return{};var Z=K.split(""),re=new Array(Z.length),se=new Array(Z.length),he=[];s=X?h:u,B(Z,he,Z.length,Q);for(var ce=0;ce<re.length;re[ce]=ce,ce++);W(2,he,re),W(1,he,re);for(var ce=0;ce<re.length-1;ce++)Q[ce]===y?he[ce]=n.AN:he[ce]===p&&(Q[ce]>x&&Q[ce]<P||Q[ce]===w||Q[ce]===L)?he[ce]=n.ON_R:ce>0&&Z[ce-1]===""&&/\u0622|\u0623|\u0625|\u0627/.test(Z[ce])&&(he[ce-1]=he[ce]=n.R_H,ce++);Z[Z.length-1]===n.DOT&&(he[Z.length-1]=n.B),Z[0]===""&&(he[0]=n.RLE);for(var ce=0;ce<re.length;ce++)se[ce]=he[re[ce]];return{logicalFromVisual:re,bidiLevels:se}},n.hasBidiCharacters=function(K,Q){for(var X=!1,Z=0;Z<K.length;Z++)Q[Z]=J(K.charAt(Z)),!X&&(Q[Z]==p||Q[Z]==x||Q[Z]==y)&&(X=!0);return X},n.getVisualFromLogicalIdx=function(K,Q){for(var X=0;X<Q.logicalFromVisual.length;X++)if(Q.logicalFromVisual[X]==K)return X;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(t,n,i){var s=t("./lib/bidiutil"),a=t("./lib/lang"),m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,o=(function(){function d(l){this.session=l,this.bidiMap={},this.currentRow=null,this.bidiUtil=s,this.charWidths=[],this.EOL="",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="",this.RLE="",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=m.test(l.getValue())}return d.prototype.isBidiRow=function(l,f,u){return this.seenBidi?(l!==this.currentRow&&(this.currentRow=l,this.updateRowLine(f,u),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},d.prototype.onChange=function(l){this.seenBidi?this.currentRow=null:l.action=="insert"&&m.test(l.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},d.prototype.getDocumentRow=function(){var l=0,f=this.session.$screenRowCache;if(f.length){var u=this.session.$getRowCacheIndex(f,this.currentRow);u>=0&&(l=this.session.$docRowCache[u])}return l},d.prototype.getSplitIndex=function(){var l=0,f=this.session.$screenRowCache;if(f.length)for(var u,h=this.session.$getRowCacheIndex(f,this.currentRow);this.currentRow-l>0&&(u=this.session.$getRowCacheIndex(f,this.currentRow-l-1),u===h);)h=u,l++;else l=this.currentRow;return l},d.prototype.updateRowLine=function(l,f){l===void 0&&(l=this.getDocumentRow());var u=l===this.session.getLength()-1,h=u?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(l),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var c=this.session.$wrapData[l];c&&(f===void 0&&(f=this.getSplitIndex()),f>0&&c.length?(this.wrapIndent=c.indent,this.wrapOffset=this.wrapIndent*this.charWidths[s.L],this.line=f<c.length?this.line.substring(c[f-1],c[f]):this.line.substring(c[c.length-1])):this.line=this.line.substring(0,c[f]),f==c.length&&(this.line+=this.showInvisibles?h:s.DOT))}else this.line+=this.showInvisibles?h:s.DOT;var p=this.session,g=0,y;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(w,M){return w==="	"||p.isFullWidth(w.charCodeAt(0))?(y=w==="	"?p.getScreenTabSize(M+g):2,g+=y-1,a.stringRepeat(s.DOT,y)):w}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==s.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},d.prototype.updateBidiMap=function(){var l=[];s.hasBidiCharacters(this.line,l)||this.isRtlDir?this.bidiMap=s.doBidiReorder(this.line,l,this.isRtlDir):this.bidiMap={}},d.prototype.markAsDirty=function(){this.currentRow=null},d.prototype.updateCharacterWidths=function(l){if(this.characterWidth!==l.$characterSize.width){this.fontMetrics=l;var f=this.characterWidth=l.$characterSize.width,u=l.$measureCharWidth("");this.charWidths[s.L]=this.charWidths[s.EN]=this.charWidths[s.ON_R]=f,this.charWidths[s.R]=this.charWidths[s.AN]=u,this.charWidths[s.R_H]=u*.45,this.charWidths[s.B]=this.charWidths[s.RLE]=0,this.currentRow=null}},d.prototype.setShowInvisibles=function(l){this.showInvisibles=l,this.currentRow=null},d.prototype.setEolChar=function(l){this.EOL=l},d.prototype.setContentWidth=function(l){this.contentWidth=l},d.prototype.isRtlLine=function(l){return this.$isRtl?!0:l!=null?this.session.getLine(l).charAt(0)==this.RLE:this.isRtlDir},d.prototype.setRtlDirection=function(l,f){for(var u=l.getCursorPosition(),h=l.selection.getSelectionAnchor().row;h<=u.row;h++)!f&&l.session.getLine(h).charAt(0)===l.session.$bidiHandler.RLE?l.session.doc.removeInLine(h,0,1):f&&l.session.getLine(h).charAt(0)!==l.session.$bidiHandler.RLE&&l.session.doc.insert({column:0,row:h},l.session.$bidiHandler.RLE)},d.prototype.getPosLeft=function(l){l-=this.wrapIndent;var f=this.line.charAt(0)===this.RLE?1:0,u=l>f?this.session.getOverwrite()?l:l-1:f,h=s.getVisualFromLogicalIdx(u,this.bidiMap),c=this.bidiMap.bidiLevels,p=0;!this.session.getOverwrite()&&l<=f&&c[h]%2!==0&&h++;for(var g=0;g<h;g++)p+=this.charWidths[c[g]];return!this.session.getOverwrite()&&l>f&&c[h]%2===0&&(p+=this.charWidths[c[h]]),this.wrapIndent&&(p+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(p+=this.rtlLineOffset),p},d.prototype.getSelections=function(l,f){var u=this.bidiMap,h=u.bidiLevels,c,p=[],g=0,y=Math.min(l,f)-this.wrapIndent,w=Math.max(l,f)-this.wrapIndent,M=!1,R=!1,x=0;this.wrapIndent&&(g+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var S,E=0;E<h.length;E++)S=u.logicalFromVisual[E],c=h[E],M=S>=y&&S<w,M&&!R?x=g:!M&&R&&p.push({left:x,width:g-x}),g+=this.charWidths[c],R=M;if(M&&E===h.length&&p.push({left:x,width:g-x}),this.isRtlDir)for(var k=0;k<p.length;k++)p[k].left+=this.rtlLineOffset;return p},d.prototype.offsetToCol=function(u){this.isRtlDir&&(u-=this.rtlLineOffset);var f=0,u=Math.max(u,0),h=0,c=0,p=this.bidiMap.bidiLevels,g=this.charWidths[p[c]];for(this.wrapIndent&&(u-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);u>h+g/2;){if(h+=g,c===p.length-1){g=0;break}g=this.charWidths[p[++c]]}return c>0&&p[c-1]%2!==0&&p[c]%2===0?(u<h&&c--,f=this.bidiMap.logicalFromVisual[c]):c>0&&p[c-1]%2===0&&p[c]%2!==0?f=1+(u>h?this.bidiMap.logicalFromVisual[c]:this.bidiMap.logicalFromVisual[c-1]):this.isRtlDir&&c===p.length-1&&g===0&&p[c-1]%2===0||!this.isRtlDir&&c===0&&p[c]%2!==0?f=1+this.bidiMap.logicalFromVisual[c]:(c>0&&p[c-1]%2!==0&&g!==0&&c--,f=this.bidiMap.logicalFromVisual[c]),f===0&&this.isRtlDir&&f++,f+this.wrapIndent},d})();n.BidiHandler=o}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(t,n,i){var s=t("./lib/oop"),a=t("./lib/lang"),m=t("./lib/event_emitter").EventEmitter,o=t("./range").Range,d=(function(){function l(f){this.session=f,this.doc=f.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var u=this;this.cursor.on("change",function(h){u.$cursorChanged=!0,u.$silent||u._emit("changeCursor"),!u.$isEmpty&&!u.$silent&&u._emit("changeSelection"),!u.$keepDesiredColumnOnChange&&h.old.column!=h.value.column&&(u.$desiredColumn=null)}),this.anchor.on("change",function(){u.$anchorChanged=!0,!u.$isEmpty&&!u.$silent&&u._emit("changeSelection")})}return l.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},l.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},l.prototype.getCursor=function(){return this.lead.getPosition()},l.prototype.setAnchor=function(f,u){this.$isEmpty=!1,this.anchor.setPosition(f,u)},l.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},l.prototype.getSelectionLead=function(){return this.lead.getPosition()},l.prototype.isBackwards=function(){var f=this.anchor,u=this.lead;return f.row>u.row||f.row==u.row&&f.column>u.column},l.prototype.getRange=function(){var f=this.anchor,u=this.lead;return this.$isEmpty?o.fromPoints(u,u):this.isBackwards()?o.fromPoints(u,f):o.fromPoints(f,u)},l.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},l.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},l.prototype.setRange=function(f,u){var h=u?f.end:f.start,c=u?f.start:f.end;this.$setSelection(h.row,h.column,c.row,c.column)},l.prototype.$setSelection=function(f,u,h,c){if(!this.$silent){var p=this.$isEmpty,g=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(f,u),this.cursor.setPosition(h,c),this.$isEmpty=!o.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||p!=this.$isEmpty||g)&&this._emit("changeSelection")}},l.prototype.$moveSelection=function(f){var u=this.lead;this.$isEmpty&&this.setSelectionAnchor(u.row,u.column),f.call(this)},l.prototype.selectTo=function(f,u){this.$moveSelection(function(){this.moveCursorTo(f,u)})},l.prototype.selectToPosition=function(f){this.$moveSelection(function(){this.moveCursorToPosition(f)})},l.prototype.moveTo=function(f,u){this.clearSelection(),this.moveCursorTo(f,u)},l.prototype.moveToPosition=function(f){this.clearSelection(),this.moveCursorToPosition(f)},l.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},l.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},l.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},l.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},l.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},l.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},l.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},l.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},l.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},l.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},l.prototype.getWordRange=function(f,u){if(typeof u>"u"){var h=f||this.lead;f=h.row,u=h.column}return this.session.getWordRange(f,u)},l.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},l.prototype.selectAWord=function(){var f=this.getCursor(),u=this.session.getAWordRange(f.row,f.column);this.setSelectionRange(u)},l.prototype.getLineRange=function(f,u){var h=typeof f=="number"?f:this.lead.row,c,p=this.session.getFoldLine(h);return p?(h=p.start.row,c=p.end.row):c=h,u===!0?new o(h,0,c,this.session.getLine(c).length):new o(h,0,c+1,0)},l.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},l.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},l.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},l.prototype.wouldMoveIntoSoftTab=function(f,u,h){var c=f.column,p=f.column+u;return h<0&&(c=f.column-u,p=f.column),this.session.isTabStop(f)&&this.doc.getLine(f.row).slice(c,p).split(" ").length-1==u},l.prototype.moveCursorLeft=function(){var f=this.lead.getPosition(),u;if(u=this.session.getFoldAt(f.row,f.column,-1))this.moveCursorTo(u.start.row,u.start.column);else if(f.column===0)f.row>0&&this.moveCursorTo(f.row-1,this.doc.getLine(f.row-1).length);else{var h=this.session.getTabSize();this.wouldMoveIntoSoftTab(f,h,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-h):this.moveCursorBy(0,-1)}},l.prototype.moveCursorRight=function(){var f=this.lead.getPosition(),u;if(u=this.session.getFoldAt(f.row,f.column,1))this.moveCursorTo(u.end.row,u.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var h=this.session.getTabSize(),f=this.lead;this.wouldMoveIntoSoftTab(f,h,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,h):this.moveCursorBy(0,1)}},l.prototype.moveCursorLineStart=function(){var f=this.lead.row,u=this.lead.column,h=this.session.documentToScreenRow(f,u),c=this.session.screenToDocumentPosition(h,0),p=this.session.getDisplayLine(f,null,c.row,c.column),g=p.match(/^\s*/);g[0].length!=u&&!this.session.$useEmacsStyleLineStart&&(c.column+=g[0].length),this.moveCursorToPosition(c)},l.prototype.moveCursorLineEnd=function(){var f=this.lead,u=this.session.getDocumentLastRowColumnPosition(f.row,f.column);if(this.lead.column==u.column){var h=this.session.getLine(u.row);if(u.column==h.length){var c=h.search(/\s+$/);c>0&&(u.column=c)}}this.moveCursorTo(u.row,u.column)},l.prototype.moveCursorFileEnd=function(){var f=this.doc.getLength()-1,u=this.doc.getLine(f).length;this.moveCursorTo(f,u)},l.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},l.prototype.moveCursorLongWordRight=function(){var f=this.lead.row,u=this.lead.column,h=this.doc.getLine(f),c=h.substring(u);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var p=this.session.getFoldAt(f,u,1);if(p){this.moveCursorTo(p.end.row,p.end.column);return}if(this.session.nonTokenRe.exec(c)&&(u+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,c=h.substring(u)),u>=h.length){this.moveCursorTo(f,h.length),this.moveCursorRight(),f<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(c)&&(u+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(f,u)},l.prototype.moveCursorLongWordLeft=function(){var f=this.lead.row,u=this.lead.column,h;if(h=this.session.getFoldAt(f,u,-1)){this.moveCursorTo(h.start.row,h.start.column);return}var c=this.session.getFoldStringAt(f,u,-1);c==null&&(c=this.doc.getLine(f).substring(0,u));var p=a.stringReverse(c);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(p)&&(u-=this.session.nonTokenRe.lastIndex,p=p.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),u<=0){this.moveCursorTo(f,0),this.moveCursorLeft(),f>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(p)&&(u-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(f,u)},l.prototype.$shortWordEndIndex=function(f){var u=0,h,c=/\s/,p=this.session.tokenRe;if(p.lastIndex=0,this.session.tokenRe.exec(f))u=this.session.tokenRe.lastIndex;else{for(;(h=f[u])&&c.test(h);)u++;if(u<1){for(p.lastIndex=0;(h=f[u])&&!p.test(h);)if(p.lastIndex=0,u++,c.test(h))if(u>2){u--;break}else{for(;(h=f[u])&&c.test(h);)u++;if(u>2)break}}}return p.lastIndex=0,u},l.prototype.moveCursorShortWordRight=function(){var f=this.lead.row,u=this.lead.column,h=this.doc.getLine(f),c=h.substring(u),p=this.session.getFoldAt(f,u,1);if(p)return this.moveCursorTo(p.end.row,p.end.column);if(u==h.length){var g=this.doc.getLength();do f++,c=this.doc.getLine(f);while(f<g&&/^\s*$/.test(c));/^\s+/.test(c)||(c=""),u=0}var y=this.$shortWordEndIndex(c);this.moveCursorTo(f,u+y)},l.prototype.moveCursorShortWordLeft=function(){var f=this.lead.row,u=this.lead.column,h;if(h=this.session.getFoldAt(f,u,-1))return this.moveCursorTo(h.start.row,h.start.column);var c=this.session.getLine(f).substring(0,u);if(u===0){do f--,c=this.doc.getLine(f);while(f>0&&/^\s*$/.test(c));u=c.length,/\s+$/.test(c)||(c="")}var p=a.stringReverse(c),g=this.$shortWordEndIndex(p);return this.moveCursorTo(f,u-g)},l.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},l.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},l.prototype.moveCursorBy=function(f,u){var h=this.session.documentToScreenPosition(this.lead.row,this.lead.column),c;if(u===0&&(f!==0&&(this.session.$bidiHandler.isBidiRow(h.row,this.lead.row)?(c=this.session.$bidiHandler.getPosLeft(h.column),h.column=Math.round(c/this.session.$bidiHandler.charWidths[0])):c=h.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?h.column=this.$desiredColumn:this.$desiredColumn=h.column),f!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var p=this.session.lineWidgets[this.lead.row];f<0?f-=p.rowsAbove||0:f>0&&(f+=p.rowCount-(p.rowsAbove||0))}var g=this.session.screenToDocumentPosition(h.row+f,h.column,c);f!==0&&u===0&&g.row===this.lead.row&&(g.column,this.lead.column),this.moveCursorTo(g.row,g.column+u,u===0)},l.prototype.moveCursorToPosition=function(f){this.moveCursorTo(f.row,f.column)},l.prototype.moveCursorTo=function(f,u,h){var c=this.session.getFoldAt(f,u,1);c&&(f=c.start.row,u=c.start.column),this.$keepDesiredColumnOnChange=!0;var p=this.session.getLine(f);/[\uDC00-\uDFFF]/.test(p.charAt(u))&&p.charAt(u-1)&&(this.lead.row==f&&this.lead.column==u+1?u=u-1:u=u+1),this.lead.setPosition(f,u),this.$keepDesiredColumnOnChange=!1,h||(this.$desiredColumn=null)},l.prototype.moveCursorToScreen=function(f,u,h){var c=this.session.screenToDocumentPosition(f,u);this.moveCursorTo(c.row,c.column,h)},l.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},l.prototype.fromOrientedRange=function(f){this.setSelectionRange(f,f.cursor==f.start),this.$desiredColumn=f.desiredColumn||this.$desiredColumn},l.prototype.toOrientedRange=function(f){var u=this.getRange();return f?(f.start.column=u.start.column,f.start.row=u.start.row,f.end.column=u.end.column,f.end.row=u.end.row):f=u,f.cursor=this.isBackwards()?f.start:f.end,f.desiredColumn=this.$desiredColumn,f},l.prototype.getRangeOfMovements=function(f){var u=this.getCursor();try{f(this);var h=this.getCursor();return o.fromPoints(u,h)}catch{return o.fromPoints(u,u)}finally{this.moveCursorToPosition(u)}},l.prototype.toJSON=function(){if(this.rangeCount)var f=this.ranges.map(function(u){var h=u.clone();return h.isBackwards=u.cursor==u.start,h});else{var f=this.getRange();f.isBackwards=this.isBackwards()}return f},l.prototype.fromJSON=function(f){if(f.start==null)if(this.rangeList&&f.length>1){this.toSingleRange(f[0]);for(var u=f.length;u--;){var h=o.fromPoints(f[u].start,f[u].end);f[u].isBackwards&&(h.cursor=h.start),this.addRange(h,!0)}return}else f=f[0];this.rangeList&&this.toSingleRange(f),this.setSelectionRange(f,f.isBackwards)},l.prototype.isEqual=function(f){if((f.length||this.rangeCount)&&f.length!=this.rangeCount)return!1;if(!f.length||!this.ranges)return this.getRange().isEqual(f);for(var u=this.ranges.length;u--;)if(!this.ranges[u].isEqual(f[u]))return!1;return!0},l})();d.prototype.setSelectionAnchor=d.prototype.setAnchor,d.prototype.getSelectionAnchor=d.prototype.getAnchor,d.prototype.setSelectionRange=d.prototype.setRange,s.implement(d.prototype,m),n.Selection=d}),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(t,n,i){var s=t("./lib/report_error").reportError,a=2e3,m=(function(){function o(d){this.splitRegex,this.states=d,this.regExps={},this.matchMappings={};for(var l in this.states){for(var f=this.states[l],u=[],h=0,c=this.matchMappings[l]={defaultToken:"text"},p="g",g=[],y=0;y<f.length;y++){var w=f[y];if(w.defaultToken&&(c.defaultToken=w.defaultToken),w.caseInsensitive&&p.indexOf("i")===-1&&(p+="i"),w.unicode&&p.indexOf("u")===-1&&(p+="u"),w.regex!=null){w.regex instanceof RegExp&&(w.regex=w.regex.toString().slice(1,-1));var M=w.regex,R=new RegExp("(?:("+M+")|(.))").exec("a").length-2;Array.isArray(w.token)?w.token.length==1||R==1?w.token=w.token[0]:R-1!=w.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:w,groupCount:R-1}),w.token=w.token[0]):(w.tokenArray=w.token,w.token=null,w.onMatch=this.$arrayTokens):typeof w.token=="function"&&!w.onMatch&&(R>1?w.onMatch=this.$applyToken:w.onMatch=w.token),R>1&&(/\\\d/.test(w.regex)?M=w.regex.replace(/\\([0-9]+)/g,function(x,S){return"\\"+(parseInt(S,10)+h+1)}):(R=1,M=this.removeCapturingGroups(w.regex)),!w.splitRegex&&typeof w.token!="string"&&g.push(w)),c[h]=y,h+=R,u.push(M),w.onMatch||(w.onMatch=null)}}u.length||(c[0]=0,u.push("$")),g.forEach(function(x){x.splitRegex=this.createSplitterRegexp(x.regex,p)},this),this.regExps[l]=new RegExp("("+u.join(")|(")+")|($)",p)}}return o.prototype.$setMaxTokenCount=function(d){a=d|0},o.prototype.$applyToken=function(d){var l=this.splitRegex.exec(d).slice(1),f=this.token.apply(this,l);if(typeof f=="string")return[{type:f,value:d}];for(var u=[],h=0,c=f.length;h<c;h++)l[h]&&(u[u.length]={type:f[h],value:l[h]});return u},o.prototype.$arrayTokens=function(d){if(!d)return[];var l=this.splitRegex.exec(d);if(!l)return"text";for(var f=[],u=this.tokenArray,h=0,c=u.length;h<c;h++)l[h+1]&&(f[f.length]={type:u[h],value:l[h+1]});return f},o.prototype.removeCapturingGroups=function(d){var l=d.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(f,u){return u?"(?:":f});return l},o.prototype.createSplitterRegexp=function(d,l){if(d.indexOf("(?=")!=-1){var f=0,u=!1,h={};d.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(c,p,g,y,w,M){return u?u=w!="]":w?u=!0:y?(f==h.stack&&(h.end=M+1,h.stack=-1),f--):g&&(f++,g.length!=1&&(h.stack=f,h.start=M)),c}),h.end!=null&&/^\)*$/.test(d.substr(h.end))&&(d=d.substring(0,h.start)+d.substr(h.end))}return d.charAt(0)!="^"&&(d="^"+d),d.charAt(d.length-1)!="$"&&(d+="$"),new RegExp(d,(l||"").replace("g",""))},o.prototype.getLineTokens=function(d,l){if(l&&typeof l!="string"){var f=l.slice(0);l=f[0],l==="#tmp"&&(f.shift(),l=f.shift())}else var f=[];var u=l||"start",h=this.states[u];h||(u="start",h=this.states[u]);var c=this.matchMappings[u],p=this.regExps[u];p.lastIndex=0;for(var g,y=[],w=0,M=0,R={type:null,value:""};g=p.exec(d);){var x=c.defaultToken,S=null,E=g[0],k=p.lastIndex;if(k-E.length>w){var T=d.substring(w,k-E.length);R.type==x?R.value+=T:(R.type&&y.push(R),R={type:x,value:T})}for(var I=0;I<g.length-2;I++)if(g[I+1]!==void 0){S=h[c[I]],S.onMatch?x=S.onMatch(E,u,f,d):x=S.token,S.next&&(typeof S.next=="string"?u=S.next:u=S.next(u,f),h=this.states[u],h||(this.reportError("state doesn't exist",u),u="start",h=this.states[u]),c=this.matchMappings[u],w=k,p=this.regExps[u],p.lastIndex=k),S.consumeLineEnd&&(w=k);break}if(E){if(typeof x=="string")(!S||S.merge!==!1)&&R.type===x?R.value+=E:(R.type&&y.push(R),R={type:x,value:E});else if(x){R.type&&y.push(R),R={type:null,value:""};for(var I=0;I<x.length;I++)y.push(x[I])}}if(w==d.length)break;if(w=k,M++>a){for(M>2*d.length&&this.reportError("infinite loop with in ace tokenizer",{startState:l,line:d});w<d.length;)R.type&&y.push(R),R={value:d.substring(w,w+=500),type:"overflow"};u="start",f=[];break}}return R.type&&y.push(R),f.length>1&&f[0]!==u&&f.unshift("#tmp",u),{tokens:y,state:f.length?f:u}},o})();m.prototype.reportError=s,n.Tokenizer=m}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(t,n,i){var s=t("../lib/deep_copy").deepCopy,a;a=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},(function(){this.addRules=function(d,l){if(!l){for(var f in d)this.$rules[f]=d[f];return}for(var f in d){for(var u=d[f],h=0;h<u.length;h++){var c=u[h];(c.next||c.onMatch)&&(typeof c.next=="string"&&c.next.indexOf(l)!==0&&(c.next=l+c.next),c.nextState&&c.nextState.indexOf(l)!==0&&(c.nextState=l+c.nextState))}this.$rules[l+f]=u}},this.getRules=function(){return this.$rules},this.embedRules=function(d,l,f,u,h){var c=typeof d=="function"?new d().getRules():d;if(u)for(var p=0;p<u.length;p++)u[p]=l+u[p];else{u=[];for(var g in c)u.push(l+g)}if(this.addRules(c,l),f)for(var y=Array.prototype[h?"push":"unshift"],p=0;p<u.length;p++)y.apply(this.$rules[u[p]],s(f));this.$embeds||(this.$embeds=[]),this.$embeds.push(l)},this.getEmbeds=function(){return this.$embeds};var m=function(d,l){return(d!="start"||l.length)&&l.unshift(this.nextState,d),this.nextState},o=function(d,l){return l.shift(),l.shift()||"start"};this.normalizeRules=function(){var d=0,l=this.$rules;function f(u){var h=l[u];h.processed=!0;for(var c=0;c<h.length;c++){var p=h[c],g=null;Array.isArray(p)&&(g=p,p={}),!p.regex&&p.start&&(p.regex=p.start,p.next||(p.next=[]),p.next.push({defaultToken:p.token},{token:p.token+".end",regex:p.end||p.start,next:"pop"}),p.token=p.token+".start",p.push=!0);var y=p.next||p.push;if(y&&Array.isArray(y)){var w=p.stateName;w||(w=p.token,typeof w!="string"&&(w=w[0]||""),l[w]&&(w+=d++)),l[w]=y,p.next=w,f(w)}else y=="pop"&&(p.next=o);if(p.push&&(p.nextState=p.next||p.push,p.next=m,delete p.push),p.rules)for(var M in p.rules)l[M]?l[M].push&&l[M].push.apply(l[M],p.rules[M]):l[M]=p.rules[M];var R=typeof p=="string"?p:p.include;if(R&&(R==="$self"&&(R="start"),Array.isArray(R)?g=R.map(function(S){return l[S]}):g=l[R]),g){var x=[c,1].concat(g);p.noEscape&&(x=x.filter(function(S){return!S.next})),h.splice.apply(h,x),c--}p.keywordMap&&(p.token=this.createKeywordMapper(p.keywordMap,p.defaultToken||"text",p.caseInsensitive),delete p.defaultToken)}}Object.keys(l).forEach(f,this)},this.createKeywordMapper=function(d,l,f,u){var h=Object.create(null);return this.$keywordList=[],Object.keys(d).forEach(function(c){for(var p=d[c],g=p.split(u||"|"),y=g.length;y--;){var w=g[y];this.$keywordList.push(w),f&&(w=w.toLowerCase()),h[w]=c}},this),d=null,f?function(c){return h[c.toLowerCase()]||l}:function(c){return h[c]||l}},this.getKeywords=function(){return this.$keywords}}).call(a.prototype),n.TextHighlightRules=a}),ace.define("ace/mode/behaviour",["require","exports","module"],function(t,n,i){var s;s=function(){this.$behaviours={}},(function(){this.add=function(a,m,o){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[a]:this.$behaviours[a]={}}this.$behaviours[a][m]=o},this.addBehaviours=function(a){for(var m in a)for(var o in a[m])this.add(m,o,a[m][o])},this.remove=function(a){this.$behaviours&&this.$behaviours[a]&&delete this.$behaviours[a]},this.inherit=function(a,m){if(typeof a=="function")var o=new a().getBehaviours(m);else var o=a.getBehaviours(m);this.addBehaviours(o)},this.getBehaviours=function(a){if(a){for(var m={},o=0;o<a.length;o++)this.$behaviours[a[o]]&&(m[a[o]]=this.$behaviours[a[o]]);return m}else return this.$behaviours}}).call(s.prototype),n.Behaviour=s}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(t,n,i){var s=t("./range").Range,a=(function(){function m(o,d,l){this.$session=o,this.$row=d,this.$rowTokens=o.getTokens(d);var f=o.getTokenAt(d,l);this.$tokenIndex=f?f.index:-1}return m.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},m.prototype.stepForward=function(){this.$tokenIndex+=1;for(var o;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,o||(o=this.$session.getLength()),this.$row>=o)return this.$row=o-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},m.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},m.prototype.getCurrentTokenRow=function(){return this.$row},m.prototype.getCurrentTokenColumn=function(){var o=this.$rowTokens,d=this.$tokenIndex,l=o[d].start;if(l!==void 0)return l;for(l=0;d>0;)d-=1,l+=o[d].value.length;return l},m.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},m.prototype.getCurrentTokenRange=function(){var o=this.$rowTokens[this.$tokenIndex],d=this.getCurrentTokenColumn();return new s(this.$row,d,this.$row,d+o.value.length)},m})();n.TokenIterator=a}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(t,n,i){var s=t("../../lib/oop"),a=t("../behaviour").Behaviour,m=t("../../token_iterator").TokenIterator,o=t("../../lib/lang"),d=["text","paren.rparen","rparen","paren","punctuation.operator"],l=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],f,u={},h={'"':'"',"'":"'"},c=function(y){var w=-1;if(y.multiSelect&&(w=y.selection.index,u.rangeCount!=y.multiSelect.rangeCount&&(u={rangeCount:y.multiSelect.rangeCount})),u[w])return f=u[w];f=u[w]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},p=function(y,w,M,R){var x=y.end.row-y.start.row;return{text:M+w+R,selection:[0,y.start.column+1,x,y.end.column+(x?0:1)]}},g;g=function(y){y=y||{},this.add("braces","insertion",function(w,M,R,x,S){var E=R.getCursorPosition(),k=x.doc.getLine(E.row);if(S=="{"){c(R);var T=R.getSelectionRange(),I=x.doc.getTextRange(T),P=x.getTokenAt(E.row,E.column);if(I!==""&&I!=="{"&&R.getWrapBehavioursEnabled())return p(T,I,"{","}");if(P&&/(?:string)\.quasi|\.xml/.test(P.type)){var C=[/tag\-(?:open|name)/,/attribute\-name/];return C.some(function(B){return B.test(P.type)})||/(string)\.quasi/.test(P.type)&&P.value[E.column-P.start-1]!=="$"?void 0:(g.recordAutoInsert(R,x,"}"),{text:"{}",selection:[1,1]})}else if(g.isSaneInsertion(R,x))return/[\]\}\)]/.test(k[E.column])||R.inMultiSelectMode||y.braces?(g.recordAutoInsert(R,x,"}"),{text:"{}",selection:[1,1]}):(g.recordMaybeInsert(R,x,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){c(R);var b=k.substring(E.column,E.column+1);if(b=="}"){var A=x.$findOpeningBracket("}",{column:E.column+1,row:E.row});if(A!==null&&g.isAutoInsertedClosing(E,k,S))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){c(R);var _="";g.isMaybeInsertedClosing(E,k)&&(_=o.stringRepeat("}",f.maybeInsertedBrackets),g.clearMaybeInsertedClosing());var b=k.substring(E.column,E.column+1);if(b==="}"){var L=x.findMatchingBracket({row:E.row,column:E.column+1},"}");if(!L)return null;var O=this.$getIndent(x.getLine(L.row))}else if(_)var O=this.$getIndent(k);else{g.clearMaybeInsertedClosing();return}var V=O+x.getTabString();return{text:`
`+V+`
`+O+_,selection:[1,V.length,1,V.length]}}else g.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(w,M,R,x,S){var E=x.doc.getTextRange(S);if(!S.isMultiLine()&&E=="{"){c(R);var k=x.doc.getLine(S.start.row),T=k.substring(S.end.column,S.end.column+1);if(T=="}")return S.end.column++,S;f.maybeInsertedBrackets--}}),this.add("parens","insertion",function(w,M,R,x,S){if(S=="("){c(R);var E=R.getSelectionRange(),k=x.doc.getTextRange(E);if(k!==""&&R.getWrapBehavioursEnabled())return p(E,k,"(",")");if(g.isSaneInsertion(R,x))return g.recordAutoInsert(R,x,")"),{text:"()",selection:[1,1]}}else if(S==")"){c(R);var T=R.getCursorPosition(),I=x.doc.getLine(T.row),P=I.substring(T.column,T.column+1);if(P==")"){var C=x.$findOpeningBracket(")",{column:T.column+1,row:T.row});if(C!==null&&g.isAutoInsertedClosing(T,I,S))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(w,M,R,x,S){var E=x.doc.getTextRange(S);if(!S.isMultiLine()&&E=="("){c(R);var k=x.doc.getLine(S.start.row),T=k.substring(S.start.column+1,S.start.column+2);if(T==")")return S.end.column++,S}}),this.add("brackets","insertion",function(w,M,R,x,S){if(S=="["){c(R);var E=R.getSelectionRange(),k=x.doc.getTextRange(E);if(k!==""&&R.getWrapBehavioursEnabled())return p(E,k,"[","]");if(g.isSaneInsertion(R,x))return g.recordAutoInsert(R,x,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){c(R);var T=R.getCursorPosition(),I=x.doc.getLine(T.row),P=I.substring(T.column,T.column+1);if(P=="]"){var C=x.$findOpeningBracket("]",{column:T.column+1,row:T.row});if(C!==null&&g.isAutoInsertedClosing(T,I,S))return g.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(w,M,R,x,S){var E=x.doc.getTextRange(S);if(!S.isMultiLine()&&E=="["){c(R);var k=x.doc.getLine(S.start.row),T=k.substring(S.start.column+1,S.start.column+2);if(T=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(w,M,R,x,S){var E=x.$mode.$quotes||h;if(S.length==1&&E[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;c(R);var k=S,T=R.getSelectionRange(),I=x.doc.getTextRange(T);if(I!==""&&(I.length!=1||!E[I])&&R.getWrapBehavioursEnabled())return p(T,I,k,k);if(!I){var P=R.getCursorPosition(),C=x.doc.getLine(P.row),b=C.substring(P.column-1,P.column),A=C.substring(P.column,P.column+1),_=x.getTokenAt(P.row,P.column),L=x.getTokenAt(P.row,P.column+1);if(b=="\\"&&_&&/escape/.test(_.type))return null;var O=_&&/string|escape/.test(_.type),V=!L||/string|escape/.test(L.type),B;if(A==k)B=O!==V,B&&/string\.end/.test(L.type)&&(B=!1);else{if(O&&!V||O&&V)return null;var W=x.$mode.tokenRe;W.lastIndex=0;var G=W.test(b);W.lastIndex=0;var J=W.test(A),K=x.$mode.$pairQuotesAfter,Q=K&&K[k]&&K[k].test(b);if(!Q&&G||J||A&&!/[\s;,.})\]\\]/.test(A))return null;var X=C[P.column-2];if(b==k&&(X==k||W.test(X)))return null;B=!0}return{text:B?k+k:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(w,M,R,x,S){var E=x.$mode.$quotes||h,k=x.doc.getTextRange(S);if(!S.isMultiLine()&&E.hasOwnProperty(k)){c(R);var T=x.doc.getLine(S.start.row),I=T.substring(S.start.column+1,S.start.column+2);if(I==k)return S.end.column++,S}}),y.closeDocComment!==!1&&this.add("doc comment end","insertion",function(w,M,R,x,S){if(w==="doc-start"&&(S===`
`||S===`\r
`)&&R.selection.isEmpty()){var E=R.getCursorPosition();if(E.column===0)return;for(var k=x.doc.getLine(E.row),T=x.doc.getLine(E.row+1),I=x.getTokens(E.row),P=0,C=0;C<I.length;C++){P+=I[C].value.length;var b=I[C];if(P>=E.column){if(P===E.column){if(!/\.doc/.test(b.type))return;if(/\*\//.test(b.value)){var A=I[C+1];if(!A||!/\.doc/.test(A.type))return}}var _=E.column-(P-b.value.length),L=b.value.indexOf("*/"),O=b.value.indexOf("/**",L>-1?L+2:0);if(O!==-1&&_>O&&_<O+3||L!==-1&&O!==-1&&_>=L&&_<=O||!/\.doc/.test(b.type))return;break}}var V=this.$getIndent(k);if(/\s*\*/.test(T))return/^\s*\*/.test(k)?{text:S+V+"* ",selection:[1,2+V.length,1,2+V.length]}:{text:S+V+" * ",selection:[1,3+V.length,1,3+V.length]};if(/\/\*\*/.test(k.substring(0,E.column)))return{text:S+V+" * "+S+" "+V+"*/",selection:[1,4+V.length,1,4+V.length]}}})},g.isSaneInsertion=function(y,w){var M=y.getCursorPosition(),R=new m(w,M.row,M.column);if(!this.$matchTokenType(R.getCurrentToken()||"text",d)){if(/[)}\]]/.test(y.session.getLine(M.row)[M.column]))return!0;var x=new m(w,M.row,M.column+1);if(!this.$matchTokenType(x.getCurrentToken()||"text",d))return!1}return R.stepForward(),R.getCurrentTokenRow()!==M.row||this.$matchTokenType(R.getCurrentToken()||"text",l)},g.$matchTokenType=function(y,w){return w.indexOf(y.type||y)>-1},g.recordAutoInsert=function(y,w,M){var R=y.getCursorPosition(),x=w.doc.getLine(R.row);this.isAutoInsertedClosing(R,x,f.autoInsertedLineEnd[0])||(f.autoInsertedBrackets=0),f.autoInsertedRow=R.row,f.autoInsertedLineEnd=M+x.substr(R.column),f.autoInsertedBrackets++},g.recordMaybeInsert=function(y,w,M){var R=y.getCursorPosition(),x=w.doc.getLine(R.row);this.isMaybeInsertedClosing(R,x)||(f.maybeInsertedBrackets=0),f.maybeInsertedRow=R.row,f.maybeInsertedLineStart=x.substr(0,R.column)+M,f.maybeInsertedLineEnd=x.substr(R.column),f.maybeInsertedBrackets++},g.isAutoInsertedClosing=function(y,w,M){return f.autoInsertedBrackets>0&&y.row===f.autoInsertedRow&&M===f.autoInsertedLineEnd[0]&&w.substr(y.column)===f.autoInsertedLineEnd},g.isMaybeInsertedClosing=function(y,w){return f.maybeInsertedBrackets>0&&y.row===f.maybeInsertedRow&&w.substr(y.column)===f.maybeInsertedLineEnd&&w.substr(0,y.column)==f.maybeInsertedLineStart},g.popAutoInsertedClosing=function(){f.autoInsertedLineEnd=f.autoInsertedLineEnd.substr(1),f.autoInsertedBrackets--},g.clearMaybeInsertedClosing=function(){f&&(f.maybeInsertedBrackets=0,f.maybeInsertedRow=-1)},s.inherits(g,a),n.CstyleBehaviour=g}),ace.define("ace/unicode",["require","exports","module"],function(t,n,i){for(var s=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],a=0,m=[],o=0;o<s.length;o+=2)m.push(a+=s[o]),s[o+1]&&m.push(45,a+=s[o+1]);n.wordChars=String.fromCharCode.apply(null,m)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(t,n,i){var s=t("../config"),a=t("../tokenizer").Tokenizer,m=t("./text_highlight_rules").TextHighlightRules,o=t("./behaviour/cstyle").CstyleBehaviour,d=t("../unicode"),l=t("../lib/lang"),f=t("../token_iterator").TokenIterator,u=t("../range").Range,h;h=function(){this.HighlightRules=m},(function(){this.$defaultBehaviour=new o,this.tokenRe=new RegExp("^["+d.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+d.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new a(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(c,p,g,y){var w=p.doc,M=!0,R=!0,x=1/0,S=p.getTabSize(),E=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var I=this.lineCommentStart.map(l.escapeRegExp).join("|"),k=this.lineCommentStart[0];else var I=l.escapeRegExp(this.lineCommentStart),k=this.lineCommentStart;I=new RegExp("^(\\s*)(?:"+I+") ?"),E=p.getUseSoftTabs();var b=function(J,K){var Q=J.match(I);if(Q){var X=Q[1].length,Z=Q[0].length;!L(J,X,Z)&&Q[0][Z-1]==" "&&Z--,w.removeInLine(K,X,Z)}},_=k+" ",C=function(J,K){(!M||/\S/.test(J))&&(L(J,x,x)?w.insertInLine({row:K,column:x},_):w.insertInLine({row:K,column:x},k))},A=function(J,K){return I.test(J)},L=function(J,K,Q){for(var X=0;K--&&J.charAt(K)==" ";)X++;if(X%S!=0)return!1;for(var X=0;J.charAt(Q++)==" ";)X++;return S>2?X%S!=S-1:X%S==0}}else{if(!this.blockComment)return!1;var k=this.blockComment.start,T=this.blockComment.end,I=new RegExp("^(\\s*)(?:"+l.escapeRegExp(k)+")"),P=new RegExp("(?:"+l.escapeRegExp(T)+")\\s*$"),C=function(B,W){A(B,W)||(!M||/\S/.test(B))&&(w.insertInLine({row:W,column:B.length},T),w.insertInLine({row:W,column:x},k))},b=function(B,W){var G;(G=B.match(P))&&w.removeInLine(W,B.length-G[0].length,B.length),(G=B.match(I))&&w.removeInLine(W,G[1].length,G[0].length)},A=function(B,W){if(I.test(B))return!0;for(var G=p.getTokens(W),J=0;J<G.length;J++)if(G[J].type==="comment")return!0}}function O(B){for(var W=g;W<=y;W++)B(w.getLine(W),W)}var V=1/0;O(function(B,W){var G=B.search(/\S/);G!==-1?(G<x&&(x=G),R&&!A(B,W)&&(R=!1)):V>B.length&&(V=B.length)}),x==1/0&&(x=V,M=!1,R=!1),E&&x%S!=0&&(x=Math.floor(x/S)*S),O(R?b:C)},this.toggleBlockComment=function(c,p,g,y){var w=this.blockComment;if(w){!w.start&&w[0]&&(w=w[0]);var M=new f(p,y.row,y.column),R=M.getCurrentToken();p.selection;var x=p.selection.toOrientedRange(),S,E;if(R&&/comment/.test(R.type)){for(var k,T;R&&/comment/.test(R.type);){var I=R.value.indexOf(w.start);if(I!=-1){var P=M.getCurrentTokenRow(),C=M.getCurrentTokenColumn()+I;k=new u(P,C,P,C+w.start.length);break}R=M.stepBackward()}for(var M=new f(p,y.row,y.column),R=M.getCurrentToken();R&&/comment/.test(R.type);){var I=R.value.indexOf(w.end);if(I!=-1){var P=M.getCurrentTokenRow(),C=M.getCurrentTokenColumn()+I;T=new u(P,C,P,C+w.end.length);break}R=M.stepForward()}T&&p.remove(T),k&&(p.remove(k),S=k.start.row,E=-w.start.length)}else E=w.start.length,S=g.start.row,p.insert(g.end,w.end),p.insert(g.start,w.start);x.start.row==S&&(x.start.column+=E),x.end.row==S&&(x.end.column+=E),p.selection.fromOrientedRange(x)}},this.getNextLineIndent=function(c,p,g){return this.$getIndent(p)},this.checkOutdent=function(c,p,g){return!1},this.autoOutdent=function(c,p,g){},this.$getIndent=function(c){return c.match(/^\s*/)[0]},this.createWorker=function(c){return null},this.createModeDelegates=function(c){this.$embeds=[],this.$modes={};for(var p in c)if(c[p]){var g=c[p],y=g.prototype.$id,w=s.$modes[y];w||(s.$modes[y]=w=new g),s.$modes[p]||(s.$modes[p]=w),this.$embeds.push(p),this.$modes[p]=w}for(var M=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],R=function(S){(function(E){var k=M[S],T=E[k];E[M[S]]=function(){return this.$delegator(k,arguments,T)}})(x)},x=this,p=0;p<M.length;p++)R(p)},this.$delegator=function(c,p,g){var y=p[0]||"start";if(typeof y!="string"){if(Array.isArray(y[2])){var w=y[2][y[2].length-1],M=this.$modes[w];if(M)return M[c].apply(M,[y[1]].concat([].slice.call(p,1)))}y=y[0]||"start"}for(var R=0;R<this.$embeds.length;R++)if(this.$modes[this.$embeds[R]]){var x=y.split(this.$embeds[R]);if(!x[0]&&x[1]){p[0]=x[1];var M=this.$modes[this.$embeds[R]];return M[c].apply(M,p)}}var S=g.apply(this,p);return g?S:void 0},this.transformAction=function(c,p,g,y,w){if(this.$behaviour){var M=this.$behaviour.getBehaviours();for(var R in M)if(M[R][p]){var x=M[R][p].apply(this,arguments);if(x)return x}}},this.getKeywords=function(c){if(!this.completionKeywords){var p=this.$tokenizer.rules,g=[];for(var y in p)for(var w=p[y],M=0,R=w.length;M<R;M++)if(typeof w[M].token=="string")/keyword|support|storage/.test(w[M].token)&&g.push(w[M].regex);else if(typeof w[M].token=="object"){for(var x=0,S=w[M].token.length;x<S;x++)if(/keyword|support|storage/.test(w[M].token[x])){var y=w[M].regex.match(/\(.+?\)/g)[x];g.push(y.substr(1,y.length-2))}}this.completionKeywords=g}return c?g.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(c,p,g,y){var w=this.$keywordList||this.$createKeywordList();return w.map(function(M){return{name:M,value:M,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(h.prototype),n.Mode=h}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(t,n,i){var s=t("./lib/dom"),a=(function(){function m(o){this.session=o,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return m.prototype.getRowLength=function(o){var d;return this.lineWidgets?d=this.lineWidgets[o]&&this.lineWidgets[o].rowCount||0:d=0,!this.$useWrapMode||!this.$wrapData[o]?1+d:this.$wrapData[o].length+1+d},m.prototype.$getWidgetScreenLength=function(){var o=0;return this.lineWidgets.forEach(function(d){d&&d.rowCount&&!d.hidden&&(o+=d.rowCount)}),o},m.prototype.$onChangeEditor=function(o){this.attach(o.editor)},m.prototype.attach=function(o){o&&o.widgetManager&&o.widgetManager!=this&&o.widgetManager.detach(),this.editor!=o&&(this.detach(),this.editor=o,o&&(o.widgetManager=this,o.renderer.on("beforeRender",this.measureWidgets),o.renderer.on("afterRender",this.renderWidgets)))},m.prototype.detach=function(o){var d=this.editor;if(d){this.editor=null,d.widgetManager=null,d.renderer.off("beforeRender",this.measureWidgets),d.renderer.off("afterRender",this.renderWidgets);var l=this.session.lineWidgets;l&&l.forEach(function(f){f&&f.el&&f.el.parentNode&&(f._inDocument=!1,f.el.parentNode.removeChild(f.el))})}},m.prototype.updateOnFold=function(o,d){var l=d.lineWidgets;if(!(!l||!o.action)){for(var f=o.data,u=f.start.row,h=f.end.row,c=o.action=="add",p=u+1;p<h;p++)l[p]&&(l[p].hidden=c);l[h]&&(c?l[u]?l[h].hidden=c:l[u]=l[h]:(l[u]==l[h]&&(l[u]=void 0),l[h].hidden=c))}},m.prototype.updateOnChange=function(o){var d=this.session.lineWidgets;if(d){var l=o.start.row,f=o.end.row-l;if(f!==0)if(o.action=="remove"){var u=d.splice(l+1,f);!d[l]&&u[u.length-1]&&(d[l]=u.pop()),u.forEach(function(c){c&&this.removeLineWidget(c)},this),this.$updateRows()}else{var h=new Array(f);d[l]&&d[l].column!=null&&o.start.column>d[l].column&&l++,h.unshift(l,0),d.splice.apply(d,h),this.$updateRows()}}},m.prototype.$updateRows=function(){var o=this.session.lineWidgets;if(o){var d=!0;o.forEach(function(l,f){if(l)for(d=!1,l.row=f;l.$oldWidget;)l.$oldWidget.row=f,l=l.$oldWidget}),d&&(this.session.lineWidgets=null)}},m.prototype.$registerLineWidget=function(o){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var d=this.session.lineWidgets[o.row];return d&&(o.$oldWidget=d,d.el&&d.el.parentNode&&(d.el.parentNode.removeChild(d.el),d._inDocument=!1)),this.session.lineWidgets[o.row]=o,o},m.prototype.addLineWidget=function(o){if(this.$registerLineWidget(o),o.session=this.session,!this.editor)return o;var d=this.editor.renderer;o.html&&!o.el&&(o.el=s.createElement("div"),o.el.innerHTML=o.html),o.text&&!o.el&&(o.el=s.createElement("div"),o.el.textContent=o.text),o.el&&(s.addCssClass(o.el,"ace_lineWidgetContainer"),o.className&&s.addCssClass(o.el,o.className),o.el.style.position="absolute",o.el.style.zIndex="5",d.container.appendChild(o.el),o._inDocument=!0,o.coverGutter||(o.el.style.zIndex="3"),o.pixelHeight==null&&(o.pixelHeight=o.el.offsetHeight)),o.rowCount==null&&(o.rowCount=o.pixelHeight/d.layerConfig.lineHeight);var l=this.session.getFoldAt(o.row,0);if(o.$fold=l,l){var f=this.session.lineWidgets;o.row==l.end.row&&!f[l.start.row]?f[l.start.row]=o:o.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:o.row}}}),this.$updateRows(),this.renderWidgets(null,d),this.onWidgetChanged(o),o},m.prototype.removeLineWidget=function(o){if(o._inDocument=!1,o.session=null,o.el&&o.el.parentNode&&o.el.parentNode.removeChild(o.el),o.editor&&o.editor.destroy)try{o.editor.destroy()}catch{}if(this.session.lineWidgets){var d=this.session.lineWidgets[o.row];if(d==o)this.session.lineWidgets[o.row]=o.$oldWidget,o.$oldWidget&&this.onWidgetChanged(o.$oldWidget);else for(;d;){if(d.$oldWidget==o){d.$oldWidget=o.$oldWidget;break}d=d.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:o.row}}}),this.$updateRows()},m.prototype.getWidgetsAtRow=function(o){for(var d=this.session.lineWidgets,l=d&&d[o],f=[];l;)f.push(l),l=l.$oldWidget;return f},m.prototype.onWidgetChanged=function(o){this.session._changedWidgets.push(o),this.editor&&this.editor.renderer.updateFull()},m.prototype.measureWidgets=function(o,d){var l=this.session._changedWidgets,f=d.layerConfig;if(!(!l||!l.length)){for(var u=1/0,h=0;h<l.length;h++){var c=l[h];if(!(!c||!c.el)&&c.session==this.session){if(!c._inDocument){if(this.session.lineWidgets[c.row]!=c)continue;c._inDocument=!0,d.container.appendChild(c.el)}c.h=c.el.offsetHeight,c.fixedWidth||(c.w=c.el.offsetWidth,c.screenWidth=Math.ceil(c.w/f.characterWidth));var p=c.h/f.lineHeight;c.coverLine&&(p-=this.session.getRowLineCount(c.row),p<0&&(p=0)),c.rowCount!=p&&(c.rowCount=p,c.row<u&&(u=c.row))}}u!=1/0&&(this.session._emit("changeFold",{data:{start:{row:u}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},m.prototype.renderWidgets=function(o,d){var l=d.layerConfig,f=this.session.lineWidgets;if(f){for(var u=Math.min(this.firstRow,l.firstRow),h=Math.max(this.lastRow,l.lastRow,f.length);u>0&&!f[u];)u--;this.firstRow=l.firstRow,this.lastRow=l.lastRow,d.$cursorLayer.config=l;for(var c=u;c<=h;c++){var p=f[c];if(!(!p||!p.el)){if(p.hidden){p.el.style.top=-100-(p.pixelHeight||0)+"px";continue}p._inDocument||(p._inDocument=!0,d.container.appendChild(p.el));var g=d.$cursorLayer.getPixelPosition({row:c,column:0},!0).top;p.coverLine||(g+=l.lineHeight*this.session.getRowLineCount(p.row)),p.el.style.top=g-l.offset+"px";var y=p.coverGutter?0:d.gutterWidth;p.fixedWidth||(y-=d.scrollLeft),p.el.style.left=y+"px",p.fullWidth&&p.screenWidth&&(p.el.style.minWidth=l.width+2*l.padding+"px"),p.fixedWidth?p.el.style.right=d.scrollBar.getWidth()+"px":p.el.style.right=""}}}},m})();n.LineWidgets=a}),ace.define("ace/apply_delta",["require","exports","module"],function(t,n,i){n.applyDelta=function(s,a,m){var o=a.start.row,d=a.start.column,l=s[o]||"";switch(a.action){case"insert":var f=a.lines;if(f.length===1)s[o]=l.substring(0,d)+a.lines[0]+l.substring(d);else{var u=[o,1].concat(a.lines);s.splice.apply(s,u),s[o]=l.substring(0,d)+s[o],s[o+a.lines.length-1]+=l.substring(d)}break;case"remove":var h=a.end.column,c=a.end.row;o===c?s[o]=l.substring(0,d)+l.substring(h):s.splice(o,c-o+1,l.substring(0,d)+s[c].substring(h));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,n,i){var s=t("./lib/oop"),a=t("./lib/event_emitter").EventEmitter,m=(function(){function l(f,u,h){this.$onChange=this.onChange.bind(this),this.attach(f),typeof u!="number"?this.setPosition(u.row,u.column):this.setPosition(u,h)}return l.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},l.prototype.getDocument=function(){return this.document},l.prototype.onChange=function(f){if(!(f.start.row==f.end.row&&f.start.row!=this.row)&&!(f.start.row>this.row)){var u=d(f,{row:this.row,column:this.column},this.$insertRight);this.setPosition(u.row,u.column,!0)}},l.prototype.setPosition=function(f,u,h){var c;if(h?c={row:f,column:u}:c=this.$clipPositionToDocument(f,u),!(this.row==c.row&&this.column==c.column)){var p={row:this.row,column:this.column};this.row=c.row,this.column=c.column,this._signal("change",{old:p,value:c})}},l.prototype.detach=function(){this.document.off("change",this.$onChange)},l.prototype.attach=function(f){this.document=f||this.document,this.document.on("change",this.$onChange)},l.prototype.$clipPositionToDocument=function(f,u){var h={};return f>=this.document.getLength()?(h.row=Math.max(0,this.document.getLength()-1),h.column=this.document.getLine(h.row).length):f<0?(h.row=0,h.column=0):(h.row=f,h.column=Math.min(this.document.getLine(h.row).length,Math.max(0,u))),u<0&&(h.column=0),h},l})();m.prototype.$insertRight=!1,s.implement(m.prototype,a);function o(l,f,u){var h=u?l.column<=f.column:l.column<f.column;return l.row<f.row||l.row==f.row&&h}function d(l,f,u){var h=l.action=="insert",c=(h?1:-1)*(l.end.row-l.start.row),p=(h?1:-1)*(l.end.column-l.start.column),g=l.start,y=h?g:l.end;return o(f,g,u)?{row:f.row,column:f.column}:o(y,f,!u)?{row:f.row+c,column:f.column+(f.row==y.row?p:0)}:{row:g.row,column:g.column}}n.Anchor=m}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(t,n,i){var s=t("./lib/oop"),a=t("./apply_delta").applyDelta,m=t("./lib/event_emitter").EventEmitter,o=t("./range").Range,d=t("./anchor").Anchor,l=(function(){function f(u){this.$lines=[""],u.length===0?this.$lines=[""]:Array.isArray(u)?this.insertMergedLines({row:0,column:0},u):this.insert({row:0,column:0},u)}return f.prototype.setValue=function(u){var h=this.getLength()-1;this.remove(new o(0,0,h,this.getLine(h).length)),this.insert({row:0,column:0},u||"")},f.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},f.prototype.createAnchor=function(u,h){return new d(this,u,h)},f.prototype.$detectNewLine=function(u){var h=u.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=h?h[1]:`
`,this._signal("changeNewLineMode")},f.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},f.prototype.setNewLineMode=function(u){this.$newLineMode!==u&&(this.$newLineMode=u,this._signal("changeNewLineMode"))},f.prototype.getNewLineMode=function(){return this.$newLineMode},f.prototype.isNewLine=function(u){return u==`\r
`||u=="\r"||u==`
`},f.prototype.getLine=function(u){return this.$lines[u]||""},f.prototype.getLines=function(u,h){return this.$lines.slice(u,h+1)},f.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},f.prototype.getLength=function(){return this.$lines.length},f.prototype.getTextRange=function(u){return this.getLinesForRange(u).join(this.getNewLineCharacter())},f.prototype.getLinesForRange=function(u){var h;if(u.start.row===u.end.row)h=[this.getLine(u.start.row).substring(u.start.column,u.end.column)];else{h=this.getLines(u.start.row,u.end.row),h[0]=(h[0]||"").substring(u.start.column);var c=h.length-1;u.end.row-u.start.row==c&&(h[c]=h[c].substring(0,u.end.column))}return h},f.prototype.insertLines=function(u,h){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(u,h)},f.prototype.removeLines=function(u,h){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(u,h)},f.prototype.insertNewLine=function(u){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(u,["",""])},f.prototype.insert=function(u,h){return this.getLength()<=1&&this.$detectNewLine(h),this.insertMergedLines(u,this.$split(h))},f.prototype.insertInLine=function(u,h){var c=this.clippedPos(u.row,u.column),p=this.pos(u.row,u.column+h.length);return this.applyDelta({start:c,end:p,action:"insert",lines:[h]},!0),this.clonePos(p)},f.prototype.clippedPos=function(u,h){var c=this.getLength();u===void 0?u=c:u<0?u=0:u>=c&&(u=c-1,h=void 0);var p=this.getLine(u);return h==null&&(h=p.length),h=Math.min(Math.max(h,0),p.length),{row:u,column:h}},f.prototype.clonePos=function(u){return{row:u.row,column:u.column}},f.prototype.pos=function(u,h){return{row:u,column:h}},f.prototype.$clipPosition=function(u){var h=this.getLength();return u.row>=h?(u.row=Math.max(0,h-1),u.column=this.getLine(h-1).length):(u.row=Math.max(0,u.row),u.column=Math.min(Math.max(u.column,0),this.getLine(u.row).length)),u},f.prototype.insertFullLines=function(u,h){u=Math.min(Math.max(u,0),this.getLength());var c=0;u<this.getLength()?(h=h.concat([""]),c=0):(h=[""].concat(h),u--,c=this.$lines[u].length),this.insertMergedLines({row:u,column:c},h)},f.prototype.insertMergedLines=function(u,h){var c=this.clippedPos(u.row,u.column),p={row:c.row+h.length-1,column:(h.length==1?c.column:0)+h[h.length-1].length};return this.applyDelta({start:c,end:p,action:"insert",lines:h}),this.clonePos(p)},f.prototype.remove=function(u){var h=this.clippedPos(u.start.row,u.start.column),c=this.clippedPos(u.end.row,u.end.column);return this.applyDelta({start:h,end:c,action:"remove",lines:this.getLinesForRange({start:h,end:c})}),this.clonePos(h)},f.prototype.removeInLine=function(u,h,c){var p=this.clippedPos(u,h),g=this.clippedPos(u,c);return this.applyDelta({start:p,end:g,action:"remove",lines:this.getLinesForRange({start:p,end:g})},!0),this.clonePos(p)},f.prototype.removeFullLines=function(u,h){u=Math.min(Math.max(0,u),this.getLength()-1),h=Math.min(Math.max(0,h),this.getLength()-1);var c=h==this.getLength()-1&&u>0,p=h<this.getLength()-1,g=c?u-1:u,y=c?this.getLine(g).length:0,w=p?h+1:h,M=p?0:this.getLine(w).length,R=new o(g,y,w,M),x=this.$lines.slice(u,h+1);return this.applyDelta({start:R.start,end:R.end,action:"remove",lines:this.getLinesForRange(R)}),x},f.prototype.removeNewLine=function(u){u<this.getLength()-1&&u>=0&&this.applyDelta({start:this.pos(u,this.getLine(u).length),end:this.pos(u+1,0),action:"remove",lines:["",""]})},f.prototype.replace=function(u,h){if(u instanceof o||(u=o.fromPoints(u.start,u.end)),h.length===0&&u.isEmpty())return u.start;if(h==this.getTextRange(u))return u.end;this.remove(u);var c;return h?c=this.insert(u.start,h):c=u.start,c},f.prototype.applyDeltas=function(u){for(var h=0;h<u.length;h++)this.applyDelta(u[h])},f.prototype.revertDeltas=function(u){for(var h=u.length-1;h>=0;h--)this.revertDelta(u[h])},f.prototype.applyDelta=function(u,h){var c=u.action=="insert";(c?u.lines.length<=1&&!u.lines[0]:!o.comparePoints(u.start,u.end))||(c&&u.lines.length>2e4?this.$splitAndapplyLargeDelta(u,2e4):(a(this.$lines,u,h),this._signal("change",u)))},f.prototype.$safeApplyDelta=function(u){var h=this.$lines.length;(u.action=="remove"&&u.start.row<h&&u.end.row<h||u.action=="insert"&&u.start.row<=h)&&this.applyDelta(u)},f.prototype.$splitAndapplyLargeDelta=function(u,h){for(var c=u.lines,p=c.length-h+1,g=u.start.row,y=u.start.column,w=0,M=0;w<p;w=M){M+=h-1;var R=c.slice(w,M);R.push(""),this.applyDelta({start:this.pos(g+w,y),end:this.pos(g+M,y=0),action:u.action,lines:R},!0)}u.lines=c.slice(w),u.start.row=g+w,u.start.column=y,this.applyDelta(u,!0)},f.prototype.revertDelta=function(u){this.$safeApplyDelta({start:this.clonePos(u.start),end:this.clonePos(u.end),action:u.action=="insert"?"remove":"insert",lines:u.lines.slice()})},f.prototype.indexToPosition=function(u,h){for(var c=this.$lines||this.getAllLines(),p=this.getNewLineCharacter().length,g=h||0,y=c.length;g<y;g++)if(u-=c[g].length+p,u<0)return{row:g,column:u+c[g].length+p};return{row:y-1,column:u+c[y-1].length+p}},f.prototype.positionToIndex=function(u,h){for(var c=this.$lines||this.getAllLines(),p=this.getNewLineCharacter().length,g=0,y=Math.min(u.row,c.length),w=h||0;w<y;++w)g+=c[w].length+p;return g+u.column},f.prototype.$split=function(u){return u.split(/\r\n|\r|\n/)},f})();l.prototype.$autoNewLine="",l.prototype.$newLineMode="auto",s.implement(l.prototype,m),n.Document=l}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,n,i){var s=t("./lib/oop"),a=t("./lib/event_emitter").EventEmitter,m=(function(){function o(d,l){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=d;var f=this;this.$worker=function(){if(f.running){for(var u=new Date,h=f.currentLine,c=-1,p=f.doc,g=h;f.lines[h];)h++;var y=p.getLength(),w=0;for(f.running=!1;h<y;){f.$tokenizeRow(h),c=h;do h++;while(f.lines[h]);if(w++,w%5===0&&new Date-u>20){f.running=setTimeout(f.$worker,20);break}}f.currentLine=h,c==-1&&(c=h),g<=c&&f.fireUpdateEvent(g,c)}}}return o.prototype.setTokenizer=function(d){this.tokenizer=d,this.lines=[],this.states=[],this.start(0)},o.prototype.setDocument=function(d){this.doc=d,this.lines=[],this.states=[],this.stop()},o.prototype.fireUpdateEvent=function(d,l){var f={first:d,last:l};this._signal("update",{data:f})},o.prototype.start=function(d){this.currentLine=Math.min(d||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},o.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},o.prototype.$updateOnChange=function(d){var l=d.start.row,f=d.end.row-l;if(f===0)this.lines[l]=null;else if(d.action=="remove")this.lines.splice(l,f+1,null),this.states.splice(l,f+1,null);else{var u=Array(f+1);u.unshift(l,1),this.lines.splice.apply(this.lines,u),this.states.splice.apply(this.states,u)}this.currentLine=Math.min(l,this.currentLine,this.doc.getLength()),this.stop()},o.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},o.prototype.getTokens=function(d){return this.lines[d]||this.$tokenizeRow(d)},o.prototype.getState=function(d){return this.currentLine==d&&this.$tokenizeRow(d),this.states[d]||"start"},o.prototype.$tokenizeRow=function(d){var l=this.doc.getLine(d),f=this.states[d-1],u=this.tokenizer.getLineTokens(l,f,d);return this.states[d]+""!=u.state+""?(this.states[d]=u.state,this.lines[d+1]=null,this.currentLine>d+1&&(this.currentLine=d+1)):this.currentLine==d&&(this.currentLine=d+1),this.lines[d]=u.tokens},o.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},o})();s.implement(m.prototype,a),n.BackgroundTokenizer=m}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(t,n,i){var s=t("./lib/lang"),a=t("./range").Range,m=(function(){function o(d,l,f){f===void 0&&(f="text"),this.setRegexp(d),this.clazz=l,this.type=f,this.docLen=0}return o.prototype.setRegexp=function(d){this.regExp+""!=d+""&&(this.regExp=d,this.cache=[])},o.prototype.update=function(d,l,f,u){if(this.regExp){for(var h=u.firstRow,c=u.lastRow,p={},g=f.$editor&&f.$editor.$search,y=g&&g.$isMultilineSearch(f.$editor.getLastSearchOptions()),w=h;w<=c;w++){var M=this.cache[w];if(M==null||f.getValue().length!=this.docLen){if(y){M=[];var R=g.$multiLineForward(f,this.regExp,w,c);if(R){var x=R.endRow<=c?R.endRow-1:c;x>w&&(w=x),M.push(new a(R.startRow,R.startCol,R.endRow,R.endCol))}M.length>this.MAX_RANGES&&(M=M.slice(0,this.MAX_RANGES))}else M=s.getMatchOffsets(f.getLine(w),this.regExp),M.length>this.MAX_RANGES&&(M=M.slice(0,this.MAX_RANGES)),M=M.map(function(T){return new a(w,T.offset,w,T.offset+T.length)});this.cache[w]=M.length?M:""}if(M.length!==0)for(var S=M.length;S--;){var E=M[S].toScreenRange(f),k=E.toString();p[k]||(p[k]=!0,l.drawSingleLineMarker(d,E,this.clazz,u))}}this.docLen=f.getValue().length}},o})();m.prototype.MAX_RANGES=500,n.SearchHighlight=m}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(t,n,i){var s=(function(){function x(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return x.prototype.addSession=function(S){this.$session=S},x.prototype.add=function(S,E,k){if(!this.$fromUndo&&S!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),E===!1||!this.lastDeltas){this.lastDeltas=[];var T=this.$undoStack.length;T>this.$undoDepth-1&&this.$undoStack.splice(0,T-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),S.id=this.$rev=++this.$maxRev}(S.action=="remove"||S.action=="insert")&&(this.$lastDelta=S),this.lastDeltas.push(S)}},x.prototype.addSelection=function(S,E){this.selections.push({value:S,rev:E||this.$rev})},x.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},x.prototype.markIgnored=function(S,E){E==null&&(E=this.$rev+1);for(var k=this.$undoStack,T=k.length;T--;){var I=k[T][0];if(I.id<=S)break;I.id<E&&(I.ignore=!0)}this.lastDeltas=null},x.prototype.getSelection=function(S,E){for(var k=this.selections,T=k.length;T--;){var I=k[T];if(I.rev<S)return E&&(I=k[T+1]),I}},x.prototype.getRevision=function(){return this.$rev},x.prototype.getDeltas=function(S,E){E==null&&(E=this.$rev+1);for(var k=this.$undoStack,T=null,I=0,P=k.length;P--;){var C=k[P][0];if(C.id<E&&!T&&(T=P+1),C.id<=S){I=P+1;break}}return k.slice(I,T)},x.prototype.getChangedRanges=function(S,E){E==null&&(E=this.$rev+1)},x.prototype.getChangedLines=function(S,E){E==null&&(E=this.$rev+1)},x.prototype.undo=function(S,E){this.lastDeltas=null;var k=this.$undoStack;if(a(k,k.length)){S||(S=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var T=k.pop(),I=null;return T&&(I=S.undoChanges(T,E),this.$redoStack.push(T),this.$syncRev()),this.$fromUndo=!1,I}},x.prototype.redo=function(S,E){if(this.lastDeltas=null,S||(S=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var k=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);R(this.$redoStack,k),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(P){P[0].id=++this.$maxRev},this)}var T=this.$redoStack.pop(),I=null;return T&&(I=S.redoChanges(T,E),this.$undoStack.push(T),this.$syncRev()),this.$fromUndo=!1,I},x.prototype.$syncRev=function(){var S=this.$undoStack,E=S[S.length-1],k=E&&E[0].id||0;this.$redoStackBaseRev=k,this.$rev=k},x.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},x.prototype.canUndo=function(){return this.$undoStack.length>0},x.prototype.canRedo=function(){return this.$redoStack.length>0},x.prototype.bookmark=function(S){S==null&&(S=this.$rev),this.mark=S},x.prototype.isAtBookmark=function(){return this.$rev===this.mark},x.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},x.prototype.fromJSON=function(S){this.reset(),this.$undoStack=S.$undoStack,this.$redoStack=S.$redoStack},x.prototype.$prettyPrint=function(S){return S?f(S):f(this.$undoStack)+`
---
`+f(this.$redoStack)},x})();s.prototype.hasUndo=s.prototype.canUndo,s.prototype.hasRedo=s.prototype.canRedo,s.prototype.isClean=s.prototype.isAtBookmark,s.prototype.markClean=s.prototype.bookmark;function a(x,S){for(var E=S;E--;){var k=x[E];if(k&&!k[0].ignore){for(;E<S-1;){var T=c(x[E],x[E+1]);x[E]=T[0],x[E+1]=T[1],E++}return!0}}}var m=t("./range").Range,o=m.comparePoints;m.comparePoints;function d(x){return{row:x.row,column:x.column}}function l(x){return{start:d(x.start),end:d(x.end),action:x.action,lines:x.lines.slice()}}function f(x){if(x=x||this,Array.isArray(x))return x.map(f).join(`
`);var S="";return x.action?(S=x.action=="insert"?"+":"-",S+="["+x.lines+"]"):x.value&&(Array.isArray(x.value)?S=x.value.map(u).join(`
`):S=u(x.value)),x.start&&(S+=u(x)),(x.id||x.rev)&&(S+="	("+(x.id||x.rev)+")"),S}function u(x){return x.start.row+":"+x.start.column+"=>"+x.end.row+":"+x.end.column}function h(x,S){var E=x.action=="insert",k=S.action=="insert";if(E&&k)if(o(S.start,x.end)>=0)g(S,x,-1);else if(o(S.start,x.start)<=0)g(x,S,1);else return null;else if(E&&!k)if(o(S.start,x.end)>=0)g(S,x,-1);else if(o(S.end,x.start)<=0)g(x,S,-1);else return null;else if(!E&&k)if(o(S.start,x.start)>=0)g(S,x,1);else if(o(S.start,x.start)<=0)g(x,S,1);else return null;else if(!E&&!k)if(o(S.start,x.start)>=0)g(S,x,1);else if(o(S.end,x.start)<=0)g(x,S,-1);else return null;return[S,x]}function c(x,S){for(var E=x.length;E--;)for(var k=0;k<S.length;k++)if(!h(x[E],S[k])){for(;E<x.length;){for(;k--;)h(S[k],x[E]);k=S.length,E++}return[x,S]}return x.selectionBefore=S.selectionBefore=x.selectionAfter=S.selectionAfter=null,[S,x]}function p(x,S){var E=x.action=="insert",k=S.action=="insert";if(E&&k)o(x.start,S.start)<0?g(S,x,1):g(x,S,1);else if(E&&!k)o(x.start,S.end)>=0?g(x,S,-1):(o(x.start,S.start)<=0||g(x,m.fromPoints(S.start,x.start),-1),g(S,x,1));else if(!E&&k)o(S.start,x.end)>=0?g(S,x,-1):(o(S.start,x.start)<=0||g(S,m.fromPoints(x.start,S.start),-1),g(x,S,1));else if(!E&&!k)if(o(S.start,x.end)>=0)g(S,x,-1);else if(o(S.end,x.start)<=0)g(x,S,-1);else{var T,I;return o(x.start,S.start)<0&&(T=x,x=w(x,S.start)),o(x.end,S.end)>0&&(I=w(x,S.end)),y(S.end,x.start,x.end,-1),I&&!T&&(x.lines=I.lines,x.start=I.start,x.end=I.end,I=x),[S,T,I].filter(Boolean)}return[S,x]}function g(x,S,E){y(x.start,S.start,S.end,E),y(x.end,S.start,S.end,E)}function y(x,S,E,k){x.row==(k==1?S:E).row&&(x.column+=k*(E.column-S.column)),x.row+=k*(E.row-S.row)}function w(x,S){var E=x.lines,k=x.end;x.end=d(S);var T=x.end.row-x.start.row,I=E.splice(T,E.length),P=T?S.column:S.column-x.start.column;E.push(I[0].substring(0,P)),I[0]=I[0].substr(P);var C={start:d(S),end:k,lines:I,action:x.action};return C}function M(x,S){S=l(S);for(var E=x.length;E--;){for(var k=x[E],T=0;T<k.length;T++){var I=k[T],P=p(I,S);S=P[0],P.length!=2&&(P[2]?(k.splice(T+1,1,P[1],P[2]),T++):P[1]||(k.splice(T,1),T--))}k.length||x.splice(E,1)}return x}function R(x,S){for(var E=0;E<S.length;E++)for(var k=S[E],T=0;T<k.length;T++)M(x,k[T])}n.UndoManager=s}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(t,n,i){var s=t("../range").Range,a=(function(){function m(o,d){this.foldData=o,Array.isArray(d)?this.folds=d:d=this.folds=[d];var l=d[d.length-1];this.range=new s(d[0].start.row,d[0].start.column,l.end.row,l.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(f){f.setFoldLine(this)},this)}return m.prototype.shiftRow=function(o){this.start.row+=o,this.end.row+=o,this.folds.forEach(function(d){d.start.row+=o,d.end.row+=o})},m.prototype.addFold=function(o){if(o.sameRow){if(o.start.row<this.startRow||o.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(o),this.folds.sort(function(d,l){return-d.range.compareEnd(l.start.row,l.start.column)}),this.range.compareEnd(o.start.row,o.start.column)>0?(this.end.row=o.end.row,this.end.column=o.end.column):this.range.compareStart(o.end.row,o.end.column)<0&&(this.start.row=o.start.row,this.start.column=o.start.column)}else if(o.start.row==this.end.row)this.folds.push(o),this.end.row=o.end.row,this.end.column=o.end.column;else if(o.end.row==this.start.row)this.folds.unshift(o),this.start.row=o.start.row,this.start.column=o.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");o.foldLine=this},m.prototype.containsRow=function(o){return o>=this.start.row&&o<=this.end.row},m.prototype.walk=function(o,d,l){var f=0,u=this.folds,h,c,p,g=!0;d==null&&(d=this.end.row,l=this.end.column);for(var y=0;y<u.length;y++){if(h=u[y],c=h.range.compareStart(d,l),c==-1){o(null,d,l,f,g);return}if(p=o(null,h.start.row,h.start.column,f,g),p=!p&&o(h.placeholder,h.start.row,h.start.column,f),p||c===0)return;g=!h.sameRow,f=h.end.column}o(null,d,l,f,g)},m.prototype.getNextFoldTo=function(o,d){for(var l,f,u=0;u<this.folds.length;u++){if(l=this.folds[u],f=l.range.compareEnd(o,d),f==-1)return{fold:l,kind:"after"};if(f===0)return{fold:l,kind:"inside"}}return null},m.prototype.addRemoveChars=function(o,d,l){var f=this.getNextFoldTo(o,d),u,h;if(f){if(u=f.fold,f.kind=="inside"&&u.start.column!=d&&u.start.row!=o)window.console&&window.console.log(o,d,u);else if(u.start.row==o){h=this.folds;var c=h.indexOf(u);for(c===0&&(this.start.column+=l),c;c<h.length;c++){if(u=h[c],u.start.column+=l,!u.sameRow)return;u.end.column+=l}this.end.column+=l}}},m.prototype.split=function(o,d){var l=this.getNextFoldTo(o,d);if(!l||l.kind=="inside")return null;var f=l.fold,u=this.folds,h=this.foldData,c=u.indexOf(f),p=u[c-1];this.end.row=p.end.row,this.end.column=p.end.column,u=u.splice(c,u.length-c);var g=new m(h,u);return h.splice(h.indexOf(this)+1,0,g),g},m.prototype.merge=function(o){for(var d=o.folds,l=0;l<d.length;l++)this.addFold(d[l]);var f=this.foldData;f.splice(f.indexOf(o),1)},m.prototype.toString=function(){var o=[this.range.toString()+": ["];return this.folds.forEach(function(d){o.push("  "+d.toString())}),o.push("]"),o.join(`
`)},m.prototype.idxToPosition=function(o){for(var d=0,l=0;l<this.folds.length;l++){var f=this.folds[l];if(o-=f.start.column-d,o<0)return{row:f.start.row,column:f.start.column+o};if(o-=f.placeholder.length,o<0)return f.start;d=f.end.column}return{row:this.end.row,column:this.end.column+o}},m})();n.FoldLine=a}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(t,n,i){var s=t("./range").Range,a=s.comparePoints,m=(function(){function o(){this.ranges=[],this.$bias=1}return o.prototype.pointIndex=function(d,l,f){for(var u=this.ranges,h=f||0;h<u.length;h++){var c=u[h],p=a(d,c.end);if(!(p>0)){var g=a(d,c.start);return p===0?l&&g!==0?-h-2:h:g>0||g===0&&!l?h:-h-1}}return-h-1},o.prototype.add=function(d){var l=!d.isEmpty(),f=this.pointIndex(d.start,l);f<0&&(f=-f-1);var u=this.pointIndex(d.end,l,f);return u<0?u=-u-1:u++,this.ranges.splice(f,u-f,d)},o.prototype.addList=function(d){for(var l=[],f=d.length;f--;)l.push.apply(l,this.add(d[f]));return l},o.prototype.substractPoint=function(d){var l=this.pointIndex(d);if(l>=0)return this.ranges.splice(l,1)},o.prototype.merge=function(){var d=[],l=this.ranges;l=l.sort(function(p,g){return a(p.start,g.start)});for(var f=l[0],u,h=1;h<l.length;h++){u=f,f=l[h];var c=a(u.end,f.start);c<0||c==0&&!u.isEmpty()&&!f.isEmpty()||(a(u.end,f.end)<0&&(u.end.row=f.end.row,u.end.column=f.end.column),l.splice(h,1),d.push(f),f=u,h--)}return this.ranges=l,d},o.prototype.contains=function(d,l){return this.pointIndex({row:d,column:l})>=0},o.prototype.containsPoint=function(d){return this.pointIndex(d)>=0},o.prototype.rangeAtPoint=function(d){var l=this.pointIndex(d);if(l>=0)return this.ranges[l]},o.prototype.clipRows=function(d,l){var f=this.ranges;if(f[0].start.row>l||f[f.length-1].start.row<d)return[];var u=this.pointIndex({row:d,column:0});u<0&&(u=-u-1);var h=this.pointIndex({row:l,column:0},u);h<0&&(h=-h-1);for(var c=[],p=u;p<h;p++)c.push(f[p]);return c},o.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},o.prototype.attach=function(d){this.session&&this.detach(),this.session=d,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},o.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},o.prototype.$onChange=function(d){for(var l=d.start,f=d.end,u=l.row,h=f.row,c=this.ranges,p=0,g=c.length;p<g;p++){var y=c[p];if(y.end.row>=u)break}if(d.action=="insert")for(var w=h-u,M=-l.column+f.column;p<g;p++){var y=c[p];if(y.start.row>u)break;if(y.start.row==u&&y.start.column>=l.column&&(y.start.column==l.column&&this.$bias<=0||(y.start.column+=M,y.start.row+=w)),y.end.row==u&&y.end.column>=l.column){if(y.end.column==l.column&&this.$bias<0)continue;y.end.column==l.column&&M>0&&p<g-1&&y.end.column>y.start.column&&y.end.column==c[p+1].start.column&&(y.end.column-=M),y.end.column+=M,y.end.row+=w}}else for(var w=u-h,M=l.column-f.column;p<g;p++){var y=c[p];if(y.start.row>h)break;y.end.row<h&&(u<y.end.row||u==y.end.row&&l.column<y.end.column)?(y.end.row=u,y.end.column=l.column):y.end.row==h?y.end.column<=f.column?(w||y.end.column>l.column)&&(y.end.column=l.column,y.end.row=l.row):(y.end.column+=M,y.end.row+=w):y.end.row>h&&(y.end.row+=w),y.start.row<h&&(u<y.start.row||u==y.start.row&&l.column<y.start.column)?(y.start.row=u,y.start.column=l.column):y.start.row==h?y.start.column<=f.column?(w||y.start.column>l.column)&&(y.start.column=l.column,y.start.row=l.row):(y.start.column+=M,y.start.row+=w):y.start.row>h&&(y.start.row+=w)}if(w!=0&&p<g)for(;p<g;p++){var y=c[p];y.start.row+=w,y.end.row+=w}},o})();m.prototype.comparePoints=a,n.RangeList=m}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(t,n,i){var s=this&&this.__extends||(function(){var u=function(h,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},u(h,c)};return function(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");u(h,c);function p(){this.constructor=h}h.prototype=c===null?Object.create(c):(p.prototype=c.prototype,new p)}})(),a=t("../range_list").RangeList,m=(function(u){s(h,u);function h(c,p){var g=u.call(this)||this;return g.foldLine=null,g.placeholder=p,g.range=c,g.start=c.start,g.end=c.end,g.sameRow=c.start.row==c.end.row,g.subFolds=g.ranges=[],g}return h.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},h.prototype.setFoldLine=function(c){this.foldLine=c,this.subFolds.forEach(function(p){p.setFoldLine(c)})},h.prototype.clone=function(){var c=this.range.clone(),p=new h(c,this.placeholder);return this.subFolds.forEach(function(g){p.subFolds.push(g.clone())}),p.collapseChildren=this.collapseChildren,p},h.prototype.addSubFold=function(c){if(!this.range.isEqual(c)){d(c,this.start);for(var M=c.start.row,R=c.start.column,p=0,g=-1;p<this.subFolds.length&&(g=this.subFolds[p].range.compare(M,R),g==1);p++);var y=this.subFolds[p],w=0;if(g==0){if(y.range.containsRange(c))return y.addSubFold(c);w=1}for(var M=c.range.end.row,R=c.range.end.column,x=p,g=-1;x<this.subFolds.length&&(g=this.subFolds[x].range.compare(M,R),g==1);x++);g==0&&x++;for(var S=this.subFolds.splice(p,x-p,c),E=g==0?S.length-1:S.length,k=w;k<E;k++)c.addSubFold(S[k]);return c.setFoldLine(this.foldLine),c}},h.prototype.restoreRange=function(c){return f(c,this.start)},h})(a);function o(u,h){u.row-=h.row,u.row==0&&(u.column-=h.column)}function d(u,h){o(u.start,h),o(u.end,h)}function l(u,h){u.row==0&&(u.column+=h.column),u.row+=h.row}function f(u,h){l(u.start,h),l(u.end,h)}n.Fold=m}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(t,n,i){var s=t("../range").Range,a=t("./fold_line").FoldLine,m=t("./fold").Fold,o=t("../token_iterator").TokenIterator,d=t("../mouse/mouse_event").MouseEvent;function l(){this.getFoldAt=function(f,u,h){var c=this.getFoldLine(f);if(!c)return null;for(var p=c.folds,g=0;g<p.length;g++){var y=p[g].range;if(y.contains(f,u)){if(h==1&&y.isEnd(f,u)&&!y.isEmpty())continue;if(h==-1&&y.isStart(f,u)&&!y.isEmpty())continue;return p[g]}}},this.getFoldsInRange=function(f){var u=f.start,h=f.end,c=this.$foldData,p=[];u.column+=1,h.column-=1;for(var g=0;g<c.length;g++){var y=c[g].range.compareRange(f);if(y!=2){if(y==-2)break;for(var w=c[g].folds,M=0;M<w.length;M++){var R=w[M];if(y=R.range.compareRange(f),y==-2)break;if(y==2)continue;if(y==42)break;p.push(R)}}}return u.column-=1,h.column+=1,p},this.getFoldsInRangeList=function(f){if(Array.isArray(f)){var u=[];f.forEach(function(h){u=u.concat(this.getFoldsInRange(h))},this)}else var u=this.getFoldsInRange(f);return u},this.getAllFolds=function(){for(var f=[],u=this.$foldData,h=0;h<u.length;h++)for(var c=0;c<u[h].folds.length;c++)f.push(u[h].folds[c]);return f},this.getFoldStringAt=function(f,u,h,c){if(c=c||this.getFoldLine(f),!c)return null;for(var p={end:{column:0}},g,y,w=0;w<c.folds.length;w++){y=c.folds[w];var M=y.range.compareEnd(f,u);if(M==-1){g=this.getLine(y.start.row).substring(p.end.column,y.start.column);break}else if(M===0)return null;p=y}return g||(g=this.getLine(y.start.row).substring(p.end.column)),h==-1?g.substring(0,u-p.end.column):h==1?g.substring(u-p.end.column):g},this.getFoldLine=function(f,u){var h=this.$foldData,c=0;for(u&&(c=h.indexOf(u)),c==-1&&(c=0),c;c<h.length;c++){var p=h[c];if(p.start.row<=f&&p.end.row>=f)return p;if(p.end.row>f)return null}return null},this.getNextFoldLine=function(f,u){var h=this.$foldData,c=0;for(u&&(c=h.indexOf(u)),c==-1&&(c=0),c;c<h.length;c++){var p=h[c];if(p.end.row>=f)return p}return null},this.getFoldedRowCount=function(f,u){for(var h=this.$foldData,c=u-f+1,p=0;p<h.length;p++){var g=h[p],y=g.end.row,w=g.start.row;if(y>=u){w<u&&(w>=f?c-=u-w:c=0);break}else y>=f&&(w>=f?c-=y-w:c-=y-f+1)}return c},this.$addFoldLine=function(f){return this.$foldData.push(f),this.$foldData.sort(function(u,h){return u.start.row-h.start.row}),f},this.addFold=function(f,u){var h=this.$foldData,c=!1,p;f instanceof m?p=f:(p=new m(u,f),p.collapseChildren=u.collapseChildren),this.$clipRangeToDocument(p.range);var g=p.start.row,y=p.start.column,w=p.end.row,M=p.end.column,R=this.getFoldAt(g,y,1),x=this.getFoldAt(w,M,-1);if(R&&x==R)return R.addSubFold(p);R&&!R.range.isStart(g,y)&&this.removeFold(R),x&&!x.range.isEnd(w,M)&&this.removeFold(x);var S=this.getFoldsInRange(p.range);S.length>0&&(this.removeFolds(S),p.collapseChildren||S.forEach(function(I){p.addSubFold(I)}));for(var E=0;E<h.length;E++){var k=h[E];if(w==k.start.row){k.addFold(p),c=!0;break}else if(g==k.end.row){if(k.addFold(p),c=!0,!p.sameRow){var T=h[E+1];if(T&&T.start.row==w){k.merge(T);break}}break}else if(w<=k.start.row)break}return c||(k=this.$addFoldLine(new a(this.$foldData,p))),this.$useWrapMode?this.$updateWrapData(k.start.row,k.start.row):this.$updateRowLengthCache(k.start.row,k.start.row),this.$modified=!0,this._signal("changeFold",{data:p,action:"add"}),p},this.addFolds=function(f){f.forEach(function(u){this.addFold(u)},this)},this.removeFold=function(f){var u=f.foldLine,h=u.start.row,c=u.end.row,p=this.$foldData,g=u.folds;if(g.length==1)p.splice(p.indexOf(u),1);else if(u.range.isEnd(f.end.row,f.end.column))g.pop(),u.end.row=g[g.length-1].end.row,u.end.column=g[g.length-1].end.column;else if(u.range.isStart(f.start.row,f.start.column))g.shift(),u.start.row=g[0].start.row,u.start.column=g[0].start.column;else if(f.sameRow)g.splice(g.indexOf(f),1);else{var y=u.split(f.start.row,f.start.column);g=y.folds,g.shift(),y.start.row=g[0].start.row,y.start.column=g[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(h,c):this.$updateRowLengthCache(h,c)),this.$modified=!0,this._signal("changeFold",{data:f,action:"remove"})},this.removeFolds=function(f){for(var u=[],h=0;h<f.length;h++)u.push(f[h]);u.forEach(function(c){this.removeFold(c)},this),this.$modified=!0},this.expandFold=function(f){this.removeFold(f),f.subFolds.forEach(function(u){f.restoreRange(u),this.addFold(u)},this),f.collapseChildren>0&&this.foldAll(f.start.row+1,f.end.row,f.collapseChildren-1),f.subFolds=[]},this.expandFolds=function(f){f.forEach(function(u){this.expandFold(u)},this)},this.unfold=function(f,u){var h,c;if(f==null)h=new s(0,0,this.getLength(),0),u==null&&(u=!0);else if(typeof f=="number")h=new s(f,0,f,this.getLine(f).length);else if("row"in f)h=s.fromPoints(f,f);else{if(Array.isArray(f))return c=[],f.forEach(function(g){c=c.concat(this.unfold(g))},this),c;h=f}c=this.getFoldsInRangeList(h);for(var p=c;c.length==1&&s.comparePoints(c[0].start,h.start)<0&&s.comparePoints(c[0].end,h.end)>0;)this.expandFolds(c),c=this.getFoldsInRangeList(h);if(u!=!1?this.removeFolds(c):this.expandFolds(c),p.length)return p},this.isRowFolded=function(f,u){return!!this.getFoldLine(f,u)},this.getRowFoldEnd=function(f,u){var h=this.getFoldLine(f,u);return h?h.end.row:f},this.getRowFoldStart=function(f,u){var h=this.getFoldLine(f,u);return h?h.start.row:f},this.getFoldDisplayLine=function(f,u,h,c,p){c==null&&(c=f.start.row),p==null&&(p=0),u==null&&(u=f.end.row),h==null&&(h=this.getLine(u).length);var g=this.doc,y="";return f.walk(function(w,M,R,x){if(!(M<c)){if(M==c){if(R<p)return;x=Math.max(p,x)}w!=null?y+=w:y+=g.getLine(M).substring(x,R)}},u,h),y},this.getDisplayLine=function(f,u,h,c){var p=this.getFoldLine(f);if(p)return this.getFoldDisplayLine(p,f,u,h,c);var g;return g=this.doc.getLine(f),g.substring(c||0,u||g.length)},this.$cloneFoldData=function(){var f=[];return f=this.$foldData.map(function(u){var h=u.folds.map(function(c){return c.clone()});return new a(f,h)}),f},this.toggleFold=function(f){var u=this.selection,h=u.getRange(),c,p;if(h.isEmpty()){var g=h.start;if(c=this.getFoldAt(g.row,g.column),c){this.expandFold(c);return}else if(f){var y=this.getFoldLine(g.row);y&&this.expandFolds(y.folds);return}else(p=this.findMatchingBracket(g))?h.comparePoint(p)==1?h.end=p:(h.start=p,h.start.column++,h.end.column--):(p=this.findMatchingBracket({row:g.row,column:g.column+1}))?(h.comparePoint(p)==1?h.end=p:h.start=p,h.start.column++):h=this.getCommentFoldRange(g.row,g.column)||h}else{var w=this.getFoldsInRange(h);if(f&&w.length){this.expandFolds(w);return}else w.length==1&&(c=w[0])}if(c||(c=this.getFoldAt(h.start.row,h.start.column)),c&&c.range.toString()==h.toString()){this.expandFold(c);return}var M="...";if(!h.isMultiLine()){if(M=this.getTextRange(h),M.length<4)return;M=M.trim().substring(0,2)+".."}this.addFold(M,h)},this.getCommentFoldRange=function(f,u,h){var c=new o(this,f,u),p=c.getCurrentToken(),g=p&&p.type;if(p&&/^comment|string/.test(g)){g=g.match(/comment|string/)[0],g=="comment"&&(g+="|doc-start|\\.doc");var y=new RegExp(g),w=new s;if(h!=1){do p=c.stepBackward();while(p&&y.test(p.type));p=c.stepForward()}w.start.row=c.getCurrentTokenRow(),w.start.column=c.getCurrentTokenColumn()+p.value.length,c=new o(this,f,u);var M=this.getState(c.$row);if(h!=-1){var R=-1;do if(p=c.stepForward(),R==-1){var x=this.getState(c.$row);M.toString()!==x.toString()&&(R=c.$row)}else if(c.$row>R)break;while(p&&y.test(p.type));p=c.stepBackward()}else p=c.getCurrentToken();return w.end.row=c.getCurrentTokenRow(),w.end.column=c.getCurrentTokenColumn(),w.start.row==w.end.row&&w.start.column>w.end.column?void 0:w}},this.foldAll=function(f,u,h,c){h==null&&(h=1e5);var p=this.foldWidgets;if(p){u=u||this.getLength(),f=f||0;for(var g=f;g<u;g++)if(p[g]==null&&(p[g]=this.getFoldWidget(g)),p[g]=="start"&&!(c&&!c(g))){var y=this.getFoldWidgetRange(g);y&&y.isMultiLine()&&y.end.row<=u&&y.start.row>=f&&(g=y.end.row,y.collapseChildren=h,this.addFold("...",y))}}},this.foldToLevel=function(f){for(this.foldAll();f-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var f=this;this.foldAll(null,null,null,function(u){for(var h=f.getTokens(u),c=0;c<h.length;c++){var p=h[c];if(!(p.type=="text"&&/^\s+$/.test(p.value)))return!!/comment/.test(p.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(f){if(!this.$foldStyles[f])throw new Error("invalid fold style: "+f+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=f){this.$foldStyle=f,f=="manual"&&this.unfold();var u=this.$foldMode;this.$setFolding(null),this.$setFolding(u)}},this.$setFolding=function(f){if(this.$foldMode!=f){if(this.$foldMode=f,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!f||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=f.getFoldWidget.bind(f,this,this.$foldStyle),this.getFoldWidgetRange=f.getFoldWidgetRange.bind(f,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(f,u){var h=this.foldWidgets;if(!h||u&&h[f])return{};for(var c=f-1,p;c>=0;){var g=h[c];if(g==null&&(g=h[c]=this.getFoldWidget(c)),g=="start"){var y=this.getFoldWidgetRange(c);if(p||(p=y),y&&y.end.row>=f)break}c--}return{range:c!==-1&&y,firstRange:p}},this.onFoldWidgetClick=function(f,u){u instanceof d&&(u=u.domEvent);var h={children:u.shiftKey,all:u.ctrlKey||u.metaKey,siblings:u.altKey},c=this.$toggleFoldWidget(f,h);if(!c){var p=u.target||u.srcElement;p&&/ace_fold-widget/.test(p.className)&&(p.className+=" ace_invalid")}},this.$toggleFoldWidget=function(f,u){if(this.getFoldWidget){var h=this.getFoldWidget(f),c=this.getLine(f),p=h==="end"?-1:1,g=this.getFoldAt(f,p===-1?0:c.length,p);if(g)return u.children||u.all?this.removeFold(g):this.expandFold(g),g;var y=this.getFoldWidgetRange(f,!0);if(y&&!y.isMultiLine()&&(g=this.getFoldAt(y.start.row,y.start.column,1),g&&y.isEqual(g.range)))return this.removeFold(g),g;if(u.siblings){var w=this.getParentFoldRangeData(f);if(w.range)var M=w.range.start.row+1,R=w.range.end.row;this.foldAll(M,R,u.all?1e4:0)}else u.children?(R=y?y.end.row:this.getLength(),this.foldAll(f+1,R,u.all?1e4:0)):y&&(u.all&&(y.collapseChildren=1e4),this.addFold("...",y));return y}},this.toggleFoldWidget=function(f){var u=this.selection.getCursor().row;u=this.getRowFoldStart(u);var h=this.$toggleFoldWidget(u,{});if(!h){var c=this.getParentFoldRangeData(u,!0);if(h=c.range||c.firstRange,h){u=h.start.row;var p=this.getFoldAt(u,this.getLine(u).length,1);p?this.removeFold(p):this.addFold("...",h)}}},this.updateFoldWidgets=function(f){var u=f.start.row,h=f.end.row-u;if(h===0)this.foldWidgets[u]=null;else if(f.action=="remove")this.foldWidgets.splice(u,h+1,null);else{var c=Array(h+1);c.unshift(u,1),this.foldWidgets.splice.apply(this.foldWidgets,c)}},this.tokenizerUpdateFoldWidgets=function(f){var u=f.data;u.first!=u.last&&this.foldWidgets.length>u.first&&this.foldWidgets.splice(u.first,this.foldWidgets.length)}}n.Folding=l}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(t,n,i){var s=t("../token_iterator").TokenIterator,a=t("../range").Range;function m(){this.findMatchingBracket=function(o,d){if(o.column==0)return null;var l=d||this.getLine(o.row).charAt(o.column-1);if(l=="")return null;var f=l.match(/([\(\[\{])|([\)\]\}])/);return f?f[1]?this.$findClosingBracket(f[1],o):this.$findOpeningBracket(f[2],o):null},this.getBracketRange=function(o){var d=this.getLine(o.row),l=!0,f,u=d.charAt(o.column-1),h=u&&u.match(/([\(\[\{])|([\)\]\}])/);if(h||(u=d.charAt(o.column),o={row:o.row,column:o.column+1},h=u&&u.match(/([\(\[\{])|([\)\]\}])/),l=!1),!h)return null;if(h[1]){var c=this.$findClosingBracket(h[1],o);if(!c)return null;f=a.fromPoints(o,c),l||(f.end.column++,f.start.column--),f.cursor=f.end}else{var c=this.$findOpeningBracket(h[2],o);if(!c)return null;f=a.fromPoints(c,o),l||(f.start.column++,f.end.column--),f.cursor=f.start}return f},this.getMatchingBracketRanges=function(o,d){var l=this.getLine(o.row),f=/([\(\[\{])|([\)\]\}])/,u=!d&&l.charAt(o.column-1),h=u&&u.match(f);if(h||(u=(d===void 0||d)&&l.charAt(o.column),o={row:o.row,column:o.column+1},h=u&&u.match(f)),!h)return null;var c=new a(o.row,o.column-1,o.row,o.column),p=h[1]?this.$findClosingBracket(h[1],o):this.$findOpeningBracket(h[2],o);if(!p)return[c];var g=new a(p.row,p.column,p.row,p.column+1);return[c,g]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(o,d,l){var f=this.$brackets[o],u=1,h=new s(this,d.row,d.column),c=h.getCurrentToken();if(c||(c=h.stepForward()),!!c){l||(l=new RegExp("(\\.?"+c.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var p=d.column-h.getCurrentTokenColumn()-2,g=c.value;;){for(;p>=0;){var y=g.charAt(p);if(y==f){if(u-=1,u==0)return{row:h.getCurrentTokenRow(),column:p+h.getCurrentTokenColumn()}}else y==o&&(u+=1);p-=1}do c=h.stepBackward();while(c&&!l.test(c.type));if(c==null)break;g=c.value,p=g.length-1}return null}},this.$findClosingBracket=function(o,d,l){var f=this.$brackets[o],u=1,h=new s(this,d.row,d.column),c=h.getCurrentToken();if(c||(c=h.stepForward()),!!c){l||(l=new RegExp("(\\.?"+c.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var p=d.column-h.getCurrentTokenColumn();;){for(var g=c.value,y=g.length;p<y;){var w=g.charAt(p);if(w==f){if(u-=1,u==0)return{row:h.getCurrentTokenRow(),column:p+h.getCurrentTokenColumn()}}else w==o&&(u+=1);p+=1}do c=h.stepForward();while(c&&!l.test(c.type));if(c==null)break;p=0}return null}},this.getMatchingTags=function(o){var d=new s(this,o.row,o.column),l=this.$findTagName(d);if(l){var f=d.stepBackward();return f.value==="<"?this.$findClosingTag(d,l):this.$findOpeningTag(d,l)}},this.$findTagName=function(o){var d=o.getCurrentToken(),l=!1,f=!1;if(d&&d.type.indexOf("tag-name")===-1)do f?d=o.stepBackward():d=o.stepForward(),d&&(d.value==="/>"?f=!0:d.type.indexOf("tag-name")!==-1&&(l=!0));while(d&&!l);return d},this.$findClosingTag=function(o,d){var l,f=d.value,u=d.value,h=0,c=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);d=o.stepForward();var p=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+d.value.length),g=!1;do{if(l=d,l.type.indexOf("tag-close")!==-1&&!g){var y=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);g=!0}if(d=o.stepForward(),d){if(d.value===">"&&!g){var y=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);g=!0}if(d.type.indexOf("tag-name")!==-1){if(f=d.value,u===f){if(l.value==="<")h++;else if(l.value==="</"&&(h--,h<0)){o.stepBackward();var w=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+2);d=o.stepForward();var M=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+d.value.length);if(d.type.indexOf("tag-close")===-1&&(d=o.stepForward()),d&&d.value===">")var R=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);else return}}}else if(u===f&&d.value==="/>"&&(h--,h<0))var w=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+2),M=w,R=M,y=new a(p.end.row,p.end.column,p.end.row,p.end.column+1)}}while(d&&h>=0);if(c&&y&&w&&R&&p&&M)return{openTag:new a(c.start.row,c.start.column,y.end.row,y.end.column),closeTag:new a(w.start.row,w.start.column,R.end.row,R.end.column),openTagName:p,closeTagName:M}},this.$findOpeningTag=function(o,d){var l=o.getCurrentToken(),f=d.value,u=0,h=o.getCurrentTokenRow(),c=o.getCurrentTokenColumn(),p=c+2,g=new a(h,c,h,p);o.stepForward();var y=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+d.value.length);if(d.type.indexOf("tag-close")===-1&&(d=o.stepForward()),!(!d||d.value!==">")){var w=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);o.stepBackward(),o.stepBackward();do if(d=l,h=o.getCurrentTokenRow(),c=o.getCurrentTokenColumn(),p=c+d.value.length,l=o.stepBackward(),d){if(d.type.indexOf("tag-name")!==-1){if(f===d.value)if(l.value==="<"){if(u++,u>0){var M=new a(h,c,h,p),R=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1);do d=o.stepForward();while(d&&d.value!==">");var x=new a(o.getCurrentTokenRow(),o.getCurrentTokenColumn(),o.getCurrentTokenRow(),o.getCurrentTokenColumn()+1)}}else l.value==="</"&&u--}else if(d.value==="/>"){for(var S=0,E=l;E;){if(E.type.indexOf("tag-name")!==-1&&E.value===f){u--;break}else if(E.value==="<")break;E=o.stepBackward(),S++}for(var k=0;k<S;k++)o.stepForward()}}while(l&&u<=0);if(R&&x&&g&&w&&M&&y)return{openTag:new a(R.start.row,R.start.column,x.end.row,x.end.column),closeTag:new a(g.start.row,g.start.column,w.end.row,w.end.column),openTagName:M,closeTagName:y}}}}n.BracketMatch=m}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/line_widgets","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(t,n,i){var s=t("./lib/oop"),a=t("./lib/lang"),m=t("./bidihandler").BidiHandler,o=t("./config"),d=t("./lib/event_emitter").EventEmitter,l=t("./selection").Selection,f=t("./mode/text").Mode,u=t("./range").Range,h=t("./line_widgets").LineWidgets,c=t("./document").Document,p=t("./background_tokenizer").BackgroundTokenizer,g=t("./search_highlight").SearchHighlight,y=t("./undomanager").UndoManager,w=(function(){function C(b,A){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$editor=null,this.prevOp={},this.$foldData=[],this.id="session"+ ++C.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.$gutterCustomWidgets={},this.bgTokenizer=new p(new f().getTokenizer(),this);var _=this;this.bgTokenizer.on("update",function(L){_._signal("tokenizerUpdate",L)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof b!="object"||!b.getLine)&&(b=new c(b)),this.setDocument(b),this.selection=new l(this),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.selection.on("changeCursor",this.$onSelectionChange),this.$bidiHandler=new m(this),o.resetOptions(this),this.setMode(A),o._signal("session",this),this.destroyed=!1,this.$initOperationListeners()}return C.prototype.$initOperationListeners=function(){var b=this;this.curOp=null,this.on("change",function(){b.curOp||(b.startOperation(),b.curOp.selectionBefore=b.$lastSel),b.curOp.docChanged=!0},!0),this.on("changeSelection",function(){b.curOp||(b.startOperation(),b.curOp.selectionBefore=b.$lastSel),b.curOp.selectionChanged=!0},!0),this.$operationResetTimer=a.delayedCall(this.endOperation.bind(this,!0))},C.prototype.startOperation=function(b){if(this.curOp){if(!b||this.curOp.command)return;this.prevOp=this.curOp}b||(b={}),this.$operationResetTimer.schedule(),this.curOp={command:b.command||{},args:b.args},this.curOp.selectionBefore=this.selection.toJSON(),this._signal("startOperation",b)},C.prototype.endOperation=function(b){if(this.curOp){if(b&&b.returnValue===!1){this.curOp=null,this._signal("endOperation",b);return}if(b==!0&&this.curOp.command&&this.curOp.command.name=="mouse")return;var A=this.selection.toJSON();this.curOp.selectionAfter=A,this.$lastSel=this.selection.toJSON(),this.getUndoManager().addSelection(A),this._signal("beforeEndOperation"),this.prevOp=this.curOp,this.curOp=null,this._signal("endOperation",b)}},C.prototype.setDocument=function(b){this.doc&&this.doc.off("change",this.$onChange),this.doc=b,b.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},C.prototype.getDocument=function(){return this.doc},Object.defineProperty(C.prototype,"widgetManager",{get:function(){var b=new h(this);return this.widgetManager=b,this.$editor&&b.attach(this.$editor),b},set:function(b){Object.defineProperty(this,"widgetManager",{writable:!0,enumerable:!0,configurable:!0,value:b})},enumerable:!1,configurable:!0}),C.prototype.$resetRowCache=function(b){if(!b){this.$docRowCache=[],this.$screenRowCache=[];return}var A=this.$docRowCache.length,_=this.$getRowCacheIndex(this.$docRowCache,b)+1;A>_&&(this.$docRowCache.splice(_,A),this.$screenRowCache.splice(_,A))},C.prototype.$getRowCacheIndex=function(b,A){for(var _=0,L=b.length-1;_<=L;){var O=_+L>>1,V=b[O];if(A>V)_=O+1;else if(A<V)L=O-1;else return O}return _-1},C.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},C.prototype.onChangeFold=function(b){var A=b.data;this.$resetRowCache(A.start.row)},C.prototype.onChange=function(b){this.$modified=!0,this.$bidiHandler.onChange(b),this.$resetRowCache(b.start.row);var A=this.$updateInternalDataOnChange(b);!this.$fromUndo&&this.$undoManager&&(A&&A.length&&(this.$undoManager.add({action:"removeFolds",folds:A},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(b,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(b),this._signal("change",b)},C.prototype.onSelectionChange=function(){this._signal("changeSelection")},C.prototype.setValue=function(b){this.doc.setValue(b),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},C.fromJSON=function(b){typeof b=="string"&&(b=JSON.parse(b));var A=new y;A.$undoStack=b.history.undo,A.$redoStack=b.history.redo,A.mark=b.history.mark,A.$rev=b.history.rev;var _=new C(b.value);return b.folds.forEach(function(L){_.addFold("...",u.fromPoints(L.start,L.end))}),_.setAnnotations(b.annotations),_.setBreakpoints(b.breakpoints),_.setMode(b.mode),_.setScrollLeft(b.scrollLeft),_.setScrollTop(b.scrollTop),_.setUndoManager(A),_.selection.fromJSON(b.selection),_},C.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(b){return b.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},C.prototype.toString=function(){return this.doc.getValue()},C.prototype.getSelection=function(){return this.selection},C.prototype.getState=function(b){return this.bgTokenizer.getState(b)},C.prototype.getTokens=function(b){return this.bgTokenizer.getTokens(b)},C.prototype.getTokenAt=function(b,A){var _=this.bgTokenizer.getTokens(b),L,O=0;if(A==null){var V=_.length-1;O=this.getLine(b).length}else for(var V=0;V<_.length&&(O+=_[V].value.length,!(O>=A));V++);return L=_[V],L?(L.index=V,L.start=O-L.value.length,L):null},C.prototype.setUndoManager=function(b){if(this.$undoManager=b,this.$informUndoManager&&this.$informUndoManager.cancel(),b){var A=this;b.addSession(this),this.$syncInformUndoManager=function(){A.$informUndoManager.cancel(),A.mergeUndoDeltas=!1},this.$informUndoManager=a.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},C.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},C.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},C.prototype.getTabString=function(){return this.getUseSoftTabs()?a.stringRepeat(" ",this.getTabSize()):"	"},C.prototype.setUseSoftTabs=function(b){this.setOption("useSoftTabs",b)},C.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},C.prototype.setTabSize=function(b){this.setOption("tabSize",b)},C.prototype.getTabSize=function(){return this.$tabSize},C.prototype.isTabStop=function(b){return this.$useSoftTabs&&b.column%this.$tabSize===0},C.prototype.setNavigateWithinSoftTabs=function(b){this.setOption("navigateWithinSoftTabs",b)},C.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},C.prototype.setOverwrite=function(b){this.setOption("overwrite",b)},C.prototype.getOverwrite=function(){return this.$overwrite},C.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},C.prototype.addGutterDecoration=function(b,A){this.$decorations[b]||(this.$decorations[b]=""),this.$decorations[b]+=" "+A,this._signal("changeBreakpoint",{})},C.prototype.removeGutterCustomWidget=function(b){this.$editor&&this.$editor.renderer.$gutterLayer.$removeCustomWidget(b)},C.prototype.addGutterCustomWidget=function(b,A){this.$editor&&this.$editor.renderer.$gutterLayer.$addCustomWidget(b,A)},C.prototype.removeGutterDecoration=function(b,A){this.$decorations[b]=(this.$decorations[b]||"").replace(" "+A,""),this._signal("changeBreakpoint",{})},C.prototype.getBreakpoints=function(){return this.$breakpoints},C.prototype.setBreakpoints=function(b){this.$breakpoints=[];for(var A=0;A<b.length;A++)this.$breakpoints[b[A]]="ace_breakpoint";this._signal("changeBreakpoint",{})},C.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},C.prototype.setBreakpoint=function(b,A){A===void 0&&(A="ace_breakpoint"),A?this.$breakpoints[b]=A:delete this.$breakpoints[b],this._signal("changeBreakpoint",{})},C.prototype.clearBreakpoint=function(b){delete this.$breakpoints[b],this._signal("changeBreakpoint",{})},C.prototype.addMarker=function(b,A,_,L){var O=this.$markerId++,V={range:b,type:_||"line",renderer:typeof _=="function"?_:null,clazz:A,inFront:!!L,id:O};return L?(this.$frontMarkers[O]=V,this._signal("changeFrontMarker")):(this.$backMarkers[O]=V,this._signal("changeBackMarker")),O},C.prototype.addDynamicMarker=function(b,A){if(b.update){var _=this.$markerId++;return b.id=_,b.inFront=!!A,A?(this.$frontMarkers[_]=b,this._signal("changeFrontMarker")):(this.$backMarkers[_]=b,this._signal("changeBackMarker")),b}},C.prototype.removeMarker=function(b){var A=this.$frontMarkers[b]||this.$backMarkers[b];if(A){var _=A.inFront?this.$frontMarkers:this.$backMarkers;delete _[b],this._signal(A.inFront?"changeFrontMarker":"changeBackMarker")}},C.prototype.getMarkers=function(b){return b?this.$frontMarkers:this.$backMarkers},C.prototype.highlight=function(b){if(!this.$searchHighlight){var A=new g(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(A)}this.$searchHighlight.setRegexp(b)},C.prototype.highlightLines=function(b,A,_,L){typeof A!="number"&&(_=A,A=b),_||(_="ace_step");var O=new u(b,0,A,1/0);return O.id=this.addMarker(O,_,"fullLine",L),O},C.prototype.setAnnotations=function(b){this.$annotations=b,this._signal("changeAnnotation",{})},C.prototype.getAnnotations=function(){return this.$annotations||[]},C.prototype.clearAnnotations=function(){this.setAnnotations([])},C.prototype.$detectNewLine=function(b){var A=b.match(/^.*?(\r?\n)/m);A?this.$autoNewLine=A[1]:this.$autoNewLine=`
`},C.prototype.getWordRange=function(b,A){var _=this.getLine(b),L=!1;if(A>0&&(L=!!_.charAt(A-1).match(this.tokenRe)),L||(L=!!_.charAt(A).match(this.tokenRe)),L)var O=this.tokenRe;else if(/^\s+$/.test(_.slice(A-1,A+1)))var O=/\s/;else var O=this.nonTokenRe;var V=A;if(V>0){do V--;while(V>=0&&_.charAt(V).match(O));V++}for(var B=A;B<_.length&&_.charAt(B).match(O);)B++;return new u(b,V,b,B)},C.prototype.getAWordRange=function(b,A){for(var _=this.getWordRange(b,A),L=this.getLine(_.end.row);L.charAt(_.end.column).match(/[ \t]/);)_.end.column+=1;return _},C.prototype.setNewLineMode=function(b){this.doc.setNewLineMode(b)},C.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},C.prototype.setUseWorker=function(b){this.setOption("useWorker",b)},C.prototype.getUseWorker=function(){return this.$useWorker},C.prototype.onReloadTokenizer=function(b){var A=b.data;this.bgTokenizer.start(A.first),this._signal("tokenizerUpdate",b)},C.prototype.setMode=function(b,A){if(b&&typeof b=="object"){if(b.getTokenizer)return this.$onChangeMode(b);var _=b,L=_.path}else L=b||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new f),this.$modes[L]&&!_){this.$onChangeMode(this.$modes[L]),A&&A();return}this.$modeId=L,o.loadModule(["mode",L],function(O){if(!this.destroyed){if(this.$modeId!==L)return A&&A();this.$modes[L]&&!_?this.$onChangeMode(this.$modes[L]):O&&O.Mode&&(O=new O.Mode(_),_||(this.$modes[L]=O,O.$id=L),this.$onChangeMode(O)),A&&A()}}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},C.prototype.$onChangeMode=function(b,A){if(A||(this.$modeId=b.$id),this.$mode!==b){var _=this.$mode;this.$mode=b,this.$stopWorker(),this.$useWorker&&this.$startWorker();var L=b.getTokenizer();if(L.on!==void 0){var O=this.onReloadTokenizer.bind(this);L.on("update",O)}this.bgTokenizer.setTokenizer(L),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=b.tokenRe,this.nonTokenRe=b.nonTokenRe,A||(b.attachToSession&&b.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(b.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:_,mode:b}))}},C.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},C.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(b){o.warn("Could not load worker",b),this.$worker=null}},C.prototype.getMode=function(){return this.$mode},C.prototype.setScrollTop=function(b){this.$scrollTop===b||isNaN(b)||(this.$scrollTop=b,this._signal("changeScrollTop",b))},C.prototype.getScrollTop=function(){return this.$scrollTop},C.prototype.setScrollLeft=function(b){this.$scrollLeft===b||isNaN(b)||(this.$scrollLeft=b,this._signal("changeScrollLeft",b))},C.prototype.getScrollLeft=function(){return this.$scrollLeft},C.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},C.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var b=0;return this.lineWidgets.forEach(function(A){A&&A.screenWidth>b&&(b=A.screenWidth)}),this.lineWidgetWidth=b},C.prototype.$computeWidth=function(b){if(this.$modified||b){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var A=this.doc.getAllLines(),_=this.$rowLengthCache,L=0,O=0,V=this.$foldData[O],B=V?V.start.row:1/0,W=A.length,G=0;G<W;G++){if(G>B){if(G=V.end.row+1,G>=W)break;V=this.$foldData[O++],B=V?V.start.row:1/0}_[G]==null&&(_[G]=this.$getStringScreenWidth(A[G])[0]),_[G]>L&&(L=_[G])}this.screenWidth=L}},C.prototype.getLine=function(b){return this.doc.getLine(b)},C.prototype.getLines=function(b,A){return this.doc.getLines(b,A)},C.prototype.getLength=function(){return this.doc.getLength()},C.prototype.getTextRange=function(b){return this.doc.getTextRange(b||this.selection.getRange())},C.prototype.insert=function(b,A){return this.doc.insert(b,A)},C.prototype.remove=function(b){return this.doc.remove(b)},C.prototype.removeFullLines=function(b,A){return this.doc.removeFullLines(b,A)},C.prototype.undoChanges=function(b,A){if(b.length){this.$fromUndo=!0;for(var _=b.length-1;_!=-1;_--){var L=b[_];L.action=="insert"||L.action=="remove"?this.doc.revertDelta(L):L.folds&&this.addFolds(L.folds)}!A&&this.$undoSelect&&(b.selectionBefore?this.selection.fromJSON(b.selectionBefore):this.selection.setRange(this.$getUndoSelection(b,!0))),this.$fromUndo=!1}},C.prototype.redoChanges=function(b,A){if(b.length){this.$fromUndo=!0;for(var _=0;_<b.length;_++){var L=b[_];(L.action=="insert"||L.action=="remove")&&this.doc.$safeApplyDelta(L)}!A&&this.$undoSelect&&(b.selectionAfter?this.selection.fromJSON(b.selectionAfter):this.selection.setRange(this.$getUndoSelection(b,!1))),this.$fromUndo=!1}},C.prototype.setUndoSelect=function(b){this.$undoSelect=b},C.prototype.$getUndoSelection=function(b,A){function _(W){return A?W.action!=="insert":W.action==="insert"}for(var L,O,V=0;V<b.length;V++){var B=b[V];if(B.start){if(!L){_(B)?L=u.fromPoints(B.start,B.end):L=u.fromPoints(B.start,B.start);continue}_(B)?(O=B.start,L.compare(O.row,O.column)==-1&&L.setStart(O),O=B.end,L.compare(O.row,O.column)==1&&L.setEnd(O)):(O=B.start,L.compare(O.row,O.column)==-1&&(L=u.fromPoints(B.start,B.start)))}}return L},C.prototype.replace=function(b,A){return this.doc.replace(b,A)},C.prototype.moveText=function(b,A,_){var L=this.getTextRange(b),O=this.getFoldsInRange(b),V=u.fromPoints(A,A);if(!_){this.remove(b);var B=b.start.row-b.end.row,W=B?-b.end.column:b.start.column-b.end.column;W&&(V.start.row==b.end.row&&V.start.column>b.end.column&&(V.start.column+=W),V.end.row==b.end.row&&V.end.column>b.end.column&&(V.end.column+=W)),B&&V.start.row>=b.end.row&&(V.start.row+=B,V.end.row+=B)}if(V.end=this.insert(V.start,L),O.length){var G=b.start,J=V.start,B=J.row-G.row,W=J.column-G.column;this.addFolds(O.map(function(X){return X=X.clone(),X.start.row==G.row&&(X.start.column+=W),X.end.row==G.row&&(X.end.column+=W),X.start.row+=B,X.end.row+=B,X}))}return V},C.prototype.indentRows=function(b,A,_){_=_.replace(/\t/g,this.getTabString());for(var L=b;L<=A;L++)this.doc.insertInLine({row:L,column:0},_)},C.prototype.outdentRows=function(b){for(var A=b.collapseRows(),_=new u(0,0,0,0),L=this.getTabSize(),O=A.start.row;O<=A.end.row;++O){var V=this.getLine(O);_.start.row=O,_.end.row=O;for(var B=0;B<L&&V.charAt(B)==" ";++B);B<L&&V.charAt(B)=="	"?(_.start.column=B,_.end.column=B+1):(_.start.column=0,_.end.column=B),this.remove(_)}},C.prototype.$moveLines=function(b,A,_){if(b=this.getRowFoldStart(b),A=this.getRowFoldEnd(A),_<0){var L=this.getRowFoldStart(b+_);if(L<0)return 0;var O=L-b}else if(_>0){var L=this.getRowFoldEnd(A+_);if(L>this.doc.getLength()-1)return 0;var O=L-A}else{b=this.$clipRowToDocument(b),A=this.$clipRowToDocument(A);var O=A-b+1}var V=new u(b,0,A,Number.MAX_VALUE),B=this.getFoldsInRange(V).map(function(G){return G=G.clone(),G.start.row+=O,G.end.row+=O,G}),W=_==0?this.doc.getLines(b,A):this.doc.removeFullLines(b,A);return this.doc.insertFullLines(b+O,W),B.length&&this.addFolds(B),O},C.prototype.moveLinesUp=function(b,A){return this.$moveLines(b,A,-1)},C.prototype.moveLinesDown=function(b,A){return this.$moveLines(b,A,1)},C.prototype.duplicateLines=function(b,A){return this.$moveLines(b,A,0)},C.prototype.$clipRowToDocument=function(b){return Math.max(0,Math.min(b,this.doc.getLength()-1))},C.prototype.$clipColumnToRow=function(b,A){return A<0?0:Math.min(this.doc.getLine(b).length,A)},C.prototype.$clipPositionToDocument=function(b,A){if(A=Math.max(0,A),b<0)b=0,A=0;else{var _=this.doc.getLength();b>=_?(b=_-1,A=this.doc.getLine(_-1).length):A=Math.min(this.doc.getLine(b).length,A)}return{row:b,column:A}},C.prototype.$clipRangeToDocument=function(b){b.start.row<0?(b.start.row=0,b.start.column=0):b.start.column=this.$clipColumnToRow(b.start.row,b.start.column);var A=this.doc.getLength()-1;return b.end.row>A?(b.end.row=A,b.end.column=this.doc.getLine(A).length):b.end.column=this.$clipColumnToRow(b.end.row,b.end.column),b},C.prototype.setUseWrapMode=function(b){if(b!=this.$useWrapMode){if(this.$useWrapMode=b,this.$modified=!0,this.$resetRowCache(0),b){var A=this.getLength();this.$wrapData=Array(A),this.$updateWrapData(0,A-1)}this._signal("changeWrapMode")}},C.prototype.getUseWrapMode=function(){return this.$useWrapMode},C.prototype.setWrapLimitRange=function(b,A){(this.$wrapLimitRange.min!==b||this.$wrapLimitRange.max!==A)&&(this.$wrapLimitRange={min:b,max:A},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},C.prototype.adjustWrapLimit=function(b,A){var _=this.$wrapLimitRange;_.max<0&&(_={min:A,max:A});var L=this.$constrainWrapLimit(b,_.min,_.max);return L!=this.$wrapLimit&&L>1?(this.$wrapLimit=L,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},C.prototype.$constrainWrapLimit=function(b,A,_){return A&&(b=Math.max(A,b)),_&&(b=Math.min(_,b)),b},C.prototype.getWrapLimit=function(){return this.$wrapLimit},C.prototype.setWrapLimit=function(b){this.setWrapLimitRange(b,b)},C.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},C.prototype.$updateInternalDataOnChange=function(b){var A=this.$useWrapMode,_=b.action,L=b.start,O=b.end,V=L.row,B=O.row,W=B-V,G=null;if(this.$updating=!0,W!=0)if(_==="remove"){this[A?"$wrapData":"$rowLengthCache"].splice(V,W);var J=this.$foldData;G=this.getFoldsInRange(b),this.removeFolds(G);var K=this.getFoldLine(O.row),Q=0;if(K){K.addRemoveChars(O.row,O.column,L.column-O.column),K.shiftRow(-W);var X=this.getFoldLine(V);X&&X!==K&&(X.merge(K),K=X),Q=J.indexOf(K)+1}for(Q;Q<J.length;Q++){var K=J[Q];K.start.row>=O.row&&K.shiftRow(-W)}B=V}else{var Z=Array(W);Z.unshift(V,0);var re=A?this.$wrapData:this.$rowLengthCache;re.splice.apply(re,Z);var J=this.$foldData,K=this.getFoldLine(V),Q=0;if(K){var se=K.range.compareInside(L.row,L.column);se==0?(K=K.split(L.row,L.column),K&&(K.shiftRow(W),K.addRemoveChars(B,0,O.column-L.column))):se==-1&&(K.addRemoveChars(V,0,O.column-L.column),K.shiftRow(W)),Q=J.indexOf(K)+1}for(Q;Q<J.length;Q++){var K=J[Q];K.start.row>=V&&K.shiftRow(W)}}else{W=Math.abs(b.start.column-b.end.column),_==="remove"&&(G=this.getFoldsInRange(b),this.removeFolds(G),W=-W);var K=this.getFoldLine(V);K&&K.addRemoveChars(V,L.column,W)}return A&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,A?this.$updateWrapData(V,B):this.$updateRowLengthCache(V,B),G},C.prototype.$updateRowLengthCache=function(b,A){this.$rowLengthCache[b]=null,this.$rowLengthCache[A]=null},C.prototype.$updateWrapData=function(b,A){var _=this.doc.getAllLines(),L=this.getTabSize(),O=this.$wrapData,V=this.$wrapLimit,B,W,G=b;for(A=Math.min(A,_.length-1);G<=A;)W=this.getFoldLine(G,W),W?(B=[],W.walk(function(J,K,Q,X){var Z;if(J!=null){Z=this.$getDisplayTokens(J,B.length),Z[0]=x;for(var re=1;re<Z.length;re++)Z[re]=S}else Z=this.$getDisplayTokens(_[K].substring(X,Q),B.length);B=B.concat(Z)}.bind(this),W.end.row,_[W.end.row].length+1),O[W.start.row]=this.$computeWrapSplits(B,V,L),G=W.end.row+1):(B=this.$getDisplayTokens(_[G]),O[G]=this.$computeWrapSplits(B,V,L),G++)},C.prototype.$computeWrapSplits=function(b,A,_){if(b.length==0)return[];var L=[],O=b.length,V=0,B=0,W=this.$wrapAsCode,G=this.$indentedSoftWrap,J=A<=Math.max(2*_,8)||G===!1?0:Math.floor(A/2);function K(){var se=0;if(J===0)return se;if(G)for(var he=0;he<b.length;he++){var ce=b[he];if(ce==k)se+=1;else if(ce==T)se+=_;else{if(ce==I)continue;break}}return W&&G!==!1&&(se+=_),Math.min(se,J)}function Q(se){for(var he=se-V,ce=V;ce<se;ce++){var Ae=b[ce];(Ae===12||Ae===2)&&(he-=1)}L.length||(X=K(),L.indent=X),B+=he,L.push(B),V=se}for(var X=0;O-V>A-X;){var Z=V+A-X;if(b[Z-1]>=k&&b[Z]>=k){Q(Z);continue}if(b[Z]==x||b[Z]==S){for(Z;Z!=V-1&&b[Z]!=x;Z--);if(Z>V){Q(Z);continue}for(Z=V+A,Z;Z<b.length&&b[Z]==S;Z++);if(Z==b.length)break;Q(Z);continue}for(var re=Math.max(Z-(A-(A>>2)),V-1);Z>re&&b[Z]<x;)Z--;if(W){for(;Z>re&&b[Z]<x;)Z--;for(;Z>re&&b[Z]==E;)Z--}else for(;Z>re&&b[Z]<k;)Z--;if(Z>re){Q(++Z);continue}Z=V+A,b[Z]==R&&Z--,Q(Z-X)}return L},C.prototype.$getDisplayTokens=function(b,A){var _=[],L;A=A||0;for(var O=0;O<b.length;O++){var V=b.charCodeAt(O);if(V==9){L=this.getScreenTabSize(_.length+A),_.push(T);for(var B=1;B<L;B++)_.push(I)}else V==32?_.push(k):V>39&&V<48||V>57&&V<64?_.push(E):V>=4352&&P(V)?_.push(M,R):_.push(M)}return _},C.prototype.$getStringScreenWidth=function(b,A,_){if(A==0)return[0,0];A==null&&(A=1/0),_=_||0;var L,O;for(O=0;O<b.length&&(L=b.charCodeAt(O),L==9?_+=this.getScreenTabSize(_):L>=4352&&P(L)?_+=2:_+=1,!(_>A));O++);return[_,O]},C.prototype.getRowLength=function(b){var A=1;return this.lineWidgets&&(A+=this.lineWidgets[b]&&this.lineWidgets[b].rowCount||0),!this.$useWrapMode||!this.$wrapData[b]?A:this.$wrapData[b].length+A},C.prototype.getRowLineCount=function(b){return!this.$useWrapMode||!this.$wrapData[b]?1:this.$wrapData[b].length+1},C.prototype.getRowWrapIndent=function(b){if(this.$useWrapMode){var A=this.screenToDocumentPosition(b,Number.MAX_VALUE),_=this.$wrapData[A.row];return _.length&&_[0]<A.column?_.indent:0}else return 0},C.prototype.getScreenLastRowColumn=function(b){var A=this.screenToDocumentPosition(b,Number.MAX_VALUE);return this.documentToScreenColumn(A.row,A.column)},C.prototype.getDocumentLastRowColumn=function(b,A){var _=this.documentToScreenRow(b,A);return this.getScreenLastRowColumn(_)},C.prototype.getDocumentLastRowColumnPosition=function(b,A){var _=this.documentToScreenRow(b,A);return this.screenToDocumentPosition(_,Number.MAX_VALUE/10)},C.prototype.getRowSplitData=function(b){if(this.$useWrapMode)return this.$wrapData[b]},C.prototype.getScreenTabSize=function(b){return this.$tabSize-(b%this.$tabSize|0)},C.prototype.screenToDocumentRow=function(b,A){return this.screenToDocumentPosition(b,A).row},C.prototype.screenToDocumentColumn=function(b,A){return this.screenToDocumentPosition(b,A).column},C.prototype.screenToDocumentPosition=function(b,A,_){if(b<0)return{row:0,column:0};var L,O=0,V=0,B,W=0,G=0,J=this.$screenRowCache,K=this.$getRowCacheIndex(J,b),Q=J.length;if(Q&&K>=0)var W=J[K],O=this.$docRowCache[K],X=b>J[Q-1];else var X=!Q;for(var Z=this.getLength()-1,re=this.getNextFoldLine(O),se=re?re.start.row:1/0;W<=b&&(G=this.getRowLength(O),!(W+G>b||O>=Z));)W+=G,O++,O>se&&(O=re.end.row+1,re=this.getNextFoldLine(O,re),se=re?re.start.row:1/0),X&&(this.$docRowCache.push(O),this.$screenRowCache.push(W));if(re&&re.start.row<=O)L=this.getFoldDisplayLine(re),O=re.start.row;else{if(W+G<=b||O>Z)return{row:Z,column:this.getLine(Z).length};L=this.getLine(O),re=null}var he=0,ce=Math.floor(b-W);if(this.$useWrapMode){var Ae=this.$wrapData[O];Ae&&(B=Ae[ce],ce>0&&Ae.length&&(he=Ae.indent,V=Ae[ce-1]||Ae[Ae.length-1],L=L.substring(V)))}return _!==void 0&&this.$bidiHandler.isBidiRow(W+ce,O,ce)&&(A=this.$bidiHandler.offsetToCol(_)),V+=this.$getStringScreenWidth(L,A-he)[1],this.$useWrapMode&&V>=B&&(V=B-1),re?re.idxToPosition(V):{row:O,column:V}},C.prototype.documentToScreenPosition=function(b,A){if(typeof A>"u")var _=this.$clipPositionToDocument(b.row,b.column);else _=this.$clipPositionToDocument(b,A);b=_.row,A=_.column;var L=0,O=null,V=null;V=this.getFoldAt(b,A,1),V&&(b=V.start.row,A=V.start.column);var B,W=0,G=this.$docRowCache,J=this.$getRowCacheIndex(G,b),K=G.length;if(K&&J>=0)var W=G[J],L=this.$screenRowCache[J],Q=b>G[K-1];else var Q=!K;for(var X=this.getNextFoldLine(W),Z=X?X.start.row:1/0;W<b;){if(W>=Z){if(B=X.end.row+1,B>b)break;X=this.getNextFoldLine(B,X),Z=X?X.start.row:1/0}else B=W+1;L+=this.getRowLength(W),W=B,Q&&(this.$docRowCache.push(W),this.$screenRowCache.push(L))}var re="";X&&W>=Z?(re=this.getFoldDisplayLine(X,b,A),O=X.start.row):(re=this.getLine(b).substring(0,A),O=b);var se=0;if(this.$useWrapMode){var he=this.$wrapData[O];if(he){for(var ce=0;re.length>=he[ce];)L++,ce++;re=re.substring(he[ce-1]||0,re.length),se=ce>0?he.indent:0}}return this.lineWidgets&&this.lineWidgets[W]&&this.lineWidgets[W].rowsAbove&&(L+=this.lineWidgets[W].rowsAbove),{row:L,column:se+this.$getStringScreenWidth(re)[0]}},C.prototype.documentToScreenColumn=function(b,A){return this.documentToScreenPosition(b,A).column},C.prototype.documentToScreenRow=function(b,A){return this.documentToScreenPosition(b,A).row},C.prototype.getScreenLength=function(){var b=0,A=null;if(this.$useWrapMode)for(var O=this.$wrapData.length,V=0,L=0,A=this.$foldData[L++],B=A?A.start.row:1/0;V<O;){var W=this.$wrapData[V];b+=W?W.length+1:1,V++,V>B&&(V=A.end.row+1,A=this.$foldData[L++],B=A?A.start.row:1/0)}else{b=this.getLength();for(var _=this.$foldData,L=0;L<_.length;L++)A=_[L],b-=A.end.row-A.start.row}return this.lineWidgets&&(b+=this.$getWidgetScreenLength()),b},C.prototype.$setFontMetrics=function(b){this.$enableVarChar&&(this.$getStringScreenWidth=function(A,_,L){if(_===0)return[0,0];_||(_=1/0),L=L||0;var O,V;for(V=0;V<A.length&&(O=A.charAt(V),O==="	"?L+=this.getScreenTabSize(L):L+=b.getCharacterWidth(O),!(L>_));V++);return[L,V]})},C.prototype.getPrecedingCharacter=function(){var b=this.selection.getCursor();if(b.column===0)return b.row===0?"":this.doc.getNewLineCharacter();var A=this.getLine(b.row);return A[b.column-1]},C.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.endOperation(),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection&&(this.selection.off("changeCursor",this.$onSelectionChange),this.selection.off("changeSelection",this.$onSelectionChange)),this.selection.detach()},C})();w.$uid=0,w.prototype.$modes=o.$modes,w.prototype.getValue=w.prototype.toString,w.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},w.prototype.$overwrite=!1,w.prototype.$mode=null,w.prototype.$modeId=null,w.prototype.$scrollTop=0,w.prototype.$scrollLeft=0,w.prototype.$wrapLimit=80,w.prototype.$useWrapMode=!1,w.prototype.$wrapLimitRange={min:null,max:null},w.prototype.lineWidgets=null,w.prototype.isFullWidth=P,s.implement(w.prototype,d);var M=1,R=2,x=3,S=4,E=9,k=10,T=11,I=12;function P(C){return C<4352?!1:C>=4352&&C<=4447||C>=4515&&C<=4519||C>=4602&&C<=4607||C>=9001&&C<=9002||C>=11904&&C<=11929||C>=11931&&C<=12019||C>=12032&&C<=12245||C>=12272&&C<=12283||C>=12288&&C<=12350||C>=12353&&C<=12438||C>=12441&&C<=12543||C>=12549&&C<=12589||C>=12593&&C<=12686||C>=12688&&C<=12730||C>=12736&&C<=12771||C>=12784&&C<=12830||C>=12832&&C<=12871||C>=12880&&C<=13054||C>=13056&&C<=19903||C>=19968&&C<=42124||C>=42128&&C<=42182||C>=43360&&C<=43388||C>=44032&&C<=55203||C>=55216&&C<=55238||C>=55243&&C<=55291||C>=63744&&C<=64255||C>=65040&&C<=65049||C>=65072&&C<=65106||C>=65108&&C<=65126||C>=65128&&C<=65131||C>=65281&&C<=65376||C>=65504&&C<=65510}t("./edit_session/folding").Folding.call(w.prototype),t("./edit_session/bracket_match").BracketMatch.call(w.prototype),o.defineOptions(w.prototype,"session",{wrap:{set:function(C){if(!C||C=="off"?C=!1:C=="free"?C=!0:C=="printMargin"?C=-1:typeof C=="string"&&(C=parseInt(C,10)||!1),this.$wrap!=C)if(this.$wrap=C,!C)this.setUseWrapMode(!1);else{var b=typeof C=="number"?C:null;this.setWrapLimitRange(b,b),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(C){C=C=="auto"?this.$mode.type!="text":C!="text",C!=this.$wrapAsCode&&(this.$wrapAsCode=C,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(C){this.$useWorker=C,this.$stopWorker(),C&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(C){C=parseInt(C),C>0&&this.$tabSize!==C&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=C,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(C){this.setFoldStyle(C)},handlesSet:!0},overwrite:{set:function(C){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(C){this.doc.setNewLineMode(C)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(C){this.setMode(C)},get:function(){return this.$modeId},handlesSet:!0}}),n.EditSession=w}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,n,i){var s=t("./lib/lang"),a=t("./lib/oop"),m=t("./range").Range,o=(function(){function u(){this.$options={}}return u.prototype.set=function(h){return a.mixin(this.$options,h),this},u.prototype.getOptions=function(){return s.copyObject(this.$options)},u.prototype.setOptions=function(h){this.$options=h},u.prototype.find=function(h){var c=this.$options,p=this.$matchIterator(h,c);if(!p)return!1;var g=null;return p.forEach(function(y,w,M,R){return g=new m(y,w,M,R),w==R&&c.start&&c.start.start&&c.skipCurrent!=!1&&g.isEqual(c.start)?(g=null,!1):!0}),g},u.prototype.findAll=function(h){var c=this.$options;if(!c.needle)return[];this.$assembleRegExp(c);var p=c.range,g=p?h.getLines(p.start.row,p.end.row):h.doc.getAllLines(),y=[],w=c.re;if(c.$isMultiLine){var M=w.length,R=g.length-M,x;e:for(var S=w.offset||0;S<=R;S++){for(var E=0;E<M;E++)if(g[S+E].search(w[E])==-1)continue e;var k=g[S],T=g[S+M-1],I=k.length-k.match(w[0])[0].length,P=T.match(w[M-1])[0].length;x&&x.end.row===S&&x.end.column>I||(y.push(x=new m(S,I,S+M-1,P)),M>2&&(S=S+M-2))}}else for(var C,b=0;b<g.length;b++)if(this.$isMultilineSearch(c)){var A=g.length-1;if(C=this.$multiLineForward(h,w,b,A),C){var _=C.endRow<=A?C.endRow-1:A;_>b&&(b=_),y.push(new m(C.startRow,C.startCol,C.endRow,C.endCol))}}else{C=s.getMatchOffsets(g[b],w);for(var E=0;E<C.length;E++){var L=C[E];y.push(new m(b,L.offset,b,L.offset+L.length))}}if(p){for(var O=p.start.column,V=p.end.column,b=0,E=y.length-1;b<E&&y[b].start.column<O&&y[b].start.row==0;)b++;for(var B=p.end.row-p.start.row;b<E&&y[E].end.column>V&&y[E].end.row==B;)E--;for(y=y.slice(b,E+1),b=0,E=y.length;b<E;b++)y[b].start.row+=p.start.row,y[b].end.row+=p.start.row}return y},u.prototype.parseReplaceString=function(h){for(var c={DollarSign:36,Ampersand:38,Digit0:48,Digit1:49,Digit9:57,Backslash:92,n:110,t:116},p="",g=0,y=h.length;g<y;g++){var w=h.charCodeAt(g);if(w===c.Backslash){if(g++,g>=y){p+="\\";break}var M=h.charCodeAt(g);switch(M){case c.Backslash:p+="\\";break;case c.n:p+=`
`;break;case c.t:p+="	";break}continue}if(w===c.DollarSign){if(g++,g>=y){p+="$";break}var R=h.charCodeAt(g);if(R===c.DollarSign){p+="$$";continue}if(R===c.Digit0||R===c.Ampersand){p+="$&";continue}if(c.Digit1<=R&&R<=c.Digit9){p+="$"+h[g];continue}}p+=h[g]}return p||h},u.prototype.replace=function(h,c){var p=this.$options,g=this.$assembleRegExp(p);if(p.$isMultiLine)return c;if(g){var y=this.$isMultilineSearch(p);y&&(h=h.replace(/\r\n|\r|\n/g,`
`));var w=g.exec(h);if(!w||!y&&w[0].length!=h.length)return null;if(c=p.regExp?this.parseReplaceString(c):c.replace(/\$/g,"$$$$"),c=h.replace(g,c),p.preserveCase){c=c.split("");for(var M=Math.min(h.length,h.length);M--;){var R=h[M];R&&R.toLowerCase()!=R?c[M]=c[M].toUpperCase():c[M]=c[M].toLowerCase()}c=c.join("")}return c}},u.prototype.$assembleRegExp=function(h,c){if(h.needle instanceof RegExp)return h.re=h.needle;var p=h.needle;if(!h.needle)return h.re=!1;h.regExp||(p=s.escapeRegExp(p));var g=h.caseSensitive?"gm":"gmi";try{new RegExp(p,"u"),h.$supportsUnicodeFlag=!0,g+="u"}catch{h.$supportsUnicodeFlag=!1}if(h.wholeWord&&(p=d(p,h)),h.$isMultiLine=!c&&/[\n\r]/.test(p),h.$isMultiLine)return h.re=this.$assembleMultilineRegExp(p,g);try{var y=new RegExp(p,g)}catch{y=!1}return h.re=y},u.prototype.$assembleMultilineRegExp=function(h,c){for(var p=h.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),g=[],y=0;y<p.length;y++)try{g.push(new RegExp(p[y],c))}catch{return!1}return g},u.prototype.$isMultilineSearch=function(h){return h.re&&/\\r\\n|\\r|\\n/.test(h.re.source)&&h.regExp&&!h.$isMultiLine},u.prototype.$multiLineForward=function(h,c,p,g){for(var y,w=f(h,p),M=p;M<=g;){for(var R=0;R<w&&!(M>g);R++){var x=h.getLine(M++);y=y==null?x:y+`
`+x}var S=c.exec(y);if(c.lastIndex=0,S){var E=y.slice(0,S.index).split(`
`),k=S[0].split(`
`),T=p+E.length-1,I=E[E.length-1].length,P=T+k.length-1,C=k.length==1?I+k[0].length:k[k.length-1].length;return{startRow:T,startCol:I,endRow:P,endCol:C}}}return null},u.prototype.$multiLineBackward=function(h,c,p,g,y){for(var w,M=f(h,g),R=h.getLine(g).length-p,x=g;x>=y;){for(var S=0;S<M&&x>=y;S++){var E=h.getLine(x--);w=w==null?E:E+`
`+w}var k=l(w,c,R);if(k){var T=w.slice(0,k.index).split(`
`),I=k[0].split(`
`),P=x+T.length,C=T[T.length-1].length,b=P+I.length-1,A=I.length==1?C+I[0].length:I[I.length-1].length;return{startRow:P,startCol:C,endRow:b,endCol:A}}}return null},u.prototype.$matchIterator=function(h,c){var p=this.$assembleRegExp(c);if(!p)return!1;var g=this.$isMultilineSearch(c),y=this.$multiLineForward,w=this.$multiLineBackward,M=c.backwards==!0,R=c.skipCurrent!=!1,x=p.unicode,S=c.range,E=c.start;E||(E=S?S[M?"end":"start"]:h.selection.getRange()),E.start&&(E=E[R!=M?"end":"start"]);var k=S?S.start.row:0,T=S?S.end.row:h.getLength()-1;if(M)var I=function(b){var A=E.row;if(!C(A,E.column,b)){for(A--;A>=k;A--)if(C(A,Number.MAX_VALUE,b))return;if(c.wrap!=!1){for(A=T,k=E.row;A>=k;A--)if(C(A,Number.MAX_VALUE,b))return}}};else var I=function(A){var _=E.row;if(!C(_,E.column,A)){for(_=_+1;_<=T;_++)if(C(_,0,A))return;if(c.wrap!=!1){for(_=k,T=E.row;_<=T;_++)if(C(_,0,A))return}}};if(c.$isMultiLine)var P=p.length,C=function(b,A,_){var L=M?b-P+1:b;if(!(L<0||L+P>h.getLength())){var O=h.getLine(L),V=O.search(p[0]);if(!(!M&&V<A||V===-1)){for(var B=1;B<P;B++)if(O=h.getLine(L+B),O.search(p[B])==-1)return;var W=O.match(p[P-1])[0].length;if(!(M&&W>A)&&_(L,V,L+P-1,W))return!0}}};else if(M)var C=function(A,_,L){if(g){var O=w(h,p,_,A,k);if(!O)return!1;if(L(O.startRow,O.startCol,O.endRow,O.endCol))return!0}else{var V=h.getLine(A),B=[],W,G=0;for(p.lastIndex=0;W=p.exec(V);){var J=W[0].length;if(G=W.index,!J){if(G>=V.length)break;p.lastIndex=G+=s.skipEmptyMatch(V,G,x)}if(W.index+J>_)break;B.push(W.index,J)}for(var K=B.length-1;K>=0;K-=2){var Q=B[K-1],J=B[K];if(L(A,Q,A,Q+J))return!0}}};else var C=function(A,_,L){if(p.lastIndex=_,g){var O=y(h,p,A,T);if(O){var V=O.endRow<=T?O.endRow-1:T;V>A&&(A=V)}if(!O)return!1;if(L(O.startRow,O.startCol,O.endRow,O.endCol))return!0}else for(var B=h.getLine(A),W,G;G=p.exec(B);){var J=G[0].length;if(W=G.index,L(A,W,A,W+J))return!0;if(!J&&(p.lastIndex=W+=s.skipEmptyMatch(B,W,x),W>=B.length))return!1}};return{forEach:I}},u})();function d(u,h){var c=s.supportsLookbehind();function p(M,R){R===void 0&&(R=!0);var x=c&&h.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return x.test(M)||h.regExp?c&&h.$supportsUnicodeFlag?R?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var g=Array.from(u),y=g[0],w=g[g.length-1];return p(y)+u+p(w,!1)}function l(u,h,c){for(var p=null,g=0;g<=u.length;){h.lastIndex=g;var y=h.exec(u);if(!y)break;var w=y.index+y[0].length;if(w>u.length-c)break;(!p||w>p.index+p[0].length)&&(p=y),g=y.index+1}return p}function f(u,h){var c=5e3,p={row:h,column:0},g=u.doc.positionToIndex(p),y=g+c,w=u.doc.indexToPosition(y),M=w.row;return M+1}n.Search=o}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,n,i){var s=this&&this.__extends||(function(){var u=function(h,c){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)Object.prototype.hasOwnProperty.call(g,y)&&(p[y]=g[y])},u(h,c)};return function(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Class extends value "+String(c)+" is not a constructor or null");u(h,c);function p(){this.constructor=h}h.prototype=c===null?Object.create(c):(p.prototype=c.prototype,new p)}})(),a=t("../lib/keys"),m=t("../lib/useragent"),o=a.KEY_MODS,d=(function(){function u(h,c){this.$init(h,c,!1)}return u.prototype.$init=function(h,c,p){this.platform=c||(m.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(h),this.$singleCommand=p},u.prototype.addCommand=function(h){this.commands[h.name]&&this.removeCommand(h),this.commands[h.name]=h,h.bindKey&&this._buildKeyHash(h)},u.prototype.removeCommand=function(h,c){var p=h&&(typeof h=="string"?h:h.name);h=this.commands[p],c||delete this.commands[p];var g=this.commandKeyBinding;for(var y in g){var w=g[y];if(w==h)delete g[y];else if(Array.isArray(w)){var M=w.indexOf(h);M!=-1&&(w.splice(M,1),w.length==1&&(g[y]=w[0]))}}},u.prototype.bindKey=function(h,c,p){if(typeof h=="object"&&h&&(p==null&&(p=h.position),h=h[this.platform]),!!h){if(typeof c=="function")return this.addCommand({exec:c,bindKey:h,name:c.name||h});h.split("|").forEach(function(g){var y="";if(g.indexOf(" ")!=-1){var w=g.split(/\s+/);g=w.pop(),w.forEach(function(x){var S=this.parseKeys(x),E=o[S.hashId]+S.key;y+=(y?" ":"")+E,this._addCommandToBinding(y,"chainKeys")},this),y+=" "}var M=this.parseKeys(g),R=o[M.hashId]+M.key;this._addCommandToBinding(y+R,c,p)},this)}},u.prototype._addCommandToBinding=function(h,c,p){var g=this.commandKeyBinding,y;if(!c)delete g[h];else if(!g[h]||this.$singleCommand)g[h]=c;else{Array.isArray(g[h])?(y=g[h].indexOf(c))!=-1&&g[h].splice(y,1):g[h]=[g[h]],typeof p!="number"&&(p=l(c));var w=g[h];for(y=0;y<w.length;y++){var M=w[y],R=l(M);if(R>p)break}w.splice(y,0,c)}},u.prototype.addCommands=function(h){h&&Object.keys(h).forEach(function(c){var p=h[c];if(p){if(typeof p=="string")return this.bindKey(p,c);typeof p=="function"&&(p={exec:p}),typeof p=="object"&&(p.name||(p.name=c),this.addCommand(p))}},this)},u.prototype.removeCommands=function(h){Object.keys(h).forEach(function(c){this.removeCommand(h[c])},this)},u.prototype.bindKeys=function(h){Object.keys(h).forEach(function(c){this.bindKey(c,h[c])},this)},u.prototype._buildKeyHash=function(h){this.bindKey(h.bindKey,h)},u.prototype.parseKeys=function(h){var c=h.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(R){return R}),p=c.pop(),g=a[p];if(a.FUNCTION_KEYS[g])p=a.FUNCTION_KEYS[g].toLowerCase();else if(c.length){if(c.length==1&&c[0]=="shift")return{key:p.toUpperCase(),hashId:-1}}else return{key:p,hashId:-1};for(var y=0,w=c.length;w--;){var M=a.KEY_MODS[c[w]];if(M==null)return typeof console<"u"&&console.error("invalid modifier "+c[w]+" in "+h),!1;y|=M}return{key:p,hashId:y}},u.prototype.findKeyCommand=function(h,c){var p=o[h]+c;return this.commandKeyBinding[p]},u.prototype.handleKeyboard=function(h,c,p,g){if(!(g<0)){var y=o[c]+p,w=this.commandKeyBinding[y];return h.$keyChain&&(h.$keyChain+=" "+y,w=this.commandKeyBinding[h.$keyChain]||w),w&&(w=="chainKeys"||w[w.length-1]=="chainKeys")?(h.$keyChain=h.$keyChain||y,{command:"null"}):(h.$keyChain&&((!c||c==4)&&p.length==1?h.$keyChain=h.$keyChain.slice(0,-y.length-1):(c==-1||g>0)&&(h.$keyChain="")),{command:w})}},u.prototype.getStatusText=function(h,c){return c.$keyChain||""},u})();function l(u){return typeof u=="object"&&u.bindKey&&u.bindKey.position||(u.isDefault?-100:0)}var f=(function(u){s(h,u);function h(c,p){var g=u.call(this,c,p)||this;return g.$singleCommand=!0,g}return h})(d);f.call=function(u,h,c){d.prototype.$init.call(u,h,c,!0)},d.call=function(u,h,c){d.prototype.$init.call(u,h,c,!1)},n.HashHandler=f,n.MultiHashHandler=d}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(t,n,i){var s=this&&this.__extends||(function(){var l=function(f,u){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,c){h.__proto__=c}||function(h,c){for(var p in c)Object.prototype.hasOwnProperty.call(c,p)&&(h[p]=c[p])},l(f,u)};return function(f,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");l(f,u);function h(){this.constructor=f}f.prototype=u===null?Object.create(u):(h.prototype=u.prototype,new h)}})(),a=t("../lib/oop"),m=t("../keyboard/hash_handler").MultiHashHandler,o=t("../lib/event_emitter").EventEmitter,d=(function(l){s(f,l);function f(u,h){var c=l.call(this,h,u)||this;return c.byName=c.commands,c.setDefaultHandler("exec",function(p){return p.args?p.command.exec(p.editor,p.args,p.event,!1):p.command.exec(p.editor,{},p.event,!0)}),c}return f.prototype.exec=function(u,h,c){if(Array.isArray(u)){for(var p=u.length;p--;)if(this.exec(u[p],h,c))return!0;return!1}typeof u=="string"&&(u=this.commands[u]);var g={editor:h,command:u,args:c};return this.canExecute(u,h)?(g.returnValue=this._emit("exec",g),this._signal("afterExec",g),g.returnValue!==!1):(this._signal("commandUnavailable",g),!1)},f.prototype.canExecute=function(u,h){return typeof u=="string"&&(u=this.commands[u]),!(!u||h&&h.$readOnly&&!u.readOnly||this.$checkCommandState!=!1&&u.isAvailable&&!u.isAvailable(h))},f.prototype.toggleRecording=function(u){if(!this.$inReplay)return u&&u._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(h){this.macro.push([h.command,h.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},f.prototype.replay=function(u){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(u);try{this.$inReplay=!0,this.macro.forEach(function(h){typeof h=="string"?this.exec(h,u):this.exec(h[0],u,h[1])},this)}finally{this.$inReplay=!1}}},f.prototype.trimMacro=function(u){return u.map(function(h){return typeof h[0]!="string"&&(h[0]=h[0].name),h[1]||(h=h[0]),h})},f})(m);a.implement(d.prototype,o),n.CommandManager=d}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(t,n,i){var s=t("../lib/lang"),a=t("../config"),m=t("../range").Range;function o(l,f){return{win:l,mac:f}}n.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:o("Ctrl-,","Command-,"),exec:function(l){a.loadModule("ace/ext/settings_menu",function(f){f.init(l),l.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:o("Alt-E","F4"),exec:function(l){a.loadModule("ace/ext/error_marker",function(f){f.showErrorMarker(l,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:o("Alt-Shift-E","Shift-F4"),exec:function(l){a.loadModule("ace/ext/error_marker",function(f){f.showErrorMarker(l,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:o("Ctrl-A","Command-A"),exec:function(l){l.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:o(null,"Ctrl-L"),exec:function(l){l.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:o("Ctrl-L","Command-L"),exec:function(l,f){typeof f=="number"&&!isNaN(f)&&l.gotoLine(f),l.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(l){l.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(l){l.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:o("F2","F2"),exec:function(l){l.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:o("Alt-F2","Alt-F2"),exec:function(l){l.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(l){l.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(l){l.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:o("Alt-0","Command-Option-0"),exec:function(l){l.session.foldAll(),l.session.unfold(l.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(l){l.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:o("Ctrl-K","Command-G"),exec:function(l){l.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(l){l.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:o("Alt-K","Ctrl-G"),exec:function(l){l.selection.isEmpty()?l.selection.selectWord():l.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(l){l.selection.isEmpty()?l.selection.selectWord():l.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:o("Ctrl-F","Command-F"),exec:function(l){a.loadModule("ace/ext/searchbox",function(f){f.Search(l)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(l){l.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:o("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(l){l.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(l){l.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:o("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(l){l.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:o("Up","Up|Ctrl-P"),exec:function(l,f){l.navigateUp(f.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:o("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(l){l.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(l){l.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:o("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(l){l.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:o("Down","Down|Ctrl-N"),exec:function(l,f){l.navigateDown(f.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(l){l.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:o("Ctrl-Left","Option-Left"),exec:function(l){l.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:o("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(l){l.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(l){l.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:o("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(l){l.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:o("Left","Left|Ctrl-B"),exec:function(l,f){l.navigateLeft(f.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(l){l.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:o("Ctrl-Right","Option-Right"),exec:function(l){l.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:o("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(l){l.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(l){l.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:o("Shift-Right","Shift-Right"),exec:function(l){l.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:o("Right","Right|Ctrl-F"),exec:function(l,f){l.navigateRight(f.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(l){l.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:o(null,"Option-PageDown"),exec:function(l){l.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(l){l.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(l){l.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:o(null,"Option-PageUp"),exec:function(l){l.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(l){l.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:o("Ctrl-Up",null),exec:function(l){l.renderer.scrollBy(0,-2*l.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:o("Ctrl-Down",null),exec:function(l){l.renderer.scrollBy(0,2*l.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(l){l.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(l){l.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(l){l.commands.toggleRecording(l)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(l){l.commands.replay(l)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:o("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(l){l.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:o("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(l){l.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(l){l.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(l){},readOnly:!0},{name:"cut",description:"Cut",exec:function(l){var f=l.$copyWithEmptySelection&&l.selection.isEmpty(),u=f?l.selection.getLineRange():l.selection.getRange();l._emit("cut",u),u.isEmpty()||l.session.remove(u),l.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(l,f){l.$handlePaste(f)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:o("Ctrl-D","Command-D"),exec:function(l){l.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(l){l.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(l){l.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:o("Ctrl-/","Command-/"),exec:function(l){l.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(l){l.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(l){l.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(l){l.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(l){a.loadModule("ace/ext/searchbox",function(f){f.Search(l,!0)})}},{name:"undo",description:"Undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(l){l.undo()}},{name:"redo",description:"Redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(l){l.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(l){l.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:o("Alt-Up","Option-Up"),exec:function(l){l.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(l){l.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:o("Alt-Down","Option-Down"),exec:function(l){l.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(l){l.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(l){l.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:o("Shift-Delete",null),exec:function(l){if(l.selection.isEmpty())l.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(l){l.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:o("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(l){l.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:o("Ctrl-Shift-Backspace",null),exec:function(l){var f=l.selection.getRange();f.start.column=0,l.session.remove(f)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:o("Ctrl-Shift-Delete",null),exec:function(l){var f=l.selection.getRange();f.end.column=Number.MAX_VALUE,l.session.remove(f)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(l){l.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(l){l.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(l){l.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:o("Tab","Tab"),exec:function(l){l.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(l){l.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(l){l.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(l,f){l.insert(f)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(l,f){l.insert(s.stringRepeat(f.text||"",f.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:o(null,"Ctrl-O"),exec:function(l){l.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:o("Alt-Shift-X","Ctrl-T"),exec:function(l){l.transposeLetters()},multiSelectAction:function(l){l.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(l){l.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(l){l.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:o(null,null),exec:function(l){l.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(l){var f=l.selection.getRange();f.start.column=f.end.column=0,f.end.row++,l.selection.setRange(f,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:o("Ctrl+F3","F3"),exec:function(l){l.openLink()}},{name:"joinlines",description:"Join lines",bindKey:o(null,null),exec:function(l){for(var f=l.selection.isBackwards(),u=f?l.selection.getSelectionLead():l.selection.getSelectionAnchor(),h=f?l.selection.getSelectionAnchor():l.selection.getSelectionLead(),c=l.session.doc.getLine(u.row).length,p=l.session.doc.getTextRange(l.selection.getRange()),g=p.replace(/\n\s*/," ").length,y=l.session.doc.getLine(u.row),w=u.row+1;w<=h.row+1;w++){var M=s.stringTrimLeft(s.stringTrimRight(l.session.doc.getLine(w)));M.length!==0&&(M=" "+M),y+=M}h.row+1<l.session.doc.getLength()-1&&(y+=l.session.doc.getNewLineCharacter()),l.clearSelection(),l.session.doc.replace(new m(u.row,0,h.row+2,0),y),g>0?(l.selection.moveCursorTo(u.row,u.column),l.selection.selectTo(u.row,u.column+g)):(c=l.session.doc.getLine(u.row).length>c?c+1:c,l.selection.moveCursorTo(u.row,c))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:o(null,null),exec:function(l){var f=l.session.doc.getLength()-1,u=l.session.doc.getLine(f).length,h=l.selection.rangeList.ranges,c=[];h.length<1&&(h=[l.selection.getRange()]);for(var p=0;p<h.length;p++)p==h.length-1&&(h[p].end.row===f&&h[p].end.column===u||c.push(new m(h[p].end.row,h[p].end.column,f,u))),p===0?h[p].start.row===0&&h[p].start.column===0||c.push(new m(0,0,h[p].start.row,h[p].start.column)):c.push(new m(h[p-1].end.row,h[p-1].end.column,h[p].start.row,h[p].start.column));l.exitMultiSelectMode(),l.clearSelection();for(var p=0;p<c.length;p++)l.selection.addRange(c[p],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(l){l.selection.clearSelection(),l.navigateLineEnd(),l.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(l){l.selection.clearSelection();var f=l.getCursorPosition();l.selection.moveTo(f.row-1,Number.MAX_VALUE),l.insert(`
`),f.row===0&&l.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(l){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),l.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:o("F1","F1"),exec:function(l){l.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:o(null,null),exec:function(l){l.prompt({$type:"modes"})},readOnly:!0}];for(var d=1;d<9;d++)n.commands.push({name:"foldToLevel"+d,description:"Fold To Level "+d,level:d,exec:function(l){l.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys"],function(t,n,i){var s=t("../lib/keys"),a=(function(){function o(d){this.editor=d,this.gutterLayer=d.renderer.$gutterLayer,this.element=d.renderer.$gutter,this.lines=d.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=this.editor.$mouseHandler.$tooltip}return o.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},o.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},o.prototype.$onGutterKeyDown=function(d){if(this.annotationTooltip.isOpen){d.preventDefault(),d.keyCode===s.escape&&this.annotationTooltip.hide();return}if(d.target===this.element){if(d.keyCode!=s.enter)return;d.preventDefault();var l=this.editor.getCursorPosition().row;this.editor.isRowVisible(l)||this.editor.scrollToLine(l,!0,!0),setTimeout(function(){var f=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),u=this.$findNearestFoldLaneWidget(f),h=this.$findNearestAnnotation(f);if(!(u===null&&h===null)){var c=this.$findClosestNumber(u,h,f);if(c===u)if(this.activeLane="fold",this.activeRowIndex=u,this.$isCustomWidgetVisible(u)){this.$focusCustomWidget(this.activeRowIndex);return}else{this.$focusFoldWidget(this.activeRowIndex);return}else{this.activeRowIndex=h,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(d),setTimeout(function(){this.editor._signal("gutterkeydown",new m(d,this))}.bind(this),10)},o.prototype.$handleGutterKeyboardInteraction=function(d){if(d.keyCode===s.tab){d.preventDefault();return}if(d.keyCode===s.escape){d.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(d.keyCode===s.up){switch(d.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(d.keyCode===s.down){switch(d.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(d.keyCode===s.left){d.preventDefault(),this.$switchLane("annotation");return}if(d.keyCode===s.right){d.preventDefault(),this.$switchLane("fold");return}if(d.keyCode===s.enter||d.keyCode===s.space){switch(d.preventDefault(),this.activeLane){case"fold":var l=this.$rowIndexToRow(this.activeRowIndex),f=this.editor.session.$gutterCustomWidgets[l];if(f)f.callbacks&&f.callbacks.onClick&&f.callbacks.onClick(d,l);else if(this.gutterLayer.session.foldWidgets[l]==="start"){this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),d),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==l&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(l),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex)),this.annotationTooltip.$fromKeyboard=!0;break}return}},o.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hide()},o.prototype.$isFoldWidgetVisible=function(d){var l=this.editor.isRowFullyVisible(this.$rowIndexToRow(d)),f=this.$getFoldWidget(d).style.display!=="none";return l&&f},o.prototype.$isCustomWidgetVisible=function(d){var l=this.editor.isRowFullyVisible(this.$rowIndexToRow(d)),f=!!this.$getCustomWidget(d);return l&&f},o.prototype.$isAnnotationVisible=function(d){var l=this.editor.isRowFullyVisible(this.$rowIndexToRow(d)),f=this.$getAnnotation(d).style.display!=="none";return l&&f},o.prototype.$getFoldWidget=function(d){var l=this.lines.get(d),f=l.element;return f.childNodes[1]},o.prototype.$getCustomWidget=function(d){var l=this.lines.get(d),f=l.element;return f.childNodes[3]},o.prototype.$getAnnotation=function(d){var l=this.lines.get(d),f=l.element;return f.childNodes[2]},o.prototype.$findNearestFoldLaneWidget=function(d){if(this.$isCustomWidgetVisible(d)||this.$isFoldWidgetVisible(d))return d;for(var l=0;d-l>0||d+l<this.lines.getLength()-1;){if(l++,d-l>=0&&this.$isCustomWidgetVisible(d-l))return d-l;if(d+l<=this.lines.getLength()-1&&this.$isCustomWidgetVisible(d+l))return d+l;if(d-l>=0&&this.$isFoldWidgetVisible(d-l))return d-l;if(d+l<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(d+l))return d+l}return null},o.prototype.$findNearestAnnotation=function(d){if(this.$isAnnotationVisible(d))return d;for(var l=0;d-l>0||d+l<this.lines.getLength()-1;){if(l++,d-l>=0&&this.$isAnnotationVisible(d-l))return d-l;if(d+l<=this.lines.getLength()-1&&this.$isAnnotationVisible(d+l))return d+l}return null},o.prototype.$focusFoldWidget=function(d){if(d!=null){var l=this.$getFoldWidget(d);l.classList.add(this.editor.renderer.keyboardFocusClassName),l.focus()}},o.prototype.$focusCustomWidget=function(d){if(d!=null){var l=this.$getCustomWidget(d);l&&(l.classList.add(this.editor.renderer.keyboardFocusClassName),l.focus())}},o.prototype.$focusAnnotation=function(d){if(d!=null){var l=this.$getAnnotation(d);l.classList.add(this.editor.renderer.keyboardFocusClassName),l.focus()}},o.prototype.$blurFoldWidget=function(d){var l=this.$getFoldWidget(d);l.classList.remove(this.editor.renderer.keyboardFocusClassName),l.blur()},o.prototype.$blurCustomWidget=function(d){var l=this.$getCustomWidget(d);l&&(l.classList.remove(this.editor.renderer.keyboardFocusClassName),l.blur())},o.prototype.$blurAnnotation=function(d){var l=this.$getAnnotation(d);l.classList.remove(this.editor.renderer.keyboardFocusClassName),l.blur()},o.prototype.$moveFoldWidgetUp=function(){for(var d=this.activeRowIndex;d>0;)if(d--,this.$isFoldWidgetVisible(d)||this.$isCustomWidgetVisible(d)){this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex),this.activeRowIndex=d,this.$isFoldWidgetVisible(d)?this.$focusFoldWidget(this.activeRowIndex):this.$focusCustomWidget(this.activeRowIndex);return}},o.prototype.$moveFoldWidgetDown=function(){for(var d=this.activeRowIndex;d<this.lines.getLength()-1;)if(d++,this.$isFoldWidgetVisible(d)||this.$isCustomWidgetVisible(d)){this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex),this.activeRowIndex=d,this.$isFoldWidgetVisible(d)?this.$focusFoldWidget(this.activeRowIndex):this.$focusCustomWidget(this.activeRowIndex);return}},o.prototype.$moveAnnotationUp=function(){for(var d=this.activeRowIndex;d>0;)if(d--,this.$isAnnotationVisible(d)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=d,this.$focusAnnotation(this.activeRowIndex);return}},o.prototype.$moveAnnotationDown=function(){for(var d=this.activeRowIndex;d<this.lines.getLength()-1;)if(d++,this.$isAnnotationVisible(d)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=d,this.$focusAnnotation(this.activeRowIndex);return}},o.prototype.$findClosestNumber=function(d,l,f){return d===null?l:l===null||Math.abs(f-d)<=Math.abs(f-l)?d:l},o.prototype.$switchLane=function(d){switch(d){case"annotation":if(this.activeLane==="annotation")break;var l=this.$findNearestAnnotation(this.activeRowIndex);if(l==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.$blurCustomWidget(this.activeRowIndex),this.activeRowIndex=l,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var f=this.$findNearestFoldLaneWidget(this.activeRowIndex);if(f===null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=f,this.$isCustomWidgetVisible(f)?this.$focusCustomWidget(this.activeRowIndex):this.$focusFoldWidget(this.activeRowIndex);break}},o.prototype.$rowIndexToRow=function(d){var l=this.lines.get(d);return l?l.row:null},o.prototype.$rowToRowIndex=function(d){for(var l=0;l<this.lines.getLength();l++){var f=this.lines.get(l);if(f.row==d)return l}return null},o})();n.GutterKeyboardHandler=a;var m=(function(){function o(d,l){this.gutterKeyboardHandler=l,this.domEvent=d}return o.prototype.getKey=function(){return s.keyCodeToString(this.domEvent.keyCode)},o.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},o.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},o.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},o})();n.GutterKeyboardEvent=m}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys","ace/lib/event","ace/tooltip"],function(t,n,i){var s=this&&this.__values||function(A){var _=typeof Symbol=="function"&&Symbol.iterator,L=_&&A[_],O=0;if(L)return L.call(A);if(A&&typeof A.length=="number")return{next:function(){return A&&O>=A.length&&(A=void 0),{value:A&&A[O++],done:!A}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},a=t("./lib/oop"),m=t("./lib/dom"),o=t("./lib/lang"),d=t("./lib/useragent"),l=t("./keyboard/textinput").TextInput,f=t("./mouse/mouse_handler").MouseHandler,u=t("./mouse/fold_handler").FoldHandler,h=t("./keyboard/keybinding").KeyBinding,c=t("./edit_session").EditSession,p=t("./search").Search,g=t("./range").Range,y=t("./lib/event_emitter").EventEmitter,w=t("./commands/command_manager").CommandManager,M=t("./commands/default_commands").commands,R=t("./config"),x=t("./token_iterator").TokenIterator,S=t("./keyboard/gutter_handler").GutterKeyboardHandler,E=t("./config").nls,k=t("./clipboard"),T=t("./lib/keys"),I=t("./lib/event"),P=t("./tooltip").HoverTooltip,C=(function(){function A(_,L,O){this.id="editor"+ ++A.$uid,this.session,this.$toDestroy=[];var V=_.getContainerElement();this.container=V,this.renderer=_,this.commands=new w(d.isMac?"mac":"win",M),typeof document=="object"&&(this.textInput=new l(_.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new f(this),new u(this)),this.keyBinding=new h(this),this.$search=new p().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(B,W){W._$emitInputEvent.schedule(31)}),this.setSession(L||O&&O.session||new c("")),R.resetOptions(this),O&&this.setOptions(O),R._signal("editor",this)}return A.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0)},A.prototype.startOperation=function(_){this.session.startOperation(_)},A.prototype.endOperation=function(_){this.session.endOperation(_)},A.prototype.onStartOperation=function(_){this.curOp=this.session.curOp,this.curOp.scrollTop=this.renderer.scrollTop,this.prevOp=this.session.prevOp,_||(this.previousCommand=null)},A.prototype.onEndOperation=function(_){if(this.curOp&&this.session){if(_&&_.returnValue===!1){this.curOp=null;return}if(this._signal("beforeEndOperation"),!this.curOp)return;var L=this.curOp.command,O=L&&L.scrollIntoView;if(O){switch(O){case"center-animate":O="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var V=this.selection.getRange(),B=this.renderer.layerConfig;(V.start.row>=B.lastRow||V.end.row<=B.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}O=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.$lastSel=this.session.selection.toJSON(),this.prevOp=this.curOp,this.curOp=null}},A.prototype.$historyTracker=function(_){if(this.$mergeUndoDeltas){var L=this.prevOp,O=this.$mergeableCommands,V=L.command&&_.command.name==L.command.name;if(_.command.name=="insertstring"){var B=_.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),V=V&&this.mergeNextCommand&&(!/\s/.test(B)||/\s/.test(L.args)),this.mergeNextCommand=!0}else V=V&&O.indexOf(_.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(V=!1),V?this.session.mergeUndoDeltas=!0:O.indexOf(_.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},A.prototype.setKeyboardHandler=function(_,L){if(_&&typeof _=="string"&&_!="ace"){this.$keybindingId=_;var O=this;R.loadModule(["keybinding",_],function(V){O.$keybindingId==_&&O.keyBinding.setKeyboardHandler(V&&V.handler),L&&L()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(_),L&&L()},A.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},A.prototype.setSession=function(_){if(this.session!=_){this.curOp&&this.endOperation(),this.curOp={};var L=this.session;if(L){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange),this.session.off("startOperation",this.$onStartOperation),this.session.off("endOperation",this.$onEndOperation);var O=this.session.getSelection();O.off("changeCursor",this.$onCursorChange),O.off("changeSelection",this.$onSelectionChange)}this.session=_,_?(this.$onDocumentChange=this.onDocumentChange.bind(this),_.on("change",this.$onDocumentChange),this.renderer.setSession(_),this.$onChangeMode=this.onChangeMode.bind(this),_.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),_.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),_.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),_.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),_.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),_.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=_.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.$onStartOperation=this.onStartOperation.bind(this),this.session.on("startOperation",this.$onStartOperation),this.$onEndOperation=this.onEndOperation.bind(this),this.session.on("endOperation",this.$onEndOperation),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(_)),this._signal("changeSession",{session:_,oldSession:L}),this.curOp=null,L&&L._signal("changeEditor",{oldEditor:this}),L&&(L.$editor=null),_&&_._signal("changeEditor",{editor:this}),_&&(_.$editor=this),_&&!_.destroyed&&_.bgTokenizer.scheduleStart()}},A.prototype.getSession=function(){return this.session},A.prototype.setValue=function(_,L){return this.session.doc.setValue(_),L?L==1?this.navigateFileEnd():L==-1&&this.navigateFileStart():this.selectAll(),_},A.prototype.getValue=function(){return this.session.getValue()},A.prototype.getSelection=function(){return this.selection},A.prototype.resize=function(_){this.renderer.onResize(_)},A.prototype.setTheme=function(_,L){this.renderer.setTheme(_,L)},A.prototype.getTheme=function(){return this.renderer.getTheme()},A.prototype.setStyle=function(_,L){this.renderer.setStyle(_,L)},A.prototype.unsetStyle=function(_){this.renderer.unsetStyle(_)},A.prototype.getFontSize=function(){return this.getOption("fontSize")||m.computedStyle(this.container).fontSize},A.prototype.setFontSize=function(_){this.setOption("fontSize",_)},A.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var _=this;this.$highlightPending=!0,setTimeout(function(){_.$highlightPending=!1;var L=_.session;if(!(!L||L.destroyed)){L.$bracketHighlight&&(L.$bracketHighlight.markerIds.forEach(function(X){L.removeMarker(X)}),L.$bracketHighlight=null);var O=_.getCursorPosition(),V=_.getKeyboardHandler(),B=V&&V.$getDirectionForHighlight&&V.$getDirectionForHighlight(_),W=L.getMatchingBracketRanges(O,B);if(!W){var G=new x(L,O.row,O.column),J=G.getCurrentToken();if(J&&/\b(?:tag-open|tag-name)/.test(J.type)){var K=L.getMatchingTags(O);K&&(W=[K.openTagName.isEmpty()?K.openTag:K.openTagName,K.closeTagName.isEmpty()?K.closeTag:K.closeTagName])}}if(!W&&L.$mode.getMatching&&(W=L.$mode.getMatching(_.session)),!W){_.getHighlightIndentGuides()&&_.renderer.$textLayer.$highlightIndentGuide();return}var Q="ace_bracket";Array.isArray(W)?W.length==1&&(Q="ace_error_bracket"):W=[W],W.length==2&&(g.comparePoints(W[0].end,W[1].start)==0?W=[g.fromPoints(W[0].start,W[1].end)]:g.comparePoints(W[0].start,W[1].end)==0&&(W=[g.fromPoints(W[1].start,W[0].end)])),L.$bracketHighlight={ranges:W,markerIds:W.map(function(X){return L.addMarker(X,Q,"text")})},_.getHighlightIndentGuides()&&_.renderer.$textLayer.$highlightIndentGuide()}},50)}},A.prototype.focus=function(){this.textInput.focus()},A.prototype.isFocused=function(){return this.textInput.isFocused()},A.prototype.blur=function(){this.textInput.blur()},A.prototype.onFocus=function(_){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",_))},A.prototype.onBlur=function(_){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",_))},A.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},A.prototype.onDocumentChange=function(_){var L=this.session.$useWrapMode,O=_.start.row==_.end.row?_.end.row:1/0;this.renderer.updateLines(_.start.row,O,L),this._signal("change",_),this.$cursorChange()},A.prototype.onTokenizerUpdate=function(_){var L=_.data;this.renderer.updateLines(L.first,L.last)},A.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},A.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},A.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},A.prototype.$updateHighlightActiveLine=function(){var _=this.getSession(),L;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(L=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(L=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(L=!1)),_.$highlightLineMarker&&!L)_.removeMarker(_.$highlightLineMarker.id),_.$highlightLineMarker=null;else if(!_.$highlightLineMarker&&L){var O=new g(L.row,L.column,L.row,1/0);O.id=_.addMarker(O,"ace_active-line","screenLine"),_.$highlightLineMarker=O}else L&&(_.$highlightLineMarker.start.row=L.row,_.$highlightLineMarker.end.row=L.row,_.$highlightLineMarker.start.column=L.column,_._signal("changeBackMarker"))},A.prototype.onSelectionChange=function(_){var L=this.session;if(L.$selectionMarker&&L.removeMarker(L.$selectionMarker),L.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var O=this.selection.getRange(),V=this.getSelectionStyle();L.$selectionMarker=L.addMarker(O,"ace_selection",V)}var B=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(B),this._signal("changeSelection")},A.prototype.$getSelectionHighLightRegexp=function(){var _=this.session,L=this.getSelectionRange();if(!(L.isEmpty()||L.isMultiLine())){var O=L.start.column,V=L.end.column,B=_.getLine(L.start.row),W=B.substring(O,V);if(!(W.length>5e3||!/[\w\d]/.test(W))){var G=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:W}),J=B.substring(O-1,V+1);if(G.test(J))return G}}},A.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},A.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},A.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},A.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},A.prototype.onChangeMode=function(_){this.renderer.updateText(),this._emit("changeMode",_)},A.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},A.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},A.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},A.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},A.prototype.getCopyText=function(){var _=this.getSelectedText(),L=this.session.doc.getNewLineCharacter(),O=!1;if(!_&&this.$copyWithEmptySelection){O=!0;for(var V=this.selection.getAllRanges(),B=0;B<V.length;B++){var W=V[B];B&&V[B-1].start.row==W.start.row||(_+=this.session.getLine(W.start.row)+L)}}var G={text:_};return this._signal("copy",G),k.lineMode=O?G.text:!1,G.text},A.prototype.onCopy=function(){this.commands.exec("copy",this)},A.prototype.onCut=function(){this.commands.exec("cut",this)},A.prototype.onPaste=function(_,L){var O={text:_,event:L};this.commands.exec("paste",this,O)},A.prototype.$handlePaste=function(_){typeof _=="string"&&(_={text:_}),this._signal("paste",_);var L=_.text,O=L===k.lineMode,V=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)O?V.insert({row:this.selection.lead.row,column:0},L):this.insert(L);else if(O)this.selection.rangeList.ranges.forEach(function(Q){V.insert({row:Q.start.row,column:0},L)});else{var B=L.split(/\r\n|\r|\n/),W=this.selection.rangeList.ranges,G=B.length==2&&(!B[0]||!B[1]);if(B.length!=W.length||G)return this.commands.exec("insertstring",this,L);for(var J=W.length;J--;){var K=W[J];K.isEmpty()||V.remove(K),V.insert(K.start,B[J])}}},A.prototype.execCommand=function(_,L){return this.commands.exec(_,this,L)},A.prototype.insert=function(_,L){var O=this.session,V=O.getMode(),B=this.getCursorPosition();if(this.getBehavioursEnabled()&&!L){var W=V.transformAction(O.getState(B.row),"insertion",this,O,_);W&&(_!==W.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),_=W.text)}if(_=="	"&&(_=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&_.indexOf(`
`)==-1){var G=g.fromPoints(B,B);G.end.column+=_.length,this.session.remove(G)}}else{var G=this.getSelectionRange();B=this.session.remove(G),this.clearSelection()}if(_==`
`||_==`\r
`){var X=O.getLine(B.row);if(B.column>X.search(/\S|$/)){var J=X.substr(B.column).search(/\S|$/);O.doc.removeInLine(B.row,B.column,B.column+J)}}this.clearSelection();var K=B.column,Q=O.getState(B.row),X=O.getLine(B.row),Z=V.checkOutdent(Q,X,_);if(O.insert(B,_),W&&W.selection&&(W.selection.length==2?this.selection.setSelectionRange(new g(B.row,K+W.selection[0],B.row,K+W.selection[1])):this.selection.setSelectionRange(new g(B.row+W.selection[0],W.selection[1],B.row+W.selection[2],W.selection[3]))),this.$enableAutoIndent){if(O.getDocument().isNewLine(_)){var re=V.getNextLineIndent(Q,X.slice(0,B.column),O.getTabString());O.insert({row:B.row+1,column:0},re)}Z&&V.autoOutdent(Q,O,B.row)}},A.prototype.autoIndent=function(){for(var _=this.session,L=_.getMode(),O=this.selection.isEmpty()?[new g(0,0,_.doc.getLength()-1,0)]:this.selection.getAllRanges(),V="",B="",W="",G=_.getTabString(),J=0;J<O.length;J++)for(var K=O[J].start.row,Q=O[J].end.row,X=K;X<=Q;X++){X>0&&(V=_.getState(X-1),B=_.getLine(X-1),W=L.getNextLineIndent(V,B,G));var Z=_.getLine(X),re=L.$getIndent(Z);if(W!==re){if(re.length>0){var se=new g(X,0,X,re.length);_.remove(se)}W.length>0&&_.insert({row:X,column:0},W)}L.autoOutdent(V,_,X)}},A.prototype.onTextInput=function(_,L){if(!L)return this.keyBinding.onTextInput(_);this.startOperation({command:{name:"insertstring"}});var O=this.applyComposition.bind(this,_,L);this.selection.rangeCount?this.forEachSelection(O):O(),this.endOperation()},A.prototype.applyComposition=function(_,L){if(L.extendLeft||L.extendRight){var O=this.selection.getRange();O.start.column-=L.extendLeft,O.end.column+=L.extendRight,O.start.column<0&&(O.start.row--,O.start.column+=this.session.getLine(O.start.row).length+1),this.selection.setRange(O),!_&&!O.isEmpty()&&this.remove()}if((_||!this.selection.isEmpty())&&this.insert(_,!0),L.restoreStart||L.restoreEnd){var O=this.selection.getRange();O.start.column-=L.restoreStart,O.end.column-=L.restoreEnd,this.selection.setRange(O)}},A.prototype.onCommandKey=function(_,L,O){return this.keyBinding.onCommandKey(_,L,O)},A.prototype.setOverwrite=function(_){this.session.setOverwrite(_)},A.prototype.getOverwrite=function(){return this.session.getOverwrite()},A.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},A.prototype.setScrollSpeed=function(_){this.setOption("scrollSpeed",_)},A.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},A.prototype.setDragDelay=function(_){this.setOption("dragDelay",_)},A.prototype.getDragDelay=function(){return this.getOption("dragDelay")},A.prototype.setSelectionStyle=function(_){this.setOption("selectionStyle",_)},A.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},A.prototype.setHighlightActiveLine=function(_){this.setOption("highlightActiveLine",_)},A.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},A.prototype.setHighlightGutterLine=function(_){this.setOption("highlightGutterLine",_)},A.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},A.prototype.setHighlightSelectedWord=function(_){this.setOption("highlightSelectedWord",_)},A.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},A.prototype.setAnimatedScroll=function(_){this.renderer.setAnimatedScroll(_)},A.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},A.prototype.setShowInvisibles=function(_){this.renderer.setShowInvisibles(_)},A.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},A.prototype.setDisplayIndentGuides=function(_){this.renderer.setDisplayIndentGuides(_)},A.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},A.prototype.setHighlightIndentGuides=function(_){this.renderer.setHighlightIndentGuides(_)},A.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},A.prototype.setShowPrintMargin=function(_){this.renderer.setShowPrintMargin(_)},A.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},A.prototype.setPrintMarginColumn=function(_){this.renderer.setPrintMarginColumn(_)},A.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},A.prototype.setReadOnly=function(_){this.setOption("readOnly",_)},A.prototype.getReadOnly=function(){return this.getOption("readOnly")},A.prototype.setBehavioursEnabled=function(_){this.setOption("behavioursEnabled",_)},A.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},A.prototype.setWrapBehavioursEnabled=function(_){this.setOption("wrapBehavioursEnabled",_)},A.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},A.prototype.setShowFoldWidgets=function(_){this.setOption("showFoldWidgets",_)},A.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},A.prototype.setFadeFoldWidgets=function(_){this.setOption("fadeFoldWidgets",_)},A.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},A.prototype.remove=function(_){this.selection.isEmpty()&&(_=="left"?this.selection.selectLeft():this.selection.selectRight());var L=this.getSelectionRange();if(this.getBehavioursEnabled()){var O=this.session,V=O.getState(L.start.row),B=O.getMode().transformAction(V,"deletion",this,O,L);if(L.end.column===0){var W=O.getTextRange(L);if(W[W.length-1]==`
`){var G=O.getLine(L.end.row);/^\s+$/.test(G)&&(L.end.column=G.length)}}B&&(L=B)}this.session.remove(L),this.clearSelection()},A.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},A.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},A.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},A.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var _=this.getSelectionRange();_.start.column==_.end.column&&_.start.row==_.end.row&&(_.end.column=0,_.end.row++),this.session.remove(_),this.clearSelection()},A.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var _=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(_)},A.prototype.setGhostText=function(_,L){this.renderer.setGhostText(_,L)},A.prototype.removeGhostText=function(){this.renderer.removeGhostText()},A.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var _=this.getCursorPosition(),L=_.column;if(L!==0){var O=this.session.getLine(_.row),V,B;L<O.length?(V=O.charAt(L)+O.charAt(L-1),B=new g(_.row,L-1,_.row,L+1)):(V=O.charAt(L-1)+O.charAt(L-2),B=new g(_.row,L-2,_.row,L)),this.session.replace(B,V),this.session.selection.moveToPosition(B.end)}}},A.prototype.toLowerCase=function(){var _=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var L=this.getSelectionRange(),O=this.session.getTextRange(L);this.session.replace(L,O.toLowerCase()),this.selection.setSelectionRange(_)},A.prototype.toUpperCase=function(){var _=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var L=this.getSelectionRange(),O=this.session.getTextRange(L);this.session.replace(L,O.toUpperCase()),this.selection.setSelectionRange(_)},A.prototype.indent=function(){var _=this.session,L=this.getSelectionRange();if(L.start.row<L.end.row){var O=this.$getSelectedRows();_.indentRows(O.first,O.last,"	");return}else if(L.start.column<L.end.column){var V=_.getTextRange(L);if(!/^\s+$/.test(V)){var O=this.$getSelectedRows();_.indentRows(O.first,O.last,"	");return}}var B=_.getLine(L.start.row),W=L.start,G=_.getTabSize(),J=_.documentToScreenColumn(W.row,W.column);if(this.session.getUseSoftTabs())var K=G-J%G,Q=o.stringRepeat(" ",K);else{for(var K=J%G;B[L.start.column-1]==" "&&K;)L.start.column--,K--;this.selection.setSelectionRange(L),Q="	"}return this.insert(Q)},A.prototype.blockIndent=function(){var _=this.$getSelectedRows();this.session.indentRows(_.first,_.last,"	")},A.prototype.blockOutdent=function(){var _=this.session.getSelection();this.session.outdentRows(_.getRange())},A.prototype.sortLines=function(){for(var _=this.$getSelectedRows(),L=this.session,O=[],V=_.first;V<=_.last;V++)O.push(L.getLine(V));O.sort(function(G,J){return G.toLowerCase()<J.toLowerCase()?-1:G.toLowerCase()>J.toLowerCase()?1:0});for(var B=new g(0,0,0,0),V=_.first;V<=_.last;V++){var W=L.getLine(V);B.start.row=V,B.end.row=V,B.end.column=W.length,L.replace(B,O[V-_.first])}},A.prototype.toggleCommentLines=function(){var _=this.session.getState(this.getCursorPosition().row),L=this.$getSelectedRows();this.session.getMode().toggleCommentLines(_,this.session,L.first,L.last)},A.prototype.toggleBlockComment=function(){var _=this.getCursorPosition(),L=this.session.getState(_.row),O=this.getSelectionRange();this.session.getMode().toggleBlockComment(L,this.session,O,_)},A.prototype.getNumberAt=function(_,L){var O=/[\-]?[0-9]+(?:\.[0-9]+)?/g;O.lastIndex=0;for(var V=this.session.getLine(_);O.lastIndex<L;){var B=O.exec(V);if(B.index<=L&&B.index+B[0].length>=L){var W={value:B[0],start:B.index,end:B.index+B[0].length};return W}}return null},A.prototype.modifyNumber=function(_){var L=this.selection.getCursor().row,O=this.selection.getCursor().column,V=new g(L,O-1,L,O),B=this.session.getTextRange(V);if(!isNaN(parseFloat(B))&&isFinite(B)){var W=this.getNumberAt(L,O);if(W){var G=W.value.indexOf(".")>=0?W.start+W.value.indexOf(".")+1:W.end,J=W.start+W.value.length-G,K=parseFloat(W.value);K*=Math.pow(10,J),G!==W.end&&O<G?_*=Math.pow(10,W.end-O-1):_*=Math.pow(10,W.end-O),K+=_,K/=Math.pow(10,J);var Q=K.toFixed(J),X=new g(L,W.start,L,W.end);this.session.replace(X,Q),this.moveCursorTo(L,Math.max(W.start+1,O+Q.length-W.value.length))}}else this.toggleWord()},A.prototype.toggleWord=function(){var _=this.selection.getCursor().row,L=this.selection.getCursor().column;this.selection.selectWord();var O=this.getSelectedText(),V=this.selection.getWordRange().start.column,B=O.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),W=L-V-1;W<0&&(W=0);var G=0,J=0,K=this;O.match(/[A-Za-z0-9_]+/)&&B.forEach(function(Le,Be){J=G+Le.length,W>=G&&W<=J&&(O=Le,K.selection.clearSelection(),K.moveCursorTo(_,G+V),K.selection.selectTo(_,J+V)),G=J});for(var Q=this.$toggleWordPairs,X,Z=0;Z<Q.length;Z++)for(var re=Q[Z],se=0;se<=1;se++){var he=+!se,ce=O.match(new RegExp("^\\s?_?("+o.escapeRegExp(re[se])+")\\s?$","i"));if(ce){var Ae=O.match(new RegExp("([_]|^|\\s)("+o.escapeRegExp(ce[1])+")($|\\s)","g"));Ae&&(X=O.replace(new RegExp(o.escapeRegExp(re[se]),"i"),function(Le){var Be=re[he];return Le.toUpperCase()==Le?Be=Be.toUpperCase():Le.charAt(0).toUpperCase()==Le.charAt(0)&&(Be=Be.substr(0,0)+re[he].charAt(0).toUpperCase()+Be.substr(1)),Be}),this.insert(X),X="")}}},A.prototype.findLinkAt=function(_,L){var O,V,B=this.session.getLine(_),W=B.split(/((?:https?|ftp):\/\/[\S]+)/),G=L;G<0&&(G=0);var J=0,K=0,Q;try{for(var X=s(W),Z=X.next();!Z.done;Z=X.next()){var re=Z.value;if(K=J+re.length,G>=J&&G<=K&&re.match(/((?:https?|ftp):\/\/[\S]+)/)){Q=re.replace(/[\s:.,'";}\]]+$/,"");break}J=K}}catch(se){O={error:se}}finally{try{Z&&!Z.done&&(V=X.return)&&V.call(X)}finally{if(O)throw O.error}}return Q},A.prototype.openLink=function(){var _=this.selection.getCursor(),L=this.findLinkAt(_.row,_.column);return L&&window.open(L,"_blank"),L!=null},A.prototype.removeLines=function(){var _=this.$getSelectedRows();this.session.removeFullLines(_.first,_.last),this.clearSelection()},A.prototype.duplicateSelection=function(){var _=this.selection,L=this.session,O=_.getRange(),V=_.isBackwards();if(O.isEmpty()){var B=O.start.row;L.duplicateLines(B,B)}else{var W=V?O.start:O.end,G=L.insert(W,L.getTextRange(O));O.start=W,O.end=G,_.setSelectionRange(O,V)}},A.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},A.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},A.prototype.moveText=function(_,L,O){return this.session.moveText(_,L,O)},A.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},A.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},A.prototype.$moveLines=function(_,L){var O,V,B=this.selection;if(!B.inMultiSelectMode||this.inVirtualSelectionMode){var W=B.toOrientedRange();O=this.$getSelectedRows(W),V=this.session.$moveLines(O.first,O.last,L?0:_),L&&_==-1&&(V=0),W.moveBy(V,0),B.fromOrientedRange(W)}else{var G=B.rangeList.ranges;B.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var J=0,K=0,Q=G.length,X=0;X<Q;X++){var Z=X;G[X].moveBy(J,0),O=this.$getSelectedRows(G[X]);for(var re=O.first,se=O.last;++X<Q;){K&&G[X].moveBy(K,0);var he=this.$getSelectedRows(G[X]);if(L&&he.first!=se)break;if(!L&&he.first>se+1)break;se=he.last}for(X--,J=this.session.$moveLines(re,se,L?0:_),L&&_==-1&&(Z=X+1);Z<=X;)G[Z].moveBy(J,0),Z++;L||(J=0),K+=J}B.fromOrientedRange(B.ranges[0]),B.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},A.prototype.$getSelectedRows=function(_){return _=(_||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(_.start.row),last:this.session.getRowFoldEnd(_.end.row)}},A.prototype.onCompositionStart=function(_){this.renderer.showComposition(_)},A.prototype.onCompositionUpdate=function(_){this.renderer.setCompositionText(_)},A.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},A.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},A.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},A.prototype.isRowVisible=function(_){return _>=this.getFirstVisibleRow()&&_<=this.getLastVisibleRow()},A.prototype.isRowFullyVisible=function(_){return _>=this.renderer.getFirstFullyVisibleRow()&&_<=this.renderer.getLastFullyVisibleRow()},A.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},A.prototype.$moveByPage=function(_,L){var O=this.renderer,V=this.renderer.layerConfig,B=_*Math.floor(V.height/V.lineHeight);L===!0?this.selection.$moveSelection(function(){this.moveCursorBy(B,0)}):L===!1&&(this.selection.moveCursorBy(B,0),this.selection.clearSelection());var W=O.scrollTop;O.scrollBy(0,B*V.lineHeight),L!=null&&O.scrollCursorIntoView(null,.5),O.animateScrolling(W)},A.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},A.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},A.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},A.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},A.prototype.scrollPageDown=function(){this.$moveByPage(1)},A.prototype.scrollPageUp=function(){this.$moveByPage(-1)},A.prototype.scrollToRow=function(_){this.renderer.scrollToRow(_)},A.prototype.scrollToLine=function(_,L,O,V){this.renderer.scrollToLine(_,L,O,V)},A.prototype.centerSelection=function(){var _=this.getSelectionRange(),L={row:Math.floor(_.start.row+(_.end.row-_.start.row)/2),column:Math.floor(_.start.column+(_.end.column-_.start.column)/2)};this.renderer.alignCursor(L,.5)},A.prototype.getCursorPosition=function(){return this.selection.getCursor()},A.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},A.prototype.getSelectionRange=function(){return this.selection.getRange()},A.prototype.selectAll=function(){this.selection.selectAll()},A.prototype.clearSelection=function(){this.selection.clearSelection()},A.prototype.moveCursorTo=function(_,L){this.selection.moveCursorTo(_,L)},A.prototype.moveCursorToPosition=function(_){this.selection.moveCursorToPosition(_)},A.prototype.jumpToMatching=function(_,L){var O=this.getCursorPosition(),V=new x(this.session,O.row,O.column),B=V.getCurrentToken(),W=0;B&&B.type.indexOf("tag-name")!==-1&&(B=V.stepBackward());var G=B||V.stepForward();if(G){var J,K=!1,Q={},X=O.column-G.start,Z,re={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(G.value.match(/[{}()\[\]]/g)){for(;X<G.value.length&&!K;X++)if(re[G.value[X]])switch(Z=re[G.value[X]]+"."+G.type.replace("rparen","lparen"),isNaN(Q[Z])&&(Q[Z]=0),G.value[X]){case"(":case"[":case"{":Q[Z]++;break;case")":case"]":case"}":Q[Z]--,Q[Z]===-1&&(J="bracket",K=!0);break}}else G.type.indexOf("tag-name")!==-1&&(isNaN(Q[G.value])&&(Q[G.value]=0),B.value==="<"&&W>1?Q[G.value]++:B.value==="</"&&Q[G.value]--,Q[G.value]===-1&&(J="tag",K=!0));K||(B=G,W++,G=V.stepForward(),X=0)}while(G&&!K);if(J){var se,he;if(J==="bracket")se=this.session.getBracketRange(O),se||(se=new g(V.getCurrentTokenRow(),V.getCurrentTokenColumn()+X-1,V.getCurrentTokenRow(),V.getCurrentTokenColumn()+X-1),he=se.start,(L||he.row===O.row&&Math.abs(he.column-O.column)<2)&&(se=this.session.getBracketRange(he)));else if(J==="tag"){if(!G||G.type.indexOf("tag-name")===-1)return;if(se=new g(V.getCurrentTokenRow(),V.getCurrentTokenColumn()-2,V.getCurrentTokenRow(),V.getCurrentTokenColumn()-2),se.compare(O.row,O.column)===0){var ce=this.session.getMatchingTags(O);ce&&(ce.openTag.contains(O.row,O.column)?(se=ce.closeTag,he=se.start):(se=ce.openTag,ce.closeTag.start.row===O.row&&ce.closeTag.start.column===O.column?he=se.end:he=se.start))}he=he||se.start}he=se&&se.cursor||he,he&&(_?se&&L?this.selection.setRange(se):se&&se.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(he.row,he.column):this.selection.moveTo(he.row,he.column))}}},A.prototype.gotoLine=function(_,L,O){this.selection.clearSelection(),this.session.unfold({row:_-1,column:L||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(_-1,L||0),this.isRowFullyVisible(_-1)||this.scrollToLine(_-1,!0,O)},A.prototype.navigateTo=function(_,L){this.selection.moveTo(_,L)},A.prototype.navigateUp=function(_){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var L=this.selection.anchor.getPosition();return this.moveCursorToPosition(L)}this.selection.clearSelection(),this.selection.moveCursorBy(-_||-1,0)},A.prototype.navigateDown=function(_){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var L=this.selection.anchor.getPosition();return this.moveCursorToPosition(L)}this.selection.clearSelection(),this.selection.moveCursorBy(_||1,0)},A.prototype.navigateLeft=function(_){if(this.selection.isEmpty())for(_=_||1;_--;)this.selection.moveCursorLeft();else{var L=this.getSelectionRange().start;this.moveCursorToPosition(L)}this.clearSelection()},A.prototype.navigateRight=function(_){if(this.selection.isEmpty())for(_=_||1;_--;)this.selection.moveCursorRight();else{var L=this.getSelectionRange().end;this.moveCursorToPosition(L)}this.clearSelection()},A.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},A.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},A.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},A.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},A.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},A.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},A.prototype.replace=function(_,L){L&&this.$search.set(L);var O=this.$search.find(this.session),V=0;return O&&(this.$tryReplace(O,_)&&(V=1),this.selection.setSelectionRange(O),this.renderer.scrollSelectionIntoView(O.start,O.end)),V},A.prototype.replaceAll=function(_,L){L&&this.$search.set(L);var O=this.$search.findAll(this.session),V=0;if(!O.length)return V;var B=this.getSelectionRange();this.selection.moveTo(0,0);for(var W=O.length-1;W>=0;--W)this.$tryReplace(O[W],_)&&V++;return this.selection.setSelectionRange(B),V},A.prototype.$tryReplace=function(_,L){var O=this.session.getTextRange(_);return L=this.$search.replace(O,L),L!==null?(_.end=this.session.replace(_,L),_):null},A.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},A.prototype.find=function(_,L,O){L||(L={}),typeof _=="string"||_ instanceof RegExp?L.needle=_:typeof _=="object"&&a.mixin(L,_);var V=this.selection.getRange();L.needle==null&&(_=this.session.getTextRange(V)||this.$search.$options.needle,_||(V=this.session.getWordRange(V.start.row,V.start.column),_=this.session.getTextRange(V)),this.$search.set({needle:_})),this.$search.set(L),L.start||this.$search.set({start:V});var B=this.$search.find(this.session);if(L.preventScroll)return B;if(B)return this.revealRange(B,O),B;L.backwards?V.start=V.end:V.end=V.start,this.selection.setRange(V)},A.prototype.findNext=function(_,L){this.find({skipCurrent:!0,backwards:!1},_,L)},A.prototype.findPrevious=function(_,L){this.find(_,{skipCurrent:!0,backwards:!0},L)},A.prototype.revealRange=function(_,L){this.session.unfold(_),this.selection.setSelectionRange(_);var O=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(_.start,_.end,.5),L!==!1&&this.renderer.animateScrolling(O)},A.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},A.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},A.prototype.destroy=function(){this.destroyed=!0,this.$toDestroy&&(this.$toDestroy.forEach(function(_){_.destroy()}),this.$toDestroy=[]),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},A.prototype.setAutoScrollEditorIntoView=function(_){if(_){var L,O=this,V=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var B=this.$scrollAnchor;B.style.cssText="position:absolute",this.container.insertBefore(B,this.container.firstChild);var W=this.on("changeSelection",function(){V=!0}),G=this.renderer.on("beforeRender",function(){V&&(L=O.renderer.container.getBoundingClientRect())}),J=this.renderer.on("afterRender",function(){if(V&&L&&(O.isFocused()||O.searchBox&&O.searchBox.isFocused())){var K=O.renderer,Q=K.$cursorLayer.$pixelPos,X=K.layerConfig,Z=Q.top-X.offset;Q.top>=0&&Z+L.top<0?V=!0:Q.top<X.height&&Q.top+L.top+X.lineHeight>window.innerHeight?V=!1:V=null,V!=null&&(B.style.top=Z+"px",B.style.left=Q.left+"px",B.style.height=X.lineHeight+"px",B.scrollIntoView(V)),V=L=null}});this.setAutoScrollEditorIntoView=function(K){K||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",W),this.renderer.off("afterRender",J),this.renderer.off("beforeRender",G))}}},A.prototype.$resetCursorStyle=function(){var _=this.$cursorStyle||"ace",L=this.renderer.$cursorLayer;L&&(L.setSmoothBlinking(/smooth/.test(_)),L.isBlinking=!this.$readOnly&&_!="wide",m.setCssClass(L.element,"ace_slim-cursors",/slim/.test(_)))},A.prototype.prompt=function(_,L,O){var V=this;R.loadModule("ace/ext/prompt",function(B){B.prompt(V,_,L,O)})},A})();C.$uid=0,C.prototype.curOp=null,C.prototype.prevOp={},C.prototype.$mergeableCommands=["backspace","del","insertstring"],C.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],a.implement(C.prototype,y),R.defineOptions(C.prototype,"editor",{selectionStyle:{set:function(A){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:A})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(A){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(A){var _=this;if(this.textInput.setReadOnly(A),!this.destroyed){this.$resetCursorStyle(),this.$readOnlyCallback||(this.$readOnlyCallback=function(O){var V=!1;if(O&&O.type=="keydown"){if(O&&O.key&&!O.ctrlKey&&!O.metaKey&&(O.key==" "&&O.preventDefault(),V=O.key.length==1),!V)return}else O&&O.type!=="exec"&&(V=!0);if(V){_.hoverTooltip||(_.hoverTooltip=new P);var B=m.createElement("div");B.textContent=E("editor.tooltip.disable-editing","Editing is disabled"),_.hoverTooltip.isOpen||_.hoverTooltip.showForRange(_,_.getSelectionRange(),B)}else _.hoverTooltip&&_.hoverTooltip.isOpen&&_.hoverTooltip.hide()});var L=this.textInput.getElement();A?(I.addListener(L,"keydown",this.$readOnlyCallback,this),this.commands.on("exec",this.$readOnlyCallback),this.commands.on("commandUnavailable",this.$readOnlyCallback)):(I.removeListener(L,"keydown",this.$readOnlyCallback),this.commands.off("exec",this.$readOnlyCallback),this.commands.off("commandUnavailable",this.$readOnlyCallback),this.hoverTooltip&&(this.hoverTooltip.destroy(),this.hoverTooltip=null))}},initialValue:!1},copyWithEmptySelection:{set:function(A){this.textInput.setCopyWithEmptySelection(A)},initialValue:!1},cursorStyle:{set:function(A){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(A){this.setAutoScrollEditorIntoView(A)}},keyboardHandler:{set:function(A){this.setKeyboardHandler(A)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(A){this.session.setValue(A)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(A){this.setSession(A)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(A){this.renderer.$gutterLayer.setShowLineNumbers(A),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),A&&this.$relativeLineNumbers?b.attach(this):b.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(A){this.$showLineNumbers&&A?b.attach(this):b.detach(this)}},placeholder:{set:function(A){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var _=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(_&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),m.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!_&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),m.addCssClass(this.container,"ace_hasPlaceholder");var L=m.createElement("div");L.className="ace_placeholder",L.textContent=this.$placeholder||"",this.renderer.placeholderNode=L,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!_&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(A){var _={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(V){V.blur(),V.renderer.scroller.focus()},readOnly:!0},L=function(V){if(V.target==this.renderer.scroller&&V.keyCode===T.enter){V.preventDefault();var B=this.getCursorPosition().row;this.isRowVisible(B)||this.scrollToLine(B,!0,!0),this.focus()}},O;A?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(d.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",E("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",E("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",L.bind(this)),this.commands.addCommand(_),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",E("editor.gutter.aria-roledescription","editor gutter")),this.renderer.$gutter.setAttribute("aria-label",E("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),O||(O=new S(this)),O.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",L.bind(this)),this.commands.removeCommand(_),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),O&&O.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(A){this.$textInputAriaLabel=A},initialValue:""},enableMobileMenu:{set:function(A){this.$enableMobileMenu=A},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var b={getText:function(A,_){return(Math.abs(A.selection.lead.row-_)||_+1+(_<9?"":""))+""},getWidth:function(A,_,L){return Math.max(_.toString().length,(L.lastRow+1).toString().length,2)*L.characterWidth},update:function(A,_){_.renderer.$loop.schedule(_.renderer.CHANGE_GUTTER)},attach:function(A){A.renderer.$gutterLayer.$renderer=this,A.on("changeSelection",this.update),this.update(null,A)},detach:function(A){A.renderer.$gutterLayer.$renderer==this&&(A.renderer.$gutterLayer.$renderer=null),A.off("changeSelection",this.update),this.update(null,A)}};n.Editor=C}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(t,n,i){var s=t("../lib/dom"),a=(function(){function m(o,d){this.element=o,this.canvasHeight=d||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return m.prototype.moveContainer=function(o){s.translate(this.element,0,-(o.firstRowScreen*o.lineHeight%this.canvasHeight)-o.offset*this.$offsetCoefficient)},m.prototype.pageChanged=function(o,d){return Math.floor(o.firstRowScreen*o.lineHeight/this.canvasHeight)!==Math.floor(d.firstRowScreen*d.lineHeight/this.canvasHeight)},m.prototype.computeLineTop=function(o,d,l){var f=d.firstRowScreen*d.lineHeight,u=Math.floor(f/this.canvasHeight),h=l.documentToScreenRow(o,0)*d.lineHeight;return h-u*this.canvasHeight},m.prototype.computeLineHeight=function(o,d,l){return d.lineHeight*l.getRowLineCount(o)},m.prototype.getLength=function(){return this.cells.length},m.prototype.get=function(o){return this.cells[o]},m.prototype.shift=function(){this.$cacheCell(this.cells.shift())},m.prototype.pop=function(){this.$cacheCell(this.cells.pop())},m.prototype.push=function(o){if(Array.isArray(o)){this.cells.push.apply(this.cells,o);for(var d=s.createFragment(this.element),l=0;l<o.length;l++)d.appendChild(o[l].element);this.element.appendChild(d)}else this.cells.push(o),this.element.appendChild(o.element)},m.prototype.unshift=function(o){if(Array.isArray(o)){this.cells.unshift.apply(this.cells,o);for(var d=s.createFragment(this.element),l=0;l<o.length;l++)d.appendChild(o[l].element);this.element.firstChild?this.element.insertBefore(d,this.element.firstChild):this.element.appendChild(d)}else this.cells.unshift(o),this.element.insertAdjacentElement("afterbegin",o.element)},m.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},m.prototype.$cacheCell=function(o){o&&(o.element.remove(),this.cellCache.push(o))},m.prototype.createCell=function(o,d,l,f){var u=this.cellCache.pop();if(!u){var h=s.createElement("div");f&&f(h),this.element.appendChild(h),u={element:h,text:"",row:o}}return u.row=o,u},m})();n.Lines=a}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(t,n,i){var s=t("../lib/dom"),a=t("../lib/oop"),m=t("../lib/lang"),o=t("../lib/event_emitter").EventEmitter,d=t("./lines").Lines,l=t("../config").nls,f=(function(){function h(c){this.$showCursorMarker=null,this.element=s.createElement("div"),this.element.className="ace_layer ace_gutter-layer",c.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new d(this.element),this.$lines.$offsetCoefficient=1}return h.prototype.setSession=function(c){this.session&&this.session.off("change",this.$updateAnnotations),this.session=c,c&&c.on("change",this.$updateAnnotations)},h.prototype.addGutterDecoration=function(c,p){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(c,p)},h.prototype.removeGutterDecoration=function(c,p){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(c,p)},h.prototype.setAnnotations=function(c){this.$annotations=[];for(var p=0;p<c.length;p++){var g=c[p],y=g.row,w=this.$annotations[y];w||(w=this.$annotations[y]={text:[],type:[],displayText:[]});var M=g.text,R=g.text,x=g.type;M=M?m.escapeHTML(M):g.html||"",R=R||g.html||"",w.text.indexOf(M)===-1&&(w.text.push(M),w.type.push(x),w.displayText.push(R));var S=g.className;S?w.className=S:x==="error"?w.className=" ace_error":x==="security"&&!/\bace_error\b/.test(w.className)?w.className=" ace_security":x==="warning"&&!/\bace_(error|security)\b/.test(w.className)?w.className=" ace_warning":x==="info"&&!w.className?w.className=" ace_info":x==="hint"&&!w.className&&(w.className=" ace_hint")}},h.prototype.$updateAnnotations=function(c){if(this.$annotations.length){var p=c.start.row,g=c.end.row-p;if(g!==0)if(c.action=="remove")this.$annotations.splice(p,g+1,null);else{var y=new Array(g+1);y.unshift(p,1),this.$annotations.splice.apply(this.$annotations,y)}}},h.prototype.update=function(c){this.config=c;var p=this.session,g=c.firstRow,y=Math.min(c.lastRow+c.gutterOffset,p.getLength()-1);this.oldLastRow=y,this.config=c,this.$lines.moveContainer(c),this.$updateCursorRow();for(var w=p.getNextFoldLine(g),M=w?w.start.row:1/0,R=null,x=-1,S=g;;){if(S>M&&(S=w.end.row+1,w=p.getNextFoldLine(S,w),M=w?w.start.row:1/0),S>y){for(;this.$lines.getLength()>x+1;)this.$lines.pop();break}R=this.$lines.get(++x),R?R.row=S:(R=this.$lines.createCell(S,c,this.session,u),this.$lines.push(R)),this.$renderCell(R,c,w,S),S++}this._signal("afterRender"),this.$updateGutterWidth(c),this.$showCursorMarker&&this.$highlightGutterLine&&this.$updateCursorMarker()},h.prototype.$updateGutterWidth=function(c){var p=this.session,g=p.gutterRenderer||this.$renderer,y=p.$firstLineNumber,w=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||p.$useWrapMode)&&(w=p.getLength()+y-1);var M=g?g.getWidth(p,w,c):w.toString().length*c.characterWidth,R=this.$padding||this.$computePadding();M+=R.left+R.right,M!==this.gutterWidth&&!isNaN(M)&&(this.gutterWidth=M,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",M))},h.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var c=this.session.selection.getCursor();this.$cursorRow!==c.row&&(this.$cursorRow=c.row)}},h.prototype.updateLineHighlight=function(){if(this.$showCursorMarker&&this.$updateCursorMarker(),!!this.$highlightGutterLine){var c=this.session.selection.cursor.row;if(this.$cursorRow=c,!(this.$cursorCell&&this.$cursorCell.row==c)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var p=this.$lines.cells;this.$cursorCell=null;for(var g=0;g<p.length;g++){var y=p[g];if(y.row>=this.$cursorRow){if(y.row>this.$cursorRow){var w=this.session.getFoldLine(this.$cursorRow);if(g>0&&w&&w.start.row==p[g-1].row)y=p[g-1];else break}y.element.className="ace_gutter-active-line "+y.element.className,this.$cursorCell=y;break}}}}},h.prototype.$updateCursorMarker=function(){if(this.session){var c=this.session;this.$highlightElement||(this.$highlightElement=s.createElement("div"),this.$highlightElement.className="ace_gutter-cursor",this.$highlightElement.style.pointerEvents="none",this.element.appendChild(this.$highlightElement));var p=c.selection.cursor,g=this.config,y=this.$lines,w=g.firstRowScreen*g.lineHeight,M=Math.floor(w/y.canvasHeight),R=c.documentToScreenRow(p)*g.lineHeight,x=R-M*y.canvasHeight;s.setStyle(this.$highlightElement.style,"height",g.lineHeight+"px"),s.setStyle(this.$highlightElement.style,"top",x+"px")}},h.prototype.scrollLines=function(c){var p=this.config;if(this.config=c,this.$updateCursorRow(),this.$lines.pageChanged(p,c))return this.update(c);this.$lines.moveContainer(c);var g=Math.min(c.lastRow+c.gutterOffset,this.session.getLength()-1),y=this.oldLastRow;if(this.oldLastRow=g,!p||y<c.firstRow)return this.update(c);if(g<p.firstRow)return this.update(c);if(p.firstRow<c.firstRow)for(var w=this.session.getFoldedRowCount(p.firstRow,c.firstRow-1);w>0;w--)this.$lines.shift();if(y>g)for(var w=this.session.getFoldedRowCount(g+1,y);w>0;w--)this.$lines.pop();c.firstRow<p.firstRow&&this.$lines.unshift(this.$renderLines(c,c.firstRow,p.firstRow-1)),g>y&&this.$lines.push(this.$renderLines(c,y+1,g)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(c)},h.prototype.$renderLines=function(c,p,g){for(var y=[],w=p,M=this.session.getNextFoldLine(w),R=M?M.start.row:1/0;w>R&&(w=M.end.row+1,M=this.session.getNextFoldLine(w,M),R=M?M.start.row:1/0),!(w>g);){var x=this.$lines.createCell(w,c,this.session,u);this.$renderCell(x,c,M,w),y.push(x),w++}return y},h.prototype.$renderCell=function(c,p,g,y){var w=c.element,M=this.session,R=w.childNodes[0],x=w.childNodes[1],S=w.childNodes[2],E=w.childNodes[3],k=S.firstChild,T=M.$firstLineNumber,I=M.$breakpoints,P=M.$decorations,C=M.gutterRenderer||this.$renderer,b=this.$showFoldWidgets&&M.foldWidgets,A=g?g.start.row:Number.MAX_VALUE,_=p.lineHeight+"px",L=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",O=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",V=(C?C.getText(M,y):y+T).toString();if(this.$highlightGutterLine&&(y==this.$cursorRow||g&&y<this.$cursorRow&&y>=A&&this.$cursorRow<=g.end.row)&&(L+="ace_gutter-active-line ",this.$cursorCell!=c&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=c)),I[y]&&(L+=I[y]),P[y]&&(L+=P[y]),this.$annotations[y]&&y!==A&&(L+=this.$annotations[y].className),b){var B=b[y];B==null&&(B=b[y]=M.getFoldWidget(y))}if(B){var W="ace_fold-widget ace_"+B,G=B=="start"&&y==A&&y<g.end.row;if(G){W+=" ace_closed";for(var J="",K=!1,Q=y+1;Q<=g.end.row;Q++)if(this.$annotations[Q]){if(this.$annotations[Q].className===" ace_error"){K=!0,J=" ace_error_fold";break}this.$annotations[Q].className===" ace_security"?(K=!0,J=" ace_security_fold"):this.$annotations[Q].className===" ace_warning"&&J!==" ace_security_fold"&&(K=!0,J=" ace_warning_fold")}L+=J}else W+=" ace_open";x.className!=W&&(x.className=W),s.setStyle(x.style,"height",_),s.setStyle(x.style,"display","inline-block"),x.setAttribute("role","button"),x.setAttribute("tabindex","-1");var X=M.getFoldWidgetRange(y);X?x.setAttribute("aria-label",l("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[X.start.row+1,X.end.row+1])):g?x.setAttribute("aria-label",l("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[g.start.row+1,g.end.row+1])):x.setAttribute("aria-label",l("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[y+1])),G?(x.setAttribute("aria-expanded","false"),x.setAttribute("title",l("gutter.code-folding.closed.title","Unfold code"))):(x.setAttribute("aria-expanded","true"),x.setAttribute("title",l("gutter.code-folding.open.title","Fold code")))}else x&&(s.setStyle(x.style,"display","none"),x.setAttribute("tabindex","0"),x.removeAttribute("role"),x.removeAttribute("aria-label"));var Z=this.session.$gutterCustomWidgets[y];if(Z?this.$addCustomWidget(y,Z,c):E&&this.$removeCustomWidget(y,c),K&&this.$showFoldedAnnotations){S.className="ace_gutter_annotation",k.className=O,k.className+=J,s.setStyle(k.style,"height",_),s.setStyle(S.style,"display","block"),s.setStyle(S.style,"height",_);var re;switch(J){case" ace_error_fold":re=l("gutter.annotation.aria-label.error","Error, read annotations row $0",[V]);break;case" ace_security_fold":re=l("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[V]);break;case" ace_warning_fold":re=l("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[V]);break}S.setAttribute("aria-label",re),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else if(this.$annotations[y]){S.className="ace_gutter_annotation",k.className=O,this.$useSvgGutterIcons?k.className+=this.$annotations[y].className:w.classList.add(this.$annotations[y].className.replace(" ","")),s.setStyle(k.style,"height",_),s.setStyle(S.style,"display","block"),s.setStyle(S.style,"height",_);var re;switch(this.$annotations[y].className){case" ace_error":re=l("gutter.annotation.aria-label.error","Error, read annotations row $0",[V]);break;case" ace_security":re=l("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[V]);break;case" ace_warning":re=l("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[V]);break;case" ace_info":re=l("gutter.annotation.aria-label.info","Info, read annotations row $0",[V]);break;case" ace_hint":re=l("gutter.annotation.aria-label.hint","Suggestion, read annotations row $0",[V]);break}S.setAttribute("aria-label",re),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")}else s.setStyle(S.style,"display","none"),S.removeAttribute("aria-label"),S.removeAttribute("role"),S.setAttribute("tabindex","0");return V!==R.data&&(R.data=V),w.className!=L&&(w.className=L),s.setStyle(c.element.style,"height",this.$lines.computeLineHeight(y,p,M)+"px"),s.setStyle(c.element.style,"top",this.$lines.computeLineTop(y,p,M)+"px"),c.text=V,S.style.display==="none"&&x.style.display==="none"&&!Z?c.element.setAttribute("aria-hidden",!0):c.element.setAttribute("aria-hidden",!1),c},h.prototype.setHighlightGutterLine=function(c){this.$highlightGutterLine=c,!c&&this.$highlightElement&&(this.$highlightElement.remove(),this.$highlightElement=null)},h.prototype.setShowLineNumbers=function(c){this.$renderer=!c&&{getWidth:function(){return 0},getText:function(){return""}}},h.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},h.prototype.setShowFoldWidgets=function(c){c?s.addCssClass(this.element,"ace_folding-enabled"):s.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=c,this.$padding=null},h.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},h.prototype.$hideFoldWidget=function(c,p){var g=p||this.$getGutterCell(c);if(g&&g.element){var y=g.element.childNodes[1];y&&s.setStyle(y.style,"display","none")}},h.prototype.$showFoldWidget=function(c,p){var g=p||this.$getGutterCell(c);if(g&&g.element){var y=g.element.childNodes[1];y&&this.session.foldWidgets&&this.session.foldWidgets[g.row]&&s.setStyle(y.style,"display","inline-block")}},h.prototype.$getGutterCell=function(c){var p=this.$lines.cells,g=0,y=p.length-1;if(!(c<p[0].row||c>p[y].row)){for(;g<=y;){var w=Math.floor((g+y)/2),M=p[w];if(M.row>c)y=w-1;else if(M.row<c)g=w+1;else return M}return M}},h.prototype.$addCustomWidget=function(c,p,g){var y=p.className,w=p.label,M=p.title,R=p.callbacks;this.session.$gutterCustomWidgets[c]={className:y,label:w,title:M,callbacks:R},this.$hideFoldWidget(c,g);var x=g||this.$getGutterCell(c);if(x&&x.element){var S=x.element.querySelector(".ace_custom-widget");S&&S.remove(),S=s.createElement("span"),S.className="ace_custom-widget ".concat(y),S.setAttribute("tabindex","-1"),S.setAttribute("role","button"),S.setAttribute("aria-label",w),S.setAttribute("title",M),s.setStyle(S.style,"display","inline-block"),s.setStyle(S.style,"height","inherit"),R&&R.onClick&&S.addEventListener("click",function(E){R.onClick(E,c),E.stopPropagation()}),x.element.appendChild(S)}},h.prototype.$removeCustomWidget=function(c,p){delete this.session.$gutterCustomWidgets[c],this.$showFoldWidget(c,p);var g=p||this.$getGutterCell(c);if(g&&g.element){var y=g.element.querySelector(".ace_custom-widget");y&&g.element.removeChild(y)}},h.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var c=s.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(c.borderLeftWidth)||0)+(parseInt(c.paddingLeft)||0)+1,this.$padding.right=(parseInt(c.borderRightWidth)||0)+(parseInt(c.paddingRight)||0),this.$padding},h.prototype.getRegion=function(c){var p=this.$padding||this.$computePadding(),g=this.element.getBoundingClientRect();if(c.x<p.left+g.left)return"markers";if(this.$showFoldWidgets&&c.x>g.right-p.right)return"foldWidgets"},h})();f.prototype.$fixedWidth=!1,f.prototype.$highlightGutterLine=!0,f.prototype.$renderer=void 0,f.prototype.$showLineNumbers=!0,f.prototype.$showFoldWidgets=!0,a.implement(f.prototype,o);function u(h){var c=document.createTextNode("");h.appendChild(c);var p=s.createElement("span");h.appendChild(p);var g=s.createElement("span");h.appendChild(g);var y=s.createElement("span");return g.appendChild(y),h}n.Gutter=f}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(t,n,i){var s=t("../range").Range,a=t("../lib/dom"),m=(function(){function d(l){this.element=a.createElement("div"),this.element.className="ace_layer ace_marker-layer",l.appendChild(this.element)}return d.prototype.setPadding=function(l){this.$padding=l},d.prototype.setSession=function(l){this.session=l},d.prototype.setMarkers=function(l){this.markers=l},d.prototype.elt=function(l,f){var u=this.i!=-1&&this.element.childNodes[this.i];u?this.i++:(u=document.createElement("div"),this.element.appendChild(u),this.i=-1),u.style.cssText=f,u.className=l},d.prototype.update=function(l){if(l){this.config=l,this.i=0;var f;for(var u in this.markers){var h=this.markers[u];if(!h.range){h.update(f,this,this.session,l);continue}var c=h.range.clipRows(l.firstRow,l.lastRow);if(!c.isEmpty())if(c=c.toScreenRange(this.session),h.renderer){var p=this.$getTop(c.start.row,l),g=this.$padding+c.start.column*l.characterWidth;h.renderer(f,c,g,p,l)}else h.type=="fullLine"?this.drawFullLineMarker(f,c,h.clazz,l):h.type=="screenLine"?this.drawScreenLineMarker(f,c,h.clazz,l):c.isMultiLine()?h.type=="text"?this.drawTextMarker(f,c,h.clazz,l):this.drawMultiLineMarker(f,c,h.clazz,l):this.drawSingleLineMarker(f,c,h.clazz+" ace_start ace_br15",l)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},d.prototype.$getTop=function(l,f){return(l-f.firstRowScreen)*f.lineHeight},d.prototype.drawTextMarker=function(l,f,u,h,c){for(var p=this.session,g=f.start.row,y=f.end.row,w=g,M=0,R=0,x=p.getScreenLastRowColumn(w),S=new s(w,f.start.column,w,R);w<=y;w++)S.start.row=S.end.row=w,S.start.column=w==g?f.start.column:p.getRowWrapIndent(w),S.end.column=x,M=R,R=x,x=w+1<y?p.getScreenLastRowColumn(w+1):w==y?0:f.end.column,this.drawSingleLineMarker(l,S,u+(w==g?" ace_start":"")+" ace_br"+o(w==g||w==g+1&&f.start.column,M<R,R>x,w==y),h,w==y?0:1,c)},d.prototype.drawMultiLineMarker=function(l,f,u,h,c){var p=this.$padding,g=h.lineHeight,y=this.$getTop(f.start.row,h),w=p+f.start.column*h.characterWidth;if(c=c||"",this.session.$bidiHandler.isBidiRow(f.start.row)){var M=f.clone();M.end.row=M.start.row,M.end.column=this.session.getLine(M.start.row).length,this.drawBidiSingleLineMarker(l,M,u+" ace_br1 ace_start",h,null,c)}else this.elt(u+" ace_br1 ace_start","height:"+g+"px;right:"+p+"px;top:"+y+"px;left:"+w+"px;"+(c||""));if(this.session.$bidiHandler.isBidiRow(f.end.row)){var M=f.clone();M.start.row=M.end.row,M.start.column=0,this.drawBidiSingleLineMarker(l,M,u+" ace_br12",h,null,c)}else{y=this.$getTop(f.end.row,h);var R=f.end.column*h.characterWidth;this.elt(u+" ace_br12","height:"+g+"px;width:"+R+"px;top:"+y+"px;left:"+p+"px;"+(c||""))}if(g=(f.end.row-f.start.row-1)*h.lineHeight,!(g<=0)){y=this.$getTop(f.start.row+1,h);var x=(f.start.column?1:0)|(f.end.column?0:8);this.elt(u+(x?" ace_br"+x:""),"height:"+g+"px;right:"+p+"px;top:"+y+"px;left:"+p+"px;"+(c||""))}},d.prototype.drawSingleLineMarker=function(l,f,u,h,c,p){if(this.session.$bidiHandler.isBidiRow(f.start.row))return this.drawBidiSingleLineMarker(l,f,u,h,c,p);var g=h.lineHeight,y=(f.end.column+(c||0)-f.start.column)*h.characterWidth,w=this.$getTop(f.start.row,h),M=this.$padding+f.start.column*h.characterWidth;this.elt(u,"height:"+g+"px;width:"+y+"px;top:"+w+"px;left:"+M+"px;"+(p||""))},d.prototype.drawBidiSingleLineMarker=function(l,f,u,h,c,p){var g=h.lineHeight,y=this.$getTop(f.start.row,h),w=this.$padding,M=this.session.$bidiHandler.getSelections(f.start.column,f.end.column);M.forEach(function(R){this.elt(u,"height:"+g+"px;width:"+(R.width+(c||0))+"px;top:"+y+"px;left:"+(w+R.left)+"px;"+(p||""))},this)},d.prototype.drawFullLineMarker=function(l,f,u,h,c){var p=this.$getTop(f.start.row,h),g=h.lineHeight;f.start.row!=f.end.row&&(g+=this.$getTop(f.end.row,h)-p),this.elt(u,"height:"+g+"px;top:"+p+"px;left:0;right:0;"+(c||""))},d.prototype.drawScreenLineMarker=function(l,f,u,h,c){var p=this.$getTop(f.start.row,h),g=h.lineHeight;this.elt(u,"height:"+g+"px;top:"+p+"px;left:0;right:0;"+(c||""))},d})();m.prototype.$padding=0;function o(d,l,f,u){return(d?1:0)|(l?2:0)|(f?4:0)|(u?8:0)}n.Marker=m}),ace.define("ace/layer/text_util",["require","exports","module"],function(t,n,i){var s=new Set(["text","rparen","lparen"]);n.isTextToken=function(a){return s.has(a)}}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(t,n,i){var s=t("../lib/oop"),a=t("../lib/dom"),m=t("../lib/lang"),o=t("./lines").Lines,d=t("../lib/event_emitter").EventEmitter,l=t("../config").nls,f=t("./text_util").isTextToken,u=(function(){function h(c){this.dom=a,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",c.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new o(this.element)}return h.prototype.$updateEolChar=function(){var c=this.session.doc,p=c.getNewLineCharacter()==`
`&&c.getNewLineMode()!="windows",g=p?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=g)return this.EOL_CHAR=g,!0},h.prototype.setPadding=function(c){this.$padding=c,this.element.style.margin="0 "+c+"px"},h.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},h.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},h.prototype.$setFontMetrics=function(c){this.$fontMetrics=c,this.$fontMetrics.on("changeCharacterSize",function(p){this._signal("changeCharacterSize",p)}.bind(this)),this.$pollSizeChanges()},h.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},h.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},h.prototype.setSession=function(c){this.session=c,c&&this.$computeTabString()},h.prototype.setShowInvisibles=function(c){return this.showInvisibles==c?!1:(this.showInvisibles=c,typeof c=="string"?(this.showSpaces=/tab/i.test(c),this.showTabs=/space/i.test(c),this.showEOL=/eol/i.test(c)):this.showSpaces=this.showTabs=this.showEOL=c,this.$computeTabString(),!0)},h.prototype.setDisplayIndentGuides=function(c){return this.displayIndentGuides==c?!1:(this.displayIndentGuides=c,this.$computeTabString(),!0)},h.prototype.setHighlightIndentGuides=function(c){return this.$highlightIndentGuides===c?!1:(this.$highlightIndentGuides=c,c)},h.prototype.$computeTabString=function(){var c=this.session.getTabSize();this.tabSize=c;for(var p=this.$tabStrings=[0],g=1;g<c+1;g++)if(this.showTabs){var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_tab",y.textContent=m.stringRepeat(this.TAB_CHAR,g),p.push(y)}else p.push(this.dom.createTextNode(m.stringRepeat(" ",g),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var w="ace_indent-guide",M=this.showSpaces?" ace_invisible ace_invisible_space":"",R=this.showSpaces?m.stringRepeat(this.SPACE_CHAR,this.tabSize):m.stringRepeat(" ",this.tabSize),x=this.showTabs?" ace_invisible ace_invisible_tab":"",S=this.showTabs?m.stringRepeat(this.TAB_CHAR,this.tabSize):R,y=this.dom.createElement("span");y.className=w+M,y.textContent=R,this.$tabStrings[" "]=y;var y=this.dom.createElement("span");y.className=w+x,y.textContent=S,this.$tabStrings["	"]=y}},h.prototype.updateLines=function(c,p,g){if(this.config.lastRow!=c.lastRow||this.config.firstRow!=c.firstRow)return this.update(c);this.config=c;for(var y=Math.max(p,c.firstRow),w=Math.min(g,c.lastRow),M=this.element.childNodes,R=0,S=c.firstRow;S<y;S++){var E=this.session.getFoldLine(S);if(E)if(E.containsRow(y)){y=E.start.row;break}else S=E.end.row;R++}for(var x=!1,S=y,E=this.session.getNextFoldLine(S),k=E?E.start.row:1/0;S>k&&(S=E.end.row+1,E=this.session.getNextFoldLine(S,E),k=E?E.start.row:1/0),!(S>w);){var T=M[R++];if(T){this.dom.removeChildren(T),this.$renderLine(T,S,S==k?E:!1),x&&(T.style.top=this.$lines.computeLineTop(S,c,this.session)+"px");var I=c.lineHeight*this.session.getRowLength(S)+"px";T.style.height!=I&&(x=!0,T.style.height=I)}S++}if(x)for(;R<this.$lines.cells.length;){var P=this.$lines.cells[R++];P.element.style.top=this.$lines.computeLineTop(P.row,c,this.session)+"px"}},h.prototype.scrollLines=function(c){var p=this.config;if(this.config=c,this.$lines.pageChanged(p,c))return this.update(c);this.$lines.moveContainer(c);var g=c.lastRow,y=p?p.lastRow:-1;if(!p||y<c.firstRow)return this.update(c);if(g<p.firstRow)return this.update(c);if(!p||p.lastRow<c.firstRow)return this.update(c);if(c.lastRow<p.firstRow)return this.update(c);if(p.firstRow<c.firstRow)for(var w=this.session.getFoldedRowCount(p.firstRow,c.firstRow-1);w>0;w--)this.$lines.shift();if(p.lastRow>c.lastRow)for(var w=this.session.getFoldedRowCount(c.lastRow+1,p.lastRow);w>0;w--)this.$lines.pop();c.firstRow<p.firstRow&&this.$lines.unshift(this.$renderLinesFragment(c,c.firstRow,p.firstRow-1)),c.lastRow>p.lastRow&&this.$lines.push(this.$renderLinesFragment(c,p.lastRow+1,c.lastRow)),this.$highlightIndentGuide()},h.prototype.$renderLinesFragment=function(c,p,g){for(var y=[],w=p,M=this.session.getNextFoldLine(w),R=M?M.start.row:1/0;w>R&&(w=M.end.row+1,M=this.session.getNextFoldLine(w,M),R=M?M.start.row:1/0),!(w>g);){var x=this.$lines.createCell(w,c,this.session),S=x.element;this.dom.removeChildren(S),a.setStyle(S.style,"height",this.$lines.computeLineHeight(w,c,this.session)+"px"),a.setStyle(S.style,"top",this.$lines.computeLineTop(w,c,this.session)+"px"),this.$renderLine(S,w,w==R?M:!1),this.$useLineGroups()?S.className="ace_line_group":S.className="ace_line",y.push(x),w++}return y},h.prototype.update=function(c){this.$lines.moveContainer(c),this.config=c;for(var p=c.firstRow,g=c.lastRow,y=this.$lines;y.getLength();)y.pop();y.push(this.$renderLinesFragment(c,p,g))},h.prototype.$renderToken=function(c,p,g,y){for(var w=this,M=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069\u2060\u2061\u2062\u2063\u2064\u206A\u206B\u206B\u206C\u206D\u206E\u206F]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,R=this.dom.createFragment(this.element),x,S=0;x=M.exec(y);){var E=x[1],k=x[2],T=x[3],I=x[4],P=x[5];if(!(!w.showSpaces&&k)){var C=S!=x.index?y.slice(S,x.index):"";if(S=x.index+x[0].length,C&&R.appendChild(this.dom.createTextNode(C,this.element)),E){var b=w.session.getScreenTabSize(p+x.index),A=w.$tabStrings[b].cloneNode(!0);A.charCount=1,R.appendChild(A),p+=b-1}else if(k)if(w.showSpaces){var _=this.dom.createElement("span");_.className="ace_invisible ace_invisible_space",_.textContent=m.stringRepeat(w.SPACE_CHAR,k.length),R.appendChild(_)}else R.appendChild(this.dom.createTextNode(k,this.element));else if(T){var _=this.dom.createElement("span");_.className="ace_invisible ace_invisible_space ace_invalid",_.textContent=m.stringRepeat(w.SPACE_CHAR,T.length),R.appendChild(_)}else if(I){p+=1;var _=this.dom.createElement("span");_.style.width=w.config.characterWidth*2+"px",_.className=w.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",_.textContent=w.showSpaces?w.SPACE_CHAR:I,R.appendChild(_)}else if(P){p+=1;var _=this.dom.createElement("span");_.style.width=w.config.characterWidth*2+"px",_.className="ace_cjk",_.textContent=P,R.appendChild(_)}}}if(R.appendChild(this.dom.createTextNode(S?y.slice(S):y,this.element)),f(g.type))c.appendChild(R);else{var L="ace_"+g.type.replace(/\./g," ace_"),_=this.dom.createElement("span");g.type=="fold"&&(_.style.width=g.value.length*this.config.characterWidth+"px",_.setAttribute("title",l("inline-fold.closed.title","Unfold code"))),_.className=L,_.appendChild(R),c.appendChild(_)}return p+y.length},h.prototype.renderIndentGuide=function(c,p,g){var y=p.search(this.$indentGuideRe);if(y<=0||y>=g)return p;if(p[0]==" "){y-=y%this.tabSize;for(var w=y/this.tabSize,M=0;M<w;M++)c.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),p.substr(y)}else if(p[0]=="	"){for(var M=0;M<y;M++)c.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),p.substr(y)}return this.$highlightIndentGuide(),p},h.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var c=this.session.doc.$lines;if(c){var p=this.session.selection.getCursor(),g=/^\s*/.exec(this.session.doc.getLine(p.row))[0].length,y=Math.floor(g/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:y,start:p.row};var w=this.session.$bracketHighlight;if(w){for(var M=this.session.$bracketHighlight.ranges,R=0;R<M.length;R++)if(p.row!==M[R].start.row){this.$highlightIndentGuideMarker.end=M[R].start.row+1,p.row>M[R].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&c[p.row]!==""&&p.column===c[p.row].length){this.$highlightIndentGuideMarker.dir=1;for(var R=p.row+1;R<c.length;R++){var x=c[R],S=/^\s*/.exec(x)[0].length;if(x!==""&&(this.$highlightIndentGuideMarker.end=R,S<=g))break}}this.$renderHighlightIndentGuide()}}},h.prototype.$clearActiveIndentGuide=function(){for(var c=this.element.querySelectorAll(".ace_indent-guide-active"),p=0;p<c.length;p++)c[p].classList.remove("ace_indent-guide-active")},h.prototype.$setIndentGuideActive=function(c,p){var g=this.session.doc.getLine(c.row);if(g!==""){var y=c.element;if(c.element.classList&&c.element.classList.contains("ace_line_group"))if(c.element.childNodes.length>0)y=c.element.childNodes[0];else return;var w=y.childNodes;if(w){var M=w[p-1];M&&M.classList&&M.classList.contains("ace_indent-guide")&&M.classList.add("ace_indent-guide-active")}}},h.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var c=this.$lines.cells;this.$clearActiveIndentGuide();var p=this.$highlightIndentGuideMarker.indentLevel;if(p!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var g=0;g<c.length;g++){var y=c[g];if(this.$highlightIndentGuideMarker.end&&y.row>=this.$highlightIndentGuideMarker.start+1){if(y.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(y,p)}}else for(var g=c.length-1;g>=0;g--){var y=c[g];if(this.$highlightIndentGuideMarker.end&&y.row<this.$highlightIndentGuideMarker.start){if(y.row<this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(y,p)}}}},h.prototype.$createLineElement=function(c){var p=this.dom.createElement("div");return p.className="ace_line",p.style.height=this.config.lineHeight+"px",p},h.prototype.$renderWrappedLine=function(c,p,g){var y=0,w=0,M=g[0],R=0,x=this.$createLineElement();c.appendChild(x);for(var S=0;S<p.length;S++){var E=p[S],k=E.value;if(S==0&&this.displayIndentGuides){if(y=k.length,k=this.renderIndentGuide(x,k,M),!k)continue;y-=k.length}if(y+k.length<M)R=this.$renderToken(x,R,E,k),y+=k.length;else{for(;y+k.length>=M;){R=this.$renderToken(x,R,E,k.substring(0,M-y)),k=k.substring(M-y),y=M,x=this.$createLineElement(),c.appendChild(x);var T=this.dom.createTextNode(m.stringRepeat("",g.indent),this.element);T.charCount=0,x.appendChild(T),w++,R=0,M=g[w]||Number.MAX_VALUE}k.length!=0&&(y+=k.length,R=this.$renderToken(x,R,E,k))}}g[g.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(x,R,null,"",!0)},h.prototype.$renderSimpleLine=function(c,p){for(var g=0,y=0;y<p.length;y++){var w=p[y],M=w.value;if(!(y==0&&this.displayIndentGuides&&(M=this.renderIndentGuide(c,M),!M))){if(g+M.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(c,g,w,M);g=this.$renderToken(c,g,w,M)}}},h.prototype.$renderOverflowMessage=function(c,p,g,y,w){g&&this.$renderToken(c,p,g,y.slice(0,this.MAX_LINE_LENGTH-p));var M=this.dom.createElement("span");M.className="ace_inline_button ace_keyword ace_toggle_wrap",M.textContent=w?"<hide>":"<click to see more...>",c.appendChild(M)},h.prototype.$renderLine=function(c,p,g){if(!g&&g!=!1&&(g=this.session.getFoldLine(p)),g)var y=this.$getFoldLineTokens(p,g);else var y=this.session.getTokens(p);var w=c;if(y.length){var M=this.session.getRowSplitData(p);if(M&&M.length){this.$renderWrappedLine(c,y,M);var w=c.lastChild}else{var w=c;this.$useLineGroups()&&(w=this.$createLineElement(),c.appendChild(w)),this.$renderSimpleLine(w,y)}}else this.$useLineGroups()&&(w=this.$createLineElement(),c.appendChild(w));if(this.showEOL&&w){g&&(p=g.end.row);var R=this.dom.createElement("span");R.className="ace_invisible ace_invisible_eol",R.textContent=p==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,w.appendChild(R)}},h.prototype.$getFoldLineTokens=function(c,p){var g=this.session,y=[];function w(R,x,S){for(var E=0,k=0;k+R[E].value.length<x;)if(k+=R[E].value.length,E++,E==R.length)return;if(k!=x){var T=R[E].value.substring(x-k);T.length>S-x&&(T=T.substring(0,S-x)),y.push({type:R[E].type,value:T}),k=x+T.length,E+=1}for(;k<S&&E<R.length;){var T=R[E].value;T.length+k>S?y.push({type:R[E].type,value:T.substring(0,S-k)}):y.push(R[E]),k+=T.length,E+=1}}var M=g.getTokens(c);return p.walk(function(R,x,S,E,k){R!=null?y.push({type:"fold",value:R}):(k&&(M=g.getTokens(x)),M.length&&w(M,E,S))},p.end.row,this.session.getLine(p.end.row).length),y},h.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},h})();u.prototype.EOF_CHAR="",u.prototype.EOL_CHAR_LF="",u.prototype.EOL_CHAR_CRLF="",u.prototype.EOL_CHAR=u.prototype.EOL_CHAR_LF,u.prototype.TAB_CHAR="",u.prototype.SPACE_CHAR="",u.prototype.$padding=0,u.prototype.MAX_LINE_LENGTH=1e4,u.prototype.showInvisibles=!1,u.prototype.showSpaces=!1,u.prototype.showTabs=!1,u.prototype.showEOL=!1,u.prototype.displayIndentGuides=!0,u.prototype.$highlightIndentGuides=!0,u.prototype.$tabStrings=[],u.prototype.destroy={},u.prototype.onChangeTabSize=u.prototype.$computeTabString,s.implement(u.prototype,d),n.Text=u}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(t,n,i){var s=t("../lib/dom"),a=(function(){function m(o){this.element=s.createElement("div"),this.element.className="ace_layer ace_cursor-layer",o.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),s.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return m.prototype.$updateOpacity=function(o){for(var d=this.cursors,l=d.length;l--;)s.setStyle(d[l].style,"opacity",o?"":"0")},m.prototype.$startCssAnimation=function(){for(var o=this.cursors,d=o.length;d--;)o[d].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&s.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},m.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,s.removeCssClass(this.element,"ace_animate-blinking")},m.prototype.setPadding=function(o){this.$padding=o},m.prototype.setSession=function(o){this.session=o},m.prototype.setBlinking=function(o){o!=this.isBlinking&&(this.isBlinking=o,this.restartTimer())},m.prototype.setBlinkInterval=function(o){o!=this.blinkInterval&&(this.blinkInterval=o,this.restartTimer())},m.prototype.setSmoothBlinking=function(o){o!=this.smoothBlinking&&(this.smoothBlinking=o,s.setCssClass(this.element,"ace_smooth-blinking",o),this.$updateCursors(!0),this.restartTimer())},m.prototype.addCursor=function(){var o=s.createElement("div");return o.className="ace_cursor",this.element.appendChild(o),this.cursors.push(o),o},m.prototype.removeCursor=function(){if(this.cursors.length>1){var o=this.cursors.pop();return o.parentNode.removeChild(o),o}},m.prototype.hideCursor=function(){this.isVisible=!1,s.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},m.prototype.showCursor=function(){this.isVisible=!0,s.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},m.prototype.restartTimer=function(){var o=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,s.removeCssClass(this.element,"ace_smooth-blinking")),o(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&s.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),s.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var d=function(){this.timeoutId=setTimeout(function(){o(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){o(!0),d()},this.blinkInterval),d()}},m.prototype.getPixelPosition=function(o,d){if(!this.config||!this.session)return{left:0,top:0};o||(o=this.session.selection.getCursor());var l=this.session.documentToScreenPosition(o),f=this.$padding+(this.session.$bidiHandler.isBidiRow(l.row,o.row)?this.session.$bidiHandler.getPosLeft(l.column):l.column*this.config.characterWidth),u=(l.row-(d?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:f,top:u}},m.prototype.isCursorInView=function(o,d){return o.top>=0&&o.top<d.maxHeight},m.prototype.update=function(o){this.config=o;var d=this.session.$selectionMarkers,l=0,f=0;(d===void 0||d.length===0)&&(d=[{cursor:null}]);for(var l=0,u=d.length;l<u;l++){var h=this.getPixelPosition(d[l].cursor,!0);if(!((h.top>o.height+o.offset||h.top<0)&&l>1)){var c=this.cursors[f++]||this.addCursor(),p=c.style;this.drawCursor?this.drawCursor(c,h,o,d[l],this.session):this.isCursorInView(h,o)?(s.setStyle(p,"display","block"),s.translate(c,h.left,h.top),s.setStyle(p,"width",Math.round(o.characterWidth)+"px"),s.setStyle(p,"height",o.lineHeight+"px")):s.setStyle(p,"display","none")}}for(;this.cursors.length>f;)this.removeCursor();var g=this.session.getOverwrite();this.$setOverwrite(g),this.$pixelPos=h,this.restartTimer()},m.prototype.$setOverwrite=function(o){o!=this.overwrite&&(this.overwrite=o,o?s.addCssClass(this.element,"ace_overwrite-cursors"):s.removeCssClass(this.element,"ace_overwrite-cursors"))},m.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},m})();a.prototype.$padding=0,a.prototype.drawCursor=null,n.Cursor=a}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(t,n,i){var s=this&&this.__extends||(function(){var c=function(p,g){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,w){y.__proto__=w}||function(y,w){for(var M in w)Object.prototype.hasOwnProperty.call(w,M)&&(y[M]=w[M])},c(p,g)};return function(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");c(p,g);function y(){this.constructor=p}p.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)}})(),a=t("./lib/oop"),m=t("./lib/dom"),o=t("./lib/event"),d=t("./lib/event_emitter").EventEmitter,l=32768,f=(function(){function c(p,g){this.element=m.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+g,this.inner=m.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="",this.element.appendChild(this.inner),p.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)}return c.prototype.setVisible=function(p){this.element.style.display=p?"":"none",this.isVisible=p,this.coeff=1},c})();a.implement(f.prototype,d);var u=(function(c){s(p,c);function p(g,y){var w=c.call(this,g,"-v")||this;return w.scrollTop=0,w.scrollHeight=0,y.$scrollbarWidth=w.width=m.scrollbarWidth(g.ownerDocument),w.inner.style.width=w.element.style.width=(w.width||15)+5+"px",w.$minWidth=0,w}return p.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var g=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-g)/(this.coeff-g)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},p.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},p.prototype.setHeight=function(g){this.element.style.height=g+"px"},p.prototype.setScrollHeight=function(g){this.scrollHeight=g,g>l?(this.coeff=l/g,g=l):this.coeff!=1&&(this.coeff=1),this.inner.style.height=g+"px"},p.prototype.setScrollTop=function(g){this.scrollTop!=g&&(this.skipEvent=!0,this.scrollTop=g,this.element.scrollTop=g*this.coeff)},p})(f);u.prototype.setInnerHeight=u.prototype.setScrollHeight;var h=(function(c){s(p,c);function p(g,y){var w=c.call(this,g,"-h")||this;return w.scrollLeft=0,w.height=y.$scrollbarWidth,w.inner.style.height=w.element.style.height=(w.height||15)+5+"px",w}return p.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},p.prototype.getHeight=function(){return this.isVisible?this.height:0},p.prototype.setWidth=function(g){this.element.style.width=g+"px"},p.prototype.setInnerWidth=function(g){this.inner.style.width=g+"px"},p.prototype.setScrollWidth=function(g){this.inner.style.width=g+"px"},p.prototype.setScrollLeft=function(g){this.scrollLeft!=g&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=g)},p})(f);n.ScrollBar=u,n.ScrollBarV=u,n.ScrollBarH=h,n.VScrollBar=u,n.HScrollBar=h}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(t,n,i){var s=this&&this.__extends||(function(){var h=function(c,p){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var w in y)Object.prototype.hasOwnProperty.call(y,w)&&(g[w]=y[w])},h(c,p)};return function(c,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");h(c,p);function g(){this.constructor=c}c.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)}})(),a=t("./lib/oop"),m=t("./lib/dom"),o=t("./lib/event"),d=t("./lib/event_emitter").EventEmitter;m.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var l=(function(){function h(c,p){this.element=m.createElement("div"),this.element.className="ace_sb"+p,this.inner=m.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,c.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return h.prototype.setVisible=function(c){this.element.style.display=c?"":"none",this.isVisible=c,this.coeff=1},h})();a.implement(l.prototype,d);var f=(function(h){s(c,h);function c(p,g){var y=h.call(this,p,"-v")||this;return y.scrollTop=0,y.scrollHeight=0,y.parent=p,y.width=y.VScrollWidth,y.renderer=g,y.inner.style.width=y.element.style.width=(y.width||15)+"px",y.$minWidth=0,y}return c.prototype.onMouseDown=function(p,g){if(p==="mousedown"&&!(o.getButton(g)!==0||g.detail===2)){if(g.target===this.inner){var y=this,w=g.clientY,M=function(I){w=I.clientY},R=function(){clearInterval(k)},x=g.clientY,S=this.thumbTop,E=function(){if(w!==void 0){var I=y.scrollTopFromThumbTop(S+w-x);I!==y.scrollTop&&y._emit("scroll",{data:I})}};o.capture(this.inner,M,R);var k=setInterval(E,20);return o.preventDefault(g)}var T=g.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(T)}),o.preventDefault(g)}},c.prototype.getHeight=function(){return this.height},c.prototype.scrollTopFromThumbTop=function(p){var g=p*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return g=g>>0,g<0?g=0:g>this.pageHeight-this.viewHeight&&(g=this.pageHeight-this.viewHeight),g},c.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},c.prototype.setHeight=function(p){this.height=Math.max(0,p),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},c.prototype.setScrollHeight=function(p,g){this.pageHeight===p&&!g||(this.pageHeight=p,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},c.prototype.setScrollTop=function(p){this.scrollTop=p,p<0&&(p=0),this.thumbTop=p*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},c})(l);f.prototype.setInnerHeight=f.prototype.setScrollHeight;var u=(function(h){s(c,h);function c(p,g){var y=h.call(this,p,"-h")||this;return y.scrollLeft=0,y.scrollWidth=0,y.height=y.HScrollHeight,y.inner.style.height=y.element.style.height=(y.height||12)+"px",y.renderer=g,y}return c.prototype.onMouseDown=function(p,g){if(p==="mousedown"&&!(o.getButton(g)!==0||g.detail===2)){if(g.target===this.inner){var y=this,w=g.clientX,M=function(I){w=I.clientX},R=function(){clearInterval(k)},x=g.clientX,S=this.thumbLeft,E=function(){if(w!==void 0){var I=y.scrollLeftFromThumbLeft(S+w-x);I!==y.scrollLeft&&y._emit("scroll",{data:I})}};o.capture(this.inner,M,R);var k=setInterval(E,20);return o.preventDefault(g)}var T=g.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(T)}),o.preventDefault(g)}},c.prototype.getHeight=function(){return this.isVisible?this.height:0},c.prototype.scrollLeftFromThumbLeft=function(p){var g=p*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return g=g>>0,g<0?g=0:g>this.pageWidth-this.viewWidth&&(g=this.pageWidth-this.viewWidth),g},c.prototype.setWidth=function(p){this.width=Math.max(0,p),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},c.prototype.setScrollWidth=function(p,g){this.pageWidth===p&&!g||(this.pageWidth=p,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},c.prototype.setScrollLeft=function(p){this.scrollLeft=p,p<0&&(p=0),this.thumbLeft=p*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},c})(l);u.prototype.setInnerWidth=u.prototype.setScrollWidth,n.ScrollBar=f,n.ScrollBarV=f,n.ScrollBarH=u,n.VScrollBar=f,n.HScrollBar=u}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(t,n,i){var s=t("./lib/event"),a=(function(){function m(o,d){this.onRender=o,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=d||window;var l=this;this._flush=function(f){l.pending=!1;var u=l.changes;if(u&&(s.blockIdle(100),l.changes=0,l.onRender(u)),l.changes){if(l.$recursionLimit--<0)return;l.schedule()}else l.$recursionLimit=2}}return m.prototype.schedule=function(o){this.changes=this.changes|o,this.changes&&!this.pending&&(s.nextFrame(this._flush),this.pending=!0)},m.prototype.clear=function(o){var d=this.changes;return this.changes=0,d},m})();n.RenderLoop=a}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(t,n,i){var s=t("../lib/oop"),a=t("../lib/dom"),m=t("../lib/lang"),o=t("../lib/event"),d=t("../lib/useragent"),l=t("../lib/event_emitter").EventEmitter,f=512,u=typeof ResizeObserver=="function",h=200,c=(function(){function p(g){this.el=a.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=a.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=a.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),g.appendChild(this.el),this.$measureNode.textContent=m.stringRepeat("X",f),this.$characterSize={width:0,height:0},u?this.$addObserver():this.checkForSizeChanges()}return p.prototype.$setMeasureNodeStyles=function(g,y){g.width=g.height="auto",g.left=g.top="0px",g.visibility="hidden",g.position="absolute",g.whiteSpace="pre",d.isIE<8?g["font-family"]="inherit":g.font="inherit",g.overflow=y?"hidden":"visible"},p.prototype.checkForSizeChanges=function(g){if(g===void 0&&(g=this.$measureSizes()),g&&(this.$characterSize.width!==g.width||this.$characterSize.height!==g.height)){this.$measureNode.style.fontWeight="bold";var y=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=g,this.charSizes=Object.create(null),this.allowBoldFonts=y&&y.width===g.width&&y.height===g.height,this._emit("changeCharacterSize",{data:g})}},p.prototype.$addObserver=function(){var g=this;this.$observer=new window.ResizeObserver(function(y){g.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},p.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var g=this;return this.$pollSizeChangesTimer=o.onIdle(function y(){g.checkForSizeChanges(),o.onIdle(y,500)},500)},p.prototype.setPolling=function(g){g?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},p.prototype.$measureSizes=function(g){var y={height:(g||this.$measureNode).clientHeight,width:(g||this.$measureNode).clientWidth/f};return y.width===0||y.height===0?null:y},p.prototype.$measureCharWidth=function(g){this.$main.textContent=m.stringRepeat(g,f);var y=this.$main.getBoundingClientRect();return y.width/f},p.prototype.getCharacterWidth=function(g){var y=this.charSizes[g];return y===void 0&&(y=this.charSizes[g]=this.$measureCharWidth(g)/this.$characterSize.width),y},p.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},p.prototype.$getZoom=function(g){return!g||!g.parentElement?1:(Number(window.getComputedStyle(g).zoom)||1)*this.$getZoom(g.parentElement)},p.prototype.$initTransformMeasureNodes=function(){var g=function(y,w){return["div",{style:"position: absolute;top:"+y+"px;left:"+w+"px;"}]};this.els=a.buildDom([g(0,0),g(h,0),g(0,h),g(h,h)],this.el)},p.prototype.transformCoordinates=function(g,y){if(g){var w=this.$getZoom(this.el);g=S(1/w,g)}function M(W,G,J){var K=W[1]*G[0]-W[0]*G[1];return[(-G[1]*J[0]+G[0]*J[1])/K,(+W[1]*J[0]-W[0]*J[1])/K]}function R(W,G){return[W[0]-G[0],W[1]-G[1]]}function x(W,G){return[W[0]+G[0],W[1]+G[1]]}function S(W,G){return[W*G[0],W*G[1]]}this.els||this.$initTransformMeasureNodes();function E(W){var G=W.getBoundingClientRect();return[G.left,G.top]}var k=E(this.els[0]),T=E(this.els[1]),I=E(this.els[2]),P=E(this.els[3]),C=M(R(P,T),R(P,I),R(x(T,I),x(P,k))),b=S(1+C[0],R(T,k)),A=S(1+C[1],R(I,k));if(y){var _=y,L=C[0]*_[0]/h+C[1]*_[1]/h+1,O=x(S(_[0],b),S(_[1],A));return x(S(1/L/h,O),k)}var V=R(g,k),B=M(R(b,S(C[0],V)),R(A,S(C[1],V)),V);return S(h,B)},p})();c.prototype.$characterSize={width:0,height:0},s.implement(c.prototype,l),n.FontMetrics=c}),ace.define("ace/css/editor-css",["require","exports","module"],function(t,n,i){i.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    forced-color-adjust: none;
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}
.ace_invisible {
    font-variant-ligatures: none;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold, .ace_gutter-cell.ace_security, .ace_icon.ace_security, .ace_icon.ace_security_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info, .ace_gutter-cell.ace_hint, .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info, .ace_dark .ace_gutter-cell.ace_hint, .ace_dark .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_security {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iZGFya29yYW5nZSIgZmlsbD0ibm9uZSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgogICAgICAgIDxwYXRoIGNsYXNzPSJzdHJva2UtbGluZWpvaW4tcm91bmQiIGQ9Ik04IDE0LjgzMDdDOCAxNC44MzA3IDIgMTIuOTA0NyAyIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOEM3Ljk4OTk5IDEuMzQ5MTggMTAuNjkgMy4yNjU0OCAxNCAzLjI2NTQ4VjguMDg5OTJDMTQgMTIuOTA0NyA4IDE0LjgzMDcgOCAxNC44MzA3WiIvPgogICAgICAgIDxwYXRoIGQ9Ik0yIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOCIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMy45OSA4LjA4OTkyVjMuMjY1NDhDMTAuNjggMy4yNjU0OCA4IDEuMzQ5MTggOCAxLjM0OTE4Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggNFY5Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggMTBWMTIiLz4KICAgIDwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}
.ace_icon_svg.ace_hint {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ic2lsdmVyIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTYgMTRIMTAiLz4KICAgICAgICA8cGF0aCBkPSJNOCAxMUg5QzkgOS40NzAwMiAxMiA4LjU0MDAyIDEyIDUuNzYwMDJDMTIuMDIgNC40MDAwMiAxMS4zOSAzLjM2MDAyIDEwLjQzIDIuNjcwMDJDOSAxLjY0MDAyIDcuMDAwMDEgMS42NDAwMiA1LjU3MDAxIDIuNjcwMDJDNC42MTAwMSAzLjM2MDAyIDMuOTggNC40MDAwMiA0IDUuNzYwMDJDNCA4LjU0MDAyIDcuMDAwMDEgOS40NzAwMiA3LjAwMDAxIDExSDhaIi8+CiAgICA8L2c+Cjwvc3ZnPg==");
    background-color: silver;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_security_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTcgMTQiIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0iTTEwLjAwMDEgMTMuNjk5MkMxMC4wMDAxIDEzLjY5OTIgMTEuOTI0MSAxMy40NzYzIDEzIDEyLjY5OTJDMTQuNDEzOSAxMS42NzgxIDE2IDEwLjUgMTYuMTI1MSA2LjgxMTI2VjIuNTg5ODdDMTYuMTI1MSAyLjU0NzY4IDE2LjEyMjEgMi41MDYxOSAxNi4xMTY0IDIuNDY1NTlWMS43MTQ4NUgxNS4yNDE0TDE1LjIzMDcgMS43MTQ4NEwxNC42MjUxIDEuNjk5MjJWNi44MTEyM0MxNC42MjUxIDguNTEwNjEgMTQuNjI1MSA5LjQ2NDYxIDEyLjc4MjQgMTEuNzIxQzEyLjE1ODYgMTIuNDg0OCAxMC4wMDAxIDEzLjY5OTIgMTAuMDAwMSAxMy42OTkyWiIgZmlsbD0iY3JpbXNvbiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMzM2MDkgMC4zNjc0NzVDNy4wMzIxNCAwLjE1MjY1MiA2LjYyNTQ4IDAuMTUzNjE0IDYuMzIyNTMgMC4zNjk5OTdMNi4zMDg2OSAwLjM3OTU1NEM2LjI5NTUzIDAuMzg4NTg4IDYuMjczODggMC40MDMyNjYgNi4yNDQxNyAwLjQyMjc4OUM2LjE4NDcxIDAuNDYxODYgNi4wOTMyMSAwLjUyMDE3MSA1Ljk3MzEzIDAuNTkxMzczQzUuNzMyNTEgMC43MzQwNTkgNS4zNzk5IDAuOTI2ODY0IDQuOTQyNzkgMS4xMjAwOUM0LjA2MTQ0IDEuNTA5NyAyLjg3NTQxIDEuODgzNzcgMS41ODk4NCAxLjg4Mzc3SDAuNzE0ODQ0VjIuNzU4NzdWNi45ODAxNUMwLjcxNDg0NCA5LjQ5Mzc0IDIuMjg4NjYgMTEuMTk3MyAzLjcwMjU0IDEyLjIxODVDNC40MTg0NSAxMi43MzU1IDUuMTI4NzQgMTMuMTA1MyA1LjY1NzMzIDEzLjM0NTdDNS45MjI4NCAxMy40NjY0IDYuMTQ1NjYgMTMuNTU1OSA2LjMwNDY1IDEzLjYxNjFDNi4zODQyMyAxMy42NDYyIDYuNDQ4MDUgMTMuNjY5IDYuNDkzNDkgMTMuNjg0OEM2LjUxNjIyIDEzLjY5MjcgNi41MzQzOCAxMy42OTg5IDYuNTQ3NjQgMTMuNzAzM0w2LjU2MzgyIDEzLjcwODdMNi41NjkwOCAxMy43MTA0TDYuNTcwOTkgMTMuNzExTDYuODM5ODQgMTMuNzUzM0w2LjU3MjQyIDEzLjcxMTVDNi43NDYzMyAxMy43NjczIDYuOTMzMzUgMTMuNzY3MyA3LjEwNzI3IDEzLjcxMTVMNy4xMDg3IDEzLjcxMUw3LjExMDYxIDEzLjcxMDRMNy4xMTU4NyAxMy43MDg3TDcuMTMyMDUgMTMuNzAzM0M3LjE0NTMxIDEzLjY5ODkgNy4xNjM0NiAxMy42OTI3IDcuMTg2MTkgMTMuNjg0OEM3LjIzMTY0IDEzLjY2OSA3LjI5NTQ2IDEzLjY0NjIgNy4zNzUwMyAxMy42MTYxQzcuNTM0MDMgMTMuNTU1OSA3Ljc1Njg1IDEzLjQ2NjQgOC4wMjIzNiAxMy4zNDU3QzguNTUwOTUgMTMuMTA1MyA5LjI2MTIzIDEyLjczNTUgOS45NzcxNSAxMi4yMTg1QzExLjM5MSAxMS4xOTczIDEyLjk2NDggOS40OTM3NyAxMi45NjQ4IDYuOTgwMThWMi43NTg4QzEyLjk2NDggMi43MTY2IDEyLjk2MTkgMi42NzUxMSAxMi45NTYxIDIuNjM0NTFWMS44ODM3N0gxMi4wODExQzEyLjA3NzUgMS44ODM3NyAxMi4wNzQgMS44ODM3NyAxMi4wNzA0IDEuODgzNzdDMTAuNzk3OSAxLjg4MDA0IDkuNjE5NjIgMS41MTEwMiA4LjczODk0IDEuMTI0ODZDOC43MzUzNCAxLjEyMzI3IDguNzMxNzQgMS4xMjE2OCA4LjcyODE0IDEuMTIwMDlDOC4yOTEwMyAwLjkyNjg2NCA3LjkzODQyIDAuNzM0MDU5IDcuNjk3NzkgMC41OTEzNzNDNy41Nzc3MiAwLjUyMDE3MSA3LjQ4NjIyIDAuNDYxODYgNy40MjY3NiAwLjQyMjc4OUM3LjM5NzA1IDAuNDAzMjY2IDcuMzc1MzkgMC4zODg1ODggNy4zNjIyNCAwLjM3OTU1NEw3LjM0ODk2IDAuMzcwMzVDNy4zNDg5NiAwLjM3MDM1IDcuMzQ4NDcgMC4zNzAwMiA3LjM0NTYzIDAuMzc0MDU0TDcuMzM3NzkgMC4zNjg2NTlMNy4zMzYwOSAwLjM2NzQ3NVpNOC4wMzQ3MSAyLjcyNjkxQzguODYwNCAzLjA5MDYzIDkuOTYwNjYgMy40NjMwOSAxMS4yMDYxIDMuNTg5MDdWNi45ODAxNUgxMS4yMTQ4QzExLjIxNDggOC42Nzk1MyAxMC4xNjM3IDkuOTI1MDcgOC45NTI1NCAxMC43OTk4QzguMzU1OTUgMTEuMjMwNiA3Ljc1Mzc0IDExLjU0NTQgNy4yOTc5NiAxMS43NTI3QzcuMTE2NzEgMTEuODM1MSA2Ljk2MDYyIDExLjg5OTYgNi44Mzk4NCAxMS45NDY5QzYuNzE5MDYgMTEuODk5NiA2LjU2Mjk3IDExLjgzNTEgNi4zODE3MyAxMS43NTI3QzUuOTI1OTUgMTEuNTQ1NCA1LjMyMzczIDExLjIzMDYgNC43MjcxNSAxMC43OTk4QzMuNTE2MDMgOS45MjUwNyAyLjQ2NDg0IDguNjc5NTUgMi40NjQ4NCA2Ljk4MDE4VjMuNTg5MDlDMy43MTczOCAzLjQ2MjM5IDQuODIzMDggMy4wODYzOSA1LjY1MDMzIDIuNzIwNzFDNi4xNDIyOCAyLjUwMzI0IDYuNTQ0ODUgMi4yODUzNyA2LjgzMjU0IDIuMTE2MjRDNy4xMjE4MSAyLjI4NTM1IDcuNTI3IDIuNTAzNTIgOC4wMjE5NiAyLjcyMTMxQzguMDI2MiAyLjcyMzE3IDguMDMwNDUgMi43MjUwNCA4LjAzNDcxIDIuNzI2OTFaTTUuOTY0ODQgMy40MDE0N1Y3Ljc3NjQ3SDcuNzE0ODRWMy40MDE0N0g1Ljk2NDg0Wk01Ljk2NDg0IDEwLjQwMTVWOC42NTE0N0g3LjcxNDg0VjEwLjQwMTVINS45NjQ4NFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(33em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget, .ace_custom-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
    pointer-events: auto;
}

.ace_custom-widget {
    background: none;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(t,n,i){var s=t("../lib/dom"),a=t("../lib/oop"),m=t("../lib/event_emitter").EventEmitter,o=(function(){function d(l,f){this.renderer=f,this.pixelRatio=1,this.maxHeight=f.layerConfig.maxHeight,this.lineHeight=f.layerConfig.lineHeight,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},this.setScrollBarV(l)}return d.prototype.$createCanvas=function(){this.canvas=s.createElement("canvas"),this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7",this.canvas.style.position="absolute"},d.prototype.setScrollBarV=function(l){this.$createCanvas(),this.scrollbarV=l,l.element.appendChild(this.canvas),this.setDimensions()},d.prototype.$updateDecorators=function(l){if(typeof this.canvas.getContext!="function")return;var f=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;this.setDimensions(l);var u=this.canvas.getContext("2d");function h(b,A){return b.priority<A.priority?-1:b.priority>A.priority?1:0}var c=this.renderer.session.$annotations;if(u.clearRect(0,0,this.canvas.width,this.canvas.height),c){var p={info:1,warning:2,error:3};c.forEach(function(b){b.priority=p[b.type]||null}),c=c.sort(h);for(var g=0;g<c.length;g++){var y=c[g].row,w=this.getVerticalOffsetForRow(y),M=w+this.lineHeight,R=Math.round(this.heightRatio*w),x=Math.round(this.heightRatio*M),S=Math.round((R+x)/2),E=x-S;E<this.halfMinDecorationHeight&&(E=this.halfMinDecorationHeight),S-E<0&&(S=E),S+E>this.canvasHeight&&(S=this.canvasHeight-E);var k=S-E,T=S+E,I=T-k;u.fillStyle=f[c[g].type]||null,u.fillRect(0,k,Math.round(this.oneZoneWidth-1),I)}}var P=this.renderer.session.selection.getCursor();if(P){var C=Math.round(this.getVerticalOffsetForRow(P.row)*this.heightRatio);u.fillStyle="rgba(0, 0, 0, 0.5)",u.fillRect(0,C,this.canvasWidth,2)}},d.prototype.getVerticalOffsetForRow=function(l){l=l|0;var f=this.renderer.session.documentToScreenRow(l,0)*this.lineHeight;return f},d.prototype.setDimensions=function(l){l=l||this.renderer.layerConfig,this.maxHeight=l.maxHeight,this.lineHeight=l.lineHeight,this.canvasHeight=l.height,this.canvasWidth=this.scrollbarV.width||this.canvasWidth,this.setZoneWidth(),this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.maxHeight<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight},d.prototype.setZoneWidth=function(){this.oneZoneWidth=this.canvasWidth},d.prototype.destroy=function(){this.canvas.parentNode.removeChild(this.canvas)},d})();a.implement(o.prototype,m),n.Decorator=o}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(t,n,i){var s=t("./lib/oop"),a=t("./lib/dom"),m=t("./lib/lang"),o=t("./config"),d=t("./layer/gutter").Gutter,l=t("./layer/marker").Marker,f=t("./layer/text").Text,u=t("./layer/cursor").Cursor,h=t("./scrollbar").HScrollBar,c=t("./scrollbar").VScrollBar,p=t("./scrollbar_custom").HScrollBar,g=t("./scrollbar_custom").VScrollBar,y=t("./renderloop").RenderLoop,w=t("./layer/font_metrics").FontMetrics,M=t("./lib/event_emitter").EventEmitter,R=t("./css/editor-css"),x=t("./layer/decorators").Decorator,S=t("./lib/useragent"),E=t("./layer/text_util").isTextToken;a.importCssString(R,"ace_editor.css",!1);var k=(function(){function T(I,P){var C=this;this.container=I||a.createElement("div"),a.addCssClass(this.container,"ace_editor"),a.HI_DPI&&a.addCssClass(this.container,"ace_hidpi"),this.setTheme(P),o.get("useStrictCSP")==null&&o.set("useStrictCSP",!1),this.$gutter=a.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=a.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=a.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new d(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new l(this.content);var b=this.$textLayer=new f(this.content);this.canvas=b.element,this.$markerFront=new l(this.content),this.$cursorLayer=new u(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new c(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.on("scroll",function(A){C.$scrollAnimation||C.session.setScrollTop(A.data-C.scrollMargin.top)}),this.scrollBarH.on("scroll",function(A){C.$scrollAnimation||C.session.setScrollLeft(A.data-C.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new w(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(A){C.updateCharacterSize(),C.onResize(!0,C.gutterWidth,C.$size.width,C.$size.height),C._signal("changeCharacterSize",A)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new y(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),o.resetOptions(this),o._signal("renderer",this)}return T.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),a.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},T.prototype.setSession=function(I){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=I,I&&this.scrollMargin.top&&I.getScrollTop()<=0&&I.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(I),this.$markerBack.setSession(I),this.$markerFront.setSession(I),this.$gutterLayer.setSession(I),this.$textLayer.setSession(I),I&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},T.prototype.updateLines=function(I,P,C){if(P===void 0&&(P=1/0),this.$changedLines?(this.$changedLines.firstRow>I&&(this.$changedLines.firstRow=I),this.$changedLines.lastRow<P&&(this.$changedLines.lastRow=P)):this.$changedLines={firstRow:I,lastRow:P},this.$changedLines.lastRow<this.layerConfig.firstRow)if(C)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},T.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},T.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},T.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},T.prototype.updateFull=function(I){I?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},T.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},T.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},T.prototype.onResize=function(I,P,C,b){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=I?1:0;var A=this.container;b||(b=A.clientHeight||A.scrollHeight),!b&&this.$maxLines&&this.lineHeight>1&&(!A.style.height||A.style.height=="0px")&&(A.style.height="1px",b=A.clientHeight||A.scrollHeight),C||(C=A.clientWidth||A.scrollWidth);var _=this.$updateCachedSize(I,P,C,b);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!C&&!b)return this.resizing=0;I&&(this.$gutterLayer.$padding=null),I?this.$renderChanges(_|this.$changes,!0):this.$loop.schedule(_|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},T.prototype.$updateCachedSize=function(I,P,C,b){b-=this.$extraHeight||0;var A=0,_=this.$size,L={width:_.width,height:_.height,scrollerHeight:_.scrollerHeight,scrollerWidth:_.scrollerWidth};if(b&&(I||_.height!=b)&&(_.height=b,A|=this.CHANGE_SIZE,_.scrollerHeight=_.height,this.$horizScroll&&(_.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(_.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",A=A|this.CHANGE_SCROLL),C&&(I||_.width!=C)){A|=this.CHANGE_SIZE,_.width=C,P==null&&(P=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=P,a.setStyle(this.scrollBarH.element.style,"left",P+"px"),a.setStyle(this.scroller.style,"left",P+this.margin.left+"px"),_.scrollerWidth=Math.max(0,C-P-this.scrollBarV.getWidth()-this.margin.h),a.setStyle(this.$gutter.style,"left",this.margin.left+"px");var O=this.scrollBarV.getWidth()+"px";a.setStyle(this.scrollBarH.element.style,"right",O),a.setStyle(this.scroller.style,"right",O),a.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(_.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||I)&&(A|=this.CHANGE_FULL)}return _.$dirty=!C||!b,A&&this._signal("resize",L),A},T.prototype.onGutterResize=function(I){var P=this.$showGutter?I:0;P!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,P,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},T.prototype.adjustWrapLimit=function(){var I=this.$size.scrollerWidth-this.$padding*2,P=Math.floor(I/this.characterWidth);return this.session.adjustWrapLimit(P,this.$showPrintMargin&&this.$printMarginColumn)},T.prototype.setAnimatedScroll=function(I){this.setOption("animatedScroll",I)},T.prototype.getAnimatedScroll=function(){return this.$animatedScroll},T.prototype.setShowInvisibles=function(I){this.setOption("showInvisibles",I),this.session.$bidiHandler.setShowInvisibles(I)},T.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},T.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},T.prototype.setDisplayIndentGuides=function(I){this.setOption("displayIndentGuides",I)},T.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},T.prototype.setHighlightIndentGuides=function(I){this.setOption("highlightIndentGuides",I)},T.prototype.setShowPrintMargin=function(I){this.setOption("showPrintMargin",I)},T.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},T.prototype.setPrintMarginColumn=function(I){this.setOption("printMarginColumn",I)},T.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},T.prototype.getShowGutter=function(){return this.getOption("showGutter")},T.prototype.setShowGutter=function(I){return this.setOption("showGutter",I)},T.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},T.prototype.setFadeFoldWidgets=function(I){this.setOption("fadeFoldWidgets",I)},T.prototype.setHighlightGutterLine=function(I){this.setOption("highlightGutterLine",I)},T.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},T.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var I=a.createElement("div");I.className="ace_layer ace_print-margin-layer",this.$printMarginEl=a.createElement("div"),this.$printMarginEl.className="ace_print-margin",I.appendChild(this.$printMarginEl),this.content.insertBefore(I,this.content.firstChild)}var P=this.$printMarginEl.style;P.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",P.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},T.prototype.getContainerElement=function(){return this.container},T.prototype.getMouseEventTarget=function(){return this.scroller},T.prototype.getTextAreaContainer=function(){return this.container},T.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var I=this.textarea.style,P=this.$composition;if(!this.$keepTextAreaAtCursor&&!P){a.translate(this.textarea,-100,0);return}var C=this.$cursorLayer.$pixelPos;if(C){P&&P.markerRange&&(C=this.$cursorLayer.getPixelPosition(P.markerRange.start,!0));var b=this.layerConfig,A=C.top,_=C.left;A-=b.offset;var L=P&&P.useTextareaForIME||S.isMobile?this.lineHeight:1;if(A<0||A>b.height-L){a.translate(this.textarea,0,0);return}var O=1,V=this.$size.height-L;if(!P)A+=this.lineHeight;else if(P.useTextareaForIME){var B=this.textarea.value;O=this.characterWidth*this.session.$getStringScreenWidth(B)[0]}else A+=this.lineHeight+2;_-=this.scrollLeft,_>this.$size.scrollerWidth-O&&(_=this.$size.scrollerWidth-O),_+=this.gutterWidth+this.margin.left,a.setStyle(I,"height",L+"px"),a.setStyle(I,"width",O+"px"),a.translate(this.textarea,Math.min(_,this.$size.scrollerWidth-O),Math.min(A,V))}}},T.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},T.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},T.prototype.getLastFullyVisibleRow=function(){var I=this.layerConfig,P=I.lastRow,C=this.session.documentToScreenRow(P,0)*I.lineHeight;return C-this.session.getScrollTop()>I.height-I.lineHeight?P-1:P},T.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},T.prototype.setPadding=function(I){this.$padding=I,this.$textLayer.setPadding(I),this.$cursorLayer.setPadding(I),this.$markerFront.setPadding(I),this.$markerBack.setPadding(I),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},T.prototype.setScrollMargin=function(I,P,C,b){var A=this.scrollMargin;A.top=I|0,A.bottom=P|0,A.right=b|0,A.left=C|0,A.v=A.top+A.bottom,A.h=A.left+A.right,A.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-A.top),this.updateFull()},T.prototype.setMargin=function(I,P,C,b){var A=this.margin;A.top=I|0,A.bottom=P|0,A.right=b|0,A.left=C|0,A.v=A.top+A.bottom,A.h=A.left+A.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},T.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},T.prototype.setHScrollBarAlwaysVisible=function(I){this.setOption("hScrollBarAlwaysVisible",I)},T.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},T.prototype.setVScrollBarAlwaysVisible=function(I){this.setOption("vScrollBarAlwaysVisible",I)},T.prototype.$updateScrollBarV=function(){var I=this.layerConfig.maxHeight,P=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(I-=(P-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>I-P&&(I=this.scrollTop+P,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(I+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},T.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},T.prototype.freeze=function(){this.$frozen=!0},T.prototype.unfreeze=function(){this.$frozen=!1},T.prototype.$renderChanges=function(I,P){if(this.$changes&&(I|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!I&&!P){this.$changes|=I;return}if(this.$size.$dirty)return this.$changes|=I,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",I),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var C=this.layerConfig;if(I&this.CHANGE_FULL||I&this.CHANGE_SIZE||I&this.CHANGE_TEXT||I&this.CHANGE_LINES||I&this.CHANGE_SCROLL||I&this.CHANGE_H_SCROLL){if(I|=this.$computeLayerConfig()|this.$loop.clear(),C.firstRow!=this.layerConfig.firstRow&&C.firstRowScreen==this.layerConfig.firstRowScreen){var b=this.scrollTop+(C.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;b>0&&(this.scrollTop=b,I=I|this.CHANGE_SCROLL,I|=this.$computeLayerConfig()|this.$loop.clear())}C=this.layerConfig,this.$updateScrollBarV(),I&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),a.translate(this.content,-this.scrollLeft,-C.offset);var A=C.width+2*this.$padding+"px",_=C.minHeight+"px";a.setStyle(this.content.style,"width",A),a.setStyle(this.content.style,"height",_)}if(I&this.CHANGE_H_SCROLL&&(a.translate(this.content,-this.scrollLeft,-C.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),I&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(C),this.$showGutter&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C),this.$markerBack.update(C),this.$markerFront.update(C),this.$cursorLayer.update(C),this.$moveTextAreaToCursor(),this._signal("afterRender",I);return}if(I&this.CHANGE_SCROLL){this.$changedLines=null,I&this.CHANGE_TEXT||I&this.CHANGE_LINES?this.$textLayer.update(C):this.$textLayer.scrollLines(C),this.$showGutter&&(I&this.CHANGE_GUTTER||I&this.CHANGE_LINES?this.$gutterLayer.update(C):this.$gutterLayer.scrollLines(C)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C),this.$markerBack.update(C),this.$markerFront.update(C),this.$cursorLayer.update(C),this.$moveTextAreaToCursor(),this._signal("afterRender",I);return}I&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(C),this.$showGutter&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)):I&this.CHANGE_LINES?((this.$updateLines()||I&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)):I&this.CHANGE_TEXT||I&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)):I&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(C),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(C)),I&this.CHANGE_CURSOR&&(this.$cursorLayer.update(C),this.$moveTextAreaToCursor()),I&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(C),I&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(C),this._signal("afterRender",I)},T.prototype.$autosize=function(){var I=this.session.getScreenLength()*this.lineHeight,P=this.$maxLines*this.lineHeight,C=Math.min(P,Math.max((this.$minLines||1)*this.lineHeight,I))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(C+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&C>this.$maxPixelHeight&&(C=this.$maxPixelHeight);var b=C<=2*this.lineHeight,A=!b&&I>P;if(C!=this.desiredHeight||this.$size.height!=this.desiredHeight||A!=this.$vScroll){A!=this.$vScroll&&(this.$vScroll=A,this.scrollBarV.setVisible(A));var _=this.container.clientWidth;this.container.style.height=C+"px",this.$updateCachedSize(!0,this.$gutterWidth,_,C),this.desiredHeight=C,this._signal("autosize")}},T.prototype.$computeLayerConfig=function(){var I=this.session,P=this.$size,C=P.height<=2*this.lineHeight,b=this.session.getScreenLength(),A=b*this.lineHeight,_=this.$getLongestLine(),L=!C&&(this.$hScrollBarAlwaysVisible||P.scrollerWidth-_-2*this.$padding<0),O=this.$horizScroll!==L;O&&(this.$horizScroll=L,this.scrollBarH.setVisible(L));var V=this.$vScroll;this.$maxLines&&this.lineHeight>1&&(this.$autosize(),C=P.height<=2*this.lineHeight);var B=P.scrollerHeight+this.lineHeight,W=!this.$maxLines&&this.$scrollPastEnd?(P.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;A+=W;var G=this.scrollMargin;this.session.setScrollTop(Math.max(-G.top,Math.min(this.scrollTop,A-P.scrollerHeight+G.bottom))),this.session.setScrollLeft(Math.max(-G.left,Math.min(this.scrollLeft,_+2*this.$padding-P.scrollerWidth+G.right)));var J=!C&&(this.$vScrollBarAlwaysVisible||P.scrollerHeight-A+W<0||this.scrollTop>G.top),K=V!==J;K&&(this.$vScroll=J,this.scrollBarV.setVisible(J));var Q=this.scrollTop%this.lineHeight,X=Math.ceil(B/this.lineHeight)-1,Z=Math.max(0,Math.round((this.scrollTop-Q)/this.lineHeight)),re=Z+X,se,he,ce=this.lineHeight;Z=I.screenToDocumentRow(Z,0);var Ae=I.getFoldLine(Z);Ae&&(Z=Ae.start.row),se=I.documentToScreenRow(Z,0),he=I.getRowLength(Z)*ce,re=Math.min(I.screenToDocumentRow(re,0),I.getLength()-1),B=P.scrollerHeight+I.getRowLength(re)*ce+he,Q=this.scrollTop-se*ce,Q<0&&se>0&&(se=Math.max(0,se+Math.floor(Q/ce)),Q=this.scrollTop-se*ce);var Le=0;return(this.layerConfig.width!=_||O)&&(Le=this.CHANGE_H_SCROLL),(O||K)&&(Le|=this.$updateCachedSize(!0,this.gutterWidth,P.width,P.height),this._signal("scrollbarVisibilityChanged"),K&&(_=this.$getLongestLine())),this.layerConfig={width:_,padding:this.$padding,firstRow:Z,firstRowScreen:se,lastRow:re,lineHeight:ce,characterWidth:this.characterWidth,minHeight:B,maxHeight:A,offset:Q,gutterOffset:ce?Math.max(0,Math.ceil((Q+P.height-P.scrollerHeight)/ce)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(_-this.$padding),Le},T.prototype.$updateLines=function(){if(this.$changedLines){var I=this.$changedLines.firstRow,P=this.$changedLines.lastRow;this.$changedLines=null;var C=this.layerConfig;if(!(I>C.lastRow+1)&&!(P<C.firstRow)){if(P===1/0){this.$showGutter&&this.$gutterLayer.update(C),this.$textLayer.update(C);return}return this.$textLayer.updateLines(C,I,P),!0}}},T.prototype.$getLongestLine=function(){var I=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(I+=1),this.$textLayer&&I>this.$textLayer.MAX_LINE_LENGTH&&(I=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(I*this.characterWidth))},T.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},T.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},T.prototype.addGutterDecoration=function(I,P){this.$gutterLayer.addGutterDecoration(I,P)},T.prototype.removeGutterDecoration=function(I,P){this.$gutterLayer.removeGutterDecoration(I,P)},T.prototype.updateBreakpoints=function(I){this._rows=I,this.$loop.schedule(this.CHANGE_GUTTER)},T.prototype.setAnnotations=function(I){this.$gutterLayer.setAnnotations(I),this.$loop.schedule(this.CHANGE_GUTTER)},T.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},T.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},T.prototype.showCursor=function(){this.$cursorLayer.showCursor()},T.prototype.scrollSelectionIntoView=function(I,P,C){this.scrollCursorIntoView(I,C),this.scrollCursorIntoView(P,C)},T.prototype.scrollCursorIntoView=function(I,P,C){if(this.$size.scrollerHeight!==0){var b=this.$cursorLayer.getPixelPosition(I),A=b.left,_=b.top,L=C&&C.top||0,O=C&&C.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var V=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;V+L>_?(P&&V+L>_+this.lineHeight&&(_-=P*this.$size.scrollerHeight),_===0&&(_=-this.scrollMargin.top),this.session.setScrollTop(_)):V+this.$size.scrollerHeight-O<_+this.lineHeight&&(P&&V+this.$size.scrollerHeight-O<_-this.lineHeight&&(_+=P*this.$size.scrollerHeight),this.session.setScrollTop(_+this.lineHeight+O-this.$size.scrollerHeight));var B=this.scrollLeft,W=2*this.layerConfig.characterWidth;A-W<B?(A-=W,A<this.$padding+W&&(A=-this.scrollMargin.left),this.session.setScrollLeft(A)):(A+=W,B+this.$size.scrollerWidth<A+this.characterWidth?this.session.setScrollLeft(Math.round(A+this.characterWidth-this.$size.scrollerWidth)):B<=this.$padding&&A-B<this.characterWidth&&this.session.setScrollLeft(0))}},T.prototype.getScrollTop=function(){return this.session.getScrollTop()},T.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},T.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},T.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},T.prototype.scrollToRow=function(I){this.session.setScrollTop(I*this.lineHeight)},T.prototype.alignCursor=function(I,P){typeof I=="number"&&(I={row:I,column:0});var C=this.$cursorLayer.getPixelPosition(I),b=this.$size.scrollerHeight-this.lineHeight,A=C.top-b*(P||0);return this.session.setScrollTop(A),A},T.prototype.$calcSteps=function(I,P){var C=0,b=this.STEPS,A=[],_=function(L,O,V){return V*(Math.pow(L-1,3)+1)+O};for(C=0;C<b;++C)A.push(_(C/this.STEPS,I,P-I));return A},T.prototype.scrollToLine=function(I,P,C,b){var A=this.$cursorLayer.getPixelPosition({row:I,column:0}),_=A.top;P&&(_-=this.$size.scrollerHeight/2);var L=this.scrollTop;this.session.setScrollTop(_),C!==!1&&this.animateScrolling(L,b)},T.prototype.animateScrolling=function(I,P){var C=this.scrollTop;if(!this.$animatedScroll)return;var b=this;if(I==C)return;if(this.$scrollAnimation){var A=this.$scrollAnimation.steps;if(A.length&&(I=A[0],I==C))return}var _=b.$calcSteps(I,C);this.$scrollAnimation={from:I,to:C,steps:_},clearInterval(this.$timer),b.session.setScrollTop(_.shift()),b.session.$scrollTop=C;function L(){b.$timer=clearInterval(b.$timer),b.$scrollAnimation=null,b.$stopAnimation=!1,P&&P()}this.$timer=setInterval(function(){if(b.$stopAnimation){L();return}if(!b.session)return clearInterval(b.$timer);_.length?(b.session.setScrollTop(_.shift()),b.session.$scrollTop=C):C!=null?(b.session.$scrollTop=-1,b.session.setScrollTop(C),C=null):L()},10)},T.prototype.scrollToY=function(I){this.scrollTop!==I&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=I)},T.prototype.scrollToX=function(I){this.scrollLeft!==I&&(this.scrollLeft=I),this.$loop.schedule(this.CHANGE_H_SCROLL)},T.prototype.scrollTo=function(I,P){this.session.setScrollTop(P),this.session.setScrollLeft(I)},T.prototype.scrollBy=function(I,P){P&&this.session.setScrollTop(this.session.getScrollTop()+P),I&&this.session.setScrollLeft(this.session.getScrollLeft()+I)},T.prototype.isScrollableBy=function(I,P){if(P<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||P>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||I<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||I>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},T.prototype.pixelToScreenCoordinates=function(I,P){var C;if(this.$hasCssTransforms){C={top:0,left:0};var b=this.$fontMetrics.transformCoordinates([I,P]);I=b[1]-this.gutterWidth-this.margin.left,P=b[0]}else C=this.scroller.getBoundingClientRect();var A=I+this.scrollLeft-C.left-this.$padding,_=A/this.characterWidth,L=Math.floor((P+this.scrollTop-C.top)/this.lineHeight),O=this.$blockCursor?Math.floor(_):Math.round(_);return{row:L,column:O,side:_-O>0?1:-1,offsetX:A}},T.prototype.screenToTextCoordinates=function(I,P){var C;if(this.$hasCssTransforms){C={top:0,left:0};var b=this.$fontMetrics.transformCoordinates([I,P]);I=b[1]-this.gutterWidth-this.margin.left,P=b[0]}else C=this.scroller.getBoundingClientRect();var A=I+this.scrollLeft-C.left-this.$padding,_=A/this.characterWidth,L=this.$blockCursor?Math.floor(_):Math.round(_),O=Math.floor((P+this.scrollTop-C.top)/this.lineHeight);return this.session.screenToDocumentPosition(O,Math.max(L,0),A)},T.prototype.textToScreenCoordinates=function(I,P){var C=this.scroller.getBoundingClientRect(),b=this.session.documentToScreenPosition(I,P),A=this.$padding+(this.session.$bidiHandler.isBidiRow(b.row,I)?this.session.$bidiHandler.getPosLeft(b.column):Math.round(b.column*this.characterWidth)),_=b.row*this.lineHeight;return{pageX:C.left+A-this.scrollLeft,pageY:C.top+_-this.scrollTop}},T.prototype.visualizeFocus=function(){a.addCssClass(this.container,"ace_focus")},T.prototype.visualizeBlur=function(){a.removeCssClass(this.container,"ace_focus")},T.prototype.showComposition=function(I){this.$composition=I,I.cssText||(I.cssText=this.textarea.style.cssText),I.useTextareaForIME==null&&(I.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(a.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):I.markerId=this.session.addMarker(I.markerRange,"ace_composition_marker","text")},T.prototype.setCompositionText=function(I){var P=this.session.selection.cursor;this.addToken(I,"composition_placeholder",P.row,P.column),this.$moveTextAreaToCursor()},T.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),a.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var I=this.session.selection.cursor;this.removeExtraToken(I.row,I.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},T.prototype.setGhostText=function(I,P){var C=this.session.selection.cursor,b=P||{row:C.row,column:C.column};this.removeGhostText();var A=this.$calculateWrappedTextChunks(I,b);this.addToken(A[0].text,"ghost_text",b.row,b.column),this.$ghostText={text:I,position:{row:b.row,column:b.column}};var _=a.createElement("div");if(A.length>1){var L=this.hideTokensAfterPosition(b.row,b.column),O;A.slice(1).forEach(function(K){var Q=a.createElement("div"),X=a.createElement("span");X.className="ace_ghost_text",K.wrapped&&(Q.className="ghost_text_line_wrapped"),K.text.length===0&&(K.text=" "),X.appendChild(a.createTextNode(K.text)),Q.appendChild(X),_.appendChild(Q),O=Q}),L.forEach(function(K){var Q=a.createElement("span");E(K.type)||(Q.className="ace_"+K.type.replace(/\./g," ace_")),Q.appendChild(a.createTextNode(K.value)),O.appendChild(Q)}),this.$ghostTextWidget={el:_,row:b.row,column:b.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var V=this.$cursorLayer.getPixelPosition(b,!0),B=this.container,W=B.getBoundingClientRect().height,G=A.length*this.lineHeight,J=G<W-V.top;if(J)return;G<W?this.scrollBy(0,(A.length-1)*this.lineHeight):this.scrollToRow(b.row)}},T.prototype.$calculateWrappedTextChunks=function(I,P){var C=this.$size.scrollerWidth-this.$padding*2,b=Math.floor(C/this.characterWidth)-2;b=b<=0?60:b;for(var A=I.split(/\r?\n/),_=[],L=0;L<A.length;L++){var O=this.session.$getDisplayTokens(A[L],P.column),V=this.session.$computeWrapSplits(O,b,this.session.$tabSize);if(V.length>0){var B=0;V.push(A[L].length);for(var W=0;W<V.length;W++){var G=A[L].slice(B,V[W]);_.push({text:G,wrapped:!0}),B=V[W]}}else _.push({text:A[L],wrapped:!1})}return _},T.prototype.removeGhostText=function(){if(this.$ghostText){var I=this.$ghostText.position;this.removeExtraToken(I.row,I.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},T.prototype.addToken=function(I,P,C,b){var A=this.session;A.bgTokenizer.lines[C]=null;var _={type:P,value:I},L=A.getTokens(C);if(b==null||!L.length)L.push(_);else for(var O=0,V=0;V<L.length;V++){var B=L[V];if(O+=B.value.length,b<=O){var W=B.value.length-(O-b),G=B.value.slice(0,W),J=B.value.slice(W);L.splice(V,1,{type:B.type,value:G},_,{type:B.type,value:J});break}}this.updateLines(C,C)},T.prototype.hideTokensAfterPosition=function(I,P){for(var C=this.session.getTokens(I),b=0,A=!1,_=[],L=0;L<C.length;L++){var O=C[L];if(b+=O.value.length,O.type!=="ghost_text"){if(A){_.push({type:O.type,value:O.value}),O.type="hidden_token";continue}b===P&&(A=!0)}}return this.updateLines(I,I),_},T.prototype.removeExtraToken=function(I,P){this.session.bgTokenizer.lines[I]=null,this.updateLines(I,I)},T.prototype.setTheme=function(I,P){var C=this;if(this.$themeId=I,C._dispatchEvent("themeChange",{theme:I}),!I||typeof I=="string"){var b=I||this.$options.theme.initialValue;o.loadModule(["theme",b],A)}else A(I);function A(_){if(C.$themeId!=I)return P&&P();if(!_||!_.cssClass)throw new Error("couldn't load module "+I+" or it didn't call define");_.$id&&(C.$themeId=_.$id),a.importCssString(_.cssText,_.cssClass,C.container),C.theme&&a.removeCssClass(C.container,C.theme.cssClass);var L="padding"in _?_.padding:"padding"in(C.theme||{})?4:C.$padding;if(C.$padding&&L!=C.$padding&&C.setPadding(L),C.$gutterLayer){var O=_.$showGutterCursorMarker;O&&!C.$gutterLayer.$showCursorMarker?C.$gutterLayer.$showCursorMarker="theme":!O&&C.$gutterLayer.$showCursorMarker=="theme"&&(C.$gutterLayer.$showCursorMarker=null)}C.$theme=_.cssClass,C.theme=_,a.addCssClass(C.container,_.cssClass),a.setCssClass(C.container,"ace_dark",_.isDark),C.$size&&(C.$size.width=0,C.$updateSizeAsync()),C._dispatchEvent("themeLoaded",{theme:_}),P&&P(),S.isSafari&&C.scroller&&(C.scroller.style.background="red",C.scroller.style.background="")}},T.prototype.getTheme=function(){return this.$themeId},T.prototype.setStyle=function(I,P){a.setCssClass(this.container,I,P!==!1)},T.prototype.unsetStyle=function(I){a.removeCssClass(this.container,I)},T.prototype.setCursorStyle=function(I){a.setStyle(this.scroller.style,"cursor",I)},T.prototype.setMouseCursor=function(I){a.setStyle(this.scroller.style,"cursor",I)},T.prototype.attachToShadowRoot=function(){a.importCssString(R,"ace_editor.css",this.container)},T.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},T.prototype.$updateCustomScrollbar=function(I){var P=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),I===!0?(this.scrollBarV=new g(this.container,this),this.scrollBarH=new p(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(C){P.$scrollAnimation||P.session.setScrollTop(C.data-P.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(C){P.$scrollAnimation||P.session.setScrollLeft(C.data-P.scrollMargin.left)}),this.$scrollDecorator?(this.$scrollDecorator.setScrollBarV(this.scrollBarV),this.$scrollDecorator.$updateDecorators()):(this.$scrollDecorator=new x(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators())):(this.scrollBarV=new c(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.addEventListener("scroll",function(C){P.$scrollAnimation||P.session.setScrollTop(C.data-P.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(C){P.$scrollAnimation||P.session.setScrollLeft(C.data-P.scrollMargin.left)}))},T.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var I=this;this.$resizeTimer=m.delayedCall(function(){I.destroyed||I.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(P){var C=P[0].contentRect.width,b=P[0].contentRect.height;Math.abs(I.$size.width-C)>1||Math.abs(I.$size.height-b)>1?I.$resizeTimer.delay():I.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},T})();k.prototype.CHANGE_CURSOR=1,k.prototype.CHANGE_MARKER=2,k.prototype.CHANGE_GUTTER=4,k.prototype.CHANGE_SCROLL=8,k.prototype.CHANGE_LINES=16,k.prototype.CHANGE_TEXT=32,k.prototype.CHANGE_SIZE=64,k.prototype.CHANGE_MARKER_BACK=128,k.prototype.CHANGE_MARKER_FRONT=256,k.prototype.CHANGE_FULL=512,k.prototype.CHANGE_H_SCROLL=1024,k.prototype.$changes=0,k.prototype.$padding=null,k.prototype.$frozen=!1,k.prototype.STEPS=8,s.implement(k.prototype,M),o.defineOptions(k.prototype,"renderer",{useResizeObserver:{set:function(T){!T&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):T&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(T){this.$textLayer.setShowInvisibles(T)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(T){typeof T=="number"&&(this.$printMarginColumn=T),this.$showPrintMargin=!!T,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(T){this.$gutter.style.display=T?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(T){this.$gutterLayer.$useSvgGutterIcons=T},initialValue:!1},showFoldedAnnotations:{set:function(T){this.$gutterLayer.$showFoldedAnnotations=T},initialValue:!1},fadeFoldWidgets:{set:function(T){a.setCssClass(this.$gutter,"ace_fade-fold-widgets",T)},initialValue:!1},showFoldWidgets:{set:function(T){this.$gutterLayer.setShowFoldWidgets(T),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(T){this.$textLayer.setDisplayIndentGuides(T)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(T){this.$textLayer.setHighlightIndentGuides(T)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(T){this.$gutterLayer.setHighlightGutterLine(T),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(T){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(T){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(T){typeof T=="number"&&(T=T+"px"),this.container.style.fontSize=T,this.updateFontSize()},initialValue:12},fontFamily:{set:function(T){this.container.style.fontFamily=T,this.updateFontSize()}},maxLines:{set:function(T){this.updateFull()}},minLines:{set:function(T){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(T){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(T){T=+T||0,this.$scrollPastEnd!=T&&(this.$scrollPastEnd=T,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(T){this.$gutterLayer.$fixedWidth=!!T,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(T){this.$updateCustomScrollbar(T)},initialValue:!1},theme:{set:function(T){this.setTheme(T)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),n.VirtualRenderer=k}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(t,n,i){var s=t("../lib/oop"),a=t("../lib/net"),m=t("../lib/event_emitter").EventEmitter,o=t("../config");function d(h){var c="importScripts('"+a.qualifyURL(h)+"');";try{return new Blob([c],{type:"application/javascript"})}catch{var p=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,g=new p;return g.append(c),g.getBlob("application/javascript")}}function l(h){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(o.get("loadWorkerFromBlob")){var c=d(h),p=window.URL||window.webkitURL,g=p.createObjectURL(c);return new Worker(g)}return new Worker(h)}var f=function(h){h.postMessage||(h=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=h,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){s.implement(this,m),this.$createWorkerFromOldConfig=function(h,c,p,g,y){if(t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),o.get("packaged")||!t.toUrl)g=g||o.moduleUrl(c,"worker");else{var w=this.$normalizePath;g=g||w(t.toUrl("ace/worker/worker.js",null,"_"));var M={};h.forEach(function(R){M[R]=w(t.toUrl(R,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=l(g),y&&this.send("importScripts",y),this.$worker.postMessage({init:!0,tlns:M,module:c,classname:p}),this.$worker},this.onMessage=function(h){var c=h.data;switch(c.type){case"event":this._signal(c.name,{data:c.data});break;case"call":var p=this.callbacks[c.id];p&&(p(c.data),delete this.callbacks[c.id]);break;case"error":this.reportError(c.data);break;case"log":window.console&&console.log&&console.log.apply(console,c.data);break}},this.reportError=function(h){window.console&&console.error&&console.error(h)},this.$normalizePath=function(h){return a.qualifyURL(h)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(h){h.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(h,c){this.$worker.postMessage({command:h,args:c})},this.call=function(h,c,p){if(p){var g=this.callbackId++;this.callbacks[g]=p,c.push(g)}this.send(h,c)},this.emit=function(h,c){try{c.data&&c.data.err&&(c.data.err={message:c.data.err.message,stack:c.data.err.stack,code:c.data.err.code}),this.$worker&&this.$worker.postMessage({event:h,data:{data:c.data}})}catch(p){console.error(p.stack)}},this.attachToDocument=function(h){this.$doc&&this.terminate(),this.$doc=h,this.call("setValue",[h.getValue()]),h.on("change",this.changeListener,!0)},this.changeListener=function(h){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),h.action=="insert"?this.deltaQueue.push(h.start,h.lines):this.deltaQueue.push(h.start,h.end)},this.$sendDeltaQueue=function(){var h=this.deltaQueue;h&&(this.deltaQueue=null,h.length>50&&h.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:h}))}}).call(f.prototype);var u=function(h,c,p){var g=null,y=!1,w=Object.create(m),M=[],R=new f({messageBuffer:M,terminate:function(){},postMessage:function(S){M.push(S),g&&(y?setTimeout(x):x())}});R.setEmitSync=function(S){y=S};var x=function(){var S=M.shift();S.command?g[S.command].apply(g,S.args):S.event&&w._signal(S.event,S.data)};return w.postMessage=function(S){R.onMessage({data:S})},w.callback=function(S,E){this.postMessage({type:"call",id:E,data:S})},w.emit=function(S,E){this.postMessage({type:"event",name:S,data:E})},o.loadModule(["worker",c],function(S){for(g=new S[p](w);M.length;)x()}),R};n.UIWorkerClient=u,n.WorkerClient=f,n.createWorker=l}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(t,n,i){var s=t("./range").Range,a=t("./lib/event_emitter").EventEmitter,m=t("./lib/oop"),o=(function(){function d(l,f,u,h,c,p){var g=this;this.length=f,this.session=l,this.doc=l.getDocument(),this.mainClass=c,this.othersClass=p,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=h,this.$onCursorChange=function(){setTimeout(function(){g.onCursorChange()})},this.$pos=u;var y=l.getUndoManager().$undoStack||l.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=y.length,this.setup(),l.selection.on("changeCursor",this.$onCursorChange)}return d.prototype.setup=function(){var l=this,f=this.doc,u=this.session;this.selectionBefore=u.selection.toJSON(),u.selection.inMultiSelectMode&&u.selection.toSingleRange(),this.pos=f.createAnchor(this.$pos.row,this.$pos.column);var h=this.pos;h.$insertRight=!0,h.detach(),h.markerId=u.addMarker(new s(h.row,h.column,h.row,h.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(c){var p=f.createAnchor(c.row,c.column);p.$insertRight=!0,p.detach(),l.others.push(p)}),u.setUndoSelect(!1)},d.prototype.showOtherMarkers=function(){if(!this.othersActive){var l=this.session,f=this;this.othersActive=!0,this.others.forEach(function(u){u.markerId=l.addMarker(new s(u.row,u.column,u.row,u.column+f.length),f.othersClass,null,!1)})}},d.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var l=0;l<this.others.length;l++)this.session.removeMarker(this.others[l].markerId)}},d.prototype.onUpdate=function(l){if(this.$updating)return this.updateAnchors(l);var f=l;if(f.start.row===f.end.row&&f.start.row===this.pos.row){this.$updating=!0;var u=l.action==="insert"?f.end.column-f.start.column:f.start.column-f.end.column,h=f.start.column>=this.pos.column&&f.start.column<=this.pos.column+this.length+1,c=f.start.column-this.pos.column;if(this.updateAnchors(l),h&&(this.length+=u),h&&!this.session.$fromUndo){if(l.action==="insert")for(var p=this.others.length-1;p>=0;p--){var g=this.others[p],y={row:g.row,column:g.column+c};this.doc.insertMergedLines(y,l.lines)}else if(l.action==="remove")for(var p=this.others.length-1;p>=0;p--){var g=this.others[p],y={row:g.row,column:g.column+c};this.doc.remove(new s(y.row,y.column,y.row,y.column-u))}}this.$updating=!1,this.updateMarkers()}},d.prototype.updateAnchors=function(l){this.pos.onChange(l);for(var f=this.others.length;f--;)this.others[f].onChange(l);this.updateMarkers()},d.prototype.updateMarkers=function(){if(!this.$updating){var l=this,f=this.session,u=function(c,p){f.removeMarker(c.markerId),c.markerId=f.addMarker(new s(c.row,c.column,c.row,c.column+l.length),p,null,!1)};u(this.pos,this.mainClass);for(var h=this.others.length;h--;)u(this.others[h],this.othersClass)}},d.prototype.onCursorChange=function(l){if(!(this.$updating||!this.session)){var f=this.session.selection.getCursor();f.row===this.pos.row&&f.column>=this.pos.column&&f.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",l)):(this.hideOtherMarkers(),this._emit("cursorLeave",l))}},d.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},d.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var l=this.session.getUndoManager(),f=(l.$undoStack||l.$undostack).length-this.$undoStackDepth,u=0;u<f;u++)l.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},d})();m.implement(o.prototype,a),n.PlaceHolder=o}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,n,i){var s=t("../lib/event"),a=t("../lib/useragent");function m(d,l){return d.row==l.row&&d.column==l.column}function o(d){var l=d.domEvent,f=l.altKey,u=l.shiftKey,h=l.ctrlKey,c=d.getAccelKey(),p=d.getButton();if(h&&a.isMac&&(p=l.button),d.editor.inMultiSelectMode&&p==2){d.editor.textInput.onContextMenu(d.domEvent);return}if(!h&&!f&&!c){p===0&&d.editor.inMultiSelectMode&&d.editor.exitMultiSelectMode();return}if(p===0){var g=d.editor,y=g.selection,w=g.inMultiSelectMode,M=d.getDocumentPosition(),R=y.getCursor(),x=d.inSelection()||y.isEmpty()&&m(M,R),S=d.x,E=d.y,k=function(G){S=G.clientX,E=G.clientY},T=g.session,I=g.renderer.pixelToScreenCoordinates(S,E),P=I,C;if(g.$mouseHandler.$enableJumpToDef)h&&f||c&&f?C=u?"block":"add":f&&g.$blockSelectEnabled&&(C="block");else if(c&&!f){if(C="add",!w&&u)return}else f&&g.$blockSelectEnabled&&(C="block");if(C&&a.isMac&&l.ctrlKey&&g.$mouseHandler.cancelContextMenu(),C=="add"){if(!w&&x)return;if(!w){var b=y.toOrientedRange();g.addSelectionMarker(b)}var A=y.rangeList.rangeAtPoint(M);g.inVirtualSelectionMode=!0,u&&(A=null,b=y.ranges[0]||b,g.removeSelectionMarker(b)),g.once("mouseup",function(){var G=y.toOrientedRange();A&&G.isEmpty()&&m(A.cursor,G.cursor)?y.substractPoint(G.cursor):(u?y.substractPoint(b.cursor):b&&(g.removeSelectionMarker(b),y.addRange(b)),y.addRange(G)),g.inVirtualSelectionMode=!1})}else if(C=="block"){d.stop(),g.inVirtualSelectionMode=!0;var _,L=[],O=function(){var G=g.renderer.pixelToScreenCoordinates(S,E),J=T.screenToDocumentPosition(G.row,G.column,G.offsetX);m(P,G)&&m(J,y.lead)||(P=G,g.selection.moveToPosition(J),g.renderer.scrollCursorIntoView(),g.removeSelectionMarkers(L),L=y.rectangularRangeBlock(P,I),g.$mouseHandler.$clickSelection&&L.length==1&&L[0].isEmpty()&&(L[0]=g.$mouseHandler.$clickSelection.clone()),L.forEach(g.addSelectionMarker,g),g.updateSelectionMarkers())};w&&!c?y.toSingleRange():!w&&c&&(_=y.toOrientedRange(),g.addSelectionMarker(_)),u?I=T.documentToScreenPosition(y.lead):y.moveToPosition(M),P={row:-1,column:-1};var V=function(G){O(),clearInterval(W),g.removeSelectionMarkers(L),L.length||(L=[y.toOrientedRange()]),_&&(g.removeSelectionMarker(_),y.toSingleRange(_));for(var J=0;J<L.length;J++)y.addRange(L[J]);g.inVirtualSelectionMode=!1,g.$mouseHandler.$clickSelection=null},B=O;s.capture(g.container,k,V);var W=setInterval(function(){B()},20);return d.preventDefault()}}}n.onMouseDown=o}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(t,n,i){n.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(a){a.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(a){a.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(a){a.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(a){a.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(a){a.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(a){a.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(a){a.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(a){a.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(a){a.multiSelect.rangeCount>1?a.multiSelect.joinSelections():a.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(a){a.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(a){a.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(a){a.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],n.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(a){a.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(a){return a&&a.inMultiSelectMode}}];var s=t("../keyboard/hash_handler").HashHandler;n.keyboardHandler=new s(n.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(t,n,i){var s=t("./range_list").RangeList,a=t("./range").Range,m=t("./selection").Selection,o=t("./mouse/multi_select_handler").onMouseDown,d=t("./lib/event"),l=t("./lib/lang"),f=t("./commands/multi_select_commands");n.commands=f.defaultCommands.concat(f.multiSelectCommands);var u=t("./search").Search,h=new u;function c(R,x,S){return h.$options.wrap=!0,h.$options.needle=x,h.$options.backwards=S==-1,h.find(R)}var p=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(p.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(R,x){if(R){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(R),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),x||this.fromOrientedRange(R);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}R.cursor||(R.cursor=R.end);var E=this.rangeList.add(R);return this.$onAddRange(R),E.length&&this.$onRemoveRange(E),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),x||this.fromOrientedRange(R)}},this.toSingleRange=function(R){R=R||this.ranges[0];var x=this.rangeList.removeAll();x.length&&this.$onRemoveRange(x),R&&this.fromOrientedRange(R)},this.substractPoint=function(R){var x=this.rangeList.substractPoint(R);if(x)return this.$onRemoveRange(x),x[0]},this.mergeOverlappingRanges=function(){var R=this.rangeList.merge();R.length&&this.$onRemoveRange(R)},this.$onAddRange=function(R){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(R),this._signal("addRange",{range:R})},this.$onRemoveRange=function(R){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var x=this.rangeList.ranges.pop();R.push(x),this.rangeCount=0}for(var S=R.length;S--;){var E=this.ranges.indexOf(R[S]);this.ranges.splice(E,1)}this._signal("removeRange",{ranges:R}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),x=x||this.ranges[0],x&&!x.isEqual(this.getRange())&&this.fromOrientedRange(x)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new s,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var R=this.ranges.length?this.ranges:[this.getRange()],x=[],S=0;S<R.length;S++){var E=R[S],k=E.start.row,T=E.end.row;if(k===T)x.push(E.clone());else{for(x.push(new a(k,E.start.column,k,this.session.getLine(k).length));++k<T;)x.push(this.getLineRange(k,!0));x.push(new a(T,0,T,E.end.column))}S==0&&!this.isBackwards()&&(x=x.reverse())}this.toSingleRange();for(var S=x.length;S--;)this.addRange(x[S])},this.joinSelections=function(){var R=this.rangeList.ranges,x=R[R.length-1],S=a.fromPoints(R[0].start,x.end);this.toSingleRange(),this.setSelectionRange(S,x.cursor==x.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var R=this.rangeList.ranges,x=R[R.length-1],S=a.fromPoints(R[0].start,x.end);this.toSingleRange(),this.setSelectionRange(S,x.cursor==x.start)}else{var E=this.session.documentToScreenPosition(this.cursor),k=this.session.documentToScreenPosition(this.anchor),T=this.rectangularRangeBlock(E,k);T.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(R,x,S){var E=[],k=R.column<x.column;if(k)var T=R.column,I=x.column,P=R.offsetX,C=x.offsetX;else var T=x.column,I=R.column,P=x.offsetX,C=R.offsetX;var b=R.row<x.row;if(b)var A=R.row,_=x.row;else var A=x.row,_=R.row;T<0&&(T=0),A<0&&(A=0),A==_&&(S=!0);for(var L,O=A;O<=_;O++){var V=a.fromPoints(this.session.screenToDocumentPosition(O,T,P),this.session.screenToDocumentPosition(O,I,C));if(V.isEmpty()){if(L&&y(V.end,L))break;L=V.end}V.cursor=k?V.start:V.end,E.push(V)}if(b&&E.reverse(),!S){for(var B=E.length-1;E[B].isEmpty()&&B>0;)B--;if(B>0)for(var W=0;E[W].isEmpty();)W++;for(var G=B;G>=W;G--)E[G].isEmpty()&&E.splice(G,1)}return E}}).call(m.prototype);var g=t("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(R){R.cursor||(R.cursor=R.end);var x=this.getSelectionStyle();return R.marker=this.session.addMarker(R,"ace_selection",x),this.session.$selectionMarkers.push(R),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,R},this.removeSelectionMarker=function(R){if(R.marker){this.session.removeMarker(R.marker);var x=this.session.$selectionMarkers.indexOf(R);x!=-1&&this.session.$selectionMarkers.splice(x,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(R){for(var x=this.session.$selectionMarkers,S=R.length;S--;){var E=R[S];if(E.marker){this.session.removeMarker(E.marker);var k=x.indexOf(E);k!=-1&&x.splice(k,1)}}this.session.selectionMarkerCount=x.length},this.$onAddRange=function(R){this.addSelectionMarker(R.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(R){this.removeSelectionMarkers(R.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(R){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(f.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(R){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(f.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(R){var x=R.command,S=R.editor;if(S.multiSelect){if(x.multiSelectAction)x.multiSelectAction=="forEach"?E=S.forEachSelection(x,R.args):x.multiSelectAction=="forEachLine"?E=S.forEachSelection(x,R.args,!0):x.multiSelectAction=="single"?(S.exitMultiSelectMode(),E=x.exec(S,R.args||{})):E=x.multiSelectAction(S,R.args||{});else{var E=x.exec(S,R.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return E}},this.forEachSelection=function(R,x,S){if(!this.inVirtualSelectionMode){var E=S&&S.keepOrder,k=S==!0||S&&S.$byLines,T=this.session,I=this.selection,P=I.rangeList,C=(E?I:P).ranges,b;if(!C.length)return R.exec?R.exec(this,x||{}):R(this,x||{});var A=I._eventRegistry;I._eventRegistry={};var _=new m(T);this.inVirtualSelectionMode=!0;for(var L=C.length;L--;){if(k)for(;L>0&&C[L].start.row==C[L-1].end.row;)L--;_.fromOrientedRange(C[L]),_.index=L,this.selection=T.selection=_;var O=R.exec?R.exec(this,x||{}):R(this,x||{});!b&&O!==void 0&&(b=O),_.toOrientedRange(C[L])}_.detach(),this.selection=T.selection=I,this.inVirtualSelectionMode=!1,I._eventRegistry=A,I.mergeOverlappingRanges(),I.ranges[0]&&I.fromOrientedRange(I.ranges[0]);var V=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),V&&V.from==V.to&&this.renderer.animateScrolling(V.from),b}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var R="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var x=this.multiSelect.rangeList.ranges,S=[],E=0;E<x.length;E++)S.push(this.session.getTextRange(x[E]));var k=this.session.getDocument().getNewLineCharacter();R=S.join(k),R.length==(S.length-1)*k.length&&(R="")}else this.selection.isEmpty()||(R=this.session.getTextRange(this.getSelectionRange()));return R},this.$checkMultiselectChange=function(R,x){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&x==this.multiSelect.anchor)return;var E=x==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;E.row!=x.row||this.session.$clipPositionToDocument(E.row,E.column).column!=x.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(R,x,S){if(x=x||{},x.needle=R||x.needle,x.needle==null){var E=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();x.needle=this.session.getTextRange(E)}this.$search.set(x);var k=this.$search.findAll(this.session);if(!k.length)return 0;var T=this.multiSelect;S||T.toSingleRange(k[0]);for(var I=k.length;I--;)T.addRange(k[I],!0);return E&&T.rangeList.rangeAtPoint(E.start)&&T.addRange(E,!0),k.length},this.selectMoreLines=function(R,x){var S=this.selection.toOrientedRange(),E=S.cursor==S.end,k=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(k.column=this.selection.$desiredColumn);var T=this.session.screenToDocumentPosition(k.row+R,k.column);if(S.isEmpty())var P=T;else var I=this.session.documentToScreenPosition(E?S.end:S.start),P=this.session.screenToDocumentPosition(I.row+R,I.column);if(E){var C=a.fromPoints(T,P);C.cursor=C.start}else{var C=a.fromPoints(P,T);C.cursor=C.end}if(C.desiredColumn=k.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(x)var b=S.cursor;this.selection.addRange(C),b&&this.selection.substractPoint(b)},this.transposeSelections=function(R){for(var x=this.session,S=x.multiSelect,E=S.ranges,k=E.length;k--;){var T=E[k];if(T.isEmpty()){var I=x.getWordRange(T.start.row,T.start.column);T.start.row=I.start.row,T.start.column=I.start.column,T.end.row=I.end.row,T.end.column=I.end.column}}S.mergeOverlappingRanges();for(var P=[],k=E.length;k--;){var T=E[k];P.unshift(x.getTextRange(T))}R<0?P.unshift(P.pop()):P.push(P.shift());for(var k=E.length;k--;){var T=E[k],C=T.clone();x.replace(T,P[k]),T.start.row=C.start.row,T.start.column=C.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(R,x,S){var E=this.session,k=E.multiSelect,T=k.toOrientedRange();if(!(T.isEmpty()&&(T=E.getWordRange(T.start.row,T.start.column),T.cursor=R==-1?T.start:T.end,this.multiSelect.addRange(T),S))){var I=E.getTextRange(T),P=c(E,I,R);P&&(P.cursor=R==-1?P.start:P.end,this.session.unfold(P),this.multiSelect.addRange(P),this.renderer.scrollCursorIntoView(null,.5)),x&&this.multiSelect.substractPoint(T.cursor)}},this.alignCursors=function(){var R=this.session,x=R.multiSelect,S=x.ranges,E=-1,k=S.filter(function(B){if(B.cursor.row==E)return!0;E=B.cursor.row});if(!S.length||k.length==S.length-1){var T=this.selection.getRange(),I=T.start.row,P=T.end.row,C=I==P;if(C){var b=this.session.getLength(),A;do A=this.session.getLine(P);while(/[=:]/.test(A)&&++P<b);do A=this.session.getLine(I);while(/[=:]/.test(A)&&--I>0);I<0&&(I=0),P>=b&&(P=b-1)}var _=this.session.removeFullLines(I,P);_=this.$reAlignText(_,C),this.session.insert({row:I,column:0},_.join(`
`)+`
`),C||(T.start.column=0,T.end.column=_[_.length-1].length),this.selection.setRange(T)}else{k.forEach(function(B){x.substractPoint(B.cursor)});var L=0,O=1/0,V=S.map(function(B){var W=B.cursor,G=R.getLine(W.row),J=G.substr(W.column).search(/\S/g);return J==-1&&(J=0),W.column>L&&(L=W.column),J<O&&(O=J),J});S.forEach(function(B,W){var G=B.cursor,J=L-G.column,K=V[W]-O;J>K?R.insert(G,l.stringRepeat(" ",J-K)):R.remove(new a(G.row,G.column,G.row,G.column-J+K)),B.start.column=B.end.column=L,B.start.row=B.end.row=G.row,B.cursor=B.end}),x.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(R,x){var S=!0,E=!0,k,T,I;return R.map(function(_){var L=_.match(/(\s*)(.*?)(\s*)([=:].*)/);return L?k==null?(k=L[1].length,T=L[2].length,I=L[3].length,L):(k+T+I!=L[1].length+L[2].length+L[3].length&&(E=!1),k!=L[1].length&&(S=!1),k>L[1].length&&(k=L[1].length),T<L[2].length&&(T=L[2].length),I>L[3].length&&(I=L[3].length),L):[_]}).map(x?C:S?E?b:C:A);function P(_){return l.stringRepeat(" ",_)}function C(_){return _[2]?P(k)+_[2]+P(T-_[2].length+I)+_[4].replace(/^([=:])\s+/,"$1 "):_[0]}function b(_){return _[2]?P(k+T-_[2].length)+_[2]+P(I)+_[4].replace(/^([=:])\s+/,"$1 "):_[0]}function A(_){return _[2]?P(k)+_[2]+P(I)+_[4].replace(/^([=:])\s+/,"$1 "):_[0]}}}).call(g.prototype);function y(R,x){return R.row==x.row&&R.column==x.column}n.onSessionChange=function(R){var x=R.session;x&&!x.multiSelect&&(x.$selectionMarkers=[],x.selection.$initRangeList(),x.multiSelect=x.selection),this.multiSelect=x&&x.multiSelect;var S=R.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),x&&(x.multiSelect.on("addRange",this.$onAddRange),x.multiSelect.on("removeRange",this.$onRemoveRange),x.multiSelect.on("multiSelect",this.$onMultiSelect),x.multiSelect.on("singleSelect",this.$onSingleSelect),x.multiSelect.lead.on("change",this.$checkMultiselectChange),x.multiSelect.anchor.on("change",this.$checkMultiselectChange)),x&&this.inMultiSelectMode!=x.selection.inMultiSelectMode&&(x.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function w(R){R.$multiselectOnSessionChange||(R.$onAddRange=R.$onAddRange.bind(R),R.$onRemoveRange=R.$onRemoveRange.bind(R),R.$onMultiSelect=R.$onMultiSelect.bind(R),R.$onSingleSelect=R.$onSingleSelect.bind(R),R.$multiselectOnSessionChange=n.onSessionChange.bind(R),R.$checkMultiselectChange=R.$checkMultiselectChange.bind(R),R.$multiselectOnSessionChange(R),R.on("changeSession",R.$multiselectOnSessionChange),R.on("mousedown",o),R.commands.addCommands(f.defaultCommands),M(R))}function M(R){if(!R.textInput)return;var x=R.textInput.getElement(),S=!1;d.addListener(x,"keydown",function(k){var T=k.keyCode==18&&!(k.ctrlKey||k.shiftKey||k.metaKey);R.$blockSelectEnabled&&T?S||(R.renderer.setMouseCursor("crosshair"),S=!0):S&&E()},R),d.addListener(x,"keyup",E,R),d.addListener(x,"blur",E,R);function E(k){S&&(R.renderer.setMouseCursor(""),S=!1)}}n.MultiSelect=w,t("./config").defineOptions(g.prototype,"editor",{enableMultiselect:{set:function(R){w(this),R?this.on("mousedown",o):this.off("mousedown",o)},value:!0},enableBlockSelect:{set:function(R){this.$blockSelectEnabled=R},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(t,n,i){var s=t("../../range").Range,a=n.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(m,o,d){var l=m.getLine(d);return this.foldingStartMarker.test(l)?"start":o=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(l)?"end":""},this.getFoldWidgetRange=function(m,o,d){return null},this.indentationBlock=function(m,o,d){var l=/\S/,f=m.getLine(o),u=f.search(l);if(u!=-1){for(var h=d||f.length,c=m.getLength(),p=o,g=o;++o<c;){var y=m.getLine(o).search(l);if(y!=-1){if(y<=u){var w=m.getTokenAt(o,0);if(!w||w.type!=="string")break}g=o}}if(g>p){var M=m.getLine(g).length;return new s(p,h,g,M)}}},this.openingBracketBlock=function(m,o,d,l,f){var u={row:d,column:l+1},h=m.$findClosingBracket(o,u,f);if(h){var c=m.foldWidgets[h.row];return c==null&&(c=m.getFoldWidget(h.row)),c=="start"&&h.row>u.row&&(h.row--,h.column=m.getLine(h.row).length),s.fromPoints(u,h)}},this.closingBracketBlock=function(m,o,d,l,f){var u={row:d,column:l},h=m.$findOpeningBracket(o,u);if(h)return h.column++,u.column--,s.fromPoints(h,u)}}).call(a.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/lib/dom","ace/range","ace/config"],function(t,n,i){var s=t("../lib/dom"),a=t("../range").Range,m=t("../config").nls;function o(l,f,u){for(var h=0,c=l.length-1;h<=c;){var p=h+c>>1,g=u(f,l[p]);if(g>0)h=p+1;else if(g<0)c=p-1;else return p}return-(h+1)}function d(l,f,u){var h=l.getAnnotations().sort(a.comparePoints);if(h.length){var c=o(h,{row:f,column:-1},a.comparePoints);c<0&&(c=-c-1),c>=h.length?c=u>0?0:h.length-1:c===0&&u<0&&(c=h.length-1);var p=h[c];if(!(!p||!u)){if(p.row===f){do p=h[c+=u];while(p&&p.row===f);if(!p)return h.slice()}var g=[];f=p.row;do g[u<0?"unshift":"push"](p),p=h[c+=u];while(p&&p.row==f);return g.length&&g}}}n.showErrorMarker=function(l,f){var u=l.session,h=l.getCursorPosition(),c=h.row,p=u.widgetManager.getWidgetsAtRow(c).filter(function(k){return k.type=="errorMarker"})[0];p?p.destroy():c-=f;var g=d(u,c,f),y;if(g){var w=g[0];h.column=(w.pos&&typeof w.column!="number"?w.pos.sc:w.column)||0,h.row=w.row,y=l.renderer.$gutterLayer.$annotations[h.row]}else{if(p)return;y={displayText:[m("error-marker.good-state","Looks good!")],className:"ace_ok"}}l.session.unfold(h.row),l.selection.moveToPosition(h);var M={row:h.row,fixedWidth:!0,coverGutter:!0,el:s.createElement("div"),type:"errorMarker"},R=M.el.appendChild(s.createElement("div")),x=M.el.appendChild(s.createElement("div"));x.className="error_widget_arrow "+y.className;var S=l.renderer.$cursorLayer.getPixelPosition(h).left;x.style.left=S+l.renderer.gutterWidth-5+"px",M.el.className="error_widget_wrapper",R.className="error_widget "+y.className,y.displayText.forEach(function(k,T){R.appendChild(s.createTextNode(k)),T<y.displayText.length-1&&R.appendChild(s.createElement("br"))}),R.appendChild(s.createElement("div"));var E=function(k,T,I){if(T===0&&(I==="esc"||I==="return"))return M.destroy(),{command:"null"}};M.destroy=function(){l.$mouseHandler.isMousePressed||(l.keyBinding.removeKeyboardHandler(E),u.widgetManager.removeLineWidget(M),l.off("changeSelection",M.destroy),l.off("changeSession",M.destroy),l.off("mouseup",M.destroy),l.off("change",M.destroy))},l.keyBinding.addKeyboardHandler(E),l.on("changeSelection",M.destroy),l.on("changeSession",M.destroy),l.on("mouseup",M.destroy),l.on("change",M.destroy),l.session.widgetManager.addLineWidget(M),M.el.onmousedown=l.focus.bind(l),l.renderer.scrollCursorIntoView(null,.5,{bottom:M.el.offsetHeight})},s.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(t,n,i){t("./loader_build")(n);var s=t("./lib/dom"),a=t("./range").Range,m=t("./editor").Editor,o=t("./edit_session").EditSession,d=t("./undomanager").UndoManager,l=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),n.config=t("./config"),n.edit=function(u,h){if(typeof u=="string"){var c=u;if(u=document.getElementById(c),!u)throw new Error("ace.edit can't find div #"+c)}if(u&&u.env&&u.env.editor instanceof m)return u.env.editor;var p="";if(u&&/input|textarea/i.test(u.tagName)){var g=u;p=g.value,u=s.createElement("pre"),g.parentNode.replaceChild(u,g)}else u&&(p=u.textContent,u.innerHTML="");var y=n.createEditSession(p),w=new m(new l(u),y,h),M={document:y,editor:w,onResize:w.resize.bind(w,null)};return g&&(M.textarea=g),w.on("destroy",function(){M.editor.container.env=null}),w.container.env=w.env=M,w},n.createEditSession=function(u,h){var c=new o(u,h);return c.setUndoManager(new d),c},n.Range=a,n.Editor=m,n.EditSession=o,n.UndoManager=d,n.VirtualRenderer=l;var f=n.config.version;n.version=f}),(function(){ace.require(["ace/ace"],function(t){t&&(t.config.init(!0),t.define=ace.define);var n=(function(){return this})();!n&&typeof window<"u"&&(n=window),!n&&typeof self<"u"&&(n=self),n.ace||(n.ace=t);for(var i in t)t.hasOwnProperty(i)&&(n.ace[i]=t[i]);n.ace.default=n.ace,r&&(r.exports=n.ace)})})()})(Ra)),Ra.exports}var k5=x5();const I5=C5(k5);var La={exports:{}},u0;function M5(){return u0||(u0=1,(function(r,e){ace.define("ace/mode/python_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,i){var s=t("../lib/oop"),a=t("./text_highlight_rules").TextHighlightRules,m=function(){var o="and|as|assert|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|not|or|pass|print|raise|return|try|while|with|yield|async|await|nonlocal",d="True|False|None|NotImplemented|Ellipsis|__debug__",l="abs|divmod|input|open|staticmethod|all|enumerate|int|ord|str|any|eval|isinstance|pow|sum|basestring|execfile|issubclass|print|super|binfile|bin|iter|property|tuple|bool|filter|len|range|type|bytearray|float|list|raw_input|unichr|callable|format|locals|reduce|unicode|chr|frozenset|long|reload|vars|classmethod|getattr|map|repr|xrange|cmp|globals|max|reversed|zip|compile|hasattr|memoryview|round|__import__|complex|hash|min|apply|delattr|help|next|setattr|set|buffer|dict|hex|object|slice|coerce|dir|id|oct|sorted|intern|ascii|breakpoint|bytes",f=this.createKeywordMapper({"invalid.deprecated":"debugger","support.function":l,"variable.language":"self|cls","constant.language":d,keyword:o},"identifier"),u="[uU]?",h="[rR]",c="[fF]",p="(?:[rR][fF]|[fF][rR])",g="(?:(?:[1-9]\\d*)|(?:0))",y="(?:0[oO]?[0-7]+)",w="(?:0[xX][\\dA-Fa-f]+)",M="(?:0[bB][01]+)",R="(?:"+g+"|"+y+"|"+w+"|"+M+")",x="(?:[eE][+-]?\\d+)",S="(?:\\.\\d+)",E="(?:\\d+)",k="(?:(?:"+E+"?"+S+")|(?:"+E+"\\.))",T="(?:(?:"+k+"|"+E+")"+x+")",I="(?:"+T+"|"+k+")",P=`\\\\(x[0-9A-Fa-f]{2}|[0-7]{3}|[\\\\abfnrtv'"]|U[0-9A-Fa-f]{8}|u[0-9A-Fa-f]{4})`;this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"string",regex:u+'"{3}',next:"qqstring3"},{token:"string",regex:u+'"(?=.)',next:"qqstring"},{token:"string",regex:u+"'{3}",next:"qstring3"},{token:"string",regex:u+"'(?=.)",next:"qstring"},{token:"string",regex:h+'"{3}',next:"rawqqstring3"},{token:"string",regex:h+'"(?=.)',next:"rawqqstring"},{token:"string",regex:h+"'{3}",next:"rawqstring3"},{token:"string",regex:h+"'(?=.)",next:"rawqstring"},{token:"string",regex:c+'"{3}',next:"fqqstring3"},{token:"string",regex:c+'"(?=.)',next:"fqqstring"},{token:"string",regex:c+"'{3}",next:"fqstring3"},{token:"string",regex:c+"'(?=.)",next:"fqstring"},{token:"string",regex:p+'"{3}',next:"rfqqstring3"},{token:"string",regex:p+'"(?=.)',next:"rfqqstring"},{token:"string",regex:p+"'{3}",next:"rfqstring3"},{token:"string",regex:p+"'(?=.)",next:"rfqstring"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|%|@|<<|>>|&|\\||\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"punctuation",regex:",|:|;|\\->|\\+=|\\-=|\\*=|\\/=|\\/\\/=|%=|@=|&=|\\|=|^=|>>=|<<=|\\*\\*="},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:["keyword","text","entity.name.function"],regex:"(def|class)(\\s+)([\\u00BF-\\u1FFF\\u2C00-\\uD7FF\\w]+)"},{token:"text",regex:"\\s+"},{include:"constants"}],qqstring3:[{token:"constant.language.escape",regex:P},{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],qstring3:[{token:"constant.language.escape",regex:P},{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],qqstring:[{token:"constant.language.escape",regex:P},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:P},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],rawqqstring3:[{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],rawqstring3:[{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],rawqqstring:[{token:"string",regex:"\\\\$",next:"rawqqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],rawqstring:[{token:"string",regex:"\\\\$",next:"rawqstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],fqqstring3:[{token:"constant.language.escape",regex:P},{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring3:[{token:"constant.language.escape",regex:P},{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqqstring:[{token:"constant.language.escape",regex:P},{token:"string",regex:"\\\\$",next:"fqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring:[{token:"constant.language.escape",regex:P},{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring3:[{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring3:[{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring:[{token:"string",regex:"\\\\$",next:"rfqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring:[{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstringParRules:[{token:"paren.lparen",regex:"[\\[\\(]"},{token:"paren.rparen",regex:"[\\]\\)]"},{token:"string",regex:"\\s+"},{token:"string",regex:"'[^']*'"},{token:"string",regex:'"[^"]*"'},{token:"function.support",regex:"(!s|!r|!a)"},{include:"constants"},{token:"paren.rparen",regex:"}",next:"pop"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"}],constants:[{token:"constant.numeric",regex:"(?:"+I+"|\\d+)[jJ]\\b"},{token:"constant.numeric",regex:I},{token:"constant.numeric",regex:R+"[lL]\\b"},{token:"constant.numeric",regex:R+"\\b"},{token:["punctuation","function.support"],regex:"(\\.)([a-zA-Z_]+)\\b"},{token:f,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"}]},this.normalizeRules()};s.inherits(m,a),n.PythonHighlightRules=m}),ace.define("ace/mode/folding/pythonic",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(t,n,i){var s=t("../../lib/oop"),a=t("./fold_mode").FoldMode,m=n.FoldMode=function(o){this.foldingStartMarker=new RegExp("([\\[{])(?:\\s*)$|("+o+")(?:\\s*)(?:#.*)?$")};s.inherits(m,a),(function(){this.getFoldWidgetRange=function(o,d,l){var f=o.getLine(l),u=f.match(this.foldingStartMarker);if(u)return u[1]?this.openingBracketBlock(o,u[1],l,u.index):u[2]?this.indentationBlock(o,l,u.index+u[2].length):this.indentationBlock(o,l)}}).call(m.prototype)}),ace.define("ace/mode/python",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/python_highlight_rules","ace/mode/folding/pythonic","ace/range"],function(t,n,i){var s=t("../lib/oop"),a=t("./text").Mode,m=t("./python_highlight_rules").PythonHighlightRules,o=t("./folding/pythonic").FoldMode,d=t("../range").Range,l=function(){this.HighlightRules=m,this.foldingRules=new o("\\:"),this.$behaviour=this.$defaultBehaviour};s.inherits(l,a),(function(){this.lineCommentStart="#",this.$pairQuotesAfter={"'":/[ruf]/i,'"':/[ruf]/i},this.getNextLineIndent=function(u,h,c){var p=this.$getIndent(h),g=this.getTokenizer().getLineTokens(h,u),y=g.tokens;if(y.length&&y[y.length-1].type=="comment")return p;if(u=="start"){var w=h.match(/^.*[\{\(\[:]\s*$/);w&&(p+=c)}return p};var f={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(u,h,c){if(c!==`\r
`&&c!=="\r"&&c!==`
`)return!1;var p=this.getTokenizer().getLineTokens(h.trim(),u).tokens;if(!p)return!1;do var g=p.pop();while(g&&(g.type=="comment"||g.type=="text"&&g.value.match(/^\s+$/)));return g?g.type=="keyword"&&f[g.value]:!1},this.autoOutdent=function(u,h,c){c+=1;var p=this.$getIndent(h.getLine(c)),g=h.getTabString();p.slice(-g.length)==g&&h.remove(new d(c,p.length-g.length,c,p.length))},this.$id="ace/mode/python",this.snippetFileId="ace/snippets/python"}).call(l.prototype),n.Mode=l}),(function(){ace.require(["ace/mode/python"],function(t){r&&(r.exports=t)})})()})(La)),La.exports}M5();var $a={exports:{}},h0;function R5(){return h0||(h0=1,(function(r,e){ace.define("ace/theme/monokai-css",["require","exports","module"],function(t,n,i){i.exports=`.ace-monokai .ace_gutter {
  background: #2F3129;
  color: #8F908A
}

.ace-monokai .ace_print-margin {
  width: 1px;
  background: #555651
}

.ace-monokai {
  background-color: #272822;
  color: #F8F8F2
}

.ace-monokai .ace_cursor {
  color: #F8F8F0
}

.ace-monokai .ace_marker-layer .ace_selection {
  background: #49483E
}

.ace-monokai.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px #272822;
}

.ace-monokai .ace_marker-layer .ace_step {
  background: rgb(102, 82, 0)
}

.ace-monokai .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid #49483E
}

.ace-monokai .ace_marker-layer .ace_active-line {
  background: #202020
}

.ace-monokai .ace_gutter-active-line {
  background-color: #272727
}

.ace-monokai .ace_marker-layer .ace_selected-word {
  border: 1px solid #49483E
}

.ace-monokai .ace_invisible {
  color: #52524d
}

.ace-monokai .ace_entity.ace_name.ace_tag,
.ace-monokai .ace_keyword,
.ace-monokai .ace_meta.ace_tag,
.ace-monokai .ace_storage {
  color: #F92672
}

.ace-monokai .ace_punctuation,
.ace-monokai .ace_punctuation.ace_tag {
  color: #fff
}

.ace-monokai .ace_constant.ace_character,
.ace-monokai .ace_constant.ace_language,
.ace-monokai .ace_constant.ace_numeric,
.ace-monokai .ace_constant.ace_other {
  color: #AE81FF
}

.ace-monokai .ace_invalid {
  color: #F8F8F0;
  background-color: #F92672
}

.ace-monokai .ace_invalid.ace_deprecated {
  color: #F8F8F0;
  background-color: #AE81FF
}

.ace-monokai .ace_support.ace_constant,
.ace-monokai .ace_support.ace_function {
  color: #66D9EF
}

.ace-monokai .ace_fold {
  background-color: #A6E22E;
  border-color: #F8F8F2
}

.ace-monokai .ace_storage.ace_type,
.ace-monokai .ace_support.ace_class,
.ace-monokai .ace_support.ace_type {
  font-style: italic;
  color: #66D9EF
}

.ace-monokai .ace_entity.ace_name.ace_function,
.ace-monokai .ace_entity.ace_other,
.ace-monokai .ace_entity.ace_other.ace_attribute-name,
.ace-monokai .ace_variable {
  color: #A6E22E
}

.ace-monokai .ace_variable.ace_parameter {
  font-style: italic;
  color: #FD971F
}

.ace-monokai .ace_string {
  color: #E6DB74
}

.ace-monokai .ace_comment {
  color: #75715E
}

.ace-monokai .ace_indent-guide {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y
}

.ace-monokai .ace_indent-guide-active {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;
}
`}),ace.define("ace/theme/monokai",["require","exports","module","ace/theme/monokai-css","ace/lib/dom"],function(t,n,i){n.isDark=!0,n.cssClass="ace-monokai",n.cssText=t("./monokai-css");var s=t("../lib/dom");s.importCssString(n.cssText,n.cssClass,!1)}),(function(){ace.require(["ace/theme/monokai"],function(t){r&&(r.exports=t)})})()})($a)),$a.exports}R5();class Ct{constructor(e,t,n){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=e,this.start=t,this.end=n}static range(e,t){return t?!e||!e.loc||!t.loc||e.loc.lexer!==t.loc.lexer?null:new Ct(e.loc.lexer,e.loc.start,t.loc.end):e&&e.loc}}class Rt{constructor(e,t){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=e,this.loc=t}range(e,t){return new Rt(t,Ct.range(this,e))}}class ue{constructor(e,t){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var n="KaTeX parse error: "+e,i,s,a=t&&t.loc;if(a&&a.start<=a.end){var m=a.lexer.input;i=a.start,s=a.end,i===m.length?n+=" at end of input: ":n+=" at position "+(i+1)+": ";var o=m.slice(i,s).replace(/[^]/g,"$&"),d;i>15?d=""+m.slice(i-15,i):d=m.slice(0,i);var l;s+15<m.length?l=m.slice(s,s+15)+"":l=m.slice(s),n+=d+o+l}var f=new Error(n);return f.name="ParseError",f.__proto__=ue.prototype,f.position=i,i!=null&&s!=null&&(f.length=s-i),f.rawMessage=e,f}}ue.prototype.__proto__=Error.prototype;var L5=function(e,t){return e===void 0?t:e},$5=/([A-Z])/g,D5=function(e){return e.replace($5,"-$1").toLowerCase()},N5={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},P5=/[&><"']/g;function O5(r){return String(r).replace(P5,e=>N5[e])}var bp=function r(e){return e.type==="ordgroup"||e.type==="color"?e.body.length===1?r(e.body[0]):e:e.type==="font"?r(e.body):e},F5=function(e){var t=bp(e);return t.type==="mathord"||t.type==="textord"||t.type==="atom"},z5=function(e){if(!e)throw new Error("Expected non-null, but got "+String(e));return e},V5=function(e){var t=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(e);return t?t[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(t[1])?null:t[1].toLowerCase():"_relative"},Ne={deflt:L5,escape:O5,hyphenate:D5,getBaseElem:bp,isCharacterBox:F5,protocolFromUrl:V5},Zs={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:r=>"#"+r},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(r,e)=>(e.push(r),e)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:r=>Math.max(0,r),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:r=>Math.max(0,r),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:r=>Math.max(0,r),cli:"-e, --max-expand <n>",cliProcessor:r=>r==="Infinity"?1/0:parseInt(r)},globalGroup:{type:"boolean",cli:!1}};function B5(r){if(r.default)return r.default;var e=r.type,t=Array.isArray(e)?e[0]:e;if(typeof t!="string")return t.enum[0];switch(t){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class Ac{constructor(e){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,e=e||{};for(var t in Zs)if(Zs.hasOwnProperty(t)){var n=Zs[t];this[t]=e[t]!==void 0?n.processor?n.processor(e[t]):e[t]:B5(n)}}reportNonstrict(e,t,n){var i=this.strict;if(typeof i=="function"&&(i=i(e,t,n)),!(!i||i==="ignore")){if(i===!0||i==="error")throw new ue("LaTeX-incompatible input and strict mode is set to 'error': "+(t+" ["+e+"]"),n);i==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]"))}}useStrictBehavior(e,t,n){var i=this.strict;if(typeof i=="function")try{i=i(e,t,n)}catch{i="error"}return!i||i==="ignore"?!1:i===!0||i==="error"?!0:i==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(t+" ["+e+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+i+"': "+t+" ["+e+"]")),!1)}isTrusted(e){if(e.url&&!e.protocol){var t=Ne.protocolFromUrl(e.url);if(t==null)return!1;e.protocol=t}var n=typeof this.trust=="function"?this.trust(e):this.trust;return!!n}}class Nn{constructor(e,t,n){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=e,this.size=t,this.cramped=n}sup(){return Qt[U5[this.id]]}sub(){return Qt[H5[this.id]]}fracNum(){return Qt[W5[this.id]]}fracDen(){return Qt[j5[this.id]]}cramp(){return Qt[G5[this.id]]}text(){return Qt[q5[this.id]]}isTight(){return this.size>=2}}var Tc=0,Ao=1,Vr=2,vn=3,Ji=4,Ot=5,Yr=6,St=7,Qt=[new Nn(Tc,0,!1),new Nn(Ao,0,!0),new Nn(Vr,1,!1),new Nn(vn,1,!0),new Nn(Ji,2,!1),new Nn(Ot,2,!0),new Nn(Yr,3,!1),new Nn(St,3,!0)],U5=[Ji,Ot,Ji,Ot,Yr,St,Yr,St],H5=[Ot,Ot,Ot,Ot,St,St,St,St],W5=[Vr,vn,Ji,Ot,Yr,St,Yr,St],j5=[vn,vn,Ot,Ot,St,St,St,St],G5=[Ao,Ao,vn,vn,Ot,Ot,St,St],q5=[Tc,Ao,Vr,vn,Vr,vn,Vr,vn],we={DISPLAY:Qt[Tc],TEXT:Qt[Vr],SCRIPT:Qt[Ji],SCRIPTSCRIPT:Qt[Yr]},bl=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function K5(r){for(var e=0;e<bl.length;e++)for(var t=bl[e],n=0;n<t.blocks.length;n++){var i=t.blocks[n];if(r>=i[0]&&r<=i[1])return t.name}return null}var eo=[];bl.forEach(r=>r.blocks.forEach(e=>eo.push(...e)));function _p(r){for(var e=0;e<eo.length;e+=2)if(r>=eo[e]&&r<=eo[e+1])return!0;return!1}var Rr=80,Y5=function(e,t){return"M95,"+(622+e+t)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+e/2.075+" -"+e+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+e)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},Q5=function(e,t){return"M263,"+(601+e+t)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+e/2.084+" -"+e+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+e)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},X5=function(e,t){return"M983 "+(10+e+t)+`
l`+e/3.13+" -"+e+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+e)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+e)+" "+t+"h400000v"+(40+e)+"h-400000z"},J5=function(e,t){return"M424,"+(2398+e+t)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+e/4.223+" -"+e+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+e)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+e)+" "+t+`
h400000v`+(40+e)+"h-400000z"},Z5=function(e,t){return"M473,"+(2713+e+t)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+e/5.298+" -"+e+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+e)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+e)+" "+t+"h400000v"+(40+e)+"H1017.7z"},e3=function(e){var t=e/2;return"M400000 "+e+" H0 L"+t+" 0 l65 45 L145 "+(e-80)+" H400000z"},t3=function(e,t,n){var i=n-54-t-e;return"M702 "+(e+t)+"H400000"+(40+e)+`
H742v`+i+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+t+"H400000v"+(40+e)+"H742z"},n3=function(e,t,n){t=1e3*t;var i="";switch(e){case"sqrtMain":i=Y5(t,Rr);break;case"sqrtSize1":i=Q5(t,Rr);break;case"sqrtSize2":i=X5(t,Rr);break;case"sqrtSize3":i=J5(t,Rr);break;case"sqrtSize4":i=Z5(t,Rr);break;case"sqrtTall":i=t3(t,Rr,n)}return i},r3=function(e,t){switch(e){case"":return"M291 0 H417 V"+t+" H291z M291 0 H417 V"+t+" H291z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z";case"":return"M145 0 H188 V"+t+" H145z M145 0 H188 V"+t+" H145z"+("M367 0 H410 V"+t+" H367z M367 0 H410 V"+t+" H367z");case"":return"M457 0 H583 V"+t+" H457z M457 0 H583 V"+t+" H457z";case"":return"M319 0 H403 V"+t+" H319z M319 0 H403 V"+t+" H319z";case"":return"M263 0 H347 V"+t+" H263z M263 0 H347 V"+t+" H263z";case"":return"M384 0 H504 V"+t+" H384z M384 0 H504 V"+t+" H384z";case"":return"M312 0 H355 V"+t+" H312z M312 0 H355 V"+t+" H312z";case"":return"M257 0 H300 V"+t+" H257z M257 0 H300 V"+t+" H257z"+("M478 0 H521 V"+t+" H478z M478 0 H521 V"+t+" H478z");default:return""}},d0={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},i3=function(e,t){switch(e){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+t+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+t+" v1759 h84z";case"vert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+" v585 h43z";case"doublevert":return"M145 15 v585 v"+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+t+` v585 h43z
M367 15 v585 v`+t+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-t+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+t+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+t+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+t+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+t+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+t+` v602 h84z
M403 1759 V0 H319 V1759 v`+t+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+t+` v602 h84z
M347 1759 V0 h-84 V1759 v`+t+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(t+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(t+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(t+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(t+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class fs{constructor(e){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=e,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(e){return this.classes.includes(e)}toNode(){for(var e=document.createDocumentFragment(),t=0;t<this.children.length;t++)e.appendChild(this.children[t].toNode());return e}toMarkup(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].toMarkup();return e}toText(){var e=t=>t.toText();return this.children.map(e).join("")}}var Xt={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},Ds={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},f0={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function s3(r,e){Xt[r]=e}function Ec(r,e,t){if(!Xt[e])throw new Error("Font metrics not found for font: "+e+".");var n=r.charCodeAt(0),i=Xt[e][n];if(!i&&r[0]in f0&&(n=f0[r[0]].charCodeAt(0),i=Xt[e][n]),!i&&t==="text"&&_p(n)&&(i=Xt[e][77]),i)return{depth:i[0],height:i[1],italic:i[2],skew:i[3],width:i[4]}}var Da={};function o3(r){var e;if(r>=5?e=0:r>=3?e=1:e=2,!Da[e]){var t=Da[e]={cssEmPerMu:Ds.quad[e]/18};for(var n in Ds)Ds.hasOwnProperty(n)&&(t[n]=Ds[n][e])}return Da[e]}var a3=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],p0=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],m0=function(e,t){return t.size<2?e:a3[e-1][t.size-1]};class hn{constructor(e){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=e.style,this.color=e.color,this.size=e.size||hn.BASESIZE,this.textSize=e.textSize||this.size,this.phantom=!!e.phantom,this.font=e.font||"",this.fontFamily=e.fontFamily||"",this.fontWeight=e.fontWeight||"",this.fontShape=e.fontShape||"",this.sizeMultiplier=p0[this.size-1],this.maxSize=e.maxSize,this.minRuleThickness=e.minRuleThickness,this._fontMetrics=void 0}extend(e){var t={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return new hn(t)}havingStyle(e){return this.style===e?this:this.extend({style:e,size:m0(this.textSize,e)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(e){return this.size===e&&this.textSize===e?this:this.extend({style:this.style.text(),size:e,textSize:e,sizeMultiplier:p0[e-1]})}havingBaseStyle(e){e=e||this.style.text();var t=m0(hn.BASESIZE,e);return this.size===t&&this.textSize===hn.BASESIZE&&this.style===e?this:this.extend({style:e,size:t})}havingBaseSizing(){var e;switch(this.style.id){case 4:case 5:e=3;break;case 6:case 7:e=1;break;default:e=6}return this.extend({style:this.style.text(),size:e})}withColor(e){return this.extend({color:e})}withPhantom(){return this.extend({phantom:!0})}withFont(e){return this.extend({font:e})}withTextFontFamily(e){return this.extend({fontFamily:e,font:""})}withTextFontWeight(e){return this.extend({fontWeight:e,font:""})}withTextFontShape(e){return this.extend({fontShape:e,font:""})}sizingClasses(e){return e.size!==this.size?["sizing","reset-size"+e.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==hn.BASESIZE?["sizing","reset-size"+this.size,"size"+hn.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=o3(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}hn.BASESIZE=6;var _l={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},l3={ex:!0,em:!0,mu:!0},Sp=function(e){return typeof e!="string"&&(e=e.unit),e in _l||e in l3||e==="ex"},qe=function(e,t){var n;if(e.unit in _l)n=_l[e.unit]/t.fontMetrics().ptPerEm/t.sizeMultiplier;else if(e.unit==="mu")n=t.fontMetrics().cssEmPerMu;else{var i;if(t.style.isTight()?i=t.havingStyle(t.style.text()):i=t,e.unit==="ex")n=i.fontMetrics().xHeight;else if(e.unit==="em")n=i.fontMetrics().quad;else throw new ue("Invalid unit: '"+e.unit+"'");i!==t&&(n*=i.sizeMultiplier/t.sizeMultiplier)}return Math.min(e.number*n,t.maxSize)},de=function(e){return+e.toFixed(4)+"em"},er=function(e){return e.filter(t=>t).join(" ")},Ap=function(e,t,n){if(this.classes=e||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=n||{},t){t.style.isTight()&&this.classes.push("mtight");var i=t.getColor();i&&(this.style.color=i)}},Tp=function(e){var t=document.createElement(e);t.className=er(this.classes);for(var n in this.style)this.style.hasOwnProperty(n)&&(t.style[n]=this.style[n]);for(var i in this.attributes)this.attributes.hasOwnProperty(i)&&t.setAttribute(i,this.attributes[i]);for(var s=0;s<this.children.length;s++)t.appendChild(this.children[s].toNode());return t},c3=/[\s"'>/=\x00-\x1f]/,Ep=function(e){var t="<"+e;this.classes.length&&(t+=' class="'+Ne.escape(er(this.classes))+'"');var n="";for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=Ne.hyphenate(i)+":"+this.style[i]+";");n&&(t+=' style="'+Ne.escape(n)+'"');for(var s in this.attributes)if(this.attributes.hasOwnProperty(s)){if(c3.test(s))throw new ue("Invalid attribute name '"+s+"'");t+=" "+s+'="'+Ne.escape(this.attributes[s])+'"'}t+=">";for(var a=0;a<this.children.length;a++)t+=this.children[a].toMarkup();return t+="</"+e+">",t};class ps{constructor(e,t,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,Ap.call(this,e,n,i),this.children=t||[]}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return this.classes.includes(e)}toNode(){return Tp.call(this,"span")}toMarkup(){return Ep.call(this,"span")}}class Cc{constructor(e,t,n,i){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,Ap.call(this,t,i),this.children=n||[],this.setAttribute("href",e)}setAttribute(e,t){this.attributes[e]=t}hasClass(e){return this.classes.includes(e)}toNode(){return Tp.call(this,"a")}toMarkup(){return Ep.call(this,"a")}}class u3{constructor(e,t,n){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=t,this.src=e,this.classes=["mord"],this.style=n}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createElement("img");e.src=this.src,e.alt=this.alt,e.className="mord";for(var t in this.style)this.style.hasOwnProperty(t)&&(e.style[t]=this.style[t]);return e}toMarkup(){var e='<img src="'+Ne.escape(this.src)+'"'+(' alt="'+Ne.escape(this.alt)+'"'),t="";for(var n in this.style)this.style.hasOwnProperty(n)&&(t+=Ne.hyphenate(n)+":"+this.style[n]+";");return t&&(e+=' style="'+Ne.escape(t)+'"'),e+="'/>",e}}var h3={:"",:"",:"",:""};class zt{constructor(e,t,n,i,s,a,m,o){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=e,this.height=t||0,this.depth=n||0,this.italic=i||0,this.skew=s||0,this.width=a||0,this.classes=m||[],this.style=o||{},this.maxFontSize=0;var d=K5(this.text.charCodeAt(0));d&&this.classes.push(d+"_fallback"),/[]/.test(this.text)&&(this.text=h3[this.text])}hasClass(e){return this.classes.includes(e)}toNode(){var e=document.createTextNode(this.text),t=null;this.italic>0&&(t=document.createElement("span"),t.style.marginRight=de(this.italic)),this.classes.length>0&&(t=t||document.createElement("span"),t.className=er(this.classes));for(var n in this.style)this.style.hasOwnProperty(n)&&(t=t||document.createElement("span"),t.style[n]=this.style[n]);return t?(t.appendChild(e),t):e}toMarkup(){var e=!1,t="<span";this.classes.length&&(e=!0,t+=' class="',t+=Ne.escape(er(this.classes)),t+='"');var n="";this.italic>0&&(n+="margin-right:"+this.italic+"em;");for(var i in this.style)this.style.hasOwnProperty(i)&&(n+=Ne.hyphenate(i)+":"+this.style[i]+";");n&&(e=!0,t+=' style="'+Ne.escape(n)+'"');var s=Ne.escape(this.text);return e?(t+=">",t+=s,t+="</span>",t):s}}class An{constructor(e,t){this.children=void 0,this.attributes=void 0,this.children=e||[],this.attributes=t||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);for(var i=0;i<this.children.length;i++)t.appendChild(this.children[i].toNode());return t}toMarkup(){var e='<svg xmlns="http://www.w3.org/2000/svg"';for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Ne.escape(this.attributes[t])+'"');e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</svg>",e}}class tr{constructor(e,t){this.pathName=void 0,this.alternate=void 0,this.pathName=e,this.alternate=t}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"path");return this.alternate?t.setAttribute("d",this.alternate):t.setAttribute("d",d0[this.pathName]),t}toMarkup(){return this.alternate?'<path d="'+Ne.escape(this.alternate)+'"/>':'<path d="'+Ne.escape(d0[this.pathName])+'"/>'}}class Sl{constructor(e){this.attributes=void 0,this.attributes=e||{}}toNode(){var e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"line");for(var n in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,n)&&t.setAttribute(n,this.attributes[n]);return t}toMarkup(){var e="<line";for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="'+Ne.escape(this.attributes[t])+'"');return e+="/>",e}}function g0(r){if(r instanceof zt)return r;throw new Error("Expected symbolNode but got "+String(r)+".")}function d3(r){if(r instanceof ps)return r;throw new Error("Expected span<HtmlDomNode> but got "+String(r)+".")}var f3={bin:1,close:1,inner:1,open:1,punct:1,rel:1},p3={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Ve={math:{},text:{}};function $(r,e,t,n,i,s){Ve[r][i]={font:e,group:t,replace:n},s&&n&&(Ve[r][n]=Ve[r][i])}var N="math",oe="text",z="main",j="ams",We="accent-token",me="bin",At="close",ii="inner",ye="mathord",rt="op-token",$t="open",Yo="punct",q="rel",xn="spacing",Y="textord";$(N,z,q,"","\\equiv",!0);$(N,z,q,"","\\prec",!0);$(N,z,q,"","\\succ",!0);$(N,z,q,"","\\sim",!0);$(N,z,q,"","\\perp");$(N,z,q,"","\\preceq",!0);$(N,z,q,"","\\succeq",!0);$(N,z,q,"","\\simeq",!0);$(N,z,q,"","\\mid",!0);$(N,z,q,"","\\ll",!0);$(N,z,q,"","\\gg",!0);$(N,z,q,"","\\asymp",!0);$(N,z,q,"","\\parallel");$(N,z,q,"","\\bowtie",!0);$(N,z,q,"","\\smile",!0);$(N,z,q,"","\\sqsubseteq",!0);$(N,z,q,"","\\sqsupseteq",!0);$(N,z,q,"","\\doteq",!0);$(N,z,q,"","\\frown",!0);$(N,z,q,"","\\ni",!0);$(N,z,q,"","\\propto",!0);$(N,z,q,"","\\vdash",!0);$(N,z,q,"","\\dashv",!0);$(N,z,q,"","\\owns");$(N,z,Yo,".","\\ldotp");$(N,z,Yo,"","\\cdotp");$(N,z,Y,"#","\\#");$(oe,z,Y,"#","\\#");$(N,z,Y,"&","\\&");$(oe,z,Y,"&","\\&");$(N,z,Y,"","\\aleph",!0);$(N,z,Y,"","\\forall",!0);$(N,z,Y,"","\\hbar",!0);$(N,z,Y,"","\\exists",!0);$(N,z,Y,"","\\nabla",!0);$(N,z,Y,"","\\flat",!0);$(N,z,Y,"","\\ell",!0);$(N,z,Y,"","\\natural",!0);$(N,z,Y,"","\\clubsuit",!0);$(N,z,Y,"","\\wp",!0);$(N,z,Y,"","\\sharp",!0);$(N,z,Y,"","\\diamondsuit",!0);$(N,z,Y,"","\\Re",!0);$(N,z,Y,"","\\heartsuit",!0);$(N,z,Y,"","\\Im",!0);$(N,z,Y,"","\\spadesuit",!0);$(N,z,Y,"","\\S",!0);$(oe,z,Y,"","\\S");$(N,z,Y,"","\\P",!0);$(oe,z,Y,"","\\P");$(N,z,Y,"","\\dag");$(oe,z,Y,"","\\dag");$(oe,z,Y,"","\\textdagger");$(N,z,Y,"","\\ddag");$(oe,z,Y,"","\\ddag");$(oe,z,Y,"","\\textdaggerdbl");$(N,z,At,"","\\rmoustache",!0);$(N,z,$t,"","\\lmoustache",!0);$(N,z,At,"","\\rgroup",!0);$(N,z,$t,"","\\lgroup",!0);$(N,z,me,"","\\mp",!0);$(N,z,me,"","\\ominus",!0);$(N,z,me,"","\\uplus",!0);$(N,z,me,"","\\sqcap",!0);$(N,z,me,"","\\ast");$(N,z,me,"","\\sqcup",!0);$(N,z,me,"","\\bigcirc",!0);$(N,z,me,"","\\bullet",!0);$(N,z,me,"","\\ddagger");$(N,z,me,"","\\wr",!0);$(N,z,me,"","\\amalg");$(N,z,me,"&","\\And");$(N,z,q,"","\\longleftarrow",!0);$(N,z,q,"","\\Leftarrow",!0);$(N,z,q,"","\\Longleftarrow",!0);$(N,z,q,"","\\longrightarrow",!0);$(N,z,q,"","\\Rightarrow",!0);$(N,z,q,"","\\Longrightarrow",!0);$(N,z,q,"","\\leftrightarrow",!0);$(N,z,q,"","\\longleftrightarrow",!0);$(N,z,q,"","\\Leftrightarrow",!0);$(N,z,q,"","\\Longleftrightarrow",!0);$(N,z,q,"","\\mapsto",!0);$(N,z,q,"","\\longmapsto",!0);$(N,z,q,"","\\nearrow",!0);$(N,z,q,"","\\hookleftarrow",!0);$(N,z,q,"","\\hookrightarrow",!0);$(N,z,q,"","\\searrow",!0);$(N,z,q,"","\\leftharpoonup",!0);$(N,z,q,"","\\rightharpoonup",!0);$(N,z,q,"","\\swarrow",!0);$(N,z,q,"","\\leftharpoondown",!0);$(N,z,q,"","\\rightharpoondown",!0);$(N,z,q,"","\\nwarrow",!0);$(N,z,q,"","\\rightleftharpoons",!0);$(N,j,q,"","\\nless",!0);$(N,j,q,"","\\@nleqslant");$(N,j,q,"","\\@nleqq");$(N,j,q,"","\\lneq",!0);$(N,j,q,"","\\lneqq",!0);$(N,j,q,"","\\@lvertneqq");$(N,j,q,"","\\lnsim",!0);$(N,j,q,"","\\lnapprox",!0);$(N,j,q,"","\\nprec",!0);$(N,j,q,"","\\npreceq",!0);$(N,j,q,"","\\precnsim",!0);$(N,j,q,"","\\precnapprox",!0);$(N,j,q,"","\\nsim",!0);$(N,j,q,"","\\@nshortmid");$(N,j,q,"","\\nmid",!0);$(N,j,q,"","\\nvdash",!0);$(N,j,q,"","\\nvDash",!0);$(N,j,q,"","\\ntriangleleft");$(N,j,q,"","\\ntrianglelefteq",!0);$(N,j,q,"","\\subsetneq",!0);$(N,j,q,"","\\@varsubsetneq");$(N,j,q,"","\\subsetneqq",!0);$(N,j,q,"","\\@varsubsetneqq");$(N,j,q,"","\\ngtr",!0);$(N,j,q,"","\\@ngeqslant");$(N,j,q,"","\\@ngeqq");$(N,j,q,"","\\gneq",!0);$(N,j,q,"","\\gneqq",!0);$(N,j,q,"","\\@gvertneqq");$(N,j,q,"","\\gnsim",!0);$(N,j,q,"","\\gnapprox",!0);$(N,j,q,"","\\nsucc",!0);$(N,j,q,"","\\nsucceq",!0);$(N,j,q,"","\\succnsim",!0);$(N,j,q,"","\\succnapprox",!0);$(N,j,q,"","\\ncong",!0);$(N,j,q,"","\\@nshortparallel");$(N,j,q,"","\\nparallel",!0);$(N,j,q,"","\\nVDash",!0);$(N,j,q,"","\\ntriangleright");$(N,j,q,"","\\ntrianglerighteq",!0);$(N,j,q,"","\\@nsupseteqq");$(N,j,q,"","\\supsetneq",!0);$(N,j,q,"","\\@varsupsetneq");$(N,j,q,"","\\supsetneqq",!0);$(N,j,q,"","\\@varsupsetneqq");$(N,j,q,"","\\nVdash",!0);$(N,j,q,"","\\precneqq",!0);$(N,j,q,"","\\succneqq",!0);$(N,j,q,"","\\@nsubseteqq");$(N,j,me,"","\\unlhd");$(N,j,me,"","\\unrhd");$(N,j,q,"","\\nleftarrow",!0);$(N,j,q,"","\\nrightarrow",!0);$(N,j,q,"","\\nLeftarrow",!0);$(N,j,q,"","\\nRightarrow",!0);$(N,j,q,"","\\nleftrightarrow",!0);$(N,j,q,"","\\nLeftrightarrow",!0);$(N,j,q,"","\\vartriangle");$(N,j,Y,"","\\hslash");$(N,j,Y,"","\\triangledown");$(N,j,Y,"","\\lozenge");$(N,j,Y,"","\\circledS");$(N,j,Y,"","\\circledR");$(oe,j,Y,"","\\circledR");$(N,j,Y,"","\\measuredangle",!0);$(N,j,Y,"","\\nexists");$(N,j,Y,"","\\mho");$(N,j,Y,"","\\Finv",!0);$(N,j,Y,"","\\Game",!0);$(N,j,Y,"","\\backprime");$(N,j,Y,"","\\blacktriangle");$(N,j,Y,"","\\blacktriangledown");$(N,j,Y,"","\\blacksquare");$(N,j,Y,"","\\blacklozenge");$(N,j,Y,"","\\bigstar");$(N,j,Y,"","\\sphericalangle",!0);$(N,j,Y,"","\\complement",!0);$(N,j,Y,"","\\eth",!0);$(oe,z,Y,"","");$(N,j,Y,"","\\diagup");$(N,j,Y,"","\\diagdown");$(N,j,Y,"","\\square");$(N,j,Y,"","\\Box");$(N,j,Y,"","\\Diamond");$(N,j,Y,"","\\yen",!0);$(oe,j,Y,"","\\yen",!0);$(N,j,Y,"","\\checkmark",!0);$(oe,j,Y,"","\\checkmark");$(N,j,Y,"","\\beth",!0);$(N,j,Y,"","\\daleth",!0);$(N,j,Y,"","\\gimel",!0);$(N,j,Y,"","\\digamma",!0);$(N,j,Y,"","\\varkappa");$(N,j,$t,"","\\@ulcorner",!0);$(N,j,At,"","\\@urcorner",!0);$(N,j,$t,"","\\@llcorner",!0);$(N,j,At,"","\\@lrcorner",!0);$(N,j,q,"","\\leqq",!0);$(N,j,q,"","\\leqslant",!0);$(N,j,q,"","\\eqslantless",!0);$(N,j,q,"","\\lesssim",!0);$(N,j,q,"","\\lessapprox",!0);$(N,j,q,"","\\approxeq",!0);$(N,j,me,"","\\lessdot");$(N,j,q,"","\\lll",!0);$(N,j,q,"","\\lessgtr",!0);$(N,j,q,"","\\lesseqgtr",!0);$(N,j,q,"","\\lesseqqgtr",!0);$(N,j,q,"","\\doteqdot");$(N,j,q,"","\\risingdotseq",!0);$(N,j,q,"","\\fallingdotseq",!0);$(N,j,q,"","\\backsim",!0);$(N,j,q,"","\\backsimeq",!0);$(N,j,q,"","\\subseteqq",!0);$(N,j,q,"","\\Subset",!0);$(N,j,q,"","\\sqsubset",!0);$(N,j,q,"","\\preccurlyeq",!0);$(N,j,q,"","\\curlyeqprec",!0);$(N,j,q,"","\\precsim",!0);$(N,j,q,"","\\precapprox",!0);$(N,j,q,"","\\vartriangleleft");$(N,j,q,"","\\trianglelefteq");$(N,j,q,"","\\vDash",!0);$(N,j,q,"","\\Vvdash",!0);$(N,j,q,"","\\smallsmile");$(N,j,q,"","\\smallfrown");$(N,j,q,"","\\bumpeq",!0);$(N,j,q,"","\\Bumpeq",!0);$(N,j,q,"","\\geqq",!0);$(N,j,q,"","\\geqslant",!0);$(N,j,q,"","\\eqslantgtr",!0);$(N,j,q,"","\\gtrsim",!0);$(N,j,q,"","\\gtrapprox",!0);$(N,j,me,"","\\gtrdot");$(N,j,q,"","\\ggg",!0);$(N,j,q,"","\\gtrless",!0);$(N,j,q,"","\\gtreqless",!0);$(N,j,q,"","\\gtreqqless",!0);$(N,j,q,"","\\eqcirc",!0);$(N,j,q,"","\\circeq",!0);$(N,j,q,"","\\triangleq",!0);$(N,j,q,"","\\thicksim");$(N,j,q,"","\\thickapprox");$(N,j,q,"","\\supseteqq",!0);$(N,j,q,"","\\Supset",!0);$(N,j,q,"","\\sqsupset",!0);$(N,j,q,"","\\succcurlyeq",!0);$(N,j,q,"","\\curlyeqsucc",!0);$(N,j,q,"","\\succsim",!0);$(N,j,q,"","\\succapprox",!0);$(N,j,q,"","\\vartriangleright");$(N,j,q,"","\\trianglerighteq");$(N,j,q,"","\\Vdash",!0);$(N,j,q,"","\\shortmid");$(N,j,q,"","\\shortparallel");$(N,j,q,"","\\between",!0);$(N,j,q,"","\\pitchfork",!0);$(N,j,q,"","\\varpropto");$(N,j,q,"","\\blacktriangleleft");$(N,j,q,"","\\therefore",!0);$(N,j,q,"","\\backepsilon");$(N,j,q,"","\\blacktriangleright");$(N,j,q,"","\\because",!0);$(N,j,q,"","\\llless");$(N,j,q,"","\\gggtr");$(N,j,me,"","\\lhd");$(N,j,me,"","\\rhd");$(N,j,q,"","\\eqsim",!0);$(N,z,q,"","\\Join");$(N,j,q,"","\\Doteq",!0);$(N,j,me,"","\\dotplus",!0);$(N,j,me,"","\\smallsetminus");$(N,j,me,"","\\Cap",!0);$(N,j,me,"","\\Cup",!0);$(N,j,me,"","\\doublebarwedge",!0);$(N,j,me,"","\\boxminus",!0);$(N,j,me,"","\\boxplus",!0);$(N,j,me,"","\\divideontimes",!0);$(N,j,me,"","\\ltimes",!0);$(N,j,me,"","\\rtimes",!0);$(N,j,me,"","\\leftthreetimes",!0);$(N,j,me,"","\\rightthreetimes",!0);$(N,j,me,"","\\curlywedge",!0);$(N,j,me,"","\\curlyvee",!0);$(N,j,me,"","\\circleddash",!0);$(N,j,me,"","\\circledast",!0);$(N,j,me,"","\\centerdot");$(N,j,me,"","\\intercal",!0);$(N,j,me,"","\\doublecap");$(N,j,me,"","\\doublecup");$(N,j,me,"","\\boxtimes",!0);$(N,j,q,"","\\dashrightarrow",!0);$(N,j,q,"","\\dashleftarrow",!0);$(N,j,q,"","\\leftleftarrows",!0);$(N,j,q,"","\\leftrightarrows",!0);$(N,j,q,"","\\Lleftarrow",!0);$(N,j,q,"","\\twoheadleftarrow",!0);$(N,j,q,"","\\leftarrowtail",!0);$(N,j,q,"","\\looparrowleft",!0);$(N,j,q,"","\\leftrightharpoons",!0);$(N,j,q,"","\\curvearrowleft",!0);$(N,j,q,"","\\circlearrowleft",!0);$(N,j,q,"","\\Lsh",!0);$(N,j,q,"","\\upuparrows",!0);$(N,j,q,"","\\upharpoonleft",!0);$(N,j,q,"","\\downharpoonleft",!0);$(N,z,q,"","\\origof",!0);$(N,z,q,"","\\imageof",!0);$(N,j,q,"","\\multimap",!0);$(N,j,q,"","\\leftrightsquigarrow",!0);$(N,j,q,"","\\rightrightarrows",!0);$(N,j,q,"","\\rightleftarrows",!0);$(N,j,q,"","\\twoheadrightarrow",!0);$(N,j,q,"","\\rightarrowtail",!0);$(N,j,q,"","\\looparrowright",!0);$(N,j,q,"","\\curvearrowright",!0);$(N,j,q,"","\\circlearrowright",!0);$(N,j,q,"","\\Rsh",!0);$(N,j,q,"","\\downdownarrows",!0);$(N,j,q,"","\\upharpoonright",!0);$(N,j,q,"","\\downharpoonright",!0);$(N,j,q,"","\\rightsquigarrow",!0);$(N,j,q,"","\\leadsto");$(N,j,q,"","\\Rrightarrow",!0);$(N,j,q,"","\\restriction");$(N,z,Y,"","`");$(N,z,Y,"$","\\$");$(oe,z,Y,"$","\\$");$(oe,z,Y,"$","\\textdollar");$(N,z,Y,"%","\\%");$(oe,z,Y,"%","\\%");$(N,z,Y,"_","\\_");$(oe,z,Y,"_","\\_");$(oe,z,Y,"_","\\textunderscore");$(N,z,Y,"","\\angle",!0);$(N,z,Y,"","\\infty",!0);$(N,z,Y,"","\\prime");$(N,z,Y,"","\\triangle");$(N,z,Y,"","\\Gamma",!0);$(N,z,Y,"","\\Delta",!0);$(N,z,Y,"","\\Theta",!0);$(N,z,Y,"","\\Lambda",!0);$(N,z,Y,"","\\Xi",!0);$(N,z,Y,"","\\Pi",!0);$(N,z,Y,"","\\Sigma",!0);$(N,z,Y,"","\\Upsilon",!0);$(N,z,Y,"","\\Phi",!0);$(N,z,Y,"","\\Psi",!0);$(N,z,Y,"","\\Omega",!0);$(N,z,Y,"A","");$(N,z,Y,"B","");$(N,z,Y,"E","");$(N,z,Y,"Z","");$(N,z,Y,"H","");$(N,z,Y,"I","");$(N,z,Y,"K","");$(N,z,Y,"M","");$(N,z,Y,"N","");$(N,z,Y,"O","");$(N,z,Y,"P","");$(N,z,Y,"T","");$(N,z,Y,"X","");$(N,z,Y,"","\\neg",!0);$(N,z,Y,"","\\lnot");$(N,z,Y,"","\\top");$(N,z,Y,"","\\bot");$(N,z,Y,"","\\emptyset");$(N,j,Y,"","\\varnothing");$(N,z,ye,"","\\alpha",!0);$(N,z,ye,"","\\beta",!0);$(N,z,ye,"","\\gamma",!0);$(N,z,ye,"","\\delta",!0);$(N,z,ye,"","\\epsilon",!0);$(N,z,ye,"","\\zeta",!0);$(N,z,ye,"","\\eta",!0);$(N,z,ye,"","\\theta",!0);$(N,z,ye,"","\\iota",!0);$(N,z,ye,"","\\kappa",!0);$(N,z,ye,"","\\lambda",!0);$(N,z,ye,"","\\mu",!0);$(N,z,ye,"","\\nu",!0);$(N,z,ye,"","\\xi",!0);$(N,z,ye,"","\\omicron",!0);$(N,z,ye,"","\\pi",!0);$(N,z,ye,"","\\rho",!0);$(N,z,ye,"","\\sigma",!0);$(N,z,ye,"","\\tau",!0);$(N,z,ye,"","\\upsilon",!0);$(N,z,ye,"","\\phi",!0);$(N,z,ye,"","\\chi",!0);$(N,z,ye,"","\\psi",!0);$(N,z,ye,"","\\omega",!0);$(N,z,ye,"","\\varepsilon",!0);$(N,z,ye,"","\\vartheta",!0);$(N,z,ye,"","\\varpi",!0);$(N,z,ye,"","\\varrho",!0);$(N,z,ye,"","\\varsigma",!0);$(N,z,ye,"","\\varphi",!0);$(N,z,me,"","*",!0);$(N,z,me,"+","+");$(N,z,me,"","-",!0);$(N,z,me,"","\\cdot",!0);$(N,z,me,"","\\circ",!0);$(N,z,me,"","\\div",!0);$(N,z,me,"","\\pm",!0);$(N,z,me,"","\\times",!0);$(N,z,me,"","\\cap",!0);$(N,z,me,"","\\cup",!0);$(N,z,me,"","\\setminus",!0);$(N,z,me,"","\\land");$(N,z,me,"","\\lor");$(N,z,me,"","\\wedge",!0);$(N,z,me,"","\\vee",!0);$(N,z,Y,"","\\surd");$(N,z,$t,"","\\langle",!0);$(N,z,$t,"","\\lvert");$(N,z,$t,"","\\lVert");$(N,z,At,"?","?");$(N,z,At,"!","!");$(N,z,At,"","\\rangle",!0);$(N,z,At,"","\\rvert");$(N,z,At,"","\\rVert");$(N,z,q,"=","=");$(N,z,q,":",":");$(N,z,q,"","\\approx",!0);$(N,z,q,"","\\cong",!0);$(N,z,q,"","\\ge");$(N,z,q,"","\\geq",!0);$(N,z,q,"","\\gets");$(N,z,q,">","\\gt",!0);$(N,z,q,"","\\in",!0);$(N,z,q,"","\\@not");$(N,z,q,"","\\subset",!0);$(N,z,q,"","\\supset",!0);$(N,z,q,"","\\subseteq",!0);$(N,z,q,"","\\supseteq",!0);$(N,j,q,"","\\nsubseteq",!0);$(N,j,q,"","\\nsupseteq",!0);$(N,z,q,"","\\models");$(N,z,q,"","\\leftarrow",!0);$(N,z,q,"","\\le");$(N,z,q,"","\\leq",!0);$(N,z,q,"<","\\lt",!0);$(N,z,q,"","\\rightarrow",!0);$(N,z,q,"","\\to");$(N,j,q,"","\\ngeq",!0);$(N,j,q,"","\\nleq",!0);$(N,z,xn,"","\\ ");$(N,z,xn,"","\\space");$(N,z,xn,"","\\nobreakspace");$(oe,z,xn,"","\\ ");$(oe,z,xn,""," ");$(oe,z,xn,"","\\space");$(oe,z,xn,"","\\nobreakspace");$(N,z,xn,null,"\\nobreak");$(N,z,xn,null,"\\allowbreak");$(N,z,Yo,",",",");$(N,z,Yo,";",";");$(N,j,me,"","\\barwedge",!0);$(N,j,me,"","\\veebar",!0);$(N,z,me,"","\\odot",!0);$(N,z,me,"","\\oplus",!0);$(N,z,me,"","\\otimes",!0);$(N,z,Y,"","\\partial",!0);$(N,z,me,"","\\oslash",!0);$(N,j,me,"","\\circledcirc",!0);$(N,j,me,"","\\boxdot",!0);$(N,z,me,"","\\bigtriangleup");$(N,z,me,"","\\bigtriangledown");$(N,z,me,"","\\dagger");$(N,z,me,"","\\diamond");$(N,z,me,"","\\star");$(N,z,me,"","\\triangleleft");$(N,z,me,"","\\triangleright");$(N,z,$t,"{","\\{");$(oe,z,Y,"{","\\{");$(oe,z,Y,"{","\\textbraceleft");$(N,z,At,"}","\\}");$(oe,z,Y,"}","\\}");$(oe,z,Y,"}","\\textbraceright");$(N,z,$t,"{","\\lbrace");$(N,z,At,"}","\\rbrace");$(N,z,$t,"[","\\lbrack",!0);$(oe,z,Y,"[","\\lbrack",!0);$(N,z,At,"]","\\rbrack",!0);$(oe,z,Y,"]","\\rbrack",!0);$(N,z,$t,"(","\\lparen",!0);$(N,z,At,")","\\rparen",!0);$(oe,z,Y,"<","\\textless",!0);$(oe,z,Y,">","\\textgreater",!0);$(N,z,$t,"","\\lfloor",!0);$(N,z,At,"","\\rfloor",!0);$(N,z,$t,"","\\lceil",!0);$(N,z,At,"","\\rceil",!0);$(N,z,Y,"\\","\\backslash");$(N,z,Y,"","|");$(N,z,Y,"","\\vert");$(oe,z,Y,"|","\\textbar",!0);$(N,z,Y,"","\\|");$(N,z,Y,"","\\Vert");$(oe,z,Y,"","\\textbardbl");$(oe,z,Y,"~","\\textasciitilde");$(oe,z,Y,"\\","\\textbackslash");$(oe,z,Y,"^","\\textasciicircum");$(N,z,q,"","\\uparrow",!0);$(N,z,q,"","\\Uparrow",!0);$(N,z,q,"","\\downarrow",!0);$(N,z,q,"","\\Downarrow",!0);$(N,z,q,"","\\updownarrow",!0);$(N,z,q,"","\\Updownarrow",!0);$(N,z,rt,"","\\coprod");$(N,z,rt,"","\\bigvee");$(N,z,rt,"","\\bigwedge");$(N,z,rt,"","\\biguplus");$(N,z,rt,"","\\bigcap");$(N,z,rt,"","\\bigcup");$(N,z,rt,"","\\int");$(N,z,rt,"","\\intop");$(N,z,rt,"","\\iint");$(N,z,rt,"","\\iiint");$(N,z,rt,"","\\prod");$(N,z,rt,"","\\sum");$(N,z,rt,"","\\bigotimes");$(N,z,rt,"","\\bigoplus");$(N,z,rt,"","\\bigodot");$(N,z,rt,"","\\oint");$(N,z,rt,"","\\oiint");$(N,z,rt,"","\\oiiint");$(N,z,rt,"","\\bigsqcup");$(N,z,rt,"","\\smallint");$(oe,z,ii,"","\\textellipsis");$(N,z,ii,"","\\mathellipsis");$(oe,z,ii,"","\\ldots",!0);$(N,z,ii,"","\\ldots",!0);$(N,z,ii,"","\\@cdots",!0);$(N,z,ii,"","\\ddots",!0);$(N,z,Y,"","\\varvdots");$(oe,z,Y,"","\\varvdots");$(N,z,We,"","\\acute");$(N,z,We,"","\\grave");$(N,z,We,"","\\ddot");$(N,z,We,"~","\\tilde");$(N,z,We,"","\\bar");$(N,z,We,"","\\breve");$(N,z,We,"","\\check");$(N,z,We,"^","\\hat");$(N,z,We,"","\\vec");$(N,z,We,"","\\dot");$(N,z,We,"","\\mathring");$(N,z,ye,"","\\@imath");$(N,z,ye,"","\\@jmath");$(N,z,Y,"","");$(N,z,Y,"","");$(oe,z,Y,"","\\i",!0);$(oe,z,Y,"","\\j",!0);$(oe,z,Y,"","\\ss",!0);$(oe,z,Y,"","\\ae",!0);$(oe,z,Y,"","\\oe",!0);$(oe,z,Y,"","\\o",!0);$(oe,z,Y,"","\\AE",!0);$(oe,z,Y,"","\\OE",!0);$(oe,z,Y,"","\\O",!0);$(oe,z,We,"","\\'");$(oe,z,We,"","\\`");$(oe,z,We,"","\\^");$(oe,z,We,"","\\~");$(oe,z,We,"","\\=");$(oe,z,We,"","\\u");$(oe,z,We,"","\\.");$(oe,z,We,"","\\c");$(oe,z,We,"","\\r");$(oe,z,We,"","\\v");$(oe,z,We,"",'\\"');$(oe,z,We,"","\\H");$(oe,z,We,"","\\textcircled");var Cp={"--":!0,"---":!0,"``":!0,"''":!0};$(oe,z,Y,"","--",!0);$(oe,z,Y,"","\\textendash");$(oe,z,Y,"","---",!0);$(oe,z,Y,"","\\textemdash");$(oe,z,Y,"","`",!0);$(oe,z,Y,"","\\textquoteleft");$(oe,z,Y,"","'",!0);$(oe,z,Y,"","\\textquoteright");$(oe,z,Y,"","``",!0);$(oe,z,Y,"","\\textquotedblleft");$(oe,z,Y,"","''",!0);$(oe,z,Y,"","\\textquotedblright");$(N,z,Y,"","\\degree",!0);$(oe,z,Y,"","\\degree");$(oe,z,Y,"","\\textdegree",!0);$(N,z,Y,"","\\pounds");$(N,z,Y,"","\\mathsterling",!0);$(oe,z,Y,"","\\pounds");$(oe,z,Y,"","\\textsterling",!0);$(N,j,Y,"","\\maltese");$(oe,j,Y,"","\\maltese");var v0='0123456789/@."';for(var Na=0;Na<v0.length;Na++){var y0=v0.charAt(Na);$(N,z,Y,y0,y0)}var w0='0123456789!@*()-=+";:?/.,';for(var Pa=0;Pa<w0.length;Pa++){var b0=w0.charAt(Pa);$(oe,z,Y,b0,b0)}var To="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var Oa=0;Oa<To.length;Oa++){var Ns=To.charAt(Oa);$(N,z,ye,Ns,Ns),$(oe,z,Y,Ns,Ns)}$(N,j,Y,"C","");$(oe,j,Y,"C","");$(N,j,Y,"H","");$(oe,j,Y,"H","");$(N,j,Y,"N","");$(oe,j,Y,"N","");$(N,j,Y,"P","");$(oe,j,Y,"P","");$(N,j,Y,"Q","");$(oe,j,Y,"Q","");$(N,j,Y,"R","");$(oe,j,Y,"R","");$(N,j,Y,"Z","");$(oe,j,Y,"Z","");$(N,z,ye,"h","");$(oe,z,ye,"h","");var Te="";for(var _t=0;_t<To.length;_t++){var Xe=To.charAt(_t);Te=String.fromCharCode(55349,56320+_t),$(N,z,ye,Xe,Te),$(oe,z,Y,Xe,Te),Te=String.fromCharCode(55349,56372+_t),$(N,z,ye,Xe,Te),$(oe,z,Y,Xe,Te),Te=String.fromCharCode(55349,56424+_t),$(N,z,ye,Xe,Te),$(oe,z,Y,Xe,Te),Te=String.fromCharCode(55349,56580+_t),$(N,z,ye,Xe,Te),$(oe,z,Y,Xe,Te),Te=String.fromCharCode(55349,56684+_t),$(N,z,ye,Xe,Te),$(oe,z,Y,Xe,Te),Te=String.fromCharCode(55349,56736+_t),$(N,z,ye,Xe,Te),$(oe,z,Y,Xe,Te),Te=String.fromCharCode(55349,56788+_t),$(N,z,ye,Xe,Te),$(oe,z,Y,Xe,Te),Te=String.fromCharCode(55349,56840+_t),$(N,z,ye,Xe,Te),$(oe,z,Y,Xe,Te),Te=String.fromCharCode(55349,56944+_t),$(N,z,ye,Xe,Te),$(oe,z,Y,Xe,Te),_t<26&&(Te=String.fromCharCode(55349,56632+_t),$(N,z,ye,Xe,Te),$(oe,z,Y,Xe,Te),Te=String.fromCharCode(55349,56476+_t),$(N,z,ye,Xe,Te),$(oe,z,Y,Xe,Te))}Te="";$(N,z,ye,"k",Te);$(oe,z,Y,"k",Te);for(var dr=0;dr<10;dr++){var Pn=dr.toString();Te=String.fromCharCode(55349,57294+dr),$(N,z,ye,Pn,Te),$(oe,z,Y,Pn,Te),Te=String.fromCharCode(55349,57314+dr),$(N,z,ye,Pn,Te),$(oe,z,Y,Pn,Te),Te=String.fromCharCode(55349,57324+dr),$(N,z,ye,Pn,Te),$(oe,z,Y,Pn,Te),Te=String.fromCharCode(55349,57334+dr),$(N,z,ye,Pn,Te),$(oe,z,Y,Pn,Te)}var Al="";for(var Fa=0;Fa<Al.length;Fa++){var Ps=Al.charAt(Fa);$(N,z,ye,Ps,Ps),$(oe,z,Y,Ps,Ps)}var Os=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],_0=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],m3=function(e,t){var n=e.charCodeAt(0),i=e.charCodeAt(1),s=(n-55296)*1024+(i-56320)+65536,a=t==="math"?0:1;if(119808<=s&&s<120484){var m=Math.floor((s-119808)/26);return[Os[m][2],Os[m][a]]}else if(120782<=s&&s<=120831){var o=Math.floor((s-120782)/10);return[_0[o][2],_0[o][a]]}else{if(s===120485||s===120486)return[Os[0][2],Os[0][a]];if(120486<s&&s<120782)return["",""];throw new ue("Unsupported character: "+e)}},Qo=function(e,t,n){return Ve[n][e]&&Ve[n][e].replace&&(e=Ve[n][e].replace),{value:e,metrics:Ec(e,t,n)}},Bt=function(e,t,n,i,s){var a=Qo(e,t,n),m=a.metrics;e=a.value;var o;if(m){var d=m.italic;(n==="text"||i&&i.font==="mathit")&&(d=0),o=new zt(e,m.height,m.depth,d,m.skew,m.width,s)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+e+"' in style '"+t+"' and mode '"+n+"'")),o=new zt(e,0,0,0,0,0,s);if(i){o.maxFontSize=i.sizeMultiplier,i.style.isTight()&&o.classes.push("mtight");var l=i.getColor();l&&(o.style.color=l)}return o},g3=function(e,t,n,i){return i===void 0&&(i=[]),n.font==="boldsymbol"&&Qo(e,"Main-Bold",t).metrics?Bt(e,"Main-Bold",t,n,i.concat(["mathbf"])):e==="\\"||Ve[t][e].font==="main"?Bt(e,"Main-Regular",t,n,i):Bt(e,"AMS-Regular",t,n,i.concat(["amsrm"]))},v3=function(e,t,n,i,s){return s!=="textord"&&Qo(e,"Math-BoldItalic",t).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},y3=function(e,t,n){var i=e.mode,s=e.text,a=["mord"],m=i==="math"||i==="text"&&t.font,o=m?t.font:t.fontFamily,d="",l="";if(s.charCodeAt(0)===55349&&([d,l]=m3(s,i)),d.length>0)return Bt(s,d,i,t,a.concat(l));if(o){var f,u;if(o==="boldsymbol"){var h=v3(s,i,t,a,n);f=h.fontName,u=[h.fontClass]}else m?(f=Ip[o].fontName,u=[o]):(f=Fs(o,t.fontWeight,t.fontShape),u=[o,t.fontWeight,t.fontShape]);if(Qo(s,f,i).metrics)return Bt(s,f,i,t,a.concat(u));if(Cp.hasOwnProperty(s)&&f.slice(0,10)==="Typewriter"){for(var c=[],p=0;p<s.length;p++)c.push(Bt(s[p],f,i,t,a.concat(u)));return kp(c)}}if(n==="mathord")return Bt(s,"Math-Italic",i,t,a.concat(["mathnormal"]));if(n==="textord"){var g=Ve[i][s]&&Ve[i][s].font;if(g==="ams"){var y=Fs("amsrm",t.fontWeight,t.fontShape);return Bt(s,y,i,t,a.concat("amsrm",t.fontWeight,t.fontShape))}else if(g==="main"||!g){var w=Fs("textrm",t.fontWeight,t.fontShape);return Bt(s,w,i,t,a.concat(t.fontWeight,t.fontShape))}else{var M=Fs(g,t.fontWeight,t.fontShape);return Bt(s,M,i,t,a.concat(M,t.fontWeight,t.fontShape))}}else throw new Error("unexpected type: "+n+" in makeOrd")},w3=(r,e)=>{if(er(r.classes)!==er(e.classes)||r.skew!==e.skew||r.maxFontSize!==e.maxFontSize)return!1;if(r.classes.length===1){var t=r.classes[0];if(t==="mbin"||t==="mord")return!1}for(var n in r.style)if(r.style.hasOwnProperty(n)&&r.style[n]!==e.style[n])return!1;for(var i in e.style)if(e.style.hasOwnProperty(i)&&r.style[i]!==e.style[i])return!1;return!0},b3=r=>{for(var e=0;e<r.length-1;e++){var t=r[e],n=r[e+1];t instanceof zt&&n instanceof zt&&w3(t,n)&&(t.text+=n.text,t.height=Math.max(t.height,n.height),t.depth=Math.max(t.depth,n.depth),t.italic=n.italic,r.splice(e+1,1),e--)}return r},xc=function(e){for(var t=0,n=0,i=0,s=0;s<e.children.length;s++){var a=e.children[s];a.height>t&&(t=a.height),a.depth>n&&(n=a.depth),a.maxFontSize>i&&(i=a.maxFontSize)}e.height=t,e.depth=n,e.maxFontSize=i},Tt=function(e,t,n,i){var s=new ps(e,t,n,i);return xc(s),s},xp=(r,e,t,n)=>new ps(r,e,t,n),_3=function(e,t,n){var i=Tt([e],[],t);return i.height=Math.max(n||t.fontMetrics().defaultRuleThickness,t.minRuleThickness),i.style.borderBottomWidth=de(i.height),i.maxFontSize=1,i},S3=function(e,t,n,i){var s=new Cc(e,t,n,i);return xc(s),s},kp=function(e){var t=new fs(e);return xc(t),t},A3=function(e,t){return e instanceof fs?Tt([],[e],t):e},T3=function(e){if(e.positionType==="individualShift"){for(var t=e.children,n=[t[0]],i=-t[0].shift-t[0].elem.depth,s=i,a=1;a<t.length;a++){var m=-t[a].shift-s-t[a].elem.depth,o=m-(t[a-1].elem.height+t[a-1].elem.depth);s=s+m,n.push({type:"kern",size:o}),n.push(t[a])}return{children:n,depth:i}}var d;if(e.positionType==="top"){for(var l=e.positionData,f=0;f<e.children.length;f++){var u=e.children[f];l-=u.type==="kern"?u.size:u.elem.height+u.elem.depth}d=l}else if(e.positionType==="bottom")d=-e.positionData;else{var h=e.children[0];if(h.type!=="elem")throw new Error('First child must have type "elem".');if(e.positionType==="shift")d=-h.elem.depth-e.positionData;else if(e.positionType==="firstBaseline")d=-h.elem.depth;else throw new Error("Invalid positionType "+e.positionType+".")}return{children:e.children,depth:d}},E3=function(e,t){for(var{children:n,depth:i}=T3(e),s=0,a=0;a<n.length;a++){var m=n[a];if(m.type==="elem"){var o=m.elem;s=Math.max(s,o.maxFontSize,o.height)}}s+=2;var d=Tt(["pstrut"],[]);d.style.height=de(s);for(var l=[],f=i,u=i,h=i,c=0;c<n.length;c++){var p=n[c];if(p.type==="kern")h+=p.size;else{var g=p.elem,y=p.wrapperClasses||[],w=p.wrapperStyle||{},M=Tt(y,[d,g],void 0,w);M.style.top=de(-s-h-g.depth),p.marginLeft&&(M.style.marginLeft=p.marginLeft),p.marginRight&&(M.style.marginRight=p.marginRight),l.push(M),h+=g.height+g.depth}f=Math.min(f,h),u=Math.max(u,h)}var R=Tt(["vlist"],l);R.style.height=de(u);var x;if(f<0){var S=Tt([],[]),E=Tt(["vlist"],[S]);E.style.height=de(-f);var k=Tt(["vlist-s"],[new zt("")]);x=[Tt(["vlist-r"],[R,k]),Tt(["vlist-r"],[E])]}else x=[Tt(["vlist-r"],[R])];var T=Tt(["vlist-t"],x);return x.length===2&&T.classes.push("vlist-t2"),T.height=u,T.depth=-f,T},C3=(r,e)=>{var t=Tt(["mspace"],[],e),n=qe(r,e);return t.style.marginRight=de(n),t},Fs=function(e,t,n){var i="";switch(e){case"amsrm":i="AMS";break;case"textrm":i="Main";break;case"textsf":i="SansSerif";break;case"texttt":i="Typewriter";break;default:i=e}var s;return t==="textbf"&&n==="textit"?s="BoldItalic":t==="textbf"?s="Bold":t==="textit"?s="Italic":s="Regular",i+"-"+s},Ip={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},Mp={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},x3=function(e,t){var[n,i,s]=Mp[e],a=new tr(n),m=new An([a],{width:de(i),height:de(s),style:"width:"+de(i),viewBox:"0 0 "+1e3*i+" "+1e3*s,preserveAspectRatio:"xMinYMin"}),o=xp(["overlay"],[m],t);return o.height=s,o.style.height=de(s),o.style.width=de(i),o},te={fontMap:Ip,makeSymbol:Bt,mathsym:g3,makeSpan:Tt,makeSvgSpan:xp,makeLineSpan:_3,makeAnchor:S3,makeFragment:kp,wrapFragment:A3,makeVList:E3,makeOrd:y3,makeGlue:C3,staticSvg:x3,svgData:Mp,tryCombineChars:b3},je={number:3,unit:"mu"},fr={number:4,unit:"mu"},un={number:5,unit:"mu"},k3={mord:{mop:je,mbin:fr,mrel:un,minner:je},mop:{mord:je,mop:je,mrel:un,minner:je},mbin:{mord:fr,mop:fr,mopen:fr,minner:fr},mrel:{mord:un,mop:un,mopen:un,minner:un},mopen:{},mclose:{mop:je,mbin:fr,mrel:un,minner:je},mpunct:{mord:je,mop:je,mrel:un,mopen:je,mclose:je,mpunct:je,minner:je},minner:{mord:je,mop:je,mbin:fr,mrel:un,mopen:je,mpunct:je,minner:je}},I3={mord:{mop:je},mop:{mord:je,mop:je},mbin:{},mrel:{},mopen:{},mclose:{mop:je},mpunct:{},minner:{mop:je}},Rp={},Eo={},Co={};function pe(r){for(var{type:e,names:t,props:n,handler:i,htmlBuilder:s,mathmlBuilder:a}=r,m={type:e,numArgs:n.numArgs,argTypes:n.argTypes,allowedInArgument:!!n.allowedInArgument,allowedInText:!!n.allowedInText,allowedInMath:n.allowedInMath===void 0?!0:n.allowedInMath,numOptionalArgs:n.numOptionalArgs||0,infix:!!n.infix,primitive:!!n.primitive,handler:i},o=0;o<t.length;++o)Rp[t[o]]=m;e&&(s&&(Eo[e]=s),a&&(Co[e]=a))}function xr(r){var{type:e,htmlBuilder:t,mathmlBuilder:n}=r;pe({type:e,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:t,mathmlBuilder:n})}var xo=function(e){return e.type==="ordgroup"&&e.body.length===1?e.body[0]:e},et=function(e){return e.type==="ordgroup"?e.body:[e]},Tn=te.makeSpan,M3=["leftmost","mbin","mopen","mrel","mop","mpunct"],R3=["rightmost","mrel","mclose","mpunct"],L3={display:we.DISPLAY,text:we.TEXT,script:we.SCRIPT,scriptscript:we.SCRIPTSCRIPT},$3={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},at=function(e,t,n,i){i===void 0&&(i=[null,null]);for(var s=[],a=0;a<e.length;a++){var m=De(e[a],t);if(m instanceof fs){var o=m.children;s.push(...o)}else s.push(m)}if(te.tryCombineChars(s),!n)return s;var d=t;if(e.length===1){var l=e[0];l.type==="sizing"?d=t.havingSize(l.size):l.type==="styling"&&(d=t.havingStyle(L3[l.style]))}var f=Tn([i[0]||"leftmost"],[],t),u=Tn([i[1]||"rightmost"],[],t),h=n==="root";return S0(s,(c,p)=>{var g=p.classes[0],y=c.classes[0];g==="mbin"&&R3.includes(y)?p.classes[0]="mord":y==="mbin"&&M3.includes(g)&&(c.classes[0]="mord")},{node:f},u,h),S0(s,(c,p)=>{var g=Tl(p),y=Tl(c),w=g&&y?c.hasClass("mtight")?I3[g][y]:k3[g][y]:null;if(w)return te.makeGlue(w,d)},{node:f},u,h),s},S0=function r(e,t,n,i,s){i&&e.push(i);for(var a=0;a<e.length;a++){var m=e[a],o=Lp(m);if(o){r(o.children,t,n,null,s);continue}var d=!m.hasClass("mspace");if(d){var l=t(m,n.node);l&&(n.insertAfter?n.insertAfter(l):(e.unshift(l),a++))}d?n.node=m:s&&m.hasClass("newline")&&(n.node=Tn(["leftmost"])),n.insertAfter=(f=>u=>{e.splice(f+1,0,u),a++})(a)}i&&e.pop()},Lp=function(e){return e instanceof fs||e instanceof Cc||e instanceof ps&&e.hasClass("enclosing")?e:null},D3=function r(e,t){var n=Lp(e);if(n){var i=n.children;if(i.length){if(t==="right")return r(i[i.length-1],"right");if(t==="left")return r(i[0],"left")}}return e},Tl=function(e,t){return e?(t&&(e=D3(e,t)),$3[e.classes[0]]||null):null},Zi=function(e,t){var n=["nulldelimiter"].concat(e.baseSizingClasses());return Tn(t.concat(n))},De=function(e,t,n){if(!e)return Tn();if(Eo[e.type]){var i=Eo[e.type](e,t);if(n&&t.size!==n.size){i=Tn(t.sizingClasses(n),[i],t);var s=t.sizeMultiplier/n.sizeMultiplier;i.height*=s,i.depth*=s}return i}else throw new ue("Got group of unknown type: '"+e.type+"'")};function zs(r,e){var t=Tn(["base"],r,e),n=Tn(["strut"]);return n.style.height=de(t.height+t.depth),t.depth&&(n.style.verticalAlign=de(-t.depth)),t.children.unshift(n),t}function El(r,e){var t=null;r.length===1&&r[0].type==="tag"&&(t=r[0].tag,r=r[0].body);var n=at(r,e,"root"),i;n.length===2&&n[1].hasClass("tag")&&(i=n.pop());for(var s=[],a=[],m=0;m<n.length;m++)if(a.push(n[m]),n[m].hasClass("mbin")||n[m].hasClass("mrel")||n[m].hasClass("allowbreak")){for(var o=!1;m<n.length-1&&n[m+1].hasClass("mspace")&&!n[m+1].hasClass("newline");)m++,a.push(n[m]),n[m].hasClass("nobreak")&&(o=!0);o||(s.push(zs(a,e)),a=[])}else n[m].hasClass("newline")&&(a.pop(),a.length>0&&(s.push(zs(a,e)),a=[]),s.push(n[m]));a.length>0&&s.push(zs(a,e));var d;t?(d=zs(at(t,e,!0)),d.classes=["tag"],s.push(d)):i&&s.push(i);var l=Tn(["katex-html"],s);if(l.setAttribute("aria-hidden","true"),d){var f=d.children[0];f.style.height=de(l.height+l.depth),l.depth&&(f.style.verticalAlign=de(-l.depth))}return l}function $p(r){return new fs(r)}class Mt{constructor(e,t,n){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=e,this.attributes={},this.children=t||[],this.classes=n||[]}setAttribute(e,t){this.attributes[e]=t}getAttribute(e){return this.attributes[e]}toNode(){var e=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&e.setAttribute(t,this.attributes[t]);this.classes.length>0&&(e.className=er(this.classes));for(var n=0;n<this.children.length;n++)if(this.children[n]instanceof Jt&&this.children[n+1]instanceof Jt){for(var i=this.children[n].toText()+this.children[++n].toText();this.children[n+1]instanceof Jt;)i+=this.children[++n].toText();e.appendChild(new Jt(i).toNode())}else e.appendChild(this.children[n].toNode());return e}toMarkup(){var e="<"+this.type;for(var t in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,t)&&(e+=" "+t+'="',e+=Ne.escape(this.attributes[t]),e+='"');this.classes.length>0&&(e+=' class ="'+Ne.escape(er(this.classes))+'"'),e+=">";for(var n=0;n<this.children.length;n++)e+=this.children[n].toMarkup();return e+="</"+this.type+">",e}toText(){return this.children.map(e=>e.toText()).join("")}}class Jt{constructor(e){this.text=void 0,this.text=e}toNode(){return document.createTextNode(this.text)}toMarkup(){return Ne.escape(this.toText())}toText(){return this.text}}class N3{constructor(e){this.width=void 0,this.character=void 0,this.width=e,e>=.05555&&e<=.05556?this.character="":e>=.1666&&e<=.1667?this.character="":e>=.2222&&e<=.2223?this.character="":e>=.2777&&e<=.2778?this.character="":e>=-.05556&&e<=-.05555?this.character="":e>=-.1667&&e<=-.1666?this.character="":e>=-.2223&&e<=-.2222?this.character="":e>=-.2778&&e<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var e=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return e.setAttribute("width",de(this.width)),e}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+de(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var le={MathNode:Mt,TextNode:Jt,SpaceNode:N3,newDocumentFragment:$p},Vt=function(e,t,n){return Ve[t][e]&&Ve[t][e].replace&&e.charCodeAt(0)!==55349&&!(Cp.hasOwnProperty(e)&&n&&(n.fontFamily&&n.fontFamily.slice(4,6)==="tt"||n.font&&n.font.slice(4,6)==="tt"))&&(e=Ve[t][e].replace),new le.TextNode(e)},kc=function(e){return e.length===1?e[0]:new le.MathNode("mrow",e)},Ic=function(e,t){if(t.fontFamily==="texttt")return"monospace";if(t.fontFamily==="textsf")return t.fontShape==="textit"&&t.fontWeight==="textbf"?"sans-serif-bold-italic":t.fontShape==="textit"?"sans-serif-italic":t.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(t.fontShape==="textit"&&t.fontWeight==="textbf")return"bold-italic";if(t.fontShape==="textit")return"italic";if(t.fontWeight==="textbf")return"bold";var n=t.font;if(!n||n==="mathnormal")return null;var i=e.mode;if(n==="mathit")return"italic";if(n==="boldsymbol")return e.type==="textord"?"bold":"bold-italic";if(n==="mathbf")return"bold";if(n==="mathbb")return"double-struck";if(n==="mathsfit")return"sans-serif-italic";if(n==="mathfrak")return"fraktur";if(n==="mathscr"||n==="mathcal")return"script";if(n==="mathsf")return"sans-serif";if(n==="mathtt")return"monospace";var s=e.text;if(["\\imath","\\jmath"].includes(s))return null;Ve[i][s]&&Ve[i][s].replace&&(s=Ve[i][s].replace);var a=te.fontMap[n].fontName;return Ec(s,a,i)?te.fontMap[n].variant:null};function za(r){if(!r)return!1;if(r.type==="mi"&&r.children.length===1){var e=r.children[0];return e instanceof Jt&&e.text==="."}else if(r.type==="mo"&&r.children.length===1&&r.getAttribute("separator")==="true"&&r.getAttribute("lspace")==="0em"&&r.getAttribute("rspace")==="0em"){var t=r.children[0];return t instanceof Jt&&t.text===","}else return!1}var xt=function(e,t,n){if(e.length===1){var i=Fe(e[0],t);return n&&i instanceof Mt&&i.type==="mo"&&(i.setAttribute("lspace","0em"),i.setAttribute("rspace","0em")),[i]}for(var s=[],a,m=0;m<e.length;m++){var o=Fe(e[m],t);if(o instanceof Mt&&a instanceof Mt){if(o.type==="mtext"&&a.type==="mtext"&&o.getAttribute("mathvariant")===a.getAttribute("mathvariant")){a.children.push(...o.children);continue}else if(o.type==="mn"&&a.type==="mn"){a.children.push(...o.children);continue}else if(za(o)&&a.type==="mn"){a.children.push(...o.children);continue}else if(o.type==="mn"&&za(a))o.children=[...a.children,...o.children],s.pop();else if((o.type==="msup"||o.type==="msub")&&o.children.length>=1&&(a.type==="mn"||za(a))){var d=o.children[0];d instanceof Mt&&d.type==="mn"&&(d.children=[...a.children,...d.children],s.pop())}else if(a.type==="mi"&&a.children.length===1){var l=a.children[0];if(l instanceof Jt&&l.text===""&&(o.type==="mo"||o.type==="mi"||o.type==="mn")){var f=o.children[0];f instanceof Jt&&f.text.length>0&&(f.text=f.text.slice(0,1)+""+f.text.slice(1),s.pop())}}}s.push(o),a=o}return s},nr=function(e,t,n){return kc(xt(e,t,n))},Fe=function(e,t){if(!e)return new le.MathNode("mrow");if(Co[e.type]){var n=Co[e.type](e,t);return n}else throw new ue("Got group of unknown type: '"+e.type+"'")};function A0(r,e,t,n,i){var s=xt(r,t),a;s.length===1&&s[0]instanceof Mt&&["mrow","mtable"].includes(s[0].type)?a=s[0]:a=new le.MathNode("mrow",s);var m=new le.MathNode("annotation",[new le.TextNode(e)]);m.setAttribute("encoding","application/x-tex");var o=new le.MathNode("semantics",[a,m]),d=new le.MathNode("math",[o]);d.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),n&&d.setAttribute("display","block");var l=i?"katex":"katex-mathml";return te.makeSpan([l],[d])}var Dp=function(e){return new hn({style:e.displayMode?we.DISPLAY:we.TEXT,maxSize:e.maxSize,minRuleThickness:e.minRuleThickness})},Np=function(e,t){if(t.displayMode){var n=["katex-display"];t.leqno&&n.push("leqno"),t.fleqn&&n.push("fleqn"),e=te.makeSpan(n,[e])}return e},P3=function(e,t,n){var i=Dp(n),s;if(n.output==="mathml")return A0(e,t,i,n.displayMode,!0);if(n.output==="html"){var a=El(e,i);s=te.makeSpan(["katex"],[a])}else{var m=A0(e,t,i,n.displayMode,!1),o=El(e,i);s=te.makeSpan(["katex"],[m,o])}return Np(s,n)},O3=function(e,t,n){var i=Dp(n),s=El(e,i),a=te.makeSpan(["katex"],[s]);return Np(a,n)},F3={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},z3=function(e){var t=new le.MathNode("mo",[new le.TextNode(F3[e.replace(/^\\/,"")])]);return t.setAttribute("stretchy","true"),t},V3={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},B3=function(e){return e.type==="ordgroup"?e.body.length:1},U3=function(e,t){function n(){var m=4e5,o=e.label.slice(1);if(["widehat","widecheck","widetilde","utilde"].includes(o)){var d=e,l=B3(d.base),f,u,h;if(l>5)o==="widehat"||o==="widecheck"?(f=420,m=2364,h=.42,u=o+"4"):(f=312,m=2340,h=.34,u="tilde4");else{var c=[1,1,2,2,3,3][l];o==="widehat"||o==="widecheck"?(m=[0,1062,2364,2364,2364][c],f=[0,239,300,360,420][c],h=[0,.24,.3,.3,.36,.42][c],u=o+c):(m=[0,600,1033,2339,2340][c],f=[0,260,286,306,312][c],h=[0,.26,.286,.3,.306,.34][c],u="tilde"+c)}var p=new tr(u),g=new An([p],{width:"100%",height:de(h),viewBox:"0 0 "+m+" "+f,preserveAspectRatio:"none"});return{span:te.makeSvgSpan([],[g],t),minWidth:0,height:h}}else{var y=[],w=V3[o],[M,R,x]=w,S=x/1e3,E=M.length,k,T;if(E===1){var I=w[3];k=["hide-tail"],T=[I]}else if(E===2)k=["halfarrow-left","halfarrow-right"],T=["xMinYMin","xMaxYMin"];else if(E===3)k=["brace-left","brace-center","brace-right"],T=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+E+" children.");for(var P=0;P<E;P++){var C=new tr(M[P]),b=new An([C],{width:"400em",height:de(S),viewBox:"0 0 "+m+" "+x,preserveAspectRatio:T[P]+" slice"}),A=te.makeSvgSpan([k[P]],[b],t);if(E===1)return{span:A,minWidth:R,height:S};A.style.height=de(S),y.push(A)}return{span:te.makeSpan(["stretchy"],y,t),minWidth:R,height:S}}}var{span:i,minWidth:s,height:a}=n();return i.height=a,i.style.height=de(a),s>0&&(i.style.minWidth=de(s)),i},H3=function(e,t,n,i,s){var a,m=e.height+e.depth+n+i;if(/fbox|color|angl/.test(t)){if(a=te.makeSpan(["stretchy",t],[],s),t==="fbox"){var o=s.color&&s.getColor();o&&(a.style.borderColor=o)}}else{var d=[];/^[bx]cancel$/.test(t)&&d.push(new Sl({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(t)&&d.push(new Sl({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var l=new An(d,{width:"100%",height:de(m)});a=te.makeSvgSpan([],[l],s)}return a.height=m,a.style.height=de(m),a},En={encloseSpan:H3,mathMLnode:z3,svgSpan:U3};function xe(r,e){if(!r||r.type!==e)throw new Error("Expected node of type "+e+", but got "+(r?"node of type "+r.type:String(r)));return r}function Mc(r){var e=Xo(r);if(!e)throw new Error("Expected node of symbol group type, but got "+(r?"node of type "+r.type:String(r)));return e}function Xo(r){return r&&(r.type==="atom"||p3.hasOwnProperty(r.type))?r:null}var Rc=(r,e)=>{var t,n,i;r&&r.type==="supsub"?(n=xe(r.base,"accent"),t=n.base,r.base=t,i=d3(De(r,e)),r.base=n):(n=xe(r,"accent"),t=n.base);var s=De(t,e.havingCrampedStyle()),a=n.isShifty&&Ne.isCharacterBox(t),m=0;if(a){var o=Ne.getBaseElem(t),d=De(o,e.havingCrampedStyle());m=g0(d).skew}var l=n.label==="\\c",f=l?s.height+s.depth:Math.min(s.height,e.fontMetrics().xHeight),u;if(n.isStretchy)u=En.svgSpan(n,e),u=te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"elem",elem:u,wrapperClasses:["svg-align"],wrapperStyle:m>0?{width:"calc(100% - "+de(2*m)+")",marginLeft:de(2*m)}:void 0}]},e);else{var h,c;n.label==="\\vec"?(h=te.staticSvg("vec",e),c=te.svgData.vec[1]):(h=te.makeOrd({mode:n.mode,text:n.label},e,"textord"),h=g0(h),h.italic=0,c=h.width,l&&(f+=h.depth)),u=te.makeSpan(["accent-body"],[h]);var p=n.label==="\\textcircled";p&&(u.classes.push("accent-full"),f=s.height);var g=m;p||(g-=c/2),u.style.left=de(g),n.label==="\\textcircled"&&(u.style.top=".2em"),u=te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:-f},{type:"elem",elem:u}]},e)}var y=te.makeSpan(["mord","accent"],[u],e);return i?(i.children[0]=y,i.height=Math.max(y.height,i.height),i.classes[0]="mord",i):y},Pp=(r,e)=>{var t=r.isStretchy?En.mathMLnode(r.label):new le.MathNode("mo",[Vt(r.label,r.mode)]),n=new le.MathNode("mover",[Fe(r.base,e),t]);return n.setAttribute("accent","true"),n},W3=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(r=>"\\"+r).join("|"));pe({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(r,e)=>{var t=xo(e[0]),n=!W3.test(r.funcName),i=!n||r.funcName==="\\widehat"||r.funcName==="\\widetilde"||r.funcName==="\\widecheck";return{type:"accent",mode:r.parser.mode,label:r.funcName,isStretchy:n,isShifty:i,base:t}},htmlBuilder:Rc,mathmlBuilder:Pp});pe({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(r,e)=>{var t=e[0],n=r.parser.mode;return n==="math"&&(r.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+r.funcName+" works only in text mode"),n="text"),{type:"accent",mode:n,label:r.funcName,isStretchy:!1,isShifty:!0,base:t}},htmlBuilder:Rc,mathmlBuilder:Pp});pe({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0];return{type:"accentUnder",mode:t.mode,label:n,base:i}},htmlBuilder:(r,e)=>{var t=De(r.base,e),n=En.svgSpan(r,e),i=r.label==="\\utilde"?.12:0,s=te.makeVList({positionType:"top",positionData:t.height,children:[{type:"elem",elem:n,wrapperClasses:["svg-align"]},{type:"kern",size:i},{type:"elem",elem:t}]},e);return te.makeSpan(["mord","accentunder"],[s],e)},mathmlBuilder:(r,e)=>{var t=En.mathMLnode(r.label),n=new le.MathNode("munder",[Fe(r.base,e),t]);return n.setAttribute("accentunder","true"),n}});var Vs=r=>{var e=new le.MathNode("mpadded",r?[r]:[]);return e.setAttribute("width","+0.6em"),e.setAttribute("lspace","0.3em"),e};pe({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(r,e,t){var{parser:n,funcName:i}=r;return{type:"xArrow",mode:n.mode,label:i,body:e[0],below:t[0]}},htmlBuilder(r,e){var t=e.style,n=e.havingStyle(t.sup()),i=te.wrapFragment(De(r.body,n,e),e),s=r.label.slice(0,2)==="\\x"?"x":"cd";i.classes.push(s+"-arrow-pad");var a;r.below&&(n=e.havingStyle(t.sub()),a=te.wrapFragment(De(r.below,n,e),e),a.classes.push(s+"-arrow-pad"));var m=En.svgSpan(r,e),o=-e.fontMetrics().axisHeight+.5*m.height,d=-e.fontMetrics().axisHeight-.5*m.height-.111;(i.depth>.25||r.label==="\\xleftequilibrium")&&(d-=i.depth);var l;if(a){var f=-e.fontMetrics().axisHeight+a.height+.5*m.height+.111;l=te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:d},{type:"elem",elem:m,shift:o},{type:"elem",elem:a,shift:f}]},e)}else l=te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:i,shift:d},{type:"elem",elem:m,shift:o}]},e);return l.children[0].children[0].children[1].classes.push("svg-align"),te.makeSpan(["mrel","x-arrow"],[l],e)},mathmlBuilder(r,e){var t=En.mathMLnode(r.label);t.setAttribute("minsize",r.label.charAt(0)==="x"?"1.75em":"3.0em");var n;if(r.body){var i=Vs(Fe(r.body,e));if(r.below){var s=Vs(Fe(r.below,e));n=new le.MathNode("munderover",[t,s,i])}else n=new le.MathNode("mover",[t,i])}else if(r.below){var a=Vs(Fe(r.below,e));n=new le.MathNode("munder",[t,a])}else n=Vs(),n=new le.MathNode("mover",[t,n]);return n}});var j3=te.makeSpan;function Op(r,e){var t=at(r.body,e,!0);return j3([r.mclass],t,e)}function Fp(r,e){var t,n=xt(r.body,e);return r.mclass==="minner"?t=new le.MathNode("mpadded",n):r.mclass==="mord"?r.isCharacterBox?(t=n[0],t.type="mi"):t=new le.MathNode("mi",n):(r.isCharacterBox?(t=n[0],t.type="mo"):t=new le.MathNode("mo",n),r.mclass==="mbin"?(t.attributes.lspace="0.22em",t.attributes.rspace="0.22em"):r.mclass==="mpunct"?(t.attributes.lspace="0em",t.attributes.rspace="0.17em"):r.mclass==="mopen"||r.mclass==="mclose"?(t.attributes.lspace="0em",t.attributes.rspace="0em"):r.mclass==="minner"&&(t.attributes.lspace="0.0556em",t.attributes.width="+0.1111em")),t}pe({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];return{type:"mclass",mode:t.mode,mclass:"m"+n.slice(5),body:et(i),isCharacterBox:Ne.isCharacterBox(i)}},htmlBuilder:Op,mathmlBuilder:Fp});var Jo=r=>{var e=r.type==="ordgroup"&&r.body.length?r.body[0]:r;return e.type==="atom"&&(e.family==="bin"||e.family==="rel")?"m"+e.family:"mord"};pe({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(r,e){var{parser:t}=r;return{type:"mclass",mode:t.mode,mclass:Jo(e[0]),body:et(e[1]),isCharacterBox:Ne.isCharacterBox(e[1])}}});pe({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(r,e){var{parser:t,funcName:n}=r,i=e[1],s=e[0],a;n!=="\\stackrel"?a=Jo(i):a="mrel";var m={type:"op",mode:i.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:n!=="\\stackrel",body:et(i)},o={type:"supsub",mode:s.mode,base:m,sup:n==="\\underset"?null:s,sub:n==="\\underset"?s:null};return{type:"mclass",mode:t.mode,mclass:a,body:[o],isCharacterBox:Ne.isCharacterBox(o)}},htmlBuilder:Op,mathmlBuilder:Fp});pe({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(r,e){var{parser:t}=r;return{type:"pmb",mode:t.mode,mclass:Jo(e[0]),body:et(e[0])}},htmlBuilder(r,e){var t=at(r.body,e,!0),n=te.makeSpan([r.mclass],t,e);return n.style.textShadow="0.02em 0.01em 0.04px",n},mathmlBuilder(r,e){var t=xt(r.body,e),n=new le.MathNode("mstyle",t);return n.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),n}});var G3={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},T0=()=>({type:"styling",body:[],mode:"math",style:"display"}),E0=r=>r.type==="textord"&&r.text==="@",q3=(r,e)=>(r.type==="mathord"||r.type==="atom")&&r.text===e;function K3(r,e,t){var n=G3[r];switch(n){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return t.callFunction(n,[e[0]],[e[1]]);case"\\uparrow":case"\\downarrow":{var i=t.callFunction("\\\\cdleft",[e[0]],[]),s={type:"atom",text:n,mode:"math",family:"rel"},a=t.callFunction("\\Big",[s],[]),m=t.callFunction("\\\\cdright",[e[1]],[]),o={type:"ordgroup",mode:"math",body:[i,a,m]};return t.callFunction("\\\\cdparent",[o],[])}case"\\\\cdlongequal":return t.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var d={type:"textord",text:"\\Vert",mode:"math"};return t.callFunction("\\Big",[d],[])}default:return{type:"textord",text:" ",mode:"math"}}}function Y3(r){var e=[];for(r.gullet.beginGroup(),r.gullet.macros.set("\\cr","\\\\\\relax"),r.gullet.beginGroup();;){e.push(r.parseExpression(!1,"\\\\")),r.gullet.endGroup(),r.gullet.beginGroup();var t=r.fetch().text;if(t==="&"||t==="\\\\")r.consume();else if(t==="\\end"){e[e.length-1].length===0&&e.pop();break}else throw new ue("Expected \\\\ or \\cr or \\end",r.nextToken)}for(var n=[],i=[n],s=0;s<e.length;s++){for(var a=e[s],m=T0(),o=0;o<a.length;o++)if(!E0(a[o]))m.body.push(a[o]);else{n.push(m),o+=1;var d=Mc(a[o]).text,l=new Array(2);if(l[0]={type:"ordgroup",mode:"math",body:[]},l[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(d)>-1))if("<>AV".indexOf(d)>-1)for(var f=0;f<2;f++){for(var u=!0,h=o+1;h<a.length;h++){if(q3(a[h],d)){u=!1,o=h;break}if(E0(a[h]))throw new ue("Missing a "+d+" character to complete a CD arrow.",a[h]);l[f].body.push(a[h])}if(u)throw new ue("Missing a "+d+" character to complete a CD arrow.",a[o])}else throw new ue('Expected one of "<>AV=|." after @',a[o]);var c=K3(d,l,r),p={type:"styling",body:[c],mode:"math",style:"display"};n.push(p),m=T0()}s%2===0?n.push(m):n.shift(),n=[],i.push(n)}r.gullet.endGroup(),r.gullet.endGroup();var g=new Array(i[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:i,arraystretch:1,addJot:!0,rowGaps:[null],cols:g,colSeparationType:"CD",hLinesBeforeRow:new Array(i.length+1).fill([])}}pe({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(r,e){var{parser:t,funcName:n}=r;return{type:"cdlabel",mode:t.mode,side:n.slice(4),label:e[0]}},htmlBuilder(r,e){var t=e.havingStyle(e.style.sup()),n=te.wrapFragment(De(r.label,t,e),e);return n.classes.push("cd-label-"+r.side),n.style.bottom=de(.8-n.depth),n.height=0,n.depth=0,n},mathmlBuilder(r,e){var t=new le.MathNode("mrow",[Fe(r.label,e)]);return t=new le.MathNode("mpadded",[t]),t.setAttribute("width","0"),r.side==="left"&&t.setAttribute("lspace","-1width"),t.setAttribute("voffset","0.7em"),t=new le.MathNode("mstyle",[t]),t.setAttribute("displaystyle","false"),t.setAttribute("scriptlevel","1"),t}});pe({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(r,e){var{parser:t}=r;return{type:"cdlabelparent",mode:t.mode,fragment:e[0]}},htmlBuilder(r,e){var t=te.wrapFragment(De(r.fragment,e),e);return t.classes.push("cd-vert-arrow"),t},mathmlBuilder(r,e){return new le.MathNode("mrow",[Fe(r.fragment,e)])}});pe({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(r,e){for(var{parser:t}=r,n=xe(e[0],"ordgroup"),i=n.body,s="",a=0;a<i.length;a++){var m=xe(i[a],"textord");s+=m.text}var o=parseInt(s),d;if(isNaN(o))throw new ue("\\@char has non-numeric argument "+s);if(o<0||o>=1114111)throw new ue("\\@char with invalid code point "+s);return o<=65535?d=String.fromCharCode(o):(o-=65536,d=String.fromCharCode((o>>10)+55296,(o&1023)+56320)),{type:"textord",mode:t.mode,text:d}}});var zp=(r,e)=>{var t=at(r.body,e.withColor(r.color),!1);return te.makeFragment(t)},Vp=(r,e)=>{var t=xt(r.body,e.withColor(r.color)),n=new le.MathNode("mstyle",t);return n.setAttribute("mathcolor",r.color),n};pe({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(r,e){var{parser:t}=r,n=xe(e[0],"color-token").color,i=e[1];return{type:"color",mode:t.mode,color:n,body:et(i)}},htmlBuilder:zp,mathmlBuilder:Vp});pe({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(r,e){var{parser:t,breakOnTokenText:n}=r,i=xe(e[0],"color-token").color;t.gullet.macros.set("\\current@color",i);var s=t.parseExpression(!0,n);return{type:"color",mode:t.mode,color:i,body:s}},htmlBuilder:zp,mathmlBuilder:Vp});pe({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(r,e,t){var{parser:n}=r,i=n.gullet.future().text==="["?n.parseSizeGroup(!0):null,s=!n.settings.displayMode||!n.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:n.mode,newLine:s,size:i&&xe(i,"size").value}},htmlBuilder(r,e){var t=te.makeSpan(["mspace"],[],e);return r.newLine&&(t.classes.push("newline"),r.size&&(t.style.marginTop=de(qe(r.size,e)))),t},mathmlBuilder(r,e){var t=new le.MathNode("mspace");return r.newLine&&(t.setAttribute("linebreak","newline"),r.size&&t.setAttribute("height",de(qe(r.size,e)))),t}});var Cl={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},Bp=r=>{var e=r.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(e))throw new ue("Expected a control sequence",r);return e},Q3=r=>{var e=r.gullet.popToken();return e.text==="="&&(e=r.gullet.popToken(),e.text===" "&&(e=r.gullet.popToken())),e},Up=(r,e,t,n)=>{var i=r.gullet.macros.get(t.text);i==null&&(t.noexpand=!0,i={tokens:[t],numArgs:0,unexpandable:!r.gullet.isExpandable(t.text)}),r.gullet.macros.set(e,i,n)};pe({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(r){var{parser:e,funcName:t}=r;e.consumeSpaces();var n=e.fetch();if(Cl[n.text])return(t==="\\global"||t==="\\\\globallong")&&(n.text=Cl[n.text]),xe(e.parseFunction(),"internal");throw new ue("Invalid token after macro prefix",n)}});pe({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r){var{parser:e,funcName:t}=r,n=e.gullet.popToken(),i=n.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(i))throw new ue("Expected a control sequence",n);for(var s=0,a,m=[[]];e.gullet.future().text!=="{";)if(n=e.gullet.popToken(),n.text==="#"){if(e.gullet.future().text==="{"){a=e.gullet.future(),m[s].push("{");break}if(n=e.gullet.popToken(),!/^[1-9]$/.test(n.text))throw new ue('Invalid argument number "'+n.text+'"');if(parseInt(n.text)!==s+1)throw new ue('Argument number "'+n.text+'" out of order');s++,m.push([])}else{if(n.text==="EOF")throw new ue("Expected a macro definition");m[s].push(n.text)}var{tokens:o}=e.gullet.consumeArg();return a&&o.unshift(a),(t==="\\edef"||t==="\\xdef")&&(o=e.gullet.expandTokens(o),o.reverse()),e.gullet.macros.set(i,{tokens:o,numArgs:s,delimiters:m},t===Cl[t]),{type:"internal",mode:e.mode}}});pe({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r){var{parser:e,funcName:t}=r,n=Bp(e.gullet.popToken());e.gullet.consumeSpaces();var i=Q3(e);return Up(e,n,i,t==="\\\\globallet"),{type:"internal",mode:e.mode}}});pe({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r){var{parser:e,funcName:t}=r,n=Bp(e.gullet.popToken()),i=e.gullet.popToken(),s=e.gullet.popToken();return Up(e,n,s,t==="\\\\globalfuture"),e.gullet.pushToken(s),e.gullet.pushToken(i),{type:"internal",mode:e.mode}}});var Mi=function(e,t,n){var i=Ve.math[e]&&Ve.math[e].replace,s=Ec(i||e,t,n);if(!s)throw new Error("Unsupported symbol "+e+" and font size "+t+".");return s},Lc=function(e,t,n,i){var s=n.havingBaseStyle(t),a=te.makeSpan(i.concat(s.sizingClasses(n)),[e],n),m=s.sizeMultiplier/n.sizeMultiplier;return a.height*=m,a.depth*=m,a.maxFontSize=s.sizeMultiplier,a},Hp=function(e,t,n){var i=t.havingBaseStyle(n),s=(1-t.sizeMultiplier/i.sizeMultiplier)*t.fontMetrics().axisHeight;e.classes.push("delimcenter"),e.style.top=de(s),e.height-=s,e.depth+=s},X3=function(e,t,n,i,s,a){var m=te.makeSymbol(e,"Main-Regular",s,i),o=Lc(m,t,i,a);return n&&Hp(o,i,t),o},J3=function(e,t,n,i){return te.makeSymbol(e,"Size"+t+"-Regular",n,i)},Wp=function(e,t,n,i,s,a){var m=J3(e,t,s,i),o=Lc(te.makeSpan(["delimsizing","size"+t],[m],i),we.TEXT,i,a);return n&&Hp(o,i,we.TEXT),o},Va=function(e,t,n){var i;t==="Size1-Regular"?i="delim-size1":i="delim-size4";var s=te.makeSpan(["delimsizinginner",i],[te.makeSpan([],[te.makeSymbol(e,t,n)])]);return{type:"elem",elem:s}},Ba=function(e,t,n){var i=Xt["Size4-Regular"][e.charCodeAt(0)]?Xt["Size4-Regular"][e.charCodeAt(0)][4]:Xt["Size1-Regular"][e.charCodeAt(0)][4],s=new tr("inner",r3(e,Math.round(1e3*t))),a=new An([s],{width:de(i),height:de(t),style:"width:"+de(i),viewBox:"0 0 "+1e3*i+" "+Math.round(1e3*t),preserveAspectRatio:"xMinYMin"}),m=te.makeSvgSpan([],[a],n);return m.height=t,m.style.height=de(t),m.style.width=de(i),{type:"elem",elem:m}},xl=.008,Bs={type:"kern",size:-1*xl},Z3=["|","\\lvert","\\rvert","\\vert"],eb=["\\|","\\lVert","\\rVert","\\Vert"],jp=function(e,t,n,i,s,a){var m,o,d,l,f="",u=0;m=d=l=e,o=null;var h="Size1-Regular";e==="\\uparrow"?d=l="":e==="\\Uparrow"?d=l="":e==="\\downarrow"?m=d="":e==="\\Downarrow"?m=d="":e==="\\updownarrow"?(m="\\uparrow",d="",l="\\downarrow"):e==="\\Updownarrow"?(m="\\Uparrow",d="",l="\\Downarrow"):Z3.includes(e)?(d="",f="vert",u=333):eb.includes(e)?(d="",f="doublevert",u=556):e==="["||e==="\\lbrack"?(m="",d="",l="",h="Size4-Regular",f="lbrack",u=667):e==="]"||e==="\\rbrack"?(m="",d="",l="",h="Size4-Regular",f="rbrack",u=667):e==="\\lfloor"||e===""?(d=m="",l="",h="Size4-Regular",f="lfloor",u=667):e==="\\lceil"||e===""?(m="",d=l="",h="Size4-Regular",f="lceil",u=667):e==="\\rfloor"||e===""?(d=m="",l="",h="Size4-Regular",f="rfloor",u=667):e==="\\rceil"||e===""?(m="",d=l="",h="Size4-Regular",f="rceil",u=667):e==="("||e==="\\lparen"?(m="",d="",l="",h="Size4-Regular",f="lparen",u=875):e===")"||e==="\\rparen"?(m="",d="",l="",h="Size4-Regular",f="rparen",u=875):e==="\\{"||e==="\\lbrace"?(m="",o="",l="",d="",h="Size4-Regular"):e==="\\}"||e==="\\rbrace"?(m="",o="",l="",d="",h="Size4-Regular"):e==="\\lgroup"||e===""?(m="",l="",d="",h="Size4-Regular"):e==="\\rgroup"||e===""?(m="",l="",d="",h="Size4-Regular"):e==="\\lmoustache"||e===""?(m="",l="",d="",h="Size4-Regular"):(e==="\\rmoustache"||e==="")&&(m="",l="",d="",h="Size4-Regular");var c=Mi(m,h,s),p=c.height+c.depth,g=Mi(d,h,s),y=g.height+g.depth,w=Mi(l,h,s),M=w.height+w.depth,R=0,x=1;if(o!==null){var S=Mi(o,h,s);R=S.height+S.depth,x=2}var E=p+M+R,k=Math.max(0,Math.ceil((t-E)/(x*y))),T=E+k*x*y,I=i.fontMetrics().axisHeight;n&&(I*=i.sizeMultiplier);var P=T/2-I,C=[];if(f.length>0){var b=T-p-M,A=Math.round(T*1e3),_=i3(f,Math.round(b*1e3)),L=new tr(f,_),O=(u/1e3).toFixed(3)+"em",V=(A/1e3).toFixed(3)+"em",B=new An([L],{width:O,height:V,viewBox:"0 0 "+u+" "+A}),W=te.makeSvgSpan([],[B],i);W.height=A/1e3,W.style.width=O,W.style.height=V,C.push({type:"elem",elem:W})}else{if(C.push(Va(l,h,s)),C.push(Bs),o===null){var G=T-p-M+2*xl;C.push(Ba(d,G,i))}else{var J=(T-p-M-R)/2+2*xl;C.push(Ba(d,J,i)),C.push(Bs),C.push(Va(o,h,s)),C.push(Bs),C.push(Ba(d,J,i))}C.push(Bs),C.push(Va(m,h,s))}var K=i.havingBaseStyle(we.TEXT),Q=te.makeVList({positionType:"bottom",positionData:P,children:C},K);return Lc(te.makeSpan(["delimsizing","mult"],[Q],K),we.TEXT,i,a)},Ua=80,Ha=.08,Wa=function(e,t,n,i,s){var a=n3(e,i,n),m=new tr(e,a),o=new An([m],{width:"400em",height:de(t),viewBox:"0 0 400000 "+n,preserveAspectRatio:"xMinYMin slice"});return te.makeSvgSpan(["hide-tail"],[o],s)},tb=function(e,t){var n=t.havingBaseSizing(),i=Yp("\\surd",e*n.sizeMultiplier,Kp,n),s=n.sizeMultiplier,a=Math.max(0,t.minRuleThickness-t.fontMetrics().sqrtRuleThickness),m,o=0,d=0,l=0,f;return i.type==="small"?(l=1e3+1e3*a+Ua,e<1?s=1:e<1.4&&(s=.7),o=(1+a+Ha)/s,d=(1+a)/s,m=Wa("sqrtMain",o,l,a,t),m.style.minWidth="0.853em",f=.833/s):i.type==="large"?(l=(1e3+Ua)*Bi[i.size],d=(Bi[i.size]+a)/s,o=(Bi[i.size]+a+Ha)/s,m=Wa("sqrtSize"+i.size,o,l,a,t),m.style.minWidth="1.02em",f=1/s):(o=e+a+Ha,d=e+a,l=Math.floor(1e3*e+a)+Ua,m=Wa("sqrtTall",o,l,a,t),m.style.minWidth="0.742em",f=1.056),m.height=d,m.style.height=de(o),{span:m,advanceWidth:f,ruleWidth:(t.fontMetrics().sqrtRuleThickness+a)*s}},Gp=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],nb=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],qp=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Bi=[0,1.2,1.8,2.4,3],rb=function(e,t,n,i,s){if(e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle"),Gp.includes(e)||qp.includes(e))return Wp(e,t,!1,n,i,s);if(nb.includes(e))return jp(e,Bi[t],!1,n,i,s);throw new ue("Illegal delimiter: '"+e+"'")},ib=[{type:"small",style:we.SCRIPTSCRIPT},{type:"small",style:we.SCRIPT},{type:"small",style:we.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],sb=[{type:"small",style:we.SCRIPTSCRIPT},{type:"small",style:we.SCRIPT},{type:"small",style:we.TEXT},{type:"stack"}],Kp=[{type:"small",style:we.SCRIPTSCRIPT},{type:"small",style:we.SCRIPT},{type:"small",style:we.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],ob=function(e){if(e.type==="small")return"Main-Regular";if(e.type==="large")return"Size"+e.size+"-Regular";if(e.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+e.type+"' here.")},Yp=function(e,t,n,i){for(var s=Math.min(2,3-i.style.size),a=s;a<n.length&&n[a].type!=="stack";a++){var m=Mi(e,ob(n[a]),"math"),o=m.height+m.depth;if(n[a].type==="small"){var d=i.havingBaseStyle(n[a].style);o*=d.sizeMultiplier}if(o>t)return n[a]}return n[n.length-1]},Qp=function(e,t,n,i,s,a){e==="<"||e==="\\lt"||e===""?e="\\langle":(e===">"||e==="\\gt"||e==="")&&(e="\\rangle");var m;qp.includes(e)?m=ib:Gp.includes(e)?m=Kp:m=sb;var o=Yp(e,t,m,i);return o.type==="small"?X3(e,o.style,n,i,s,a):o.type==="large"?Wp(e,o.size,n,i,s,a):jp(e,t,n,i,s,a)},ab=function(e,t,n,i,s,a){var m=i.fontMetrics().axisHeight*i.sizeMultiplier,o=901,d=5/i.fontMetrics().ptPerEm,l=Math.max(t-m,n+m),f=Math.max(l/500*o,2*l-d);return Qp(e,f,!0,i,s,a)},yn={sqrtImage:tb,sizedDelim:rb,sizeToMaxHeight:Bi,customSizedDelim:Qp,leftRightDelim:ab},C0={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},lb=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function Zo(r,e){var t=Xo(r);if(t&&lb.includes(t.text))return t;throw t?new ue("Invalid delimiter '"+t.text+"' after '"+e.funcName+"'",r):new ue("Invalid delimiter type '"+r.type+"'",r)}pe({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(r,e)=>{var t=Zo(e[0],r);return{type:"delimsizing",mode:r.parser.mode,size:C0[r.funcName].size,mclass:C0[r.funcName].mclass,delim:t.text}},htmlBuilder:(r,e)=>r.delim==="."?te.makeSpan([r.mclass]):yn.sizedDelim(r.delim,r.size,e,r.mode,[r.mclass]),mathmlBuilder:r=>{var e=[];r.delim!=="."&&e.push(Vt(r.delim,r.mode));var t=new le.MathNode("mo",e);r.mclass==="mopen"||r.mclass==="mclose"?t.setAttribute("fence","true"):t.setAttribute("fence","false"),t.setAttribute("stretchy","true");var n=de(yn.sizeToMaxHeight[r.size]);return t.setAttribute("minsize",n),t.setAttribute("maxsize",n),t}});function x0(r){if(!r.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}pe({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var t=r.parser.gullet.macros.get("\\current@color");if(t&&typeof t!="string")throw new ue("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:r.parser.mode,delim:Zo(e[0],r).text,color:t}}});pe({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var t=Zo(e[0],r),n=r.parser;++n.leftrightDepth;var i=n.parseExpression(!1);--n.leftrightDepth,n.expect("\\right",!1);var s=xe(n.parseFunction(),"leftright-right");return{type:"leftright",mode:n.mode,body:i,left:t.text,right:s.delim,rightColor:s.color}},htmlBuilder:(r,e)=>{x0(r);for(var t=at(r.body,e,!0,["mopen","mclose"]),n=0,i=0,s=!1,a=0;a<t.length;a++)t[a].isMiddle?s=!0:(n=Math.max(t[a].height,n),i=Math.max(t[a].depth,i));n*=e.sizeMultiplier,i*=e.sizeMultiplier;var m;if(r.left==="."?m=Zi(e,["mopen"]):m=yn.leftRightDelim(r.left,n,i,e,r.mode,["mopen"]),t.unshift(m),s)for(var o=1;o<t.length;o++){var d=t[o],l=d.isMiddle;l&&(t[o]=yn.leftRightDelim(l.delim,n,i,l.options,r.mode,[]))}var f;if(r.right===".")f=Zi(e,["mclose"]);else{var u=r.rightColor?e.withColor(r.rightColor):e;f=yn.leftRightDelim(r.right,n,i,u,r.mode,["mclose"])}return t.push(f),te.makeSpan(["minner"],t,e)},mathmlBuilder:(r,e)=>{x0(r);var t=xt(r.body,e);if(r.left!=="."){var n=new le.MathNode("mo",[Vt(r.left,r.mode)]);n.setAttribute("fence","true"),t.unshift(n)}if(r.right!=="."){var i=new le.MathNode("mo",[Vt(r.right,r.mode)]);i.setAttribute("fence","true"),r.rightColor&&i.setAttribute("mathcolor",r.rightColor),t.push(i)}return kc(t)}});pe({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var t=Zo(e[0],r);if(!r.parser.leftrightDepth)throw new ue("\\middle without preceding \\left",t);return{type:"middle",mode:r.parser.mode,delim:t.text}},htmlBuilder:(r,e)=>{var t;if(r.delim===".")t=Zi(e,[]);else{t=yn.sizedDelim(r.delim,1,e,r.mode,[]);var n={delim:r.delim,options:e};t.isMiddle=n}return t},mathmlBuilder:(r,e)=>{var t=r.delim==="\\vert"||r.delim==="|"?Vt("|","text"):Vt(r.delim,r.mode),n=new le.MathNode("mo",[t]);return n.setAttribute("fence","true"),n.setAttribute("lspace","0.05em"),n.setAttribute("rspace","0.05em"),n}});var $c=(r,e)=>{var t=te.wrapFragment(De(r.body,e),e),n=r.label.slice(1),i=e.sizeMultiplier,s,a=0,m=Ne.isCharacterBox(r.body);if(n==="sout")s=te.makeSpan(["stretchy","sout"]),s.height=e.fontMetrics().defaultRuleThickness/i,a=-.5*e.fontMetrics().xHeight;else if(n==="phase"){var o=qe({number:.6,unit:"pt"},e),d=qe({number:.35,unit:"ex"},e),l=e.havingBaseSizing();i=i/l.sizeMultiplier;var f=t.height+t.depth+o+d;t.style.paddingLeft=de(f/2+o);var u=Math.floor(1e3*f*i),h=e3(u),c=new An([new tr("phase",h)],{width:"400em",height:de(u/1e3),viewBox:"0 0 400000 "+u,preserveAspectRatio:"xMinYMin slice"});s=te.makeSvgSpan(["hide-tail"],[c],e),s.style.height=de(f),a=t.depth+o+d}else{/cancel/.test(n)?m||t.classes.push("cancel-pad"):n==="angl"?t.classes.push("anglpad"):t.classes.push("boxpad");var p=0,g=0,y=0;/box/.test(n)?(y=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness),p=e.fontMetrics().fboxsep+(n==="colorbox"?0:y),g=p):n==="angl"?(y=Math.max(e.fontMetrics().defaultRuleThickness,e.minRuleThickness),p=4*y,g=Math.max(0,.25-t.depth)):(p=m?.2:0,g=p),s=En.encloseSpan(t,n,p,g,e),/fbox|boxed|fcolorbox/.test(n)?(s.style.borderStyle="solid",s.style.borderWidth=de(y)):n==="angl"&&y!==.049&&(s.style.borderTopWidth=de(y),s.style.borderRightWidth=de(y)),a=t.depth+g,r.backgroundColor&&(s.style.backgroundColor=r.backgroundColor,r.borderColor&&(s.style.borderColor=r.borderColor))}var w;if(r.backgroundColor)w=te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:a},{type:"elem",elem:t,shift:0}]},e);else{var M=/cancel|phase/.test(n)?["svg-align"]:[];w=te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:t,shift:0},{type:"elem",elem:s,shift:a,wrapperClasses:M}]},e)}return/cancel/.test(n)&&(w.height=t.height,w.depth=t.depth),/cancel/.test(n)&&!m?te.makeSpan(["mord","cancel-lap"],[w],e):te.makeSpan(["mord"],[w],e)},Dc=(r,e)=>{var t=0,n=new le.MathNode(r.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Fe(r.body,e)]);switch(r.label){case"\\cancel":n.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":n.setAttribute("notation","downdiagonalstrike");break;case"\\phase":n.setAttribute("notation","phasorangle");break;case"\\sout":n.setAttribute("notation","horizontalstrike");break;case"\\fbox":n.setAttribute("notation","box");break;case"\\angl":n.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(t=e.fontMetrics().fboxsep*e.fontMetrics().ptPerEm,n.setAttribute("width","+"+2*t+"pt"),n.setAttribute("height","+"+2*t+"pt"),n.setAttribute("lspace",t+"pt"),n.setAttribute("voffset",t+"pt"),r.label==="\\fcolorbox"){var i=Math.max(e.fontMetrics().fboxrule,e.minRuleThickness);n.setAttribute("style","border: "+i+"em solid "+String(r.borderColor))}break;case"\\xcancel":n.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return r.backgroundColor&&n.setAttribute("mathbackground",r.backgroundColor),n};pe({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(r,e,t){var{parser:n,funcName:i}=r,s=xe(e[0],"color-token").color,a=e[1];return{type:"enclose",mode:n.mode,label:i,backgroundColor:s,body:a}},htmlBuilder:$c,mathmlBuilder:Dc});pe({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(r,e,t){var{parser:n,funcName:i}=r,s=xe(e[0],"color-token").color,a=xe(e[1],"color-token").color,m=e[2];return{type:"enclose",mode:n.mode,label:i,backgroundColor:a,borderColor:s,body:m}},htmlBuilder:$c,mathmlBuilder:Dc});pe({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(r,e){var{parser:t}=r;return{type:"enclose",mode:t.mode,label:"\\fbox",body:e[0]}}});pe({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];return{type:"enclose",mode:t.mode,label:n,body:i}},htmlBuilder:$c,mathmlBuilder:Dc});pe({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(r,e){var{parser:t}=r;return{type:"enclose",mode:t.mode,label:"\\angl",body:e[0]}}});var Xp={};function an(r){for(var{type:e,names:t,props:n,handler:i,htmlBuilder:s,mathmlBuilder:a}=r,m={type:e,numArgs:n.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:i},o=0;o<t.length;++o)Xp[t[o]]=m;s&&(Eo[e]=s),a&&(Co[e]=a)}var Jp={};function U(r,e){Jp[r]=e}function k0(r){var e=[];r.consumeSpaces();var t=r.fetch().text;for(t==="\\relax"&&(r.consume(),r.consumeSpaces(),t=r.fetch().text);t==="\\hline"||t==="\\hdashline";)r.consume(),e.push(t==="\\hdashline"),r.consumeSpaces(),t=r.fetch().text;return e}var ea=r=>{var e=r.parser.settings;if(!e.displayMode)throw new ue("{"+r.envName+"} can be used only in display mode.")};function Nc(r){if(r.indexOf("ed")===-1)return r.indexOf("*")===-1}function or(r,e,t){var{hskipBeforeAndAfter:n,addJot:i,cols:s,arraystretch:a,colSeparationType:m,autoTag:o,singleRow:d,emptySingleRow:l,maxNumCols:f,leqno:u}=e;if(r.gullet.beginGroup(),d||r.gullet.macros.set("\\cr","\\\\\\relax"),!a){var h=r.gullet.expandMacroAsText("\\arraystretch");if(h==null)a=1;else if(a=parseFloat(h),!a||a<0)throw new ue("Invalid \\arraystretch: "+h)}r.gullet.beginGroup();var c=[],p=[c],g=[],y=[],w=o!=null?[]:void 0;function M(){o&&r.gullet.macros.set("\\@eqnsw","1",!0)}function R(){w&&(r.gullet.macros.get("\\df@tag")?(w.push(r.subparse([new Rt("\\df@tag")])),r.gullet.macros.set("\\df@tag",void 0,!0)):w.push(!!o&&r.gullet.macros.get("\\@eqnsw")==="1"))}for(M(),y.push(k0(r));;){var x=r.parseExpression(!1,d?"\\end":"\\\\");r.gullet.endGroup(),r.gullet.beginGroup(),x={type:"ordgroup",mode:r.mode,body:x},t&&(x={type:"styling",mode:r.mode,style:t,body:[x]}),c.push(x);var S=r.fetch().text;if(S==="&"){if(f&&c.length===f){if(d||m)throw new ue("Too many tab characters: &",r.nextToken);r.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}r.consume()}else if(S==="\\end"){R(),c.length===1&&x.type==="styling"&&x.body[0].body.length===0&&(p.length>1||!l)&&p.pop(),y.length<p.length+1&&y.push([]);break}else if(S==="\\\\"){r.consume();var E=void 0;r.gullet.future().text!==" "&&(E=r.parseSizeGroup(!0)),g.push(E?E.value:null),R(),y.push(k0(r)),c=[],p.push(c),M()}else throw new ue("Expected & or \\\\ or \\cr or \\end",r.nextToken)}return r.gullet.endGroup(),r.gullet.endGroup(),{type:"array",mode:r.mode,addJot:i,arraystretch:a,body:p,cols:s,rowGaps:g,hskipBeforeAndAfter:n,hLinesBeforeRow:y,colSeparationType:m,tags:w,leqno:u}}function Pc(r){return r.slice(0,1)==="d"?"display":"text"}var ln=function(e,t){var n,i,s=e.body.length,a=e.hLinesBeforeRow,m=0,o=new Array(s),d=[],l=Math.max(t.fontMetrics().arrayRuleWidth,t.minRuleThickness),f=1/t.fontMetrics().ptPerEm,u=5*f;if(e.colSeparationType&&e.colSeparationType==="small"){var h=t.havingStyle(we.SCRIPT).sizeMultiplier;u=.2778*(h/t.sizeMultiplier)}var c=e.colSeparationType==="CD"?qe({number:3,unit:"ex"},t):12*f,p=3*f,g=e.arraystretch*c,y=.7*g,w=.3*g,M=0;function R(Dt){for(var Je=0;Je<Dt.length;++Je)Je>0&&(M+=.25),d.push({pos:M,isDashed:Dt[Je]})}for(R(a[0]),n=0;n<e.body.length;++n){var x=e.body[n],S=y,E=w;m<x.length&&(m=x.length);var k=new Array(x.length);for(i=0;i<x.length;++i){var T=De(x[i],t);E<T.depth&&(E=T.depth),S<T.height&&(S=T.height),k[i]=T}var I=e.rowGaps[n],P=0;I&&(P=qe(I,t),P>0&&(P+=w,E<P&&(E=P),P=0)),e.addJot&&(E+=p),k.height=S,k.depth=E,M+=S,k.pos=M,M+=E+P,o[n]=k,R(a[n+1])}var C=M/2+t.fontMetrics().axisHeight,b=e.cols||[],A=[],_,L,O=[];if(e.tags&&e.tags.some(Dt=>Dt))for(n=0;n<s;++n){var V=o[n],B=V.pos-C,W=e.tags[n],G=void 0;W===!0?G=te.makeSpan(["eqn-num"],[],t):W===!1?G=te.makeSpan([],[],t):G=te.makeSpan([],at(W,t,!0),t),G.depth=V.depth,G.height=V.height,O.push({type:"elem",elem:G,shift:B})}for(i=0,L=0;i<m||L<b.length;++i,++L){for(var J=b[L]||{},K=!0;J.type==="separator";){if(K||(_=te.makeSpan(["arraycolsep"],[]),_.style.width=de(t.fontMetrics().doubleRuleSep),A.push(_)),J.separator==="|"||J.separator===":"){var Q=J.separator==="|"?"solid":"dashed",X=te.makeSpan(["vertical-separator"],[],t);X.style.height=de(M),X.style.borderRightWidth=de(l),X.style.borderRightStyle=Q,X.style.margin="0 "+de(-l/2);var Z=M-C;Z&&(X.style.verticalAlign=de(-Z)),A.push(X)}else throw new ue("Invalid separator type: "+J.separator);L++,J=b[L]||{},K=!1}if(!(i>=m)){var re=void 0;(i>0||e.hskipBeforeAndAfter)&&(re=Ne.deflt(J.pregap,u),re!==0&&(_=te.makeSpan(["arraycolsep"],[]),_.style.width=de(re),A.push(_)));var se=[];for(n=0;n<s;++n){var he=o[n],ce=he[i];if(ce){var Ae=he.pos-C;ce.depth=he.depth,ce.height=he.height,se.push({type:"elem",elem:ce,shift:Ae})}}se=te.makeVList({positionType:"individualShift",children:se},t),se=te.makeSpan(["col-align-"+(J.align||"c")],[se]),A.push(se),(i<m-1||e.hskipBeforeAndAfter)&&(re=Ne.deflt(J.postgap,u),re!==0&&(_=te.makeSpan(["arraycolsep"],[]),_.style.width=de(re),A.push(_)))}}if(o=te.makeSpan(["mtable"],A),d.length>0){for(var Le=te.makeLineSpan("hline",t,l),Be=te.makeLineSpan("hdashline",t,l),Ye=[{type:"elem",elem:o,shift:0}];d.length>0;){var ze=d.pop(),lt=ze.pos-C;ze.isDashed?Ye.push({type:"elem",elem:Be,shift:lt}):Ye.push({type:"elem",elem:Le,shift:lt})}o=te.makeVList({positionType:"individualShift",children:Ye},t)}if(O.length===0)return te.makeSpan(["mord"],[o],t);var jt=te.makeVList({positionType:"individualShift",children:O},t);return jt=te.makeSpan(["tag"],[jt],t),te.makeFragment([o,jt])},cb={c:"center ",l:"left ",r:"right "},cn=function(e,t){for(var n=[],i=new le.MathNode("mtd",[],["mtr-glue"]),s=new le.MathNode("mtd",[],["mml-eqn-num"]),a=0;a<e.body.length;a++){for(var m=e.body[a],o=[],d=0;d<m.length;d++)o.push(new le.MathNode("mtd",[Fe(m[d],t)]));e.tags&&e.tags[a]&&(o.unshift(i),o.push(i),e.leqno?o.unshift(s):o.push(s)),n.push(new le.MathNode("mtr",o))}var l=new le.MathNode("mtable",n),f=e.arraystretch===.5?.1:.16+e.arraystretch-1+(e.addJot?.09:0);l.setAttribute("rowspacing",de(f));var u="",h="";if(e.cols&&e.cols.length>0){var c=e.cols,p="",g=!1,y=0,w=c.length;c[0].type==="separator"&&(u+="top ",y=1),c[c.length-1].type==="separator"&&(u+="bottom ",w-=1);for(var M=y;M<w;M++)c[M].type==="align"?(h+=cb[c[M].align],g&&(p+="none "),g=!0):c[M].type==="separator"&&g&&(p+=c[M].separator==="|"?"solid ":"dashed ",g=!1);l.setAttribute("columnalign",h.trim()),/[sd]/.test(p)&&l.setAttribute("columnlines",p.trim())}if(e.colSeparationType==="align"){for(var R=e.cols||[],x="",S=1;S<R.length;S++)x+=S%2?"0em ":"1em ";l.setAttribute("columnspacing",x.trim())}else e.colSeparationType==="alignat"||e.colSeparationType==="gather"?l.setAttribute("columnspacing","0em"):e.colSeparationType==="small"?l.setAttribute("columnspacing","0.2778em"):e.colSeparationType==="CD"?l.setAttribute("columnspacing","0.5em"):l.setAttribute("columnspacing","1em");var E="",k=e.hLinesBeforeRow;u+=k[0].length>0?"left ":"",u+=k[k.length-1].length>0?"right ":"";for(var T=1;T<k.length-1;T++)E+=k[T].length===0?"none ":k[T][0]?"dashed ":"solid ";return/[sd]/.test(E)&&l.setAttribute("rowlines",E.trim()),u!==""&&(l=new le.MathNode("menclose",[l]),l.setAttribute("notation",u.trim())),e.arraystretch&&e.arraystretch<1&&(l=new le.MathNode("mstyle",[l]),l.setAttribute("scriptlevel","1")),l},Zp=function(e,t){e.envName.indexOf("ed")===-1&&ea(e);var n=[],i=e.envName.indexOf("at")>-1?"alignat":"align",s=e.envName==="split",a=or(e.parser,{cols:n,addJot:!0,autoTag:s?void 0:Nc(e.envName),emptySingleRow:!0,colSeparationType:i,maxNumCols:s?2:void 0,leqno:e.parser.settings.leqno},"display"),m,o=0,d={type:"ordgroup",mode:e.mode,body:[]};if(t[0]&&t[0].type==="ordgroup"){for(var l="",f=0;f<t[0].body.length;f++){var u=xe(t[0].body[f],"textord");l+=u.text}m=Number(l),o=m*2}var h=!o;a.body.forEach(function(y){for(var w=1;w<y.length;w+=2){var M=xe(y[w],"styling"),R=xe(M.body[0],"ordgroup");R.body.unshift(d)}if(h)o<y.length&&(o=y.length);else{var x=y.length/2;if(m<x)throw new ue("Too many math in a row: "+("expected "+m+", but got "+x),y[0])}});for(var c=0;c<o;++c){var p="r",g=0;c%2===1?p="l":c>0&&h&&(g=1),n[c]={type:"align",align:p,pregap:g,postgap:0}}return a.colSeparationType=h?"align":"alignat",a};an({type:"array",names:["array","darray"],props:{numArgs:1},handler(r,e){var t=Xo(e[0]),n=t?[e[0]]:xe(e[0],"ordgroup").body,i=n.map(function(a){var m=Mc(a),o=m.text;if("lcr".indexOf(o)!==-1)return{type:"align",align:o};if(o==="|")return{type:"separator",separator:"|"};if(o===":")return{type:"separator",separator:":"};throw new ue("Unknown column alignment: "+o,a)}),s={cols:i,hskipBeforeAndAfter:!0,maxNumCols:i.length};return or(r.parser,s,Pc(r.envName))},htmlBuilder:ln,mathmlBuilder:cn});an({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(r){var e={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[r.envName.replace("*","")],t="c",n={hskipBeforeAndAfter:!1,cols:[{type:"align",align:t}]};if(r.envName.charAt(r.envName.length-1)==="*"){var i=r.parser;if(i.consumeSpaces(),i.fetch().text==="["){if(i.consume(),i.consumeSpaces(),t=i.fetch().text,"lcr".indexOf(t)===-1)throw new ue("Expected l or c or r",i.nextToken);i.consume(),i.consumeSpaces(),i.expect("]"),i.consume(),n.cols=[{type:"align",align:t}]}}var s=or(r.parser,n,Pc(r.envName)),a=Math.max(0,...s.body.map(m=>m.length));return s.cols=new Array(a).fill({type:"align",align:t}),e?{type:"leftright",mode:r.mode,body:[s],left:e[0],right:e[1],rightColor:void 0}:s},htmlBuilder:ln,mathmlBuilder:cn});an({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(r){var e={arraystretch:.5},t=or(r.parser,e,"script");return t.colSeparationType="small",t},htmlBuilder:ln,mathmlBuilder:cn});an({type:"array",names:["subarray"],props:{numArgs:1},handler(r,e){var t=Xo(e[0]),n=t?[e[0]]:xe(e[0],"ordgroup").body,i=n.map(function(a){var m=Mc(a),o=m.text;if("lc".indexOf(o)!==-1)return{type:"align",align:o};throw new ue("Unknown column alignment: "+o,a)});if(i.length>1)throw new ue("{subarray} can contain only one column");var s={cols:i,hskipBeforeAndAfter:!1,arraystretch:.5};if(s=or(r.parser,s,"script"),s.body.length>0&&s.body[0].length>1)throw new ue("{subarray} can contain only one column");return s},htmlBuilder:ln,mathmlBuilder:cn});an({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(r){var e={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},t=or(r.parser,e,Pc(r.envName));return{type:"leftright",mode:r.mode,body:[t],left:r.envName.indexOf("r")>-1?".":"\\{",right:r.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:ln,mathmlBuilder:cn});an({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:Zp,htmlBuilder:ln,mathmlBuilder:cn});an({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(r){["gather","gather*"].includes(r.envName)&&ea(r);var e={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Nc(r.envName),emptySingleRow:!0,leqno:r.parser.settings.leqno};return or(r.parser,e,"display")},htmlBuilder:ln,mathmlBuilder:cn});an({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:Zp,htmlBuilder:ln,mathmlBuilder:cn});an({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(r){ea(r);var e={autoTag:Nc(r.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:r.parser.settings.leqno};return or(r.parser,e,"display")},htmlBuilder:ln,mathmlBuilder:cn});an({type:"array",names:["CD"],props:{numArgs:0},handler(r){return ea(r),Y3(r.parser)},htmlBuilder:ln,mathmlBuilder:cn});U("\\nonumber","\\gdef\\@eqnsw{0}");U("\\notag","\\nonumber");pe({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(r,e){throw new ue(r.funcName+" valid only within array environment")}});var I0=Xp;pe({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];if(i.type!=="ordgroup")throw new ue("Invalid environment name",i);for(var s="",a=0;a<i.body.length;++a)s+=xe(i.body[a],"textord").text;if(n==="\\begin"){if(!I0.hasOwnProperty(s))throw new ue("No such environment: "+s,i);var m=I0[s],{args:o,optArgs:d}=t.parseArguments("\\begin{"+s+"}",m),l={mode:t.mode,envName:s,parser:t},f=m.handler(l,o,d);t.expect("\\end",!1);var u=t.nextToken,h=xe(t.parseFunction(),"environment");if(h.name!==s)throw new ue("Mismatch: \\begin{"+s+"} matched by \\end{"+h.name+"}",u);return f}return{type:"environment",mode:t.mode,name:s,nameGroup:i}}});var em=(r,e)=>{var t=r.font,n=e.withFont(t);return De(r.body,n)},tm=(r,e)=>{var t=r.font,n=e.withFont(t);return Fe(r.body,n)},M0={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};pe({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=xo(e[0]),s=n;return s in M0&&(s=M0[s]),{type:"font",mode:t.mode,font:s.slice(1),body:i}},htmlBuilder:em,mathmlBuilder:tm});pe({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(r,e)=>{var{parser:t}=r,n=e[0],i=Ne.isCharacterBox(n);return{type:"mclass",mode:t.mode,mclass:Jo(n),body:[{type:"font",mode:t.mode,font:"boldsymbol",body:n}],isCharacterBox:i}}});pe({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(r,e)=>{var{parser:t,funcName:n,breakOnTokenText:i}=r,{mode:s}=t,a=t.parseExpression(!0,i),m="math"+n.slice(1);return{type:"font",mode:s,font:m,body:{type:"ordgroup",mode:t.mode,body:a}}},htmlBuilder:em,mathmlBuilder:tm});var nm=(r,e)=>{var t=e;return r==="display"?t=t.id>=we.SCRIPT.id?t.text():we.DISPLAY:r==="text"&&t.size===we.DISPLAY.size?t=we.TEXT:r==="script"?t=we.SCRIPT:r==="scriptscript"&&(t=we.SCRIPTSCRIPT),t},Oc=(r,e)=>{var t=nm(r.size,e.style),n=t.fracNum(),i=t.fracDen(),s;s=e.havingStyle(n);var a=De(r.numer,s,e);if(r.continued){var m=8.5/e.fontMetrics().ptPerEm,o=3.5/e.fontMetrics().ptPerEm;a.height=a.height<m?m:a.height,a.depth=a.depth<o?o:a.depth}s=e.havingStyle(i);var d=De(r.denom,s,e),l,f,u;r.hasBarLine?(r.barSize?(f=qe(r.barSize,e),l=te.makeLineSpan("frac-line",e,f)):l=te.makeLineSpan("frac-line",e),f=l.height,u=l.height):(l=null,f=0,u=e.fontMetrics().defaultRuleThickness);var h,c,p;t.size===we.DISPLAY.size||r.size==="display"?(h=e.fontMetrics().num1,f>0?c=3*u:c=7*u,p=e.fontMetrics().denom1):(f>0?(h=e.fontMetrics().num2,c=u):(h=e.fontMetrics().num3,c=3*u),p=e.fontMetrics().denom2);var g;if(l){var w=e.fontMetrics().axisHeight;h-a.depth-(w+.5*f)<c&&(h+=c-(h-a.depth-(w+.5*f))),w-.5*f-(d.height-p)<c&&(p+=c-(w-.5*f-(d.height-p)));var M=-(w-.5*f);g=te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:p},{type:"elem",elem:l,shift:M},{type:"elem",elem:a,shift:-h}]},e)}else{var y=h-a.depth-(d.height-p);y<c&&(h+=.5*(c-y),p+=.5*(c-y)),g=te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:d,shift:p},{type:"elem",elem:a,shift:-h}]},e)}s=e.havingStyle(t),g.height*=s.sizeMultiplier/e.sizeMultiplier,g.depth*=s.sizeMultiplier/e.sizeMultiplier;var R;t.size===we.DISPLAY.size?R=e.fontMetrics().delim1:t.size===we.SCRIPTSCRIPT.size?R=e.havingStyle(we.SCRIPT).fontMetrics().delim2:R=e.fontMetrics().delim2;var x,S;return r.leftDelim==null?x=Zi(e,["mopen"]):x=yn.customSizedDelim(r.leftDelim,R,!0,e.havingStyle(t),r.mode,["mopen"]),r.continued?S=te.makeSpan([]):r.rightDelim==null?S=Zi(e,["mclose"]):S=yn.customSizedDelim(r.rightDelim,R,!0,e.havingStyle(t),r.mode,["mclose"]),te.makeSpan(["mord"].concat(s.sizingClasses(e)),[x,te.makeSpan(["mfrac"],[g]),S],e)},Fc=(r,e)=>{var t=new le.MathNode("mfrac",[Fe(r.numer,e),Fe(r.denom,e)]);if(!r.hasBarLine)t.setAttribute("linethickness","0px");else if(r.barSize){var n=qe(r.barSize,e);t.setAttribute("linethickness",de(n))}var i=nm(r.size,e.style);if(i.size!==e.style.size){t=new le.MathNode("mstyle",[t]);var s=i.size===we.DISPLAY.size?"true":"false";t.setAttribute("displaystyle",s),t.setAttribute("scriptlevel","0")}if(r.leftDelim!=null||r.rightDelim!=null){var a=[];if(r.leftDelim!=null){var m=new le.MathNode("mo",[new le.TextNode(r.leftDelim.replace("\\",""))]);m.setAttribute("fence","true"),a.push(m)}if(a.push(t),r.rightDelim!=null){var o=new le.MathNode("mo",[new le.TextNode(r.rightDelim.replace("\\",""))]);o.setAttribute("fence","true"),a.push(o)}return kc(a)}return t};pe({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0],s=e[1],a,m=null,o=null,d="auto";switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":a=!0;break;case"\\\\atopfrac":a=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":a=!1,m="(",o=")";break;case"\\\\bracefrac":a=!1,m="\\{",o="\\}";break;case"\\\\brackfrac":a=!1,m="[",o="]";break;default:throw new Error("Unrecognized genfrac command")}switch(n){case"\\dfrac":case"\\dbinom":d="display";break;case"\\tfrac":case"\\tbinom":d="text";break}return{type:"genfrac",mode:t.mode,continued:!1,numer:i,denom:s,hasBarLine:a,leftDelim:m,rightDelim:o,size:d,barSize:null}},htmlBuilder:Oc,mathmlBuilder:Fc});pe({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0],s=e[1];return{type:"genfrac",mode:t.mode,continued:!0,numer:i,denom:s,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});pe({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(r){var{parser:e,funcName:t,token:n}=r,i;switch(t){case"\\over":i="\\frac";break;case"\\choose":i="\\binom";break;case"\\atop":i="\\\\atopfrac";break;case"\\brace":i="\\\\bracefrac";break;case"\\brack":i="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:e.mode,replaceWith:i,token:n}}});var R0=["display","text","script","scriptscript"],L0=function(e){var t=null;return e.length>0&&(t=e,t=t==="."?null:t),t};pe({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(r,e){var{parser:t}=r,n=e[4],i=e[5],s=xo(e[0]),a=s.type==="atom"&&s.family==="open"?L0(s.text):null,m=xo(e[1]),o=m.type==="atom"&&m.family==="close"?L0(m.text):null,d=xe(e[2],"size"),l,f=null;d.isBlank?l=!0:(f=d.value,l=f.number>0);var u="auto",h=e[3];if(h.type==="ordgroup"){if(h.body.length>0){var c=xe(h.body[0],"textord");u=R0[Number(c.text)]}}else h=xe(h,"textord"),u=R0[Number(h.text)];return{type:"genfrac",mode:t.mode,numer:n,denom:i,continued:!1,hasBarLine:l,barSize:f,leftDelim:a,rightDelim:o,size:u}},htmlBuilder:Oc,mathmlBuilder:Fc});pe({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(r,e){var{parser:t,funcName:n,token:i}=r;return{type:"infix",mode:t.mode,replaceWith:"\\\\abovefrac",size:xe(e[0],"size").value,token:i}}});pe({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0],s=z5(xe(e[1],"infix").size),a=e[2],m=s.number>0;return{type:"genfrac",mode:t.mode,numer:i,denom:a,continued:!1,hasBarLine:m,barSize:s,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Oc,mathmlBuilder:Fc});var rm=(r,e)=>{var t=e.style,n,i;r.type==="supsub"?(n=r.sup?De(r.sup,e.havingStyle(t.sup()),e):De(r.sub,e.havingStyle(t.sub()),e),i=xe(r.base,"horizBrace")):i=xe(r,"horizBrace");var s=De(i.base,e.havingBaseStyle(we.DISPLAY)),a=En.svgSpan(i,e),m;if(i.isOver?(m=te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:s},{type:"kern",size:.1},{type:"elem",elem:a}]},e),m.children[0].children[0].children[1].classes.push("svg-align")):(m=te.makeVList({positionType:"bottom",positionData:s.depth+.1+a.height,children:[{type:"elem",elem:a},{type:"kern",size:.1},{type:"elem",elem:s}]},e),m.children[0].children[0].children[0].classes.push("svg-align")),n){var o=te.makeSpan(["mord",i.isOver?"mover":"munder"],[m],e);i.isOver?m=te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.2},{type:"elem",elem:n}]},e):m=te.makeVList({positionType:"bottom",positionData:o.depth+.2+n.height+n.depth,children:[{type:"elem",elem:n},{type:"kern",size:.2},{type:"elem",elem:o}]},e)}return te.makeSpan(["mord",i.isOver?"mover":"munder"],[m],e)},ub=(r,e)=>{var t=En.mathMLnode(r.label);return new le.MathNode(r.isOver?"mover":"munder",[Fe(r.base,e),t])};pe({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(r,e){var{parser:t,funcName:n}=r;return{type:"horizBrace",mode:t.mode,label:n,isOver:/^\\over/.test(n),base:e[0]}},htmlBuilder:rm,mathmlBuilder:ub});pe({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[1],i=xe(e[0],"url").url;return t.settings.isTrusted({command:"\\href",url:i})?{type:"href",mode:t.mode,href:i,body:et(n)}:t.formatUnsupportedCmd("\\href")},htmlBuilder:(r,e)=>{var t=at(r.body,e,!1);return te.makeAnchor(r.href,[],t,e)},mathmlBuilder:(r,e)=>{var t=nr(r.body,e);return t instanceof Mt||(t=new Mt("mrow",[t])),t.setAttribute("href",r.href),t}});pe({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=xe(e[0],"url").url;if(!t.settings.isTrusted({command:"\\url",url:n}))return t.formatUnsupportedCmd("\\url");for(var i=[],s=0;s<n.length;s++){var a=n[s];a==="~"&&(a="\\textasciitilde"),i.push({type:"textord",mode:"text",text:a})}var m={type:"text",mode:t.mode,font:"\\texttt",body:i};return{type:"href",mode:t.mode,href:n,body:et(m)}}});pe({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(r,e){var{parser:t}=r;return{type:"hbox",mode:t.mode,body:et(e[0])}},htmlBuilder(r,e){var t=at(r.body,e,!1);return te.makeFragment(t)},mathmlBuilder(r,e){return new le.MathNode("mrow",xt(r.body,e))}});pe({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(r,e)=>{var{parser:t,funcName:n,token:i}=r,s=xe(e[0],"raw").string,a=e[1];t.settings.strict&&t.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var m,o={};switch(n){case"\\htmlClass":o.class=s,m={command:"\\htmlClass",class:s};break;case"\\htmlId":o.id=s,m={command:"\\htmlId",id:s};break;case"\\htmlStyle":o.style=s,m={command:"\\htmlStyle",style:s};break;case"\\htmlData":{for(var d=s.split(","),l=0;l<d.length;l++){var f=d[l],u=f.indexOf("=");if(u<0)throw new ue("\\htmlData key/value '"+f+"' missing equals sign");var h=f.slice(0,u),c=f.slice(u+1);o["data-"+h.trim()]=c}m={command:"\\htmlData",attributes:o};break}default:throw new Error("Unrecognized html command")}return t.settings.isTrusted(m)?{type:"html",mode:t.mode,attributes:o,body:et(a)}:t.formatUnsupportedCmd(n)},htmlBuilder:(r,e)=>{var t=at(r.body,e,!1),n=["enclosing"];r.attributes.class&&n.push(...r.attributes.class.trim().split(/\s+/));var i=te.makeSpan(n,t,e);for(var s in r.attributes)s!=="class"&&r.attributes.hasOwnProperty(s)&&i.setAttribute(s,r.attributes[s]);return i},mathmlBuilder:(r,e)=>nr(r.body,e)});pe({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r;return{type:"htmlmathml",mode:t.mode,html:et(e[0]),mathml:et(e[1])}},htmlBuilder:(r,e)=>{var t=at(r.html,e,!1);return te.makeFragment(t)},mathmlBuilder:(r,e)=>nr(r.mathml,e)});var ja=function(e){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(e))return{number:+e,unit:"bp"};var t=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(e);if(!t)throw new ue("Invalid size: '"+e+"' in \\includegraphics");var n={number:+(t[1]+t[2]),unit:t[3]};if(!Sp(n))throw new ue("Invalid unit: '"+n.unit+"' in \\includegraphics.");return n};pe({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(r,e,t)=>{var{parser:n}=r,i={number:0,unit:"em"},s={number:.9,unit:"em"},a={number:0,unit:"em"},m="";if(t[0])for(var o=xe(t[0],"raw").string,d=o.split(","),l=0;l<d.length;l++){var f=d[l].split("=");if(f.length===2){var u=f[1].trim();switch(f[0].trim()){case"alt":m=u;break;case"width":i=ja(u);break;case"height":s=ja(u);break;case"totalheight":a=ja(u);break;default:throw new ue("Invalid key: '"+f[0]+"' in \\includegraphics.")}}}var h=xe(e[0],"url").url;return m===""&&(m=h,m=m.replace(/^.*[\\/]/,""),m=m.substring(0,m.lastIndexOf("."))),n.settings.isTrusted({command:"\\includegraphics",url:h})?{type:"includegraphics",mode:n.mode,alt:m,width:i,height:s,totalheight:a,src:h}:n.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(r,e)=>{var t=qe(r.height,e),n=0;r.totalheight.number>0&&(n=qe(r.totalheight,e)-t);var i=0;r.width.number>0&&(i=qe(r.width,e));var s={height:de(t+n)};i>0&&(s.width=de(i)),n>0&&(s.verticalAlign=de(-n));var a=new u3(r.src,r.alt,s);return a.height=t,a.depth=n,a},mathmlBuilder:(r,e)=>{var t=new le.MathNode("mglyph",[]);t.setAttribute("alt",r.alt);var n=qe(r.height,e),i=0;if(r.totalheight.number>0&&(i=qe(r.totalheight,e)-n,t.setAttribute("valign",de(-i))),t.setAttribute("height",de(n+i)),r.width.number>0){var s=qe(r.width,e);t.setAttribute("width",de(s))}return t.setAttribute("src",r.src),t}});pe({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(r,e){var{parser:t,funcName:n}=r,i=xe(e[0],"size");if(t.settings.strict){var s=n[1]==="m",a=i.value.unit==="mu";s?(a||t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" supports only mu units, "+("not "+i.value.unit+" units")),t.mode!=="math"&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" works only in math mode")):a&&t.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+n+" doesn't support mu units")}return{type:"kern",mode:t.mode,dimension:i.value}},htmlBuilder(r,e){return te.makeGlue(r.dimension,e)},mathmlBuilder(r,e){var t=qe(r.dimension,e);return new le.SpaceNode(t)}});pe({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0];return{type:"lap",mode:t.mode,alignment:n.slice(5),body:i}},htmlBuilder:(r,e)=>{var t;r.alignment==="clap"?(t=te.makeSpan([],[De(r.body,e)]),t=te.makeSpan(["inner"],[t],e)):t=te.makeSpan(["inner"],[De(r.body,e)]);var n=te.makeSpan(["fix"],[]),i=te.makeSpan([r.alignment],[t,n],e),s=te.makeSpan(["strut"]);return s.style.height=de(i.height+i.depth),i.depth&&(s.style.verticalAlign=de(-i.depth)),i.children.unshift(s),i=te.makeSpan(["thinbox"],[i],e),te.makeSpan(["mord","vbox"],[i],e)},mathmlBuilder:(r,e)=>{var t=new le.MathNode("mpadded",[Fe(r.body,e)]);if(r.alignment!=="rlap"){var n=r.alignment==="llap"?"-1":"-0.5";t.setAttribute("lspace",n+"width")}return t.setAttribute("width","0px"),t}});pe({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(r,e){var{funcName:t,parser:n}=r,i=n.mode;n.switchMode("math");var s=t==="\\("?"\\)":"$",a=n.parseExpression(!1,s);return n.expect(s),n.switchMode(i),{type:"styling",mode:n.mode,style:"text",body:a}}});pe({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(r,e){throw new ue("Mismatched "+r.funcName)}});var $0=(r,e)=>{switch(e.style.size){case we.DISPLAY.size:return r.display;case we.TEXT.size:return r.text;case we.SCRIPT.size:return r.script;case we.SCRIPTSCRIPT.size:return r.scriptscript;default:return r.text}};pe({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(r,e)=>{var{parser:t}=r;return{type:"mathchoice",mode:t.mode,display:et(e[0]),text:et(e[1]),script:et(e[2]),scriptscript:et(e[3])}},htmlBuilder:(r,e)=>{var t=$0(r,e),n=at(t,e,!1);return te.makeFragment(n)},mathmlBuilder:(r,e)=>{var t=$0(r,e);return nr(t,e)}});var im=(r,e,t,n,i,s,a)=>{r=te.makeSpan([],[r]);var m=t&&Ne.isCharacterBox(t),o,d;if(e){var l=De(e,n.havingStyle(i.sup()),n);d={elem:l,kern:Math.max(n.fontMetrics().bigOpSpacing1,n.fontMetrics().bigOpSpacing3-l.depth)}}if(t){var f=De(t,n.havingStyle(i.sub()),n);o={elem:f,kern:Math.max(n.fontMetrics().bigOpSpacing2,n.fontMetrics().bigOpSpacing4-f.height)}}var u;if(d&&o){var h=n.fontMetrics().bigOpSpacing5+o.elem.height+o.elem.depth+o.kern+r.depth+a;u=te.makeVList({positionType:"bottom",positionData:h,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:de(-s)},{type:"kern",size:o.kern},{type:"elem",elem:r},{type:"kern",size:d.kern},{type:"elem",elem:d.elem,marginLeft:de(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else if(o){var c=r.height-a;u=te.makeVList({positionType:"top",positionData:c,children:[{type:"kern",size:n.fontMetrics().bigOpSpacing5},{type:"elem",elem:o.elem,marginLeft:de(-s)},{type:"kern",size:o.kern},{type:"elem",elem:r}]},n)}else if(d){var p=r.depth+a;u=te.makeVList({positionType:"bottom",positionData:p,children:[{type:"elem",elem:r},{type:"kern",size:d.kern},{type:"elem",elem:d.elem,marginLeft:de(s)},{type:"kern",size:n.fontMetrics().bigOpSpacing5}]},n)}else return r;var g=[u];if(o&&s!==0&&!m){var y=te.makeSpan(["mspace"],[],n);y.style.marginRight=de(s),g.unshift(y)}return te.makeSpan(["mop","op-limits"],g,n)},sm=["\\smallint"],si=(r,e)=>{var t,n,i=!1,s;r.type==="supsub"?(t=r.sup,n=r.sub,s=xe(r.base,"op"),i=!0):s=xe(r,"op");var a=e.style,m=!1;a.size===we.DISPLAY.size&&s.symbol&&!sm.includes(s.name)&&(m=!0);var o;if(s.symbol){var d=m?"Size2-Regular":"Size1-Regular",l="";if((s.name==="\\oiint"||s.name==="\\oiiint")&&(l=s.name.slice(1),s.name=l==="oiint"?"\\iint":"\\iiint"),o=te.makeSymbol(s.name,d,"math",e,["mop","op-symbol",m?"large-op":"small-op"]),l.length>0){var f=o.italic,u=te.staticSvg(l+"Size"+(m?"2":"1"),e);o=te.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:0},{type:"elem",elem:u,shift:m?.08:0}]},e),s.name="\\"+l,o.classes.unshift("mop"),o.italic=f}}else if(s.body){var h=at(s.body,e,!0);h.length===1&&h[0]instanceof zt?(o=h[0],o.classes[0]="mop"):o=te.makeSpan(["mop"],h,e)}else{for(var c=[],p=1;p<s.name.length;p++)c.push(te.mathsym(s.name[p],s.mode,e));o=te.makeSpan(["mop"],c,e)}var g=0,y=0;return(o instanceof zt||s.name==="\\oiint"||s.name==="\\oiiint")&&!s.suppressBaseShift&&(g=(o.height-o.depth)/2-e.fontMetrics().axisHeight,y=o.italic),i?im(o,t,n,e,a,y,g):(g&&(o.style.position="relative",o.style.top=de(g)),o)},ms=(r,e)=>{var t;if(r.symbol)t=new Mt("mo",[Vt(r.name,r.mode)]),sm.includes(r.name)&&t.setAttribute("largeop","false");else if(r.body)t=new Mt("mo",xt(r.body,e));else{t=new Mt("mi",[new Jt(r.name.slice(1))]);var n=new Mt("mo",[Vt("","text")]);r.parentIsSupSub?t=new Mt("mrow",[t,n]):t=$p([t,n])}return t},hb={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};pe({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=n;return i.length===1&&(i=hb[i]),{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:i}},htmlBuilder:si,mathmlBuilder:ms});pe({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:et(n)}},htmlBuilder:si,mathmlBuilder:ms});var db={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};pe({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(r){var{parser:e,funcName:t}=r;return{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:si,mathmlBuilder:ms});pe({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(r){var{parser:e,funcName:t}=r;return{type:"op",mode:e.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:t}},htmlBuilder:si,mathmlBuilder:ms});pe({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0,allowedInArgument:!0},handler(r){var{parser:e,funcName:t}=r,n=t;return n.length===1&&(n=db[n]),{type:"op",mode:e.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:n}},htmlBuilder:si,mathmlBuilder:ms});var om=(r,e)=>{var t,n,i=!1,s;r.type==="supsub"?(t=r.sup,n=r.sub,s=xe(r.base,"operatorname"),i=!0):s=xe(r,"operatorname");var a;if(s.body.length>0){for(var m=s.body.map(f=>{var u=f.text;return typeof u=="string"?{type:"textord",mode:f.mode,text:u}:f}),o=at(m,e.withFont("mathrm"),!0),d=0;d<o.length;d++){var l=o[d];l instanceof zt&&(l.text=l.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}a=te.makeSpan(["mop"],o,e)}else a=te.makeSpan(["mop"],[],e);return i?im(a,t,n,e,e.style,0,0):a},fb=(r,e)=>{for(var t=xt(r.body,e.withFont("mathrm")),n=!0,i=0;i<t.length;i++){var s=t[i];if(!(s instanceof le.SpaceNode))if(s instanceof le.MathNode)switch(s.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var a=s.children[0];s.children.length===1&&a instanceof le.TextNode?a.text=a.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):n=!1;break}default:n=!1}else n=!1}if(n){var m=t.map(l=>l.toText()).join("");t=[new le.TextNode(m)]}var o=new le.MathNode("mi",t);o.setAttribute("mathvariant","normal");var d=new le.MathNode("mo",[Vt("","text")]);return r.parentIsSupSub?new le.MathNode("mrow",[o,d]):le.newDocumentFragment([o,d])};pe({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(r,e)=>{var{parser:t,funcName:n}=r,i=e[0];return{type:"operatorname",mode:t.mode,body:et(i),alwaysHandleSupSub:n==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:om,mathmlBuilder:fb});U("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");xr({type:"ordgroup",htmlBuilder(r,e){return r.semisimple?te.makeFragment(at(r.body,e,!1)):te.makeSpan(["mord"],at(r.body,e,!0),e)},mathmlBuilder(r,e){return nr(r.body,e,!0)}});pe({type:"overline",names:["\\overline"],props:{numArgs:1},handler(r,e){var{parser:t}=r,n=e[0];return{type:"overline",mode:t.mode,body:n}},htmlBuilder(r,e){var t=De(r.body,e.havingCrampedStyle()),n=te.makeLineSpan("overline-line",e),i=e.fontMetrics().defaultRuleThickness,s=te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t},{type:"kern",size:3*i},{type:"elem",elem:n},{type:"kern",size:i}]},e);return te.makeSpan(["mord","overline"],[s],e)},mathmlBuilder(r,e){var t=new le.MathNode("mo",[new le.TextNode("")]);t.setAttribute("stretchy","true");var n=new le.MathNode("mover",[Fe(r.body,e),t]);return n.setAttribute("accent","true"),n}});pe({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"phantom",mode:t.mode,body:et(n)}},htmlBuilder:(r,e)=>{var t=at(r.body,e.withPhantom(),!1);return te.makeFragment(t)},mathmlBuilder:(r,e)=>{var t=xt(r.body,e);return new le.MathNode("mphantom",t)}});pe({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"hphantom",mode:t.mode,body:n}},htmlBuilder:(r,e)=>{var t=te.makeSpan([],[De(r.body,e.withPhantom())]);if(t.height=0,t.depth=0,t.children)for(var n=0;n<t.children.length;n++)t.children[n].height=0,t.children[n].depth=0;return t=te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e),te.makeSpan(["mord"],[t],e)},mathmlBuilder:(r,e)=>{var t=xt(et(r.body),e),n=new le.MathNode("mphantom",t),i=new le.MathNode("mpadded",[n]);return i.setAttribute("height","0px"),i.setAttribute("depth","0px"),i}});pe({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(r,e)=>{var{parser:t}=r,n=e[0];return{type:"vphantom",mode:t.mode,body:n}},htmlBuilder:(r,e)=>{var t=te.makeSpan(["inner"],[De(r.body,e.withPhantom())]),n=te.makeSpan(["fix"],[]);return te.makeSpan(["mord","rlap"],[t,n],e)},mathmlBuilder:(r,e)=>{var t=xt(et(r.body),e),n=new le.MathNode("mphantom",t),i=new le.MathNode("mpadded",[n]);return i.setAttribute("width","0px"),i}});pe({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(r,e){var{parser:t}=r,n=xe(e[0],"size").value,i=e[1];return{type:"raisebox",mode:t.mode,dy:n,body:i}},htmlBuilder(r,e){var t=De(r.body,e),n=qe(r.dy,e);return te.makeVList({positionType:"shift",positionData:-n,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(r,e){var t=new le.MathNode("mpadded",[Fe(r.body,e)]),n=r.dy.number+r.dy.unit;return t.setAttribute("voffset",n),t}});pe({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(r){var{parser:e}=r;return{type:"internal",mode:e.mode}}});pe({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(r,e,t){var{parser:n}=r,i=t[0],s=xe(e[0],"size"),a=xe(e[1],"size");return{type:"rule",mode:n.mode,shift:i&&xe(i,"size").value,width:s.value,height:a.value}},htmlBuilder(r,e){var t=te.makeSpan(["mord","rule"],[],e),n=qe(r.width,e),i=qe(r.height,e),s=r.shift?qe(r.shift,e):0;return t.style.borderRightWidth=de(n),t.style.borderTopWidth=de(i),t.style.bottom=de(s),t.width=n,t.height=i+s,t.depth=-s,t.maxFontSize=i*1.125*e.sizeMultiplier,t},mathmlBuilder(r,e){var t=qe(r.width,e),n=qe(r.height,e),i=r.shift?qe(r.shift,e):0,s=e.color&&e.getColor()||"black",a=new le.MathNode("mspace");a.setAttribute("mathbackground",s),a.setAttribute("width",de(t)),a.setAttribute("height",de(n));var m=new le.MathNode("mpadded",[a]);return i>=0?m.setAttribute("height",de(i)):(m.setAttribute("height",de(i)),m.setAttribute("depth",de(-i))),m.setAttribute("voffset",de(i)),m}});function am(r,e,t){for(var n=at(r,e,!1),i=e.sizeMultiplier/t.sizeMultiplier,s=0;s<n.length;s++){var a=n[s].classes.indexOf("sizing");a<0?Array.prototype.push.apply(n[s].classes,e.sizingClasses(t)):n[s].classes[a+1]==="reset-size"+e.size&&(n[s].classes[a+1]="reset-size"+t.size),n[s].height*=i,n[s].depth*=i}return te.makeFragment(n)}var D0=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],pb=(r,e)=>{var t=e.havingSize(r.size);return am(r.body,t,e)};pe({type:"sizing",names:D0,props:{numArgs:0,allowedInText:!0},handler:(r,e)=>{var{breakOnTokenText:t,funcName:n,parser:i}=r,s=i.parseExpression(!1,t);return{type:"sizing",mode:i.mode,size:D0.indexOf(n)+1,body:s}},htmlBuilder:pb,mathmlBuilder:(r,e)=>{var t=e.havingSize(r.size),n=xt(r.body,t),i=new le.MathNode("mstyle",n);return i.setAttribute("mathsize",de(t.sizeMultiplier)),i}});pe({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(r,e,t)=>{var{parser:n}=r,i=!1,s=!1,a=t[0]&&xe(t[0],"ordgroup");if(a)for(var m="",o=0;o<a.body.length;++o){var d=a.body[o];if(m=d.text,m==="t")i=!0;else if(m==="b")s=!0;else{i=!1,s=!1;break}}else i=!0,s=!0;var l=e[0];return{type:"smash",mode:n.mode,body:l,smashHeight:i,smashDepth:s}},htmlBuilder:(r,e)=>{var t=te.makeSpan([],[De(r.body,e)]);if(!r.smashHeight&&!r.smashDepth)return t;if(r.smashHeight&&(t.height=0,t.children))for(var n=0;n<t.children.length;n++)t.children[n].height=0;if(r.smashDepth&&(t.depth=0,t.children))for(var i=0;i<t.children.length;i++)t.children[i].depth=0;var s=te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t}]},e);return te.makeSpan(["mord"],[s],e)},mathmlBuilder:(r,e)=>{var t=new le.MathNode("mpadded",[Fe(r.body,e)]);return r.smashHeight&&t.setAttribute("height","0px"),r.smashDepth&&t.setAttribute("depth","0px"),t}});pe({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(r,e,t){var{parser:n}=r,i=t[0],s=e[0];return{type:"sqrt",mode:n.mode,body:s,index:i}},htmlBuilder(r,e){var t=De(r.body,e.havingCrampedStyle());t.height===0&&(t.height=e.fontMetrics().xHeight),t=te.wrapFragment(t,e);var n=e.fontMetrics(),i=n.defaultRuleThickness,s=i;e.style.id<we.TEXT.id&&(s=e.fontMetrics().xHeight);var a=i+s/4,m=t.height+t.depth+a+i,{span:o,ruleWidth:d,advanceWidth:l}=yn.sqrtImage(m,e),f=o.height-d;f>t.height+t.depth+a&&(a=(a+f-t.height-t.depth)/2);var u=o.height-t.height-a-d;t.style.paddingLeft=de(l);var h=te.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:t,wrapperClasses:["svg-align"]},{type:"kern",size:-(t.height+u)},{type:"elem",elem:o},{type:"kern",size:d}]},e);if(r.index){var c=e.havingStyle(we.SCRIPTSCRIPT),p=De(r.index,c,e),g=.6*(h.height-h.depth),y=te.makeVList({positionType:"shift",positionData:-g,children:[{type:"elem",elem:p}]},e),w=te.makeSpan(["root"],[y]);return te.makeSpan(["mord","sqrt"],[w,h],e)}else return te.makeSpan(["mord","sqrt"],[h],e)},mathmlBuilder(r,e){var{body:t,index:n}=r;return n?new le.MathNode("mroot",[Fe(t,e),Fe(n,e)]):new le.MathNode("msqrt",[Fe(t,e)])}});var N0={display:we.DISPLAY,text:we.TEXT,script:we.SCRIPT,scriptscript:we.SCRIPTSCRIPT};pe({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(r,e){var{breakOnTokenText:t,funcName:n,parser:i}=r,s=i.parseExpression(!0,t),a=n.slice(1,n.length-5);return{type:"styling",mode:i.mode,style:a,body:s}},htmlBuilder(r,e){var t=N0[r.style],n=e.havingStyle(t).withFont("");return am(r.body,n,e)},mathmlBuilder(r,e){var t=N0[r.style],n=e.havingStyle(t),i=xt(r.body,n),s=new le.MathNode("mstyle",i),a={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},m=a[r.style];return s.setAttribute("scriptlevel",m[0]),s.setAttribute("displaystyle",m[1]),s}});var mb=function(e,t){var n=e.base;if(n)if(n.type==="op"){var i=n.limits&&(t.style.size===we.DISPLAY.size||n.alwaysHandleSupSub);return i?si:null}else if(n.type==="operatorname"){var s=n.alwaysHandleSupSub&&(t.style.size===we.DISPLAY.size||n.limits);return s?om:null}else{if(n.type==="accent")return Ne.isCharacterBox(n.base)?Rc:null;if(n.type==="horizBrace"){var a=!e.sub;return a===n.isOver?rm:null}else return null}else return null};xr({type:"supsub",htmlBuilder(r,e){var t=mb(r,e);if(t)return t(r,e);var{base:n,sup:i,sub:s}=r,a=De(n,e),m,o,d=e.fontMetrics(),l=0,f=0,u=n&&Ne.isCharacterBox(n);if(i){var h=e.havingStyle(e.style.sup());m=De(i,h,e),u||(l=a.height-h.fontMetrics().supDrop*h.sizeMultiplier/e.sizeMultiplier)}if(s){var c=e.havingStyle(e.style.sub());o=De(s,c,e),u||(f=a.depth+c.fontMetrics().subDrop*c.sizeMultiplier/e.sizeMultiplier)}var p;e.style===we.DISPLAY?p=d.sup1:e.style.cramped?p=d.sup3:p=d.sup2;var g=e.sizeMultiplier,y=de(.5/d.ptPerEm/g),w=null;if(o){var M=r.base&&r.base.type==="op"&&r.base.name&&(r.base.name==="\\oiint"||r.base.name==="\\oiiint");(a instanceof zt||M)&&(w=de(-a.italic))}var R;if(m&&o){l=Math.max(l,p,m.depth+.25*d.xHeight),f=Math.max(f,d.sub2);var x=d.defaultRuleThickness,S=4*x;if(l-m.depth-(o.height-f)<S){f=S-(l-m.depth)+o.height;var E=.8*d.xHeight-(l-m.depth);E>0&&(l+=E,f-=E)}var k=[{type:"elem",elem:o,shift:f,marginRight:y,marginLeft:w},{type:"elem",elem:m,shift:-l,marginRight:y}];R=te.makeVList({positionType:"individualShift",children:k},e)}else if(o){f=Math.max(f,d.sub1,o.height-.8*d.xHeight);var T=[{type:"elem",elem:o,marginLeft:w,marginRight:y}];R=te.makeVList({positionType:"shift",positionData:f,children:T},e)}else if(m)l=Math.max(l,p,m.depth+.25*d.xHeight),R=te.makeVList({positionType:"shift",positionData:-l,children:[{type:"elem",elem:m,marginRight:y}]},e);else throw new Error("supsub must have either sup or sub.");var I=Tl(a,"right")||"mord";return te.makeSpan([I],[a,te.makeSpan(["msupsub"],[R])],e)},mathmlBuilder(r,e){var t=!1,n,i;r.base&&r.base.type==="horizBrace"&&(i=!!r.sup,i===r.base.isOver&&(t=!0,n=r.base.isOver)),r.base&&(r.base.type==="op"||r.base.type==="operatorname")&&(r.base.parentIsSupSub=!0);var s=[Fe(r.base,e)];r.sub&&s.push(Fe(r.sub,e)),r.sup&&s.push(Fe(r.sup,e));var a;if(t)a=n?"mover":"munder";else if(r.sub)if(r.sup){var d=r.base;d&&d.type==="op"&&d.limits&&e.style===we.DISPLAY||d&&d.type==="operatorname"&&d.alwaysHandleSupSub&&(e.style===we.DISPLAY||d.limits)?a="munderover":a="msubsup"}else{var o=r.base;o&&o.type==="op"&&o.limits&&(e.style===we.DISPLAY||o.alwaysHandleSupSub)||o&&o.type==="operatorname"&&o.alwaysHandleSupSub&&(o.limits||e.style===we.DISPLAY)?a="munder":a="msub"}else{var m=r.base;m&&m.type==="op"&&m.limits&&(e.style===we.DISPLAY||m.alwaysHandleSupSub)||m&&m.type==="operatorname"&&m.alwaysHandleSupSub&&(m.limits||e.style===we.DISPLAY)?a="mover":a="msup"}return new le.MathNode(a,s)}});xr({type:"atom",htmlBuilder(r,e){return te.mathsym(r.text,r.mode,e,["m"+r.family])},mathmlBuilder(r,e){var t=new le.MathNode("mo",[Vt(r.text,r.mode)]);if(r.family==="bin"){var n=Ic(r,e);n==="bold-italic"&&t.setAttribute("mathvariant",n)}else r.family==="punct"?t.setAttribute("separator","true"):(r.family==="open"||r.family==="close")&&t.setAttribute("stretchy","false");return t}});var lm={mi:"italic",mn:"normal",mtext:"normal"};xr({type:"mathord",htmlBuilder(r,e){return te.makeOrd(r,e,"mathord")},mathmlBuilder(r,e){var t=new le.MathNode("mi",[Vt(r.text,r.mode,e)]),n=Ic(r,e)||"italic";return n!==lm[t.type]&&t.setAttribute("mathvariant",n),t}});xr({type:"textord",htmlBuilder(r,e){return te.makeOrd(r,e,"textord")},mathmlBuilder(r,e){var t=Vt(r.text,r.mode,e),n=Ic(r,e)||"normal",i;return r.mode==="text"?i=new le.MathNode("mtext",[t]):/[0-9]/.test(r.text)?i=new le.MathNode("mn",[t]):r.text==="\\prime"?i=new le.MathNode("mo",[t]):i=new le.MathNode("mi",[t]),n!==lm[i.type]&&i.setAttribute("mathvariant",n),i}});var Ga={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},qa={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};xr({type:"spacing",htmlBuilder(r,e){if(qa.hasOwnProperty(r.text)){var t=qa[r.text].className||"";if(r.mode==="text"){var n=te.makeOrd(r,e,"textord");return n.classes.push(t),n}else return te.makeSpan(["mspace",t],[te.mathsym(r.text,r.mode,e)],e)}else{if(Ga.hasOwnProperty(r.text))return te.makeSpan(["mspace",Ga[r.text]],[],e);throw new ue('Unknown type of space "'+r.text+'"')}},mathmlBuilder(r,e){var t;if(qa.hasOwnProperty(r.text))t=new le.MathNode("mtext",[new le.TextNode("")]);else{if(Ga.hasOwnProperty(r.text))return new le.MathNode("mspace");throw new ue('Unknown type of space "'+r.text+'"')}return t}});var P0=()=>{var r=new le.MathNode("mtd",[]);return r.setAttribute("width","50%"),r};xr({type:"tag",mathmlBuilder(r,e){var t=new le.MathNode("mtable",[new le.MathNode("mtr",[P0(),new le.MathNode("mtd",[nr(r.body,e)]),P0(),new le.MathNode("mtd",[nr(r.tag,e)])])]);return t.setAttribute("width","100%"),t}});var O0={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},F0={"\\textbf":"textbf","\\textmd":"textmd"},gb={"\\textit":"textit","\\textup":"textup"},z0=(r,e)=>{var t=r.font;if(t){if(O0[t])return e.withTextFontFamily(O0[t]);if(F0[t])return e.withTextFontWeight(F0[t]);if(t==="\\emph")return e.fontShape==="textit"?e.withTextFontShape("textup"):e.withTextFontShape("textit")}else return e;return e.withTextFontShape(gb[t])};pe({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(r,e){var{parser:t,funcName:n}=r,i=e[0];return{type:"text",mode:t.mode,body:et(i),font:n}},htmlBuilder(r,e){var t=z0(r,e),n=at(r.body,t,!0);return te.makeSpan(["mord","text"],n,t)},mathmlBuilder(r,e){var t=z0(r,e);return nr(r.body,t)}});pe({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(r,e){var{parser:t}=r;return{type:"underline",mode:t.mode,body:e[0]}},htmlBuilder(r,e){var t=De(r.body,e),n=te.makeLineSpan("underline-line",e),i=e.fontMetrics().defaultRuleThickness,s=te.makeVList({positionType:"top",positionData:t.height,children:[{type:"kern",size:i},{type:"elem",elem:n},{type:"kern",size:3*i},{type:"elem",elem:t}]},e);return te.makeSpan(["mord","underline"],[s],e)},mathmlBuilder(r,e){var t=new le.MathNode("mo",[new le.TextNode("")]);t.setAttribute("stretchy","true");var n=new le.MathNode("munder",[Fe(r.body,e),t]);return n.setAttribute("accentunder","true"),n}});pe({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(r,e){var{parser:t}=r;return{type:"vcenter",mode:t.mode,body:e[0]}},htmlBuilder(r,e){var t=De(r.body,e),n=e.fontMetrics().axisHeight,i=.5*(t.height-n-(t.depth+n));return te.makeVList({positionType:"shift",positionData:i,children:[{type:"elem",elem:t}]},e)},mathmlBuilder(r,e){return new le.MathNode("mpadded",[Fe(r.body,e)],["vcenter"])}});pe({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(r,e,t){throw new ue("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(r,e){for(var t=V0(r),n=[],i=e.havingStyle(e.style.text()),s=0;s<t.length;s++){var a=t[s];a==="~"&&(a="\\textasciitilde"),n.push(te.makeSymbol(a,"Typewriter-Regular",r.mode,i,["mord","texttt"]))}return te.makeSpan(["mord","text"].concat(i.sizingClasses(e)),te.tryCombineChars(n),i)},mathmlBuilder(r,e){var t=new le.TextNode(V0(r)),n=new le.MathNode("mtext",[t]);return n.setAttribute("mathvariant","monospace"),n}});var V0=r=>r.body.replace(/ /g,r.star?"":""),Bn=Rp,cm=`[ \r
	]`,vb="\\\\[a-zA-Z@]+",yb="\\\\[^\uD800-\uDFFF]",wb="("+vb+")"+cm+"*",bb=`\\\\(
|[ \r	]+
?)[ \r	]*`,kl="[-]",_b=new RegExp(kl+"+$"),Sb="("+cm+"+)|"+(bb+"|")+"([!-\\[\\]---]"+(kl+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(kl+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+wb)+("|"+yb+")");class B0{constructor(e,t){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=e,this.settings=t,this.tokenRegex=new RegExp(Sb,"g"),this.catcodes={"%":14,"~":13}}setCatcode(e,t){this.catcodes[e]=t}lex(){var e=this.input,t=this.tokenRegex.lastIndex;if(t===e.length)return new Rt("EOF",new Ct(this,t,t));var n=this.tokenRegex.exec(e);if(n===null||n.index!==t)throw new ue("Unexpected character: '"+e[t]+"'",new Rt(e[t],new Ct(this,t,t+1)));var i=n[6]||n[3]||(n[2]?"\\ ":" ");if(this.catcodes[i]===14){var s=e.indexOf(`
`,this.tokenRegex.lastIndex);return s===-1?(this.tokenRegex.lastIndex=e.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=s+1,this.lex()}return new Rt(i,new Ct(this,t,this.tokenRegex.lastIndex))}}class Ab{constructor(e,t){e===void 0&&(e={}),t===void 0&&(t={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=t,this.builtins=e,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ue("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var e=this.undefStack.pop();for(var t in e)e.hasOwnProperty(t)&&(e[t]==null?delete this.current[t]:this.current[t]=e[t])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(e){return this.current.hasOwnProperty(e)||this.builtins.hasOwnProperty(e)}get(e){return this.current.hasOwnProperty(e)?this.current[e]:this.builtins[e]}set(e,t,n){if(n===void 0&&(n=!1),n){for(var i=0;i<this.undefStack.length;i++)delete this.undefStack[i][e];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][e]=t)}else{var s=this.undefStack[this.undefStack.length-1];s&&!s.hasOwnProperty(e)&&(s[e]=this.current[e])}t==null?delete this.current[e]:this.current[e]=t}}var Tb=Jp;U("\\noexpand",function(r){var e=r.popToken();return r.isExpandable(e.text)&&(e.noexpand=!0,e.treatAsRelax=!0),{tokens:[e],numArgs:0}});U("\\expandafter",function(r){var e=r.popToken();return r.expandOnce(!0),{tokens:[e],numArgs:0}});U("\\@firstoftwo",function(r){var e=r.consumeArgs(2);return{tokens:e[0],numArgs:0}});U("\\@secondoftwo",function(r){var e=r.consumeArgs(2);return{tokens:e[1],numArgs:0}});U("\\@ifnextchar",function(r){var e=r.consumeArgs(3);r.consumeSpaces();var t=r.future();return e[0].length===1&&e[0][0].text===t.text?{tokens:e[1],numArgs:0}:{tokens:e[2],numArgs:0}});U("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");U("\\TextOrMath",function(r){var e=r.consumeArgs(2);return r.mode==="text"?{tokens:e[0],numArgs:0}:{tokens:e[1],numArgs:0}});var U0={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};U("\\char",function(r){var e=r.popToken(),t,n="";if(e.text==="'")t=8,e=r.popToken();else if(e.text==='"')t=16,e=r.popToken();else if(e.text==="`")if(e=r.popToken(),e.text[0]==="\\")n=e.text.charCodeAt(1);else{if(e.text==="EOF")throw new ue("\\char` missing argument");n=e.text.charCodeAt(0)}else t=10;if(t){if(n=U0[e.text],n==null||n>=t)throw new ue("Invalid base-"+t+" digit "+e.text);for(var i;(i=U0[r.future().text])!=null&&i<t;)n*=t,n+=i,r.popToken()}return"\\@char{"+n+"}"});var zc=(r,e,t,n)=>{var i=r.consumeArg().tokens;if(i.length!==1)throw new ue("\\newcommand's first argument must be a macro name");var s=i[0].text,a=r.isDefined(s);if(a&&!e)throw new ue("\\newcommand{"+s+"} attempting to redefine "+(s+"; use \\renewcommand"));if(!a&&!t)throw new ue("\\renewcommand{"+s+"} when command "+s+" does not yet exist; use \\newcommand");var m=0;if(i=r.consumeArg().tokens,i.length===1&&i[0].text==="["){for(var o="",d=r.expandNextToken();d.text!=="]"&&d.text!=="EOF";)o+=d.text,d=r.expandNextToken();if(!o.match(/^\s*[0-9]+\s*$/))throw new ue("Invalid number of arguments: "+o);m=parseInt(o),i=r.consumeArg().tokens}return a&&n||r.macros.set(s,{tokens:i,numArgs:m}),""};U("\\newcommand",r=>zc(r,!1,!0,!1));U("\\renewcommand",r=>zc(r,!0,!1,!1));U("\\providecommand",r=>zc(r,!0,!0,!0));U("\\message",r=>{var e=r.consumeArgs(1)[0];return console.log(e.reverse().map(t=>t.text).join("")),""});U("\\errmessage",r=>{var e=r.consumeArgs(1)[0];return console.error(e.reverse().map(t=>t.text).join("")),""});U("\\show",r=>{var e=r.popToken(),t=e.text;return console.log(e,r.macros.get(t),Bn[t],Ve.math[t],Ve.text[t]),""});U("\\bgroup","{");U("\\egroup","}");U("~","\\nobreakspace");U("\\lq","`");U("\\rq","'");U("\\aa","\\r a");U("\\AA","\\r A");U("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");U("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");U("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");U("","\\mathscr{B}");U("","\\mathscr{E}");U("","\\mathscr{F}");U("","\\mathscr{H}");U("","\\mathscr{I}");U("","\\mathscr{L}");U("","\\mathscr{M}");U("","\\mathscr{R}");U("","\\mathfrak{C}");U("","\\mathfrak{H}");U("","\\mathfrak{Z}");U("\\Bbbk","\\Bbb{k}");U("","\\cdotp");U("\\llap","\\mathllap{\\textrm{#1}}");U("\\rlap","\\mathrlap{\\textrm{#1}}");U("\\clap","\\mathclap{\\textrm{#1}}");U("\\mathstrut","\\vphantom{(}");U("\\underbar","\\underline{\\text{#1}}");U("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');U("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");U("\\ne","\\neq");U("","\\neq");U("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");U("","\\notin");U("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");U("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");U("","\\perp");U("","\\mathclose{!\\mkern-0.8mu!}");U("","\\notni");U("","\\ulcorner");U("","\\urcorner");U("","\\llcorner");U("","\\lrcorner");U("","\\copyright");U("","\\textregistered");U("","\\textregistered");U("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');U("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');U("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');U("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');U("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");U("","\\vdots");U("\\varGamma","\\mathit{\\Gamma}");U("\\varDelta","\\mathit{\\Delta}");U("\\varTheta","\\mathit{\\Theta}");U("\\varLambda","\\mathit{\\Lambda}");U("\\varXi","\\mathit{\\Xi}");U("\\varPi","\\mathit{\\Pi}");U("\\varSigma","\\mathit{\\Sigma}");U("\\varUpsilon","\\mathit{\\Upsilon}");U("\\varPhi","\\mathit{\\Phi}");U("\\varPsi","\\mathit{\\Psi}");U("\\varOmega","\\mathit{\\Omega}");U("\\substack","\\begin{subarray}{c}#1\\end{subarray}");U("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");U("\\boxed","\\fbox{$\\displaystyle{#1}$}");U("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");U("\\implies","\\DOTSB\\;\\Longrightarrow\\;");U("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");U("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");U("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var H0={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};U("\\dots",function(r){var e="\\dotso",t=r.expandAfterFuture().text;return t in H0?e=H0[t]:(t.slice(0,4)==="\\not"||t in Ve.math&&["bin","rel"].includes(Ve.math[t].group))&&(e="\\dotsb"),e});var Vc={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};U("\\dotso",function(r){var e=r.future().text;return e in Vc?"\\ldots\\,":"\\ldots"});U("\\dotsc",function(r){var e=r.future().text;return e in Vc&&e!==","?"\\ldots\\,":"\\ldots"});U("\\cdots",function(r){var e=r.future().text;return e in Vc?"\\@cdots\\,":"\\@cdots"});U("\\dotsb","\\cdots");U("\\dotsm","\\cdots");U("\\dotsi","\\!\\cdots");U("\\dotsx","\\ldots\\,");U("\\DOTSI","\\relax");U("\\DOTSB","\\relax");U("\\DOTSX","\\relax");U("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");U("\\,","\\tmspace+{3mu}{.1667em}");U("\\thinspace","\\,");U("\\>","\\mskip{4mu}");U("\\:","\\tmspace+{4mu}{.2222em}");U("\\medspace","\\:");U("\\;","\\tmspace+{5mu}{.2777em}");U("\\thickspace","\\;");U("\\!","\\tmspace-{3mu}{.1667em}");U("\\negthinspace","\\!");U("\\negmedspace","\\tmspace-{4mu}{.2222em}");U("\\negthickspace","\\tmspace-{5mu}{.277em}");U("\\enspace","\\kern.5em ");U("\\enskip","\\hskip.5em\\relax");U("\\quad","\\hskip1em\\relax");U("\\qquad","\\hskip2em\\relax");U("\\tag","\\@ifstar\\tag@literal\\tag@paren");U("\\tag@paren","\\tag@literal{({#1})}");U("\\tag@literal",r=>{if(r.macros.get("\\df@tag"))throw new ue("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});U("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");U("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");U("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");U("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");U("\\newline","\\\\\\relax");U("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var um=de(Xt["Main-Regular"][84][1]-.7*Xt["Main-Regular"][65][1]);U("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+um+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");U("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+um+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");U("\\hspace","\\@ifstar\\@hspacer\\@hspace");U("\\@hspace","\\hskip #1\\relax");U("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");U("\\ordinarycolon",":");U("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");U("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');U("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');U("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');U("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');U("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');U("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');U("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');U("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');U("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');U("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');U("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');U("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');U("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');U("","\\dblcolon");U("","\\eqcolon");U("","\\coloneqq");U("","\\eqqcolon");U("","\\Coloneqq");U("\\ratio","\\vcentcolon");U("\\coloncolon","\\dblcolon");U("\\colonequals","\\coloneqq");U("\\coloncolonequals","\\Coloneqq");U("\\equalscolon","\\eqqcolon");U("\\equalscoloncolon","\\Eqqcolon");U("\\colonminus","\\coloneq");U("\\coloncolonminus","\\Coloneq");U("\\minuscolon","\\eqcolon");U("\\minuscoloncolon","\\Eqcolon");U("\\coloncolonapprox","\\Colonapprox");U("\\coloncolonsim","\\Colonsim");U("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");U("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");U("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");U("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");U("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");U("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");U("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");U("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");U("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");U("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");U("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");U("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");U("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");U("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");U("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");U("\\ngeqq","\\html@mathml{\\@ngeqq}{}");U("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");U("\\nleqq","\\html@mathml{\\@nleqq}{}");U("\\nleqslant","\\html@mathml{\\@nleqslant}{}");U("\\nshortmid","\\html@mathml{\\@nshortmid}{}");U("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");U("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");U("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");U("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");U("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");U("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");U("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");U("\\imath","\\html@mathml{\\@imath}{}");U("\\jmath","\\html@mathml{\\@jmath}{}");U("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");U("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");U("","\\llbracket");U("","\\rrbracket");U("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");U("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");U("","\\lBrace");U("","\\rBrace");U("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");U("","\\minuso");U("\\darr","\\downarrow");U("\\dArr","\\Downarrow");U("\\Darr","\\Downarrow");U("\\lang","\\langle");U("\\rang","\\rangle");U("\\uarr","\\uparrow");U("\\uArr","\\Uparrow");U("\\Uarr","\\Uparrow");U("\\N","\\mathbb{N}");U("\\R","\\mathbb{R}");U("\\Z","\\mathbb{Z}");U("\\alef","\\aleph");U("\\alefsym","\\aleph");U("\\Alpha","\\mathrm{A}");U("\\Beta","\\mathrm{B}");U("\\bull","\\bullet");U("\\Chi","\\mathrm{X}");U("\\clubs","\\clubsuit");U("\\cnums","\\mathbb{C}");U("\\Complex","\\mathbb{C}");U("\\Dagger","\\ddagger");U("\\diamonds","\\diamondsuit");U("\\empty","\\emptyset");U("\\Epsilon","\\mathrm{E}");U("\\Eta","\\mathrm{H}");U("\\exist","\\exists");U("\\harr","\\leftrightarrow");U("\\hArr","\\Leftrightarrow");U("\\Harr","\\Leftrightarrow");U("\\hearts","\\heartsuit");U("\\image","\\Im");U("\\infin","\\infty");U("\\Iota","\\mathrm{I}");U("\\isin","\\in");U("\\Kappa","\\mathrm{K}");U("\\larr","\\leftarrow");U("\\lArr","\\Leftarrow");U("\\Larr","\\Leftarrow");U("\\lrarr","\\leftrightarrow");U("\\lrArr","\\Leftrightarrow");U("\\Lrarr","\\Leftrightarrow");U("\\Mu","\\mathrm{M}");U("\\natnums","\\mathbb{N}");U("\\Nu","\\mathrm{N}");U("\\Omicron","\\mathrm{O}");U("\\plusmn","\\pm");U("\\rarr","\\rightarrow");U("\\rArr","\\Rightarrow");U("\\Rarr","\\Rightarrow");U("\\real","\\Re");U("\\reals","\\mathbb{R}");U("\\Reals","\\mathbb{R}");U("\\Rho","\\mathrm{P}");U("\\sdot","\\cdot");U("\\sect","\\S");U("\\spades","\\spadesuit");U("\\sub","\\subset");U("\\sube","\\subseteq");U("\\supe","\\supseteq");U("\\Tau","\\mathrm{T}");U("\\thetasym","\\vartheta");U("\\weierp","\\wp");U("\\Zeta","\\mathrm{Z}");U("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");U("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");U("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");U("\\bra","\\mathinner{\\langle{#1}|}");U("\\ket","\\mathinner{|{#1}\\rangle}");U("\\braket","\\mathinner{\\langle{#1}\\rangle}");U("\\Bra","\\left\\langle#1\\right|");U("\\Ket","\\left|#1\\right\\rangle");var hm=r=>e=>{var t=e.consumeArg().tokens,n=e.consumeArg().tokens,i=e.consumeArg().tokens,s=e.consumeArg().tokens,a=e.macros.get("|"),m=e.macros.get("\\|");e.macros.beginGroup();var o=f=>u=>{r&&(u.macros.set("|",a),i.length&&u.macros.set("\\|",m));var h=f;if(!f&&i.length){var c=u.future();c.text==="|"&&(u.popToken(),h=!0)}return{tokens:h?i:n,numArgs:0}};e.macros.set("|",o(!1)),i.length&&e.macros.set("\\|",o(!0));var d=e.consumeArg().tokens,l=e.expandTokens([...s,...d,...t]);return e.macros.endGroup(),{tokens:l.reverse(),numArgs:0}};U("\\bra@ket",hm(!1));U("\\bra@set",hm(!0));U("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");U("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");U("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");U("\\angln","{\\angl n}");U("\\blue","\\textcolor{##6495ed}{#1}");U("\\orange","\\textcolor{##ffa500}{#1}");U("\\pink","\\textcolor{##ff00af}{#1}");U("\\red","\\textcolor{##df0030}{#1}");U("\\green","\\textcolor{##28ae7b}{#1}");U("\\gray","\\textcolor{gray}{#1}");U("\\purple","\\textcolor{##9d38bd}{#1}");U("\\blueA","\\textcolor{##ccfaff}{#1}");U("\\blueB","\\textcolor{##80f6ff}{#1}");U("\\blueC","\\textcolor{##63d9ea}{#1}");U("\\blueD","\\textcolor{##11accd}{#1}");U("\\blueE","\\textcolor{##0c7f99}{#1}");U("\\tealA","\\textcolor{##94fff5}{#1}");U("\\tealB","\\textcolor{##26edd5}{#1}");U("\\tealC","\\textcolor{##01d1c1}{#1}");U("\\tealD","\\textcolor{##01a995}{#1}");U("\\tealE","\\textcolor{##208170}{#1}");U("\\greenA","\\textcolor{##b6ffb0}{#1}");U("\\greenB","\\textcolor{##8af281}{#1}");U("\\greenC","\\textcolor{##74cf70}{#1}");U("\\greenD","\\textcolor{##1fab54}{#1}");U("\\greenE","\\textcolor{##0d923f}{#1}");U("\\goldA","\\textcolor{##ffd0a9}{#1}");U("\\goldB","\\textcolor{##ffbb71}{#1}");U("\\goldC","\\textcolor{##ff9c39}{#1}");U("\\goldD","\\textcolor{##e07d10}{#1}");U("\\goldE","\\textcolor{##a75a05}{#1}");U("\\redA","\\textcolor{##fca9a9}{#1}");U("\\redB","\\textcolor{##ff8482}{#1}");U("\\redC","\\textcolor{##f9685d}{#1}");U("\\redD","\\textcolor{##e84d39}{#1}");U("\\redE","\\textcolor{##bc2612}{#1}");U("\\maroonA","\\textcolor{##ffbde0}{#1}");U("\\maroonB","\\textcolor{##ff92c6}{#1}");U("\\maroonC","\\textcolor{##ed5fa6}{#1}");U("\\maroonD","\\textcolor{##ca337c}{#1}");U("\\maroonE","\\textcolor{##9e034e}{#1}");U("\\purpleA","\\textcolor{##ddd7ff}{#1}");U("\\purpleB","\\textcolor{##c6b9fc}{#1}");U("\\purpleC","\\textcolor{##aa87ff}{#1}");U("\\purpleD","\\textcolor{##7854ab}{#1}");U("\\purpleE","\\textcolor{##543b78}{#1}");U("\\mintA","\\textcolor{##f5f9e8}{#1}");U("\\mintB","\\textcolor{##edf2df}{#1}");U("\\mintC","\\textcolor{##e0e5cc}{#1}");U("\\grayA","\\textcolor{##f6f7f7}{#1}");U("\\grayB","\\textcolor{##f0f1f2}{#1}");U("\\grayC","\\textcolor{##e3e5e6}{#1}");U("\\grayD","\\textcolor{##d6d8da}{#1}");U("\\grayE","\\textcolor{##babec2}{#1}");U("\\grayF","\\textcolor{##888d93}{#1}");U("\\grayG","\\textcolor{##626569}{#1}");U("\\grayH","\\textcolor{##3b3e40}{#1}");U("\\grayI","\\textcolor{##21242c}{#1}");U("\\kaBlue","\\textcolor{##314453}{#1}");U("\\kaGreen","\\textcolor{##71B307}{#1}");var dm={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Eb{constructor(e,t,n){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=t,this.expansionCount=0,this.feed(e),this.macros=new Ab(Tb,t.macros),this.mode=n,this.stack=[]}feed(e){this.lexer=new B0(e,this.settings)}switchMode(e){this.mode=e}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(e){this.stack.push(e)}pushTokens(e){this.stack.push(...e)}scanArgument(e){var t,n,i;if(e){if(this.consumeSpaces(),this.future().text!=="[")return null;t=this.popToken(),{tokens:i,end:n}=this.consumeArg(["]"])}else({tokens:i,start:t,end:n}=this.consumeArg());return this.pushToken(new Rt("EOF",n.loc)),this.pushTokens(i),new Rt("",Ct.range(t,n))}consumeSpaces(){for(;;){var e=this.future();if(e.text===" ")this.stack.pop();else break}}consumeArg(e){var t=[],n=e&&e.length>0;n||this.consumeSpaces();var i=this.future(),s,a=0,m=0;do{if(s=this.popToken(),t.push(s),s.text==="{")++a;else if(s.text==="}"){if(--a,a===-1)throw new ue("Extra }",s)}else if(s.text==="EOF")throw new ue("Unexpected end of input in a macro argument, expected '"+(e&&n?e[m]:"}")+"'",s);if(e&&n)if((a===0||a===1&&e[m]==="{")&&s.text===e[m]){if(++m,m===e.length){t.splice(-m,m);break}}else m=0}while(a!==0||n);return i.text==="{"&&t[t.length-1].text==="}"&&(t.pop(),t.shift()),t.reverse(),{tokens:t,start:i,end:s}}consumeArgs(e,t){if(t){if(t.length!==e+1)throw new ue("The length of delimiters doesn't match the number of args!");for(var n=t[0],i=0;i<n.length;i++){var s=this.popToken();if(n[i]!==s.text)throw new ue("Use of the macro doesn't match its definition",s)}}for(var a=[],m=0;m<e;m++)a.push(this.consumeArg(t&&t[m+1]).tokens);return a}countExpansion(e){if(this.expansionCount+=e,this.expansionCount>this.settings.maxExpand)throw new ue("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(e){var t=this.popToken(),n=t.text,i=t.noexpand?null:this._getExpansion(n);if(i==null||e&&i.unexpandable){if(e&&i==null&&n[0]==="\\"&&!this.isDefined(n))throw new ue("Undefined control sequence: "+n);return this.pushToken(t),!1}this.countExpansion(1);var s=i.tokens,a=this.consumeArgs(i.numArgs,i.delimiters);if(i.numArgs){s=s.slice();for(var m=s.length-1;m>=0;--m){var o=s[m];if(o.text==="#"){if(m===0)throw new ue("Incomplete placeholder at end of macro body",o);if(o=s[--m],o.text==="#")s.splice(m+1,1);else if(/^[1-9]$/.test(o.text))s.splice(m,2,...a[+o.text-1]);else throw new ue("Not a valid argument number",o)}}}return this.pushTokens(s),s.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var e=this.stack.pop();return e.treatAsRelax&&(e.text="\\relax"),e}throw new Error}expandMacro(e){return this.macros.has(e)?this.expandTokens([new Rt(e)]):void 0}expandTokens(e){var t=[],n=this.stack.length;for(this.pushTokens(e);this.stack.length>n;)if(this.expandOnce(!0)===!1){var i=this.stack.pop();i.treatAsRelax&&(i.noexpand=!1,i.treatAsRelax=!1),t.push(i)}return this.countExpansion(t.length),t}expandMacroAsText(e){var t=this.expandMacro(e);return t&&t.map(n=>n.text).join("")}_getExpansion(e){var t=this.macros.get(e);if(t==null)return t;if(e.length===1){var n=this.lexer.catcodes[e];if(n!=null&&n!==13)return}var i=typeof t=="function"?t(this):t;if(typeof i=="string"){var s=0;if(i.indexOf("#")!==-1)for(var a=i.replace(/##/g,"");a.indexOf("#"+(s+1))!==-1;)++s;for(var m=new B0(i,this.settings),o=[],d=m.lex();d.text!=="EOF";)o.push(d),d=m.lex();o.reverse();var l={tokens:o,numArgs:s};return l}return i}isDefined(e){return this.macros.has(e)||Bn.hasOwnProperty(e)||Ve.math.hasOwnProperty(e)||Ve.text.hasOwnProperty(e)||dm.hasOwnProperty(e)}isExpandable(e){var t=this.macros.get(e);return t!=null?typeof t=="string"||typeof t=="function"||!t.unexpandable:Bn.hasOwnProperty(e)&&!Bn[e].primitive}}var W0=/^[]/,Us=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),Ka={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},j0={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class ta{constructor(e,t){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Eb(e,t,this.mode),this.settings=t,this.leftrightDepth=0}expect(e,t){if(t===void 0&&(t=!0),this.fetch().text!==e)throw new ue("Expected '"+e+"', got '"+this.fetch().text+"'",this.fetch());t&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(e){this.mode=e,this.gullet.switchMode(e)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var e=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),e}finally{this.gullet.endGroups()}}subparse(e){var t=this.nextToken;this.consume(),this.gullet.pushToken(new Rt("}")),this.gullet.pushTokens(e);var n=this.parseExpression(!1);return this.expect("}"),this.nextToken=t,n}parseExpression(e,t){for(var n=[];;){this.mode==="math"&&this.consumeSpaces();var i=this.fetch();if(ta.endOfExpression.indexOf(i.text)!==-1||t&&i.text===t||e&&Bn[i.text]&&Bn[i.text].infix)break;var s=this.parseAtom(t);if(s){if(s.type==="internal")continue}else break;n.push(s)}return this.mode==="text"&&this.formLigatures(n),this.handleInfixNodes(n)}handleInfixNodes(e){for(var t=-1,n,i=0;i<e.length;i++)if(e[i].type==="infix"){if(t!==-1)throw new ue("only one infix operator per group",e[i].token);t=i,n=e[i].replaceWith}if(t!==-1&&n){var s,a,m=e.slice(0,t),o=e.slice(t+1);m.length===1&&m[0].type==="ordgroup"?s=m[0]:s={type:"ordgroup",mode:this.mode,body:m},o.length===1&&o[0].type==="ordgroup"?a=o[0]:a={type:"ordgroup",mode:this.mode,body:o};var d;return n==="\\\\abovefrac"?d=this.callFunction(n,[s,e[t],a],[]):d=this.callFunction(n,[s,a],[]),[d]}else return e}handleSupSubscript(e){var t=this.fetch(),n=t.text;this.consume(),this.consumeSpaces();var i;do{var s;i=this.parseGroup(e)}while(((s=i)==null?void 0:s.type)==="internal");if(!i)throw new ue("Expected group after '"+n+"'",t);return i}formatUnsupportedCmd(e){for(var t=[],n=0;n<e.length;n++)t.push({type:"textord",mode:"text",text:e[n]});var i={type:"text",mode:this.mode,body:t},s={type:"color",mode:this.mode,color:this.settings.errorColor,body:[i]};return s}parseAtom(e){var t=this.parseGroup("atom",e);if(t?.type==="internal"||this.mode==="text")return t;for(var n,i;;){this.consumeSpaces();var s=this.fetch();if(s.text==="\\limits"||s.text==="\\nolimits"){if(t&&t.type==="op"){var a=s.text==="\\limits";t.limits=a,t.alwaysHandleSupSub=!0}else if(t&&t.type==="operatorname")t.alwaysHandleSupSub&&(t.limits=s.text==="\\limits");else throw new ue("Limit controls must follow a math operator",s);this.consume()}else if(s.text==="^"){if(n)throw new ue("Double superscript",s);n=this.handleSupSubscript("superscript")}else if(s.text==="_"){if(i)throw new ue("Double subscript",s);i=this.handleSupSubscript("subscript")}else if(s.text==="'"){if(n)throw new ue("Double superscript",s);var m={type:"textord",mode:this.mode,text:"\\prime"},o=[m];for(this.consume();this.fetch().text==="'";)o.push(m),this.consume();this.fetch().text==="^"&&o.push(this.handleSupSubscript("superscript")),n={type:"ordgroup",mode:this.mode,body:o}}else if(Us[s.text]){var d=W0.test(s.text),l=[];for(l.push(new Rt(Us[s.text])),this.consume();;){var f=this.fetch().text;if(!Us[f]||W0.test(f)!==d)break;l.unshift(new Rt(Us[f])),this.consume()}var u=this.subparse(l);d?i={type:"ordgroup",mode:"math",body:u}:n={type:"ordgroup",mode:"math",body:u}}else break}return n||i?{type:"supsub",mode:this.mode,base:t,sup:n,sub:i}:t}parseFunction(e,t){var n=this.fetch(),i=n.text,s=Bn[i];if(!s)return null;if(this.consume(),t&&t!=="atom"&&!s.allowedInArgument)throw new ue("Got function '"+i+"' with no arguments"+(t?" as "+t:""),n);if(this.mode==="text"&&!s.allowedInText)throw new ue("Can't use function '"+i+"' in text mode",n);if(this.mode==="math"&&s.allowedInMath===!1)throw new ue("Can't use function '"+i+"' in math mode",n);var{args:a,optArgs:m}=this.parseArguments(i,s);return this.callFunction(i,a,m,n,e)}callFunction(e,t,n,i,s){var a={funcName:e,parser:this,token:i,breakOnTokenText:s},m=Bn[e];if(m&&m.handler)return m.handler(a,t,n);throw new ue("No function handler for "+e)}parseArguments(e,t){var n=t.numArgs+t.numOptionalArgs;if(n===0)return{args:[],optArgs:[]};for(var i=[],s=[],a=0;a<n;a++){var m=t.argTypes&&t.argTypes[a],o=a<t.numOptionalArgs;(t.primitive&&m==null||t.type==="sqrt"&&a===1&&s[0]==null)&&(m="primitive");var d=this.parseGroupOfType("argument to '"+e+"'",m,o);if(o)s.push(d);else if(d!=null)i.push(d);else throw new ue("Null argument, please report this as a bug")}return{args:i,optArgs:s}}parseGroupOfType(e,t,n){switch(t){case"color":return this.parseColorGroup(n);case"size":return this.parseSizeGroup(n);case"url":return this.parseUrlGroup(n);case"math":case"text":return this.parseArgumentGroup(n,t);case"hbox":{var i=this.parseArgumentGroup(n,"text");return i!=null?{type:"styling",mode:i.mode,body:[i],style:"text"}:null}case"raw":{var s=this.parseStringGroup("raw",n);return s!=null?{type:"raw",mode:"text",string:s.text}:null}case"primitive":{if(n)throw new ue("A primitive argument cannot be optional");var a=this.parseGroup(e);if(a==null)throw new ue("Expected group as "+e,this.fetch());return a}case"original":case null:case void 0:return this.parseArgumentGroup(n);default:throw new ue("Unknown group type as "+e,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(e,t){var n=this.gullet.scanArgument(t);if(n==null)return null;for(var i="",s;(s=this.fetch()).text!=="EOF";)i+=s.text,this.consume();return this.consume(),n.text=i,n}parseRegexGroup(e,t){for(var n=this.fetch(),i=n,s="",a;(a=this.fetch()).text!=="EOF"&&e.test(s+a.text);)i=a,s+=i.text,this.consume();if(s==="")throw new ue("Invalid "+t+": '"+n.text+"'",n);return n.range(i,s)}parseColorGroup(e){var t=this.parseStringGroup("color",e);if(t==null)return null;var n=/^(#[a-f0-9]{3,4}|#[a-f0-9]{6}|#[a-f0-9]{8}|[a-f0-9]{6}|[a-z]+)$/i.exec(t.text);if(!n)throw new ue("Invalid color: '"+t.text+"'",t);var i=n[0];return/^[0-9a-f]{6}$/i.test(i)&&(i="#"+i),{type:"color-token",mode:this.mode,color:i}}parseSizeGroup(e){var t,n=!1;if(this.gullet.consumeSpaces(),!e&&this.gullet.future().text!=="{"?t=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):t=this.parseStringGroup("size",e),!t)return null;!e&&t.text.length===0&&(t.text="0pt",n=!0);var i=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t.text);if(!i)throw new ue("Invalid size: '"+t.text+"'",t);var s={number:+(i[1]+i[2]),unit:i[3]};if(!Sp(s))throw new ue("Invalid unit: '"+s.unit+"'",t);return{type:"size",mode:this.mode,value:s,isBlank:n}}parseUrlGroup(e){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var t=this.parseStringGroup("url",e);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),t==null)return null;var n=t.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:n}}parseArgumentGroup(e,t){var n=this.gullet.scanArgument(e);if(n==null)return null;var i=this.mode;t&&this.switchMode(t),this.gullet.beginGroup();var s=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var a={type:"ordgroup",mode:this.mode,loc:n.loc,body:s};return t&&this.switchMode(i),a}parseGroup(e,t){var n=this.fetch(),i=n.text,s;if(i==="{"||i==="\\begingroup"){this.consume();var a=i==="{"?"}":"\\endgroup";this.gullet.beginGroup();var m=this.parseExpression(!1,a),o=this.fetch();this.expect(a),this.gullet.endGroup(),s={type:"ordgroup",mode:this.mode,loc:Ct.range(n,o),body:m,semisimple:i==="\\begingroup"||void 0}}else if(s=this.parseFunction(t,e)||this.parseSymbol(),s==null&&i[0]==="\\"&&!dm.hasOwnProperty(i)){if(this.settings.throwOnError)throw new ue("Undefined control sequence: "+i,n);s=this.formatUnsupportedCmd(i),this.consume()}return s}formLigatures(e){for(var t=e.length-1,n=0;n<t;++n){var i=e[n],s=i.text;s==="-"&&e[n+1].text==="-"&&(n+1<t&&e[n+2].text==="-"?(e.splice(n,3,{type:"textord",mode:"text",loc:Ct.range(i,e[n+2]),text:"---"}),t-=2):(e.splice(n,2,{type:"textord",mode:"text",loc:Ct.range(i,e[n+1]),text:"--"}),t-=1)),(s==="'"||s==="`")&&e[n+1].text===s&&(e.splice(n,2,{type:"textord",mode:"text",loc:Ct.range(i,e[n+1]),text:s+s}),t-=1)}}parseSymbol(){var e=this.fetch(),t=e.text;if(/^\\verb[^a-zA-Z]/.test(t)){this.consume();var n=t.slice(5),i=n.charAt(0)==="*";if(i&&(n=n.slice(1)),n.length<2||n.charAt(0)!==n.slice(-1))throw new ue(`\\verb assertion failed --
                    please report what input caused this bug`);return n=n.slice(1,-1),{type:"verb",mode:"text",body:n,star:i}}j0.hasOwnProperty(t[0])&&!Ve[this.mode][t[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+t[0]+'" used in math mode',e),t=j0[t[0]]+t.slice(1));var s=_b.exec(t);s&&(t=t.substring(0,s.index),t==="i"?t="":t==="j"&&(t=""));var a;if(Ve[this.mode][t]){this.settings.strict&&this.mode==="math"&&Al.indexOf(t)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+t[0]+'" used in math mode',e);var m=Ve[this.mode][t].group,o=Ct.range(e),d;if(f3.hasOwnProperty(m)){var l=m;d={type:"atom",mode:this.mode,family:l,loc:o,text:t}}else d={type:m,mode:this.mode,loc:o,text:t};a=d}else if(t.charCodeAt(0)>=128)this.settings.strict&&(_p(t.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+t[0]+'" used in math mode',e):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+t[0]+'"'+(" ("+t.charCodeAt(0)+")"),e)),a={type:"textord",mode:"text",loc:Ct.range(e),text:t};else return null;if(this.consume(),s)for(var f=0;f<s[0].length;f++){var u=s[0][f];if(!Ka[u])throw new ue("Unknown accent ' "+u+"'",e);var h=Ka[u][this.mode]||Ka[u].text;if(!h)throw new ue("Accent "+u+" unsupported in "+this.mode+" mode",e);a={type:"accent",mode:this.mode,loc:Ct.range(e),label:h,isStretchy:!1,isShifty:!0,base:a}}return a}}ta.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Bc=function(e,t){if(!(typeof e=="string"||e instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var n=new ta(e,t);delete n.gullet.macros.current["\\df@tag"];var i=n.parse();if(delete n.gullet.macros.current["\\current@color"],delete n.gullet.macros.current["\\color"],n.gullet.macros.get("\\df@tag")){if(!t.displayMode)throw new ue("\\tag works only in display equations");i=[{type:"tag",mode:"text",body:i,tag:n.subparse([new Rt("\\df@tag")])}]}return i},fm=function(e,t,n){t.textContent="";var i=Uc(e,n).toNode();t.appendChild(i)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),fm=function(){throw new ue("KaTeX doesn't work in quirks mode.")});var Cb=function(e,t){var n=Uc(e,t).toMarkup();return n},xb=function(e,t){var n=new Ac(t);return Bc(e,n)},pm=function(e,t,n){if(n.throwOnError||!(e instanceof ue))throw e;var i=te.makeSpan(["katex-error"],[new zt(t)]);return i.setAttribute("title",e.toString()),i.setAttribute("style","color:"+n.errorColor),i},Uc=function(e,t){var n=new Ac(t);try{var i=Bc(e,n);return P3(i,e,n)}catch(s){return pm(s,e,n)}},kb=function(e,t){var n=new Ac(t);try{var i=Bc(e,n);return O3(i,e,n)}catch(s){return pm(s,e,n)}},Ib="0.16.27",Mb={Span:ps,Anchor:Cc,SymbolNode:zt,SvgNode:An,PathNode:tr,LineNode:Sl},G0={version:Ib,render:fm,renderToString:Cb,ParseError:ue,SETTINGS_SCHEMA:Zs,__parse:xb,__renderToDomTree:Uc,__renderToHTMLTree:kb,__setFontMetrics:s3,__defineSymbol:$,__defineFunction:pe,__defineMacro:U,__domTree:Mb},Rb=function(e,t,n){for(var i=n,s=0,a=e.length;i<t.length;){var m=t[i];if(s<=0&&t.slice(i,i+a)===e)return i;m==="\\"?i++:m==="{"?s++:m==="}"&&s--,i++}return-1},Lb=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},$b=/^\\begin{/,Db=function(e,t){for(var n,i=[],s=new RegExp("("+t.map(d=>Lb(d.left)).join("|")+")");n=e.search(s),n!==-1;){n>0&&(i.push({type:"text",data:e.slice(0,n)}),e=e.slice(n));var a=t.findIndex(d=>e.startsWith(d.left));if(n=Rb(t[a].right,e,t[a].left.length),n===-1)break;var m=e.slice(0,n+t[a].right.length),o=$b.test(m)?m:e.slice(t[a].left.length,n);i.push({type:"math",data:o,rawData:m,display:t[a].display}),e=e.slice(n+t[a].right.length)}return e!==""&&i.push({type:"text",data:e}),i},Nb=function(e,t){var n=Db(e,t.delimiters);if(n.length===1&&n[0].type==="text")return null;for(var i=document.createDocumentFragment(),s=0;s<n.length;s++)if(n[s].type==="text")i.appendChild(document.createTextNode(n[s].data));else{var a=document.createElement("span"),m=n[s].data;t.displayMode=n[s].display;try{t.preProcess&&(m=t.preProcess(m)),G0.render(m,a,t)}catch(o){if(!(o instanceof G0.ParseError))throw o;t.errorCallback("KaTeX auto-render: Failed to parse `"+n[s].data+"` with ",o),i.appendChild(document.createTextNode(n[s].rawData));continue}i.appendChild(a)}return i},Pb=function r(e,t){for(var n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(i.nodeType===3){for(var s=i.textContent,a=i.nextSibling,m=0;a&&a.nodeType===Node.TEXT_NODE;)s+=a.textContent,a=a.nextSibling,m++;var o=Nb(s,t);if(o){for(var d=0;d<m;d++)i.nextSibling.remove();n+=o.childNodes.length-1,e.replaceChild(o,i)}else n+=m}else i.nodeType===1&&(function(){var l=" "+i.className+" ",f=t.ignoredTags.indexOf(i.nodeName.toLowerCase())===-1&&t.ignoredClasses.every(u=>l.indexOf(" "+u+" ")===-1);f&&r(i,t)})()}},Ob=function(e,t){if(!e)throw new Error("No element provided to render");var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.delimiters=n.delimiters||[{left:"$$",right:"$$",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}],n.ignoredTags=n.ignoredTags||["script","noscript","style","textarea","pre","code","option"],n.ignoredClasses=n.ignoredClasses||[],n.errorCallback=n.errorCallback||console.error,n.macros=n.macros||{},Pb(e,n)};const mm=[{id:101,serie:"Variables & Oprations",titre:"Ma premire variable",consigne:"Crez une variable nomme <code>score</code>, donnez-lui la valeur <strong>100</strong>, et affichez-la avec <code>print(score)</code>.",code:`# Crez la variable score

# Affichez-la`,validation:{type:"output_list",values:["100"]}},{id:102,serie:"Variables & Oprations",titre:"Texte (String)",consigne:'Crez une variable <code>ville</code> contenant le texte "Paris". Affichez cette variable.',code:`ville = "..."
print(ville)`,validation:{type:"output_list",values:["Paris"]}},{id:103,serie:"Variables & Oprations",titre:"L'Addition",consigne:"On a deux pommes et trois poires. Crez les variables <code>pommes = 2</code> et <code>poires = 3</code>. Affichez le total des fruits.",code:`pommes = 2
poires = 3
# Affichez la somme`,validation:{type:"output_list",values:["5"]}},{id:104,serie:"Variables & Oprations",titre:"Soustraction (Calcul d'ge)",consigne:"Calculez l'ge d'une personne ne en 2000 sachant que nous sommes en 2050. Affichez le rsultat.",code:`naissance = 2000
actuel = 2050

# Calculez et affichez la diffrence`,validation:{type:"output_list",values:["50"]}},{id:105,serie:"Variables & Oprations",titre:"Multiplication",consigne:"Vous achetez 5 articles  12 l'unit. Calculez le prix total et affichez-le.",code:`prix = 12
quantite = 5

print(prix * quantite)`,validation:{type:"output_list",values:["60"]}},{id:106,serie:"Variables & Oprations",titre:"La Division",consigne:"Divisez 20 par 4 et affichez le rsultat. Notez que Python renvoie toujours un nombre  virgule (float) pour une division.",code:`a = 20
b = 4
# Affichez a divis par b`,validation:{type:"output_list",values:["5.0"]}},{id:107,serie:"Variables & Oprations",titre:"Le Modulo (Reste)",consigne:"L'oprateur <code>%</code> donne le reste de la division entire. <br>Exemple : $10 \\% 3 = 1$ (car $3 \\times 3 = 9$, il reste 1).<br>Affichez le reste de 14 divis par 5.",code:"print(14 % 5)",validation:{type:"output_list",values:["4"]}},{id:108,serie:"Variables & Oprations",titre:"Puissance",consigne:"Pour calculer $5^3$ (5 puissance 3), on utilise l'oprateur <code>**</code>. Calculez et affichez le carr de 9 ($9^2$).",code:`n = 9
# Affichez n puissance 2`,validation:{type:"output_list",values:["81"]}},{id:109,serie:"Variables & Oprations",titre:"Concatnation",consigne:`On peut 'additionner' du texte pour le coller. Crez <code>prenom = "Bond"</code>. Affichez la chaine "James Bond" en utilisant la variable.`,code:`prenom = "Bond"
print("James " + prenom)`,validation:{type:"output_list",values:["James Bond"]}},{id:110,serie:"Variables & Oprations",titre:"Conversion de type",consigne:`On ne peut pas additionner un texte et un nombre. Convertissez la chaine "5" en entier avec <code>int()</code> pour l'ajouter  10. Affichez le rsultat (15).`,code:`chiffre_texte = "5"
nombre = 10

# resultat = int(chiffre_texte) + nombre
# print(resultat)`,validation:{type:"output_list",values:["15"]}},{id:111,serie:"Variables & Oprations",titre:"Les f-strings",consigne:`La mthode moderne pour insrer des variables dans du texte est la f-string : <code>f"Texte {variable}"</code>.<br>Affichez 'J'ai 20 ans' en utilisant les variables.`,code:`age = 20
print(f"J'ai {age} ans")`,validation:{type:"output_list",values:["J'ai 20 ans"]}},{id:112,serie:"Variables & Oprations",titre:"change de variables",consigne:"changez les valeurs de <code>a</code> et <code>b</code>. <code>a</code> doit valoir 2 et <code>b</code> doit valoir 1. Affichez <code>a</code> puis <code>b</code>.",code:`a = 1
b = 2

# Astuce Python : a, b = b, a

print(a)
print(b)`,validation:{type:"output_list",values:["2","1"]}},{id:201,serie:"Fonctions",titre:"Premire fonction",consigne:"Dfinissez une fonction nomme <code>hello</code> qui ne prend aucun paramtre et qui retourne la chane de caractres 'Bonjour le monde !'.",code:`def hello():
    # Utilisez return
    pass`,validation:{type:"function",tests:["assert hello() == 'Bonjour le monde !'"]}},{id:202,serie:"Fonctions",titre:"Le Double",consigne:"crivez une fonction <code>doubler(n)</code> qui prend un nombre en paramtre et retourne son double (nombre multipli par 2).",code:`def doubler(n):
    # Votre code ici
    return 0`,validation:{type:"function",tests:["assert doubler(5) == 10","assert doubler(0) == 0","assert doubler(-3) == -6"]}},{id:203,serie:"Fonctions",titre:"Addition",consigne:"crivez une fonction <code>addition(a, b)</code> qui prend deux nombres et retourne leur somme.",code:`def addition(a, b):
    # Retournez a + b
    pass`,validation:{type:"function",tests:["assert addition(3, 4) == 7","assert addition(10, -2) == 8"]}},{id:204,serie:"Fonctions",titre:"Aire du rectangle",consigne:"Crez une fonction <code>aire_rectangle(longueur, largeur)</code> qui calcule et retourne l'aire (longueur  largeur).",code:`def aire_rectangle(longueur, largeur):
    return 0`,validation:{type:"function",tests:["assert aire_rectangle(10, 5) == 50","assert aire_rectangle(3, 3) == 9"]}},{id:205,serie:"Fonctions",titre:"Conversion Minutes",consigne:"On veut convertir un nombre d'heures en minutes. crivez <code>heures_en_minutes(h)</code> sachant qu'une heure vaut 60 minutes.",code:`def heures_en_minutes(h):
    # ...
    pass`,validation:{type:"function",tests:["assert heures_en_minutes(1) == 60","assert heures_en_minutes(2.5) == 150","assert heures_en_minutes(0) == 0"]}},{id:206,serie:"Fonctions",titre:"Salutation Personnalise",consigne:"crivez une fonction <code>bonjour(nom)</code> qui retourne la chane 'Bonjour {nom}, comment vas-tu ?'.",code:`def bonjour(nom):
    # Utilisez la concatnation ou les f-strings f"..."
    pass`,validation:{type:"function",tests:["assert bonjour('Alice') == 'Bonjour Alice, comment vas-tu ?'","assert bonjour('Bob') == 'Bonjour Bob, comment vas-tu ?'"]}},{id:207,serie:"Fonctions",titre:"Primtre",consigne:"L'utilisateur fournit le ct d'un carr. Crez une fonction <code>perimetre_carre(cote)</code> qui retourne le primtre (ct  4).",code:`def perimetre_carre(cote):
    # Codez ici
    pass`,validation:{type:"function",tests:["assert perimetre_carre(5) == 20","assert perimetre_carre(1) == 4"]}},{id:208,serie:"Fonctions",titre:"Moyenne de 3 nombres",consigne:"crivez une fonction <code>moyenne(a, b, c)</code> qui retourne la moyenne mathmatique de ces trois nombres.",code:`def moyenne(a, b, c):
    # Attention aux parenthses !
    return 0`,validation:{type:"function",tests:["assert moyenne(10, 10, 10) == 10","assert moyenne(0, 10, 20) == 10","assert moyenne(5, 5, 20) == 10"]}},{id:209,serie:"Fonctions",titre:"Calcul TTC",consigne:"crivez une fonction <code>prix_ttc(prix_ht, taux)</code>. Le calcul est : $PrixHT \\times (1 + \\frac{taux}{100})$.",code:`def prix_ttc(prix_ht, taux):
    # Exemple: prix_ttc(100, 20) doit donner 120
    pass`,validation:{type:"function",tests:["assert prix_ttc(100, 20) == 120","assert prix_ttc(50, 10) == 55","assert prix_ttc(100, 0) == 100"]}},{id:210,serie:"Fonctions",titre:"Est Majeur ?",consigne:"La fonction doit retourner un <strong>Boolen</strong> (`True` ou `False`). Retournez `True` si l'ge est >= 18, sinon `False`.",code:`def est_majeur(age):
    # Pas besoin de if, retournez directement la condition
    pass`,validation:{type:"function",tests:["assert est_majeur(20) == True","assert est_majeur(15) == False","assert est_majeur(18) == True"]}},{id:211,serie:"Fonctions",titre:"Vitesse Moyenne",consigne:"La vitesse est la distance divise par le temps ($v = d / t$). Crez la fonction <code>vitesse(d, t)</code>.",code:`def vitesse(distance, temps):
    return 0`,validation:{type:"function",tests:["assert vitesse(100, 2) == 50","assert vitesse(50, 1) == 50"]}},{id:212,serie:"Fonctions",titre:"Paramtre par dfaut",consigne:"Python permet des valeurs par dfaut. Compltez la fonction pour que si on n'indique pas de devise, ce soit '' par dfaut.",code:`def afficher_prix(valeur, devise=''):
    return str(valeur) + ' ' + devise
    # Ne touchez rien, testez juste le code pour comprendre !`,validation:{type:"function",tests:["assert afficher_prix(10) == '10 '","assert afficher_prix(20, '$') == '20 $'"]}},{id:301,serie:"Conditions",titre:"Condition Simple (If)",consigne:"On a une variable <code>temperature</code>. Si elle est suprieure  25, affichez 'Il fait chaud'. Sinon, ne faites rien.",code:`temperature = 30

# crivez votre if ici`,validation:{type:"output_list",values:["Il fait chaud"]}},{id:302,serie:"Conditions",titre:"Else (Sinon)",consigne:"crivez une fonction <code>acces_club(age)</code>. Si l'ge est suprieur ou gal  18, retournez 'Entre autorise', sinon retournez 'Entre refuse'.",code:`def acces_club(age):
    # Utilisez if et else
    pass`,validation:{type:"function",tests:["assert acces_club(20) == 'Entre autorise'","assert acces_club(17) == 'Entre refuse'","assert acces_club(18) == 'Entre autorise'"]}},{id:303,serie:"Conditions",titre:"Comparaison de texte",consigne:"Crez un systme de mot de passe simple. Si la variable <code>mdp</code> vaut exactement 'PyThOn', affichez 'Accs OK', sinon affichez 'Accs refus'. Attention aux majuscules.",code:`mdp = "python" # Essayez de changer a

# Votre test ici`,validation:{type:"output_list",values:["Accs refus"]}},{id:304,serie:"Conditions",titre:"Elif (Signe d'un nombre)",consigne:"crivez une fonction <code>signe(n)</code> qui retourne 'Positif' si n > 0, 'Ngatif' si n < 0, et 'Nul' si n vaut 0.",code:`def signe(n):
    if n > 0:
        return 'Positif'
    # Ajoutez elif et else
    pass`,validation:{type:"function",tests:["assert signe(10) == 'Positif'","assert signe(-5) == 'Ngatif'","assert signe(0) == 'Nul'"]}},{id:305,serie:"Conditions",titre:"Oprateur AND (Intervalle)",consigne:"Vrifiez si le nombre <code>x</code> est compris entre 10 et 20 inclus ($10 \\leq x \\leq 20$). Si oui, affichez 'Dans la cible'.",code:`x = 15

# Utilisez l'oprateur 'and' ou la chane de comparaison 10 <= x <= 20`,validation:{type:"output_list",values:["Dans la cible"]}},{id:306,serie:"Conditions",titre:"Pair ou Impair (Modulo)",consigne:"Utilisez l'oprateur modulo <code>%</code> pour vrifier si un nombre est pair. crivez la fonction <code>est_pair(n)</code> qui retourne <code>True</code> ou <code>False</code>.",code:`def est_pair(n):
    # Rappel : un nombre est pair si le reste de sa division par 2 est 0
    return False`,validation:{type:"function",tests:["assert est_pair(10) == True","assert est_pair(7) == False","assert est_pair(0) == True"]}},{id:307,serie:"Conditions",titre:"Oprateur OR (Voyelles)",consigne:"crivez une fonction <code>est_voyelle(lettre)</code> qui retourne True si la lettre est 'a', 'e', 'i', 'o', 'u' ou 'y'.",code:`def est_voyelle(lettre):
    # Utilisez 'if lettre in ...' ou des 'or'
    pass`,validation:{type:"function",tests:["assert est_voyelle('a') == True","assert est_voyelle('z') == False","assert est_voyelle('y') == True"]}},{id:308,serie:"Conditions",titre:"Le plus grand de 3",consigne:"Sans utiliser la fonction <code>max()</code>, crivez une logique pour trouver le plus grand nombre parmi <code>a</code>, <code>b</code> et <code>c</code> et affichez-le.",code:`a = 15
b = 42
c = 8

# Comparaisons successives

# print(le_plus_grand)`,validation:{type:"output_list",values:["42"]}},{id:309,serie:"Conditions",titre:"Systme de notation",consigne:"Convertissez une note sur 20 en apprciation. <br>>= 16: 'Trs bien'<br>>= 14: 'Bien'<br>>= 10: 'Passable'<br>Sinon: 'Insuffisant'.",code:`def appreciation(note):
    # Utilisez une chane de if / elif / else
    return ''`,validation:{type:"function",tests:["assert appreciation(18) == 'Trs bien'","assert appreciation(15) == 'Bien'","assert appreciation(12) == 'Passable'","assert appreciation(8) == 'Insuffisant'"]}},{id:310,serie:"Conditions",titre:"Anne Bissextile (Logique)",consigne:"Une anne est bissextile si elle est divisible par 4, MAIS pas par 100, SAUF si elle est divisible par 400.<br>crivez la fonction <code>est_bissextile(annee)</code>.",code:`def est_bissextile(annee):
    # if (cond1 and not cond2) or cond3:
    return False`,validation:{type:"function",tests:["assert est_bissextile(2000) == True","assert est_bissextile(2020) == True","assert est_bissextile(1900) == False","assert est_bissextile(2023) == False"]}},{id:311,serie:"Conditions",titre:"Calcul de remise",consigne:"Un magasin offre 10% de remise si l'achat dpasse 100, et 20% si l'achat dpasse 500. Calculez le prix final pour un achat de 600.",code:`achat = 600

if achat > 500:
    # Appliquer 20%
elif achat > 100:
    # Appliquer 10%

print(achat)`,validation:{type:"output_list",values:["480.0"]}},{id:312,serie:"Conditions",titre:"Validit Triangle",consigne:"Pour qu'un triangle existe, la longueur de chaque ct doit tre infrieure  la somme des deux autres.<br>crivez <code>triangle_valide(a, b, c)</code>.",code:`def triangle_valide(a, b, c):
    # Vrifiez les 3 conditions
    pass`,validation:{type:"function",tests:["assert triangle_valide(3, 4, 5) == True","assert triangle_valide(1, 1, 10) == False","assert triangle_valide(5, 5, 5) == True"]}},{id:401,serie:"Boucles For",titre:"Compter jusqu' 5",consigne:"Utilisez une boucle <code>for</code> et la fonction <code>range()</code> pour afficher les nombres de 0  4.",code:`for i in range(5):
    print(i)`,validation:{type:"output_list",values:["0","1","2","3","4"]}},{id:402,serie:"Boucles For",titre:"Bornes prcises",consigne:"Affichez les nombres de 5  10 inclus ($[5, 10]$). N'oubliez pas que la borne de fin de <code>range</code> est exclue.",code:`# range(debut, fin_exclue)
for i in range(...):
    print(i)`,validation:{type:"output_list",values:["5","6","7","8","9","10"]}},{id:403,serie:"Boucles For",titre:"Nombres pairs",consigne:"Affichez tous les nombres pairs entre 0 et 10 inclus en utilisant le troisime paramtre de <code>range</code> (le pas).",code:`# range(debut, fin, pas)
for i in range(0, 11, 2):
    print(i)`,validation:{type:"output_list",values:["0","2","4","6","8","10"]}},{id:404,serie:"Boucles For",titre:"Compte  rebours",consigne:"Affichez le compte  rebours de 5  1 (5, 4, 3, 2, 1) en utilisant un pas ngatif dans <code>range</code>.",code:`for i in range(5, 0, -1):
    print(i)`,validation:{type:"output_list",values:["5","4","3","2","1"]}},{id:405,serie:"Boucles For",titre:"La Somme (Accumulateur)",consigne:"Calculez la somme des entiers de 1  100 ($1+2+...+100$) en utilisant une boucle <code>for</code> et une variable <code>total</code>.",code:`total = 0
for i in range(1, 101):
    # Ajoutez i au total
    pass
print(total)`,validation:{type:"output_list",values:["5050"]}},{id:406,serie:"Boucles For",titre:"Calcul de Factorielle",consigne:"La factorielle de $n$ ($n!$) est le produit des nombres de 1  $n$.<br>crivez une fonction <code>factorielle(n)</code>.",code:`def factorielle(n):
    resultat = 1
    for i in range(1, n + 1):
        resultat = resultat * i
    return resultat`,validation:{type:"function",tests:["assert factorielle(5) == 120","assert factorielle(3) == 6","assert factorielle(1) == 1"]}},{id:407,serie:"Boucles For",titre:"Parcours de liste",consigne:"Voici une liste de fruits. Utilisez une boucle <code>for fruit in fruits</code> pour afficher chaque fruit en majuscules.",code:`fruits = ['pomme', 'poire', 'cerise']

for fruit in fruits:
    # print(fruit.upper())`,validation:{type:"output_list",values:["POMME","POIRE","CERISE"]}},{id:408,serie:"Boucles For",titre:"Moyenne de classe",consigne:"Calculez la moyenne des notes de la liste donne. Additionnez les notes, puis divisez par le nombre de notes (<code>len(notes)</code>).",code:`notes = [12, 15, 8, 20, 10]
somme = 0

# Votre boucle ici

print(somme / len(notes))`,validation:{type:"output_list",values:["13.0"]}},{id:409,serie:"Boucles For",titre:"Le Maximum",consigne:"Sans utiliser la fonction <code>max()</code>, trouvez le plus grand nombre de la liste en parcourant les lments.",code:`valeurs = [5, 12, 99, 7, 42]
le_max = valeurs[0]

for v in valeurs:
    # Si v est plus grand que le_max, on met  jour le_max
    pass
print(le_max)`,validation:{type:"output_list",values:["99"]}},{id:410,serie:"Boucles For",titre:"Comptage de voyelles",consigne:"crivez une fonction qui compte le nombre de voyelles ('aeiouy') dans un mot donn.",code:`def compte_voyelles(mot):
    compteur = 0
    voyelles = "aeiouy"
    for lettre in mot:
        if lettre in voyelles:
            compteur += 1
    return compteur`,validation:{type:"function",tests:["assert compte_voyelles('python') == 2","assert compte_voyelles('banane') == 3","assert compte_voyelles('xyz') == 1"]}},{id:411,serie:"Boucles For",titre:"Table de multiplication",consigne:"crivez une fonction <code>table_mul(n)</code> qui retourne une liste contenant la table de multiplication de n (de 1  10).",code:`def table_mul(n):
    resultats = []
    for i in range(1, 11):
        # Ajoutez (i * n)  la liste resultats
        pass
    return resultats`,validation:{type:"function",tests:["assert table_mul(5) == [5, 10, 15, 20, 25, 30, 35, 40, 45, 50]","assert table_mul(2) == [2, 4, 6, 8, 10, 12, 14, 16, 18, 20]"]}},{id:412,serie:"Boucles For",titre:"Filtrage de donnes",consigne:" partir de la liste <code>donnees</code>, crez une nouvelle liste <code>positives</code> ne contenant que les nombres strictement positifs.",code:`donnees = [-10, 15, 0, -5, 20, 3]
positives = []

for x in donnees:
    # Votre condition ici

print(positives)`,validation:{type:"output_list",values:["[15, 20, 3]"]}},{id:501,serie:"Boucles While",titre:"Compte  rebours",consigne:"Initialisez une variable <code>n</code>  5. Tant que <code>n</code> est suprieur  0, affichez la valeur de <code>n</code>, puis dcrmentez <code>n</code> de 1. Affichez 'Dcollage !'  la fin.",code:`n = 5

# crivez votre boucle while ici

print('Dcollage !')`,validation:{type:"output_list",values:["5","4","3","2","1","Dcollage !"]}},{id:502,serie:"Boucles While",titre:"Nombres pairs",consigne:"Affichez tous les nombres pairs strictement infrieurs  10 en utilisant une boucle <code>while</code>. Commencez  0.",code:`i = 0
while i < 10:
    # Affichez i puis augmentez-le
    pass`,validation:{type:"output_list",values:["0","2","4","6","8"]}},{id:503,serie:"Boucles While",titre:"La limite de 100",consigne:"On veut trouver le plus petit entier <code>n</code> tel que la somme des entiers de 1  <code>n</code> dpasse 100. <br>Exemple: $1+2+3...$. <br>crivez le code pour trouver ce <code>n</code> et affichez-le.",code:`somme = 0
n = 0

while somme <= 100:
    n = n + 1
    somme = somme + n

print(n)`,validation:{type:"output_list",values:["14"]}},{id:504,serie:"Boucles While",titre:"Puissances de 2",consigne:"Affichez les puissances de 2 ($2^0, 2^1, 2^2...$) tant que le rsultat est infrieur  1000.",code:`n = 1
while n < 1000:
    print(n)
    # Multipliez n par 2`,validation:{type:"output_list",values:["1","2","4","8","16","32","64","128","256","512"]}},{id:505,serie:"Boucles While",titre:"Intrts composs",consigne:"Vous placez 1000. Chaque anne, la somme augmente de 5% (multipli par 1.05).<br>Crez une fonction <code>annees_pour_doubler(capital)</code> qui retourne le nombre d'annes ncessaires pour que le capital double.",code:`def annees_pour_doubler(capital_depart):
    capital_courant = capital_depart
    cible = capital_depart * 2
    annees = 0
    
    # Utilisez while ici
    
    return annees`,validation:{type:"function",tests:["assert annees_pour_doubler(1000) == 15","assert annees_pour_doubler(100) == 15","assert annees_pour_doubler(500) == 15"]}},{id:506,serie:"Boucles While",titre:"Saisie valide",consigne:"Simulons une validation. On a une liste de nombres <code>valeurs</code>. Tant que le dernier lment de la liste est ngatif, retirez-le (avec <code>.pop()</code>). Affichez la liste finale.",code:`valeurs = [10, 5, 3, -2, -8, -1]

# Tant que la dernire valeur (valeurs[-1]) est < 0
# Utilisez valeurs.pop()

print(valeurs)`,validation:{type:"output_list",values:["[10, 5, 3]"]}},{id:507,serie:"Boucles While",titre:"Parcours sans For",consigne:"Sans utiliser de boucle <code>for</code>, affichez chaque lettre du mot 'PYTHON' sur une ligne spare en utilisant un index <code>i</code> et une boucle <code>while</code>.",code:`mot = "PYTHON"
i = 0

while i < len(mot):
    # Votre code
    i += 1`,validation:{type:"output_list",values:["P","Y","T","H","O","N"]}},{id:508,serie:"Boucles While",titre:"Trouver l'lment",consigne:"crivez une fonction <code>trouver_index(liste, cible)</code> qui retourne l'index de la <code>cible</code> dans la <code>liste</code> en utilisant <code>while</code>. Retournez -1 si non trouv.",code:`def trouver_index(liste, cible):
    i = 0
    while i < len(liste):
        if liste[i] == cible:
            return i
        i += 1
    return -1`,validation:{type:"function",tests:["assert trouver_index([10, 20, 30], 20) == 1","assert trouver_index(['a', 'b'], 'z') == -1","assert trouver_index([1, 2, 3], 1) == 0"]}},{id:509,serie:"Boucles While",titre:"Conjecture de Syracuse",consigne:"Partez d'un nombre <code>n</code>. Tant que <code>n > 1</code> : si <code>n</code> est pair, divisez-le par 2. Sinon, multipliez-le par 3 et ajoutez 1. Affichez <code>n</code>  chaque tape.",code:`n = 10
while n > 1:
    # Votre logique ici
    # N'oubliez pas la division entire //
    print(int(n))`,validation:{type:"output_list",values:["5","16","8","4","2","1"]}},{id:510,serie:"Boucles While",titre:"PGCD (Algorithme d'Euclide)",consigne:"Le PGCD de deux nombres <code>a</code> et <code>b</code> se calcule ainsi : tant que <code>b</code> n'est pas nul, on remplace <code>a</code> par <code>b</code> et <code>b</code> par le reste de <code>a</code> divis par <code>b</code> ($a \\% b$). Crez la fonction <code>pgcd(a, b)</code>.",code:`def pgcd(a, b):
    while b != 0:
        # Sauvegardez b temporairement si besoin
        # ou utilisez l'affectation multiple: a, b = b, a % b
        pass
    return a`,validation:{type:"function",tests:["assert pgcd(48, 18) == 6","assert pgcd(100, 10) == 10","assert pgcd(17, 13) == 1"]}},{id:511,serie:"Boucles While",titre:"Suite de Fibonacci",consigne:"La suite de Fibonacci commence par 0 et 1. Chaque terme suivant est la somme des deux prcdents ($0, 1, 1, 2, 3, 5...$).<br>Trouvez et affichez le premier terme de cette suite qui est <strong>suprieur  1000</strong>.",code:`a = 0
b = 1

while b <= 1000:
    # Calculez le terme suivant
    # Astuce: a, b = b, a + b
    pass

print(b)`,validation:{type:"output_list",values:["1597"]}},{id:512,serie:"Boucles While",titre:"Racine numrique",consigne:"La racine numrique s'obtient en additionnant les chiffres d'un nombre, puis en recommenant avec le rsultat tant que celui-ci a plus d'un chiffre.<br>Exemple pour 942 : $9+4+2=15$ -> $1+5=6$.<br>crivez une fonction <code>racine_num(n)</code>.",code:`def racine_num(n):
    while n > 9:
        somme = 0
        # Boucle pour additionner les chiffres de n
        # Puis mettre le rsultat dans n
        pass
    return n`,validation:{type:"function",tests:["assert racine_num(942) == 6","assert racine_num(12345) == 6","assert racine_num(9999) == 9"]}}];let ko=null,Ri=null,Io=[],Il=null,Qr=new Set;const Fb={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],ignoredTags:["script","noscript","style","textarea","pre","code"]},oi=I5.edit("editor");oi.setTheme("ace/theme/monokai");oi.session.setMode("ace/mode/python");oi.setFontSize(16);oi.setValue("# Chargement...",1);const to=document.getElementById("output"),Li=document.getElementById("run-btn"),q0=document.getElementById("exercise-list"),Kt=document.getElementById("status-msg"),K0=document.getElementById("ex-consigne");function es(r){to.textContent+=r+`
`,to.scrollTop=to.scrollHeight,Io.push(r.trim())}function gm(){to.textContent="",Io=[]}async function zb(){Li.textContent="Chargement Python...",Li.disabled=!0,ko=await loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.24.1/full/",stdout:r=>es(r),stderr:r=>es(" "+r)}),Li.textContent=" Excuter & Vrifier",Li.disabled=!1,ym(mm[0])}zb();function vm(){const r={};mm.forEach(t=>{r[t.serie]||(r[t.serie]=[]),r[t.serie].push(t)}),q0.innerHTML="";let e=!0;for(const[t,n]of Object.entries(r)){const i=document.createElement("details");e&&(i.open=!0,e=!1),i.className="border-b group border-slate-800";const s=document.createElement("summary");s.className="flex items-center justify-between p-4 font-semibold list-none transition-colors outline-none cursor-pointer select-none text-slate-400 hover:text-white hover:bg-slate-800",s.innerHTML=`
      <span>${t}</span>
      <span class="transform transition-transform duration-200 group-open:rotate-90 text-xs"></span>
    `,i.appendChild(s);const a=document.createElement("ul");a.className="pb-2 bg-slate-950",n.forEach(m=>{const o=document.createElement("li"),d=document.createElement("button");d.className="block w-full py-2 pl-8 pr-4 text-sm text-left transition-all border-l-2 border-transparent text-slate-500 hover:text-indigo-400 hover:bg-white/5 hover:border-indigo-500",Qr.has(m.id)?(d.innerHTML=`<span class="text-green-500 mr-2"></span> ${m.titre}`,d.classList.add("text-indigo-300")):d.textContent=m.titre,d.onclick=()=>{ym(m)},o.appendChild(d),a.appendChild(o)}),i.appendChild(a),q0.appendChild(i)}}vm();function ym(r){Ri=r,document.getElementById("serie-badge").textContent=r.serie,document.getElementById("ex-title").textContent=r.titre,K0.innerHTML=r.consigne,Ob(K0,Fb),Kt.className="hidden",gm(),oi.setValue(r.code,1)}async function Vb(r){if(r.validation.type==="output_list"){const e=r.validation.values,t=JSON.stringify(Io)===JSON.stringify(e);return t||(es(`
 ATTENDU : ${JSON.stringify(e)}`),es(` OBTENU : ${JSON.stringify(Io)}`)),t}if(r.validation.type==="function")try{const e=r.validation.tests.join(`
`);return await ko.runPythonAsync(e),!0}catch{return!1}return!1}Li.addEventListener("click",async()=>{if(!ko||!Ri)return;gm();const r=oi.getValue();Kt.className="hidden";try{await ko.runPythonAsync(r);const e=await Vb(Ri);Kt.classList.remove("hidden","bg-green-600","bg-red-600","bg-yellow-600"),e?(Kt.textContent=" Bravo ! Exercice valid.",Kt.classList.add("bg-green-600"),Il&&(Qr.add(Ri.id),Ro(),T5(Il.uid,Ri.id))):(Kt.textContent=" Incorrect. Regardez la console.",Kt.classList.add("bg-red-600"))}catch(e){es(`
 Erreur : `+e),Kt.textContent=" Erreur de code",Kt.classList.remove("hidden"),Kt.classList.add("bg-yellow-600")}});const Bb=document.getElementById("open-auth-modal-btn"),Ub=document.getElementById("logout-btn"),Y0=document.getElementById("auth-section-logged-out"),Q0=document.getElementById("auth-section-logged-in"),Hb=document.getElementById("user-name"),Wb=document.getElementById("progress-count"),X0=document.getElementById("auth-modal"),jb=document.getElementById("close-modal-btn"),Gb=document.getElementById("modal-overlay"),qb=document.getElementById("google-login-btn"),Mo=document.getElementById("email-input"),Hc=document.getElementById("password-input"),Kb=document.getElementById("btn-login-submit"),Yb=document.getElementById("btn-register-submit"),Ml=document.getElementById("auth-error-msg");function ai(r){r?(X0.classList.remove("hidden"),Mo.focus()):(X0.classList.add("hidden"),Ml.classList.add("hidden"),Mo.value="",Hc.value="")}Bb.addEventListener("click",()=>ai(!0));jb.addEventListener("click",()=>ai(!1));Gb.addEventListener("click",()=>ai(!1));qb.addEventListener("click",async()=>{try{await w5(),ai(!1)}catch(r){$i("Erreur Google : "+r.message)}});Kb.addEventListener("click",async r=>{r.preventDefault();const e=Mo.value,t=Hc.value;try{await A5(e,t),ai(!1)}catch(n){wm(n)}});Yb.addEventListener("click",async r=>{r.preventDefault();const e=Mo.value,t=Hc.value;try{await S5(e,t),ai(!1),alert("Compte cr avec succs !")}catch(n){wm(n)}});Ub.addEventListener("click",async()=>{await b5(),Qr.clear(),Ro()});function $i(r){Ml.textContent=r,Ml.classList.remove("hidden")}function wm(r){console.error(r),r.code==="auth/invalid-credential"||r.code==="auth/user-not-found"||r.code==="auth/wrong-password"?$i("Email ou mot de passe incorrect."):r.code==="auth/email-already-in-use"?$i("Cet email est dj utilis."):r.code==="auth/weak-password"?$i("Le mot de passe doit faire au moins 6 caractres."):$i("Erreur : "+r.message)}_5(async r=>{if(Il=r,r){Y0.classList.add("hidden"),Q0.classList.remove("hidden"),Hb.textContent=r.displayName||r.email.split("@")[0];const e="https://ui-avatars.com/api/?background=random&name="+(r.displayName||r.email);document.getElementById("user-avatar").src=r.photoURL||e;const t=await E5(r.uid);Qr=new Set(t),Ro()}else Y0.classList.remove("hidden"),Q0.classList.add("hidden"),Qr.clear(),Ro()});function Ro(){Wb.textContent=Qr.size,vm()}
